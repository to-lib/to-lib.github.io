<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-java-design-patterns/singleton-pattern" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">å•ä¾‹æ¨¡å¼ (Singleton Pattern) | TechLib - å¼€å‘è€…çŸ¥è¯†åº“</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://to-lib.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://to-lib.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://to-lib.github.io/docs/java-design-patterns/singleton-pattern"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="å•ä¾‹æ¨¡å¼ (Singleton Pattern) | TechLib - å¼€å‘è€…çŸ¥è¯†åº“"><meta data-rh="true" name="description" content="æ¨¡å¼å®šä¹‰"><meta data-rh="true" property="og:description" content="æ¨¡å¼å®šä¹‰"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://to-lib.github.io/docs/java-design-patterns/singleton-pattern"><link data-rh="true" rel="alternate" href="https://to-lib.github.io/docs/java-design-patterns/singleton-pattern" hreflang="en"><link data-rh="true" rel="alternate" href="https://to-lib.github.io/docs/java-design-patterns/singleton-pattern" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Java Design Patterns","item":"https://to-lib.github.io/docs/category/java-design-patterns"},{"@type":"ListItem","position":2,"name":"å•ä¾‹æ¨¡å¼ (Singleton Pattern)","item":"https://to-lib.github.io/docs/java-design-patterns/singleton-pattern"}]}</script><link rel="stylesheet" href="/assets/css/styles.67762e81.css">
<script src="/assets/js/runtime~main.e9941c2c.js" defer="defer"></script>
<script src="/assets/js/main.ef7475ca.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_k978" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="to-lib Logo" class="themedComponent_FW6w themedComponent--light_ZYRo"><img src="/img/logo.svg" alt="to-lib Logo" class="themedComponent_FW6w themedComponent--dark_Rd3V"></div><b class="navbar__title text--truncate">to-lib</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/intro">ğŸ“š Design Patterns</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">ğŸ“ Learning</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/java-design-patterns/quick-reference">Quick Reference</a></li><li><a class="dropdown__link" href="/docs/java-design-patterns/best-practices">Best Practices</a></li><li><a class="dropdown__link" href="/docs/java-design-patterns/overview">Design Patterns Overview</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">ğŸ› ï¸ Frameworks</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/spring">Spring Framework</a></li><li><a class="dropdown__link" href="/docs/springboot">Spring Boot</a></li><li><a class="dropdown__link" href="/docs/netty/overview">Netty</a></li></ul></div></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/to-lib/to-lib.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_Cy_U"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_lwka colorModeToggle_SVpo"><button class="clean-btn toggleButton_Mbg6 toggleButtonDisabled_dsJi" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_LX0_ lightToggleIcon_iZ7o"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_LX0_ darkToggleIcon_sbHe"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_LX0_ systemToggleIcon_rNLr"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_bxl4"><div class="navbar__search searchBarContainer_klkp" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_AuBj" value=""><div class="loadingRing_Allz searchBarLoadingRing_DNDh"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_CSSr"><div class="docsWrapper_b3o4"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_ngaE" type="button"></button><div class="docRoot_vnET"><aside class="theme-doc-sidebar-container docSidebarContainer_lkE3"><div class="sidebarViewport_l_GY"><div class="sidebar_rAVx"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_V6cO"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro"><span title="Java è®¾è®¡æ¨¡å¼" class="linkLabel_ElBB">Java è®¾è®¡æ¨¡å¼</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_NYqt menu__link menu__link--sublist" href="/docs/category/spring-framework"><span title="Spring Framework" class="categoryLinkLabel_ExjS">Spring Framework</span></a><button aria-label="Expand sidebar category &#x27;Spring Framework&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_NYqt menu__link menu__link--sublist menu__link--active" href="/docs/category/java-design-patterns"><span title="Java Design Patterns" class="categoryLinkLabel_ExjS">Java Design Patterns</span></a><button aria-label="Collapse sidebar category &#x27;Java Design Patterns&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/design-patterns-guide"><span title="Java è®¾è®¡æ¨¡å¼å®Œå…¨æŒ‡å—" class="linkLabel_ElBB">Java è®¾è®¡æ¨¡å¼å®Œå…¨æŒ‡å—</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/java-design-patterns/overview"><span title="Javaè®¾è®¡æ¨¡å¼æ¦‚è¿°" class="linkLabel_ElBB">Javaè®¾è®¡æ¨¡å¼æ¦‚è¿°</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/java-design-patterns/singleton-pattern"><span title="å•ä¾‹æ¨¡å¼ (Singleton Pattern)" class="linkLabel_ElBB">å•ä¾‹æ¨¡å¼ (Singleton Pattern)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/java-design-patterns/factory-pattern"><span title="å·¥å‚æ–¹æ³•æ¨¡å¼ (Factory Method Pattern)" class="linkLabel_ElBB">å·¥å‚æ–¹æ³•æ¨¡å¼ (Factory Method Pattern)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/java-design-patterns/observer-pattern"><span title="è§‚å¯Ÿè€…æ¨¡å¼ (Observer Pattern)" class="linkLabel_ElBB">è§‚å¯Ÿè€…æ¨¡å¼ (Observer Pattern)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/java-design-patterns/strategy-pattern"><span title="ç­–ç•¥æ¨¡å¼ (Strategy Pattern)" class="linkLabel_ElBB">ç­–ç•¥æ¨¡å¼ (Strategy Pattern)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/java-design-patterns/decorator-pattern"><span title="è£…é¥°å™¨æ¨¡å¼ (Decorator Pattern)" class="linkLabel_ElBB">è£…é¥°å™¨æ¨¡å¼ (Decorator Pattern)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/java-design-patterns/adapter-pattern"><span title="é€‚é…å™¨æ¨¡å¼ (Adapter Pattern)" class="linkLabel_ElBB">é€‚é…å™¨æ¨¡å¼ (Adapter Pattern)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/java-design-patterns/proxy-pattern"><span title="ä»£ç†æ¨¡å¼ (Proxy Pattern)" class="linkLabel_ElBB">ä»£ç†æ¨¡å¼ (Proxy Pattern)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/java-design-patterns/builder-pattern"><span title="å»ºé€ è€…æ¨¡å¼ (Builder Pattern)" class="linkLabel_ElBB">å»ºé€ è€…æ¨¡å¼ (Builder Pattern)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/java-design-patterns/best-practices"><span title="è®¾è®¡æ¨¡å¼æœ€ä½³å®è·µ" class="linkLabel_ElBB">è®¾è®¡æ¨¡å¼æœ€ä½³å®è·µ</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/java-design-patterns/abstract-factory-pattern"><span title="æŠ½è±¡å·¥å‚æ¨¡å¼ (Abstract Factory Pattern)" class="linkLabel_ElBB">æŠ½è±¡å·¥å‚æ¨¡å¼ (Abstract Factory Pattern)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/java-design-patterns/bridge-pattern"><span title="æ¡¥æ¥æ¨¡å¼ (Bridge Pattern)" class="linkLabel_ElBB">æ¡¥æ¥æ¨¡å¼ (Bridge Pattern)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/java-design-patterns/prototype-pattern"><span title="åŸå‹æ¨¡å¼ (Prototype Pattern)" class="linkLabel_ElBB">åŸå‹æ¨¡å¼ (Prototype Pattern)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/java-design-patterns/facade-pattern"><span title="å¤–è§‚æ¨¡å¼ (Facade Pattern)" class="linkLabel_ElBB">å¤–è§‚æ¨¡å¼ (Facade Pattern)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/java-design-patterns/composite-pattern"><span title="ç»„åˆæ¨¡å¼ (Composite Pattern)" class="linkLabel_ElBB">ç»„åˆæ¨¡å¼ (Composite Pattern)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/java-design-patterns/flyweight-pattern"><span title="äº«å…ƒæ¨¡å¼ (Flyweight Pattern)" class="linkLabel_ElBB">äº«å…ƒæ¨¡å¼ (Flyweight Pattern)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/java-design-patterns/template-method-pattern"><span title="æ¨¡æ¿æ–¹æ³•æ¨¡å¼ (Template Method Pattern)" class="linkLabel_ElBB">æ¨¡æ¿æ–¹æ³•æ¨¡å¼ (Template Method Pattern)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/java-design-patterns/command-pattern"><span title="å‘½ä»¤æ¨¡å¼ (Command Pattern)" class="linkLabel_ElBB">å‘½ä»¤æ¨¡å¼ (Command Pattern)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/java-design-patterns/state-pattern"><span title="çŠ¶æ€æ¨¡å¼ (State Pattern)" class="linkLabel_ElBB">çŠ¶æ€æ¨¡å¼ (State Pattern)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/java-design-patterns/chain-of-responsibility-pattern"><span title="è´£ä»»é“¾æ¨¡å¼ (Chain of Responsibility Pattern)" class="linkLabel_ElBB">è´£ä»»é“¾æ¨¡å¼ (Chain of Responsibility Pattern)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/java-design-patterns/iterator-pattern"><span title="è¿­ä»£å™¨æ¨¡å¼ (Iterator Pattern)" class="linkLabel_ElBB">è¿­ä»£å™¨æ¨¡å¼ (Iterator Pattern)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/java-design-patterns/mediator-pattern"><span title="ä¸­ä»‹è€…æ¨¡å¼ (Mediator Pattern)" class="linkLabel_ElBB">ä¸­ä»‹è€…æ¨¡å¼ (Mediator Pattern)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/java-design-patterns/memento-pattern"><span title="å¤‡å¿˜å½•æ¨¡å¼ (Memento Pattern)" class="linkLabel_ElBB">å¤‡å¿˜å½•æ¨¡å¼ (Memento Pattern)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/java-design-patterns/visitor-pattern"><span title="è®¿é—®è€…æ¨¡å¼ (Visitor Pattern)" class="linkLabel_ElBB">è®¿é—®è€…æ¨¡å¼ (Visitor Pattern)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/java-design-patterns/interpreter-pattern"><span title="è§£é‡Šå™¨æ¨¡å¼ (Interpreter Pattern)" class="linkLabel_ElBB">è§£é‡Šå™¨æ¨¡å¼ (Interpreter Pattern)</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/java-design-patterns/quick-reference"><span title="è®¾è®¡æ¨¡å¼å¿«é€Ÿå‚è€ƒ" class="linkLabel_ElBB">è®¾è®¡æ¨¡å¼å¿«é€Ÿå‚è€ƒ</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/java-design-patterns/COMPLETION-SUMMARY"><span title="Javaè®¾è®¡æ¨¡å¼å®Œæ•´æ–‡æ¡£ - å…¨éƒ¨23ç§æ¨¡å¼" class="linkLabel_ElBB">Javaè®¾è®¡æ¨¡å¼å®Œæ•´æ–‡æ¡£ - å…¨éƒ¨23ç§æ¨¡å¼</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_NYqt menu__link menu__link--sublist" href="/docs/category/spring-boot"><span title="Spring Boot" class="categoryLinkLabel_ExjS">Spring Boot</span></a><button aria-label="Expand sidebar category &#x27;Spring Boot&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_NYqt menu__link menu__link--sublist" href="/docs/category/netty-ç½‘ç»œç¼–ç¨‹"><span title="Netty ç½‘ç»œç¼–ç¨‹" class="categoryLinkLabel_ExjS">Netty ç½‘ç»œç¼–ç¨‹</span></a><button aria-label="Expand sidebar category &#x27;Netty ç½‘ç»œç¼–ç¨‹&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_WeUM"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_qoff"><div class="docItemContainer_phNv"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_q0fI" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_UB4j"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/category/java-design-patterns"><span>Java Design Patterns</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">å•ä¾‹æ¨¡å¼ (Singleton Pattern)</span></li></ul></nav><div class="tocCollapsible_Jjm_ theme-doc-toc-mobile tocMobile_KLro"><button type="button" class="clean-btn tocCollapsibleButton_ibvO">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>å•ä¾‹æ¨¡å¼ (Singleton Pattern)</h1></header>
<h2 class="anchor anchorTargetStickyNavbar__9bU" id="æ¨¡å¼å®šä¹‰">æ¨¡å¼å®šä¹‰<a href="#æ¨¡å¼å®šä¹‰" class="hash-link" aria-label="Direct link to æ¨¡å¼å®šä¹‰" title="Direct link to æ¨¡å¼å®šä¹‰" translate="no">â€‹</a></h2>
<p><strong>å•ä¾‹æ¨¡å¼</strong>æ˜¯ä¸€ç§åˆ›å»ºå‹è®¾è®¡æ¨¡å¼ï¼Œå®ƒä¿è¯ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªå…¨å±€è®¿é—®ç‚¹æ¥è·å–è¿™ä¸ªå®ä¾‹ã€‚</p>
<!-- -->
<h2 class="anchor anchorTargetStickyNavbar__9bU" id="é—®é¢˜åˆ†æ">é—®é¢˜åˆ†æ<a href="#é—®é¢˜åˆ†æ" class="hash-link" aria-label="Direct link to é—®é¢˜åˆ†æ" title="Direct link to é—®é¢˜åˆ†æ" translate="no">â€‹</a></h2>
<p>åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¸Œæœ›æŸä¸ªç±»åœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºç”Ÿå‘½å‘¨æœŸå†…åªå­˜åœ¨ä¸€ä¸ªå®ä¾‹ï¼š</p>
<ul>
<li class="">æ•°æ®åº“è¿æ¥æ± </li>
<li class="">æ—¥å¿—è®°å½•å™¨</li>
<li class="">é…ç½®ç®¡ç†å™¨</li>
<li class="">çº¿ç¨‹æ± </li>
<li class="">ç¼“å­˜ç®¡ç†å™¨</li>
</ul>
<blockquote>
<p>[!WARNING]
è¿‡åº¦ä½¿ç”¨å•ä¾‹æ¨¡å¼å¯èƒ½å¯¼è‡´ä»£ç è€¦åˆåº¦è¿‡é«˜ï¼Œé™ä½å¯æµ‹è¯•æ€§ã€‚åªåœ¨çœŸæ­£éœ€è¦å…¨å±€å”¯ä¸€å®ä¾‹æ—¶ä½¿ç”¨ã€‚</p>
</blockquote>
<h2 class="anchor anchorTargetStickyNavbar__9bU" id="å®ç°æ–¹å¼å¯¹æ¯”">å®ç°æ–¹å¼å¯¹æ¯”<a href="#å®ç°æ–¹å¼å¯¹æ¯”" class="hash-link" aria-label="Direct link to å®ç°æ–¹å¼å¯¹æ¯”" title="Direct link to å®ç°æ–¹å¼å¯¹æ¯”" translate="no">â€‹</a></h2>
<table><thead><tr><th>å®ç°æ–¹å¼</th><th>çº¿ç¨‹å®‰å…¨</th><th>æ‡’åŠ è½½</th><th>æ€§èƒ½</th><th>å¤æ‚åº¦</th><th>æ¨èåº¦</th></tr></thead><tbody><tr><td>æ‡’åŠ è½½å•ä¾‹ï¼ˆä¸å®‰å…¨ï¼‰</td><td>âŒ</td><td>âœ…</td><td>â­â­â­</td><td>â­</td><td>âŒ</td></tr><tr><td>é¥¿æ±‰å¼å•ä¾‹</td><td>âœ…</td><td>âŒ</td><td>â­â­â­</td><td>â­</td><td>â­â­</td></tr><tr><td>åŒæ­¥æ–¹æ³•å•ä¾‹</td><td>âœ…</td><td>âœ…</td><td>â­</td><td>â­</td><td>â­</td></tr><tr><td>åŒé‡æ£€æŸ¥é”å®š</td><td>âœ…</td><td>âœ…</td><td>â­â­â­</td><td>â­â­â­</td><td>â­â­â­</td></tr><tr><td>é™æ€å†…éƒ¨ç±»</td><td>âœ…</td><td>âœ…</td><td>â­â­â­</td><td>â­â­</td><td>â­â­â­â­â­</td></tr><tr><td>æšä¸¾å•ä¾‹</td><td>âœ…</td><td>âŒ</td><td>â­â­â­</td><td>â­</td><td>â­â­â­â­</td></tr></tbody></table>
<h2 class="anchor anchorTargetStickyNavbar__9bU" id="å®ç°æ–¹å¼è¯¦è§£">å®ç°æ–¹å¼è¯¦è§£<a href="#å®ç°æ–¹å¼è¯¦è§£" class="hash-link" aria-label="Direct link to å®ç°æ–¹å¼è¯¦è§£" title="Direct link to å®ç°æ–¹å¼è¯¦è§£" translate="no">â€‹</a></h2>
<h3 class="anchor anchorTargetStickyNavbar__9bU" id="1-æ‡’åŠ è½½å•ä¾‹çº¿ç¨‹ä¸å®‰å…¨">1. æ‡’åŠ è½½å•ä¾‹ï¼ˆçº¿ç¨‹ä¸å®‰å…¨ï¼‰âŒ<a href="#1-æ‡’åŠ è½½å•ä¾‹çº¿ç¨‹ä¸å®‰å…¨" class="hash-link" aria-label="Direct link to 1. æ‡’åŠ è½½å•ä¾‹ï¼ˆçº¿ç¨‹ä¸å®‰å…¨ï¼‰âŒ" title="Direct link to 1. æ‡’åŠ è½½å•ä¾‹ï¼ˆçº¿ç¨‹ä¸å®‰å…¨ï¼‰âŒ" translate="no">â€‹</a></h3>
<div class="language-java codeBlockContainer_WMw_ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_wTBs"><pre tabindex="0" class="prism-code language-java codeBlock_Nmz_ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Uft3"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * æ‡’åŠ è½½å•ä¾‹ - ä»…é€‚ç”¨äºå•çº¿ç¨‹ç¯å¢ƒ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * ä¼˜ç‚¹ï¼šå»¶è¿ŸåŠ è½½ï¼ŒèŠ‚çœèµ„æº</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * ç¼ºç‚¹ï¼šå¤šçº¿ç¨‹ç¯å¢ƒä¸‹å¯èƒ½åˆ›å»ºå¤šä¸ªå®ä¾‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class LazySingleton {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // é™æ€å®ä¾‹å˜é‡ï¼Œåˆå§‹ä¸º null</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static LazySingleton instance;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ç§æœ‰æ„é€ å‡½æ•°ï¼Œé˜²æ­¢å¤–éƒ¨é€šè¿‡ new å…³é”®å­—åˆ›å»ºå®ä¾‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private LazySingleton() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // è·å–å®ä¾‹çš„é™æ€æ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static LazySingleton getInstance() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // é—®é¢˜ï¼šå¤šçº¿ç¨‹åŒæ—¶æ‰§è¡Œåˆ°è¿™é‡Œæ—¶ï¼Œå¯èƒ½åˆ›å»ºå¤šä¸ªå®ä¾‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (instance == null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            instance = new LazySingleton();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return instance;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<blockquote>
<p>[!CAUTION]
æ­¤å®ç°åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹ä¸å®‰å…¨ï¼å¦‚æœä¸¤ä¸ªçº¿ç¨‹åŒæ—¶è°ƒç”¨ <code>getInstance()</code>ï¼Œå¯èƒ½ä¼šåˆ›å»ºä¸¤ä¸ªå®ä¾‹ã€‚<strong>ä¸è¦åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨ï¼</strong></p>
</blockquote>
<h3 class="anchor anchorTargetStickyNavbar__9bU" id="2-é¥¿æ±‰å¼å•ä¾‹çº¿ç¨‹å®‰å…¨">2. é¥¿æ±‰å¼å•ä¾‹ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰âœ…<a href="#2-é¥¿æ±‰å¼å•ä¾‹çº¿ç¨‹å®‰å…¨" class="hash-link" aria-label="Direct link to 2. é¥¿æ±‰å¼å•ä¾‹ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰âœ…" title="Direct link to 2. é¥¿æ±‰å¼å•ä¾‹ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰âœ…" translate="no">â€‹</a></h3>
<div class="language-java codeBlockContainer_WMw_ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_wTBs"><pre tabindex="0" class="prism-code language-java codeBlock_Nmz_ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Uft3"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * é¥¿æ±‰å¼å•ä¾‹ - ç±»åŠ è½½æ—¶å³åˆ›å»ºå®ä¾‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * ä¼˜ç‚¹ï¼šå®ç°ç®€å•ï¼Œå¤©ç„¶çº¿ç¨‹å®‰å…¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * ç¼ºç‚¹ï¼šæ— è®ºæ˜¯å¦ä½¿ç”¨éƒ½ä¼šåˆ›å»ºå®ä¾‹ï¼Œå¯èƒ½æµªè´¹å†…å­˜</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class EagerSingleton {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ç±»åŠ è½½æ—¶å°±åˆ›å»ºå®ä¾‹ï¼ˆé¥¿æ±‰å¼ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // static final ä¿è¯çº¿ç¨‹å®‰å…¨ä¸”ä¸å¯ä¿®æ”¹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static final EagerSingleton instance = new EagerSingleton();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ç§æœ‰æ„é€ å‡½æ•°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private EagerSingleton() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ç›´æ¥è¿”å›å·²åˆ›å»ºçš„å®ä¾‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static EagerSingleton getInstance() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return instance;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<blockquote>
<p>[!TIP]
é€‚ç”¨äºç¡®å®šä¼šä½¿ç”¨è¯¥å®ä¾‹ä¸”å®ä¾‹å ç”¨èµ„æºè¾ƒå°çš„åœºæ™¯ã€‚ç”±äº JVM ç±»åŠ è½½æœºåˆ¶ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œæ— éœ€é¢å¤–åŒæ­¥ã€‚</p>
</blockquote>
<h3 class="anchor anchorTargetStickyNavbar__9bU" id="3-æ‡’åŠ è½½å•ä¾‹åŒæ­¥æ–¹æ³•">3. æ‡’åŠ è½½å•ä¾‹ï¼ˆåŒæ­¥æ–¹æ³•ï¼‰âœ…<a href="#3-æ‡’åŠ è½½å•ä¾‹åŒæ­¥æ–¹æ³•" class="hash-link" aria-label="Direct link to 3. æ‡’åŠ è½½å•ä¾‹ï¼ˆåŒæ­¥æ–¹æ³•ï¼‰âœ…" title="Direct link to 3. æ‡’åŠ è½½å•ä¾‹ï¼ˆåŒæ­¥æ–¹æ³•ï¼‰âœ…" translate="no">â€‹</a></h3>
<div class="language-java codeBlockContainer_WMw_ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_wTBs"><pre tabindex="0" class="prism-code language-java codeBlock_Nmz_ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Uft3"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * åŒæ­¥æ–¹æ³•å•ä¾‹ - é€šè¿‡ synchronized ä¿è¯çº¿ç¨‹å®‰å…¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * ä¼˜ç‚¹ï¼šçº¿ç¨‹å®‰å…¨ï¼Œå»¶è¿ŸåŠ è½½</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * ç¼ºç‚¹ï¼šæ¯æ¬¡è°ƒç”¨éƒ½éœ€è¦åŒæ­¥ï¼Œæ€§èƒ½è¾ƒå·®</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class SynchronizedSingleton {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static SynchronizedSingleton instance;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private SynchronizedSingleton() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // synchronized å…³é”®å­—ä¿è¯åŒä¸€æ—¶åˆ»åªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥æ‰§è¡Œæ­¤æ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ç¼ºç‚¹ï¼šå³ä½¿å®ä¾‹å·²åˆ›å»ºï¼Œæ¯æ¬¡è°ƒç”¨ä»éœ€è¦åŒæ­¥ï¼Œå½±å“æ€§èƒ½</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static synchronized SynchronizedSingleton getInstance() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (instance == null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            instance = new SynchronizedSingleton();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return instance;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<blockquote>
<p>[!NOTE]
synchronized æ–¹æ³•åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹æ€§èƒ½è¾ƒå·®ï¼Œå› ä¸ºæ¯æ¬¡è°ƒç”¨éƒ½éœ€è¦è·å–é”ï¼Œå³ä½¿å®ä¾‹å·²ç»åˆ›å»ºã€‚</p>
</blockquote>
<h3 class="anchor anchorTargetStickyNavbar__9bU" id="4-åŒé‡æ£€æŸ¥é”å®šæ¨è">4. åŒé‡æ£€æŸ¥é”å®šï¼ˆæ¨èï¼‰â­â­â­<a href="#4-åŒé‡æ£€æŸ¥é”å®šæ¨è" class="hash-link" aria-label="Direct link to 4. åŒé‡æ£€æŸ¥é”å®šï¼ˆæ¨èï¼‰â­â­â­" title="Direct link to 4. åŒé‡æ£€æŸ¥é”å®šï¼ˆæ¨èï¼‰â­â­â­" translate="no">â€‹</a></h3>
<div class="language-java codeBlockContainer_WMw_ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_wTBs"><pre tabindex="0" class="prism-code language-java codeBlock_Nmz_ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Uft3"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * åŒé‡æ£€æŸ¥é”å®šï¼ˆDouble-Checked Lockingï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * ä¼˜ç‚¹ï¼šçº¿ç¨‹å®‰å…¨ã€å»¶è¿ŸåŠ è½½ã€é«˜æ€§èƒ½</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * é€‚ç”¨åœºæ™¯ï¼šéœ€è¦å»¶è¿ŸåŠ è½½ä¸”å¯¹æ€§èƒ½æœ‰è¦æ±‚çš„åœºæ™¯</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class DoubleCheckedSingleton {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // volatile å…³é”®å­—é˜²æ­¢æŒ‡ä»¤é‡æ’åº</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ç¡®ä¿ instance åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹çš„å¯è§æ€§å’Œæœ‰åºæ€§</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static volatile DoubleCheckedSingleton instance;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private DoubleCheckedSingleton() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static DoubleCheckedSingleton getInstance() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // ç¬¬ä¸€æ¬¡æ£€æŸ¥ï¼šé¿å…ä¸å¿…è¦çš„åŒæ­¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (instance == null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // åŒæ­¥å—ï¼šåªåœ¨é¦–æ¬¡åˆ›å»ºæ—¶éœ€è¦åŒæ­¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            synchronized (DoubleCheckedSingleton.class) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // ç¬¬äºŒæ¬¡æ£€æŸ¥ï¼šé˜²æ­¢å¤šä¸ªçº¿ç¨‹åŒæ—¶é€šè¿‡ç¬¬ä¸€æ¬¡æ£€æŸ¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                if (instance == null) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    instance = new DoubleCheckedSingleton();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return instance;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<blockquote>
<p>[!IMPORTANT] &gt; **volatile å…³é”®å­—ä¸å¯çœç•¥ï¼**å®ƒé˜²æ­¢æŒ‡ä»¤é‡æ’åºï¼Œç¡®ä¿å¯¹è±¡å®Œå…¨åˆå§‹åŒ–åæ‰èƒ½è¢«å…¶ä»–çº¿ç¨‹è®¿é—®ã€‚æ²¡æœ‰ volatileï¼Œå¯èƒ½å¯¼è‡´å…¶ä»–çº¿ç¨‹è·å–åˆ°æœªå®Œå…¨åˆå§‹åŒ–çš„å®ä¾‹ã€‚</p>
</blockquote>
<!-- -->
<h3 class="anchor anchorTargetStickyNavbar__9bU" id="5-é™æ€å†…éƒ¨ç±»å•ä¾‹æœ€æ¨è">5. é™æ€å†…éƒ¨ç±»å•ä¾‹ï¼ˆæœ€æ¨èï¼‰â­â­â­â­â­<a href="#5-é™æ€å†…éƒ¨ç±»å•ä¾‹æœ€æ¨è" class="hash-link" aria-label="Direct link to 5. é™æ€å†…éƒ¨ç±»å•ä¾‹ï¼ˆæœ€æ¨èï¼‰â­â­â­â­â­" title="Direct link to 5. é™æ€å†…éƒ¨ç±»å•ä¾‹ï¼ˆæœ€æ¨èï¼‰â­â­â­â­â­" translate="no">â€‹</a></h3>
<div class="language-java codeBlockContainer_WMw_ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_wTBs"><pre tabindex="0" class="prism-code language-java codeBlock_Nmz_ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Uft3"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * é™æ€å†…éƒ¨ç±»å•ä¾‹ - æœ€ä¼˜é›…çš„å®ç°æ–¹å¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * ä¼˜ç‚¹ï¼šçº¿ç¨‹å®‰å…¨ã€å»¶è¿ŸåŠ è½½ã€æ€§èƒ½é«˜ã€ä»£ç ç®€æ´</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * åŸç†ï¼šåˆ©ç”¨ JVM ç±»åŠ è½½æœºåˆ¶ä¿è¯çº¿ç¨‹å®‰å…¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class StaticInnerClassSingleton {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ç§æœ‰æ„é€ å‡½æ•°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private StaticInnerClassSingleton() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * é™æ€å†…éƒ¨ç±»ï¼Œåªæœ‰åœ¨é¦–æ¬¡è°ƒç”¨ getInstance() æ—¶æ‰ä¼šè¢«åŠ è½½</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * JVM ä¿è¯ç±»åŠ è½½è¿‡ç¨‹çš„çº¿ç¨‹å®‰å…¨æ€§</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static class SingletonHolder {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // åˆ›å»ºå•ä¾‹å®ä¾‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        private static final StaticInnerClassSingleton INSTANCE = new StaticInnerClassSingleton();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * è·å–å•ä¾‹å®ä¾‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * é¦–æ¬¡è°ƒç”¨æ—¶è§¦å‘ SingletonHolder ç±»åŠ è½½ï¼Œåˆ›å»ºå®ä¾‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static StaticInnerClassSingleton getInstance() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return SingletonHolder.INSTANCE;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<blockquote>
<p>[!TIP] &gt; <strong>è¿™æ˜¯æœ€æ¨èçš„å®ç°æ–¹å¼ï¼</strong> å®ƒç»“åˆäº†æ‡’åŠ è½½å’Œçº¿ç¨‹å®‰å…¨çš„ä¼˜ç‚¹ï¼Œä¸”ä»£ç ç®€æ´æ˜“æ‡‚ã€‚JVM çš„ç±»åŠ è½½æœºåˆ¶å¤©ç„¶ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œæ— éœ€æ‰‹åŠ¨åŒæ­¥ã€‚</p>
</blockquote>
<p><strong>å·¥ä½œåŸç†ï¼š</strong></p>
<ul>
<li class="">å¤–éƒ¨ç±»åŠ è½½æ—¶ï¼Œ<code>SingletonHolder</code> ä¸ä¼šè¢«åŠ è½½</li>
<li class="">é¦–æ¬¡è°ƒç”¨ <code>getInstance()</code> æ—¶ï¼Œæ‰ä¼šåŠ è½½ <code>SingletonHolder</code> ç±»</li>
<li class="">JVM ä¿è¯ç±»åŠ è½½è¿‡ç¨‹çš„çº¿ç¨‹å®‰å…¨ï¼Œåªä¼šæ‰§è¡Œä¸€æ¬¡</li>
<li class="">åç»­è°ƒç”¨ç›´æ¥è¿”å›å·²åˆ›å»ºçš„å®ä¾‹</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar__9bU" id="6-æšä¸¾å•ä¾‹æœ€å®‰å…¨">6. æšä¸¾å•ä¾‹ï¼ˆæœ€å®‰å…¨ï¼‰â­â­â­â­<a href="#6-æšä¸¾å•ä¾‹æœ€å®‰å…¨" class="hash-link" aria-label="Direct link to 6. æšä¸¾å•ä¾‹ï¼ˆæœ€å®‰å…¨ï¼‰â­â­â­â­" title="Direct link to 6. æšä¸¾å•ä¾‹ï¼ˆæœ€å®‰å…¨ï¼‰â­â­â­â­" translate="no">â€‹</a></h3>
<div class="language-java codeBlockContainer_WMw_ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_wTBs"><pre tabindex="0" class="prism-code language-java codeBlock_Nmz_ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Uft3"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * æšä¸¾å•ä¾‹ - Josh Bloch æ¨èçš„æ–¹å¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * ä¼˜ç‚¹ï¼š</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * 1. ä»£ç æœ€ç®€æ´</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * 2. å¤©ç„¶çº¿ç¨‹å®‰å…¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * 3. é˜²æ­¢åå°„æ”»å‡»</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * 4. é˜²æ­¢åºåˆ—åŒ–ç ´å</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * ç¼ºç‚¹ï¼šä¸æ”¯æŒå»¶è¿ŸåŠ è½½</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public enum EnumSingleton {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    INSTANCE;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // å¯ä»¥æ·»åŠ ä¸šåŠ¡æ–¹æ³•</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void doSomething() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;æ‰§è¡Œä¸šåŠ¡é€»è¾‘&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // å¯ä»¥æ·»åŠ å­—æ®µ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private String value;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public String getValue() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return value;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void setValue(String value) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        this.value = value;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ä½¿ç”¨æ–¹å¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class Client {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // ç›´æ¥é€šè¿‡æšä¸¾å¸¸é‡è®¿é—®</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        EnumSingleton.INSTANCE.doSomething();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        EnumSingleton.INSTANCE.setValue(&quot;é…ç½®å€¼&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(EnumSingleton.INSTANCE.getValue());</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<blockquote>
<p>[!IMPORTANT] &gt; <strong>æšä¸¾å•ä¾‹æ˜¯é˜²æ­¢åå°„å’Œåºåˆ—åŒ–ç ´åçš„æœ€ä½³æ–¹æ¡ˆï¼</strong> ã€ŠEffective Javaã€‹ä½œè€… Josh Bloch å¼ºçƒˆæ¨èä½¿ç”¨æšä¸¾å®ç°å•ä¾‹ã€‚</p>
</blockquote>
<h2 class="anchor anchorTargetStickyNavbar__9bU" id="å®é™…åº”ç”¨ç¤ºä¾‹">å®é™…åº”ç”¨ç¤ºä¾‹<a href="#å®é™…åº”ç”¨ç¤ºä¾‹" class="hash-link" aria-label="Direct link to å®é™…åº”ç”¨ç¤ºä¾‹" title="Direct link to å®é™…åº”ç”¨ç¤ºä¾‹" translate="no">â€‹</a></h2>
<h3 class="anchor anchorTargetStickyNavbar__9bU" id="æ—¥å¿—è®°å½•å™¨">æ—¥å¿—è®°å½•å™¨<a href="#æ—¥å¿—è®°å½•å™¨" class="hash-link" aria-label="Direct link to æ—¥å¿—è®°å½•å™¨" title="Direct link to æ—¥å¿—è®°å½•å™¨" translate="no">â€‹</a></h3>
<div class="language-java codeBlockContainer_WMw_ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_wTBs"><pre tabindex="0" class="prism-code language-java codeBlock_Nmz_ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Uft3"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * å…¨å±€æ—¥å¿—è®°å½•å™¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * ä½¿ç”¨é™æ€å†…éƒ¨ç±»å®ç°å•ä¾‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class Logger {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Logger() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // åˆå§‹åŒ–æ—¥å¿—é…ç½®</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static class LoggerHolder {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        private static final Logger INSTANCE = new Logger();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static Logger getInstance() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return LoggerHolder.INSTANCE;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * è®°å½•æ—¥å¿—</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void log(String message) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;[&quot; + System.currentTimeMillis() + &quot;] &quot; + message);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void error(String message) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.err.println(&quot;[ERROR] &quot; + message);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ä½¿ç”¨ç¤ºä¾‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class Application {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Logger logger = Logger.getInstance();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        logger.log(&quot;åº”ç”¨å¯åŠ¨&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        logger.error(&quot;å‘ç”Ÿé”™è¯¯&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar__9bU" id="é…ç½®ç®¡ç†å™¨">é…ç½®ç®¡ç†å™¨<a href="#é…ç½®ç®¡ç†å™¨" class="hash-link" aria-label="Direct link to é…ç½®ç®¡ç†å™¨" title="Direct link to é…ç½®ç®¡ç†å™¨" translate="no">â€‹</a></h3>
<div class="language-java codeBlockContainer_WMw_ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_wTBs"><pre tabindex="0" class="prism-code language-java codeBlock_Nmz_ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Uft3"><span class="token-line" style="color:#393A34"><span class="token plain">import java.util.HashMap;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import java.util.Map;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * å…¨å±€é…ç½®ç®¡ç†å™¨</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * ä½¿ç”¨é™æ€å†…éƒ¨ç±»å®ç°å»¶è¿ŸåŠ è½½çš„å•ä¾‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class ConfigManager {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Map&lt;String, String&gt; config = new HashMap&lt;&gt;();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private ConfigManager() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // åŠ è½½é…ç½®æ–‡ä»¶</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        loadConfig();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static class ConfigHolder {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        private static final ConfigManager INSTANCE = new ConfigManager();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static ConfigManager getInstance() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return ConfigHolder.INSTANCE;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * ä»é…ç½®æ–‡ä»¶æˆ–ç¯å¢ƒå˜é‡åŠ è½½é…ç½®</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private void loadConfig() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        config.put(&quot;db.url&quot;, &quot;jdbc:mysql://localhost:3306/mydb&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        config.put(&quot;db.user&quot;, &quot;root&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        config.put(&quot;db.password&quot;, &quot;password&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        config.put(&quot;app.name&quot;, &quot;MyApplication&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * è·å–é…ç½®é¡¹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public String get(String key) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return config.get(key);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * è·å–é…ç½®é¡¹ï¼Œå¦‚æœä¸å­˜åœ¨è¿”å›é»˜è®¤å€¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public String get(String key, String defaultValue) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return config.getOrDefault(key, defaultValue);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ä½¿ç”¨ç¤ºä¾‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class DatabaseConnection {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void connect() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ConfigManager config = ConfigManager.getInstance();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String url = config.get(&quot;db.url&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        String user = config.get(&quot;db.user&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;è¿æ¥åˆ°æ•°æ®åº“: &quot; + url + &quot; ç”¨æˆ·: &quot; + user);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar__9bU" id="æ•°æ®åº“è¿æ¥æ± æšä¸¾å®ç°">æ•°æ®åº“è¿æ¥æ± ï¼ˆæšä¸¾å®ç°ï¼‰<a href="#æ•°æ®åº“è¿æ¥æ± æšä¸¾å®ç°" class="hash-link" aria-label="Direct link to æ•°æ®åº“è¿æ¥æ± ï¼ˆæšä¸¾å®ç°ï¼‰" title="Direct link to æ•°æ®åº“è¿æ¥æ± ï¼ˆæšä¸¾å®ç°ï¼‰" translate="no">â€‹</a></h3>
<div class="language-java codeBlockContainer_WMw_ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_wTBs"><pre tabindex="0" class="prism-code language-java codeBlock_Nmz_ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Uft3"><span class="token-line" style="color:#393A34"><span class="token plain">import java.sql.Connection;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import java.util.concurrent.ArrayBlockingQueue;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import java.util.concurrent.BlockingQueue;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * æ•°æ®åº“è¿æ¥æ± å•ä¾‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * ä½¿ç”¨æšä¸¾å®ç°ï¼Œé˜²æ­¢åå°„ç ´å</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public enum ConnectionPool {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    INSTANCE;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private final BlockingQueue&lt;Connection&gt; pool;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static final int POOL_SIZE = 10;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // æšä¸¾æ„é€ å‡½æ•°åœ¨ç±»åŠ è½½æ—¶æ‰§è¡Œï¼Œä¸”åªæ‰§è¡Œä¸€æ¬¡</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ConnectionPool() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pool = new ArrayBlockingQueue&lt;&gt;(POOL_SIZE);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // åˆå§‹åŒ–è¿æ¥æ± </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        initializePool();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private void initializePool() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // åˆ›å»ºåˆå§‹è¿æ¥ï¼ˆç®€åŒ–ç¤ºä¾‹ï¼‰</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(&quot;åˆå§‹åŒ–è¿æ¥æ± ï¼Œå¤§å°: &quot; + POOL_SIZE);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * è·å–æ•°æ®åº“è¿æ¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public Connection getConnection() throws InterruptedException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return pool.take();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * å½’è¿˜æ•°æ®åº“è¿æ¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void releaseConnection(Connection conn) throws InterruptedException {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        pool.put(conn);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// ä½¿ç”¨ç¤ºä¾‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class DatabaseService {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public void executeQuery() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        try {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Connection conn = ConnectionPool.INSTANCE.getConnection();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // æ‰§è¡Œæ•°æ®åº“æ“ä½œ</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ConnectionPool.INSTANCE.releaseConnection(conn);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        } catch (InterruptedException e) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            e.printStackTrace();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar__9bU" id="å•ä¾‹æ¨¡å¼çš„ç ´åä¸é˜²å¾¡">å•ä¾‹æ¨¡å¼çš„ç ´åä¸é˜²å¾¡<a href="#å•ä¾‹æ¨¡å¼çš„ç ´åä¸é˜²å¾¡" class="hash-link" aria-label="Direct link to å•ä¾‹æ¨¡å¼çš„ç ´åä¸é˜²å¾¡" title="Direct link to å•ä¾‹æ¨¡å¼çš„ç ´åä¸é˜²å¾¡" translate="no">â€‹</a></h2>
<h3 class="anchor anchorTargetStickyNavbar__9bU" id="1-åå°„ç ´å">1. åå°„ç ´å<a href="#1-åå°„ç ´å" class="hash-link" aria-label="Direct link to 1. åå°„ç ´å" title="Direct link to 1. åå°„ç ´å" translate="no">â€‹</a></h3>
<div class="language-java codeBlockContainer_WMw_ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_wTBs"><pre tabindex="0" class="prism-code language-java codeBlock_Nmz_ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Uft3"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * åå°„å¯ä»¥ç ´åå•ä¾‹æ¨¡å¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class ReflectionAttack {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) throws Exception {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // æ­£å¸¸è·å–å®ä¾‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        StaticInnerClassSingleton instance1 = StaticInnerClassSingleton.getInstance();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // ä½¿ç”¨åå°„è·å–æ„é€ å‡½æ•°</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Constructor&lt;StaticInnerClassSingleton&gt; constructor =</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            StaticInnerClassSingleton.class.getDeclaredConstructor();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        constructor.setAccessible(true);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // åˆ›å»ºæ–°å®ä¾‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        StaticInnerClassSingleton instance2 = constructor.newInstance();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // ä¸¤ä¸ªå®ä¾‹ä¸ç›¸åŒï¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(instance1 == instance2); // false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>é˜²å¾¡æ–¹æ³•ï¼šåœ¨æ„é€ å‡½æ•°ä¸­æ£€æŸ¥</strong></p>
<div class="language-java codeBlockContainer_WMw_ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_wTBs"><pre tabindex="0" class="prism-code language-java codeBlock_Nmz_ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Uft3"><span class="token-line" style="color:#393A34"><span class="token plain">public class DefensiveSingleton {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static volatile boolean initialized = false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private DefensiveSingleton() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        synchronized (DefensiveSingleton.class) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (initialized) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                throw new RuntimeException(&quot;å•ä¾‹å¯¹è±¡å·²å­˜åœ¨ï¼Œç¦æ­¢åå°„åˆ›å»º!&quot;);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            initialized = true;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ... å…¶ä»–ä»£ç </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<blockquote>
<p>[!TIP] &gt; <strong>æšä¸¾å•ä¾‹å¤©ç„¶é˜²å¾¡åå°„æ”»å‡»ï¼</strong> æšä¸¾ç±»å‹çš„ JVM å®ç°ç¦æ­¢é€šè¿‡åå°„åˆ›å»ºå®ä¾‹ã€‚</p>
</blockquote>
<h3 class="anchor anchorTargetStickyNavbar__9bU" id="2-åºåˆ—åŒ–ç ´å">2. åºåˆ—åŒ–ç ´å<a href="#2-åºåˆ—åŒ–ç ´å" class="hash-link" aria-label="Direct link to 2. åºåˆ—åŒ–ç ´å" title="Direct link to 2. åºåˆ—åŒ–ç ´å" translate="no">â€‹</a></h3>
<div class="language-java codeBlockContainer_WMw_ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_wTBs"><pre tabindex="0" class="prism-code language-java codeBlock_Nmz_ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Uft3"><span class="token-line" style="color:#393A34"><span class="token plain">import java.io.*;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * åºåˆ—åŒ–å¯èƒ½ç ´åå•ä¾‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">class SerializationTest {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static void main(String[] args) throws Exception {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Singleton instance1 = Singleton.getInstance();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // åºåˆ—åŒ–</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream(&quot;singleton.ser&quot;));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        oos.writeObject(instance1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        oos.close();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // ååºåˆ—åŒ–</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ObjectInputStream ois = new ObjectInputStream(new FileInputStream(&quot;singleton.ser&quot;));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Singleton instance2 = (Singleton) ois.readObject();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ois.close();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // ä¸¤ä¸ªå®ä¾‹ä¸ç›¸åŒï¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        System.out.println(instance1 == instance2); // false</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>é˜²å¾¡æ–¹æ³•ï¼šæ·»åŠ  readResolve æ–¹æ³•</strong></p>
<div class="language-java codeBlockContainer_WMw_ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_wTBs"><pre tabindex="0" class="prism-code language-java codeBlock_Nmz_ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Uft3"><span class="token-line" style="color:#393A34"><span class="token plain">import java.io.Serializable;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class SerializableSingleton implements Serializable {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static final long serialVersionUID = 1L;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private SerializableSingleton() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private static class SingletonHolder {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        private static final SerializableSingleton INSTANCE = new SerializableSingleton();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public static SerializableSingleton getInstance() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return SingletonHolder.INSTANCE;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * ååºåˆ—åŒ–æ—¶è°ƒç”¨æ­¤æ–¹æ³•ï¼Œè¿”å›å·²æœ‰å®ä¾‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     * é˜²æ­¢åºåˆ—åŒ–ç ´åå•ä¾‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    private Object readResolve() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return SingletonHolder.INSTANCE;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<blockquote>
<p>[!IMPORTANT]
å¦‚æœå•ä¾‹ç±»éœ€è¦åºåˆ—åŒ–ï¼Œå¿…é¡»å®ç° <code>readResolve()</code> æ–¹æ³•è¿”å›å·²æœ‰å®ä¾‹ï¼Œå¦åˆ™ååºåˆ—åŒ–ä¼šåˆ›å»ºæ–°å®ä¾‹ã€‚</p>
</blockquote>
<h2 class="anchor anchorTargetStickyNavbar__9bU" id="ä¼˜ç¼ºç‚¹">ä¼˜ç¼ºç‚¹<a href="#ä¼˜ç¼ºç‚¹" class="hash-link" aria-label="Direct link to ä¼˜ç¼ºç‚¹" title="Direct link to ä¼˜ç¼ºç‚¹" translate="no">â€‹</a></h2>
<h3 class="anchor anchorTargetStickyNavbar__9bU" id="ä¼˜ç‚¹">ä¼˜ç‚¹<a href="#ä¼˜ç‚¹" class="hash-link" aria-label="Direct link to ä¼˜ç‚¹" title="Direct link to ä¼˜ç‚¹" translate="no">â€‹</a></h3>
<ul>
<li class="">âœ… å†…å­˜ä¸­ä»…æœ‰ä¸€ä¸ªå®ä¾‹ï¼ŒèŠ‚çœèµ„æº</li>
<li class="">âœ… æä¾›å…¨å±€è®¿é—®ç‚¹ï¼Œæ˜“äºè·å–å’Œç®¡ç†</li>
<li class="">âœ… æ”¯æŒå»¶è¿ŸåŠ è½½ï¼ˆæ‡’åŠ è½½å®ç°ï¼‰</li>
<li class="">âœ… é¿å…å¯¹èµ„æºçš„å¤šé‡å ç”¨</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar__9bU" id="ç¼ºç‚¹">ç¼ºç‚¹<a href="#ç¼ºç‚¹" class="hash-link" aria-label="Direct link to ç¼ºç‚¹" title="Direct link to ç¼ºç‚¹" translate="no">â€‹</a></h3>
<ul>
<li class="">âŒ éšè—äº†ç±»ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œä¸æ˜“å¯Ÿè§‰</li>
<li class="">âŒ è¿åå•ä¸€èŒè´£åŸåˆ™ï¼ˆæ—¢ç®¡ç†å®ä¾‹åˆå®ç°ä¸šåŠ¡ï¼‰</li>
<li class="">âŒ ä¸åˆ©äºå•å…ƒæµ‹è¯•ï¼ˆéš¾ä»¥ mockï¼‰</li>
<li class="">âŒ å¯èƒ½é€ æˆå…¨å±€çŠ¶æ€æ··ä¹±</li>
<li class="">âŒ åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­éš¾ä»¥ä¿è¯å•ä¾‹</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar__9bU" id="é€‚ç”¨åœºæ™¯">é€‚ç”¨åœºæ™¯<a href="#é€‚ç”¨åœºæ™¯" class="hash-link" aria-label="Direct link to é€‚ç”¨åœºæ™¯" title="Direct link to é€‚ç”¨åœºæ™¯" translate="no">â€‹</a></h2>
<ul>
<li class="">âœ“ <strong>æ•°æ®åº“è¿æ¥æ± </strong> - ç®¡ç†æ•°æ®åº“è¿æ¥èµ„æº</li>
<li class="">âœ“ <strong>æ—¥å¿—è®°å½•å™¨</strong> - å…¨å±€ç»Ÿä¸€çš„æ—¥å¿—è¾“å‡º</li>
<li class="">âœ“ <strong>é…ç½®ç®¡ç†å™¨</strong> - å…¨å±€é…ç½®ä¿¡æ¯è®¿é—®</li>
<li class="">âœ“ <strong>çº¿ç¨‹æ± </strong> - ç®¡ç†çº¿ç¨‹èµ„æº</li>
<li class="">âœ“ <strong>ç¼“å­˜</strong> - å…¨å±€ç¼“å­˜ç®¡ç†</li>
<li class="">âœ“ <strong>åº”ç”¨ç¨‹åºä¸Šä¸‹æ–‡</strong> - Spring ApplicationContext</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar__9bU" id="java-æ ‡å‡†åº“ä¸­çš„åº”ç”¨">Java æ ‡å‡†åº“ä¸­çš„åº”ç”¨<a href="#java-æ ‡å‡†åº“ä¸­çš„åº”ç”¨" class="hash-link" aria-label="Direct link to Java æ ‡å‡†åº“ä¸­çš„åº”ç”¨" title="Direct link to Java æ ‡å‡†åº“ä¸­çš„åº”ç”¨" translate="no">â€‹</a></h2>
<div class="language-java codeBlockContainer_WMw_ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_wTBs"><pre tabindex="0" class="prism-code language-java codeBlock_Nmz_ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Uft3"><span class="token-line" style="color:#393A34"><span class="token plain">// Runtime - é¥¿æ±‰å¼å•ä¾‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Runtime runtime = Runtime.getRuntime();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Desktop - æ‡’åŠ è½½å•ä¾‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Desktop desktop = Desktop.getDesktop();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// Calendar - å·¥å‚æ–¹æ³•è¿”å›å•ä¾‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Calendar calendar = Calendar.getInstance();</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar__9bU" id="spring-æ¡†æ¶ä¸­çš„å•ä¾‹">Spring æ¡†æ¶ä¸­çš„å•ä¾‹<a href="#spring-æ¡†æ¶ä¸­çš„å•ä¾‹" class="hash-link" aria-label="Direct link to Spring æ¡†æ¶ä¸­çš„å•ä¾‹" title="Direct link to Spring æ¡†æ¶ä¸­çš„å•ä¾‹" translate="no">â€‹</a></h2>
<div class="language-java codeBlockContainer_WMw_ theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_wTBs"><pre tabindex="0" class="prism-code language-java codeBlock_Nmz_ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_Uft3"><span class="token-line" style="color:#393A34"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> * Spring Bean é»˜è®¤æ˜¯å•ä¾‹æ¨¡å¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Component</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class UserService {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // Spring å®¹å™¨ä¿è¯æ­¤ bean ä¸ºå•ä¾‹</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">// é…ç½®ç±»æ–¹å¼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public class AppConfig {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    @Scope(&quot;singleton&quot;) // é»˜è®¤å°±æ˜¯ singletonï¼Œå¯çœç•¥</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    public DataSource dataSource() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        return new HikariDataSource();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<blockquote>
<p>[!NOTE]
Spring çš„å•ä¾‹æ˜¯åŸºäºå®¹å™¨çš„å•ä¾‹ï¼Œä¸åŒäº GOF å•ä¾‹æ¨¡å¼ã€‚æ¯ä¸ª Spring å®¹å™¨ä¸­åªæœ‰ä¸€ä¸ª bean å®ä¾‹ï¼Œä½†ä¸åŒå®¹å™¨å¯ä»¥æœ‰å¤šä¸ªå®ä¾‹ã€‚</p>
</blockquote>
<h2 class="anchor anchorTargetStickyNavbar__9bU" id="æœ€ä½³å®è·µå»ºè®®">æœ€ä½³å®è·µå»ºè®®<a href="#æœ€ä½³å®è·µå»ºè®®" class="hash-link" aria-label="Direct link to æœ€ä½³å®è·µå»ºè®®" title="Direct link to æœ€ä½³å®è·µå»ºè®®" translate="no">â€‹</a></h2>
<ol>
<li class=""><strong>ä¼˜å…ˆé€‰æ‹©é™æ€å†…éƒ¨ç±»å®ç°</strong> - ä»£ç ç®€æ´ä¸”é«˜æ•ˆ</li>
<li class=""><strong>éœ€è¦é˜²å¾¡æ”»å‡»æ—¶ä½¿ç”¨æšä¸¾</strong> - æœ€å®‰å…¨çš„å®ç°æ–¹å¼</li>
<li class=""><strong>é¿å…è¿‡åº¦ä½¿ç”¨</strong> - ä¸è¦æŠŠæ‰€æœ‰å…¨å±€å¯¹è±¡éƒ½åšæˆå•ä¾‹</li>
<li class=""><strong>è€ƒè™‘ä¾èµ–æ³¨å…¥</strong> - ä½¿ç”¨ Spring ç­‰æ¡†æ¶ç®¡ç†å•ä¾‹æ›´çµæ´»</li>
<li class=""><strong>æ³¨æ„çº¿ç¨‹å®‰å…¨</strong> - å•ä¾‹å¯¹è±¡çš„æ–¹æ³•åº”è¯¥æ˜¯çº¿ç¨‹å®‰å…¨çš„</li>
<li class=""><strong>è€ƒè™‘åˆ†å¸ƒå¼åœºæ™¯</strong> - åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å¯èƒ½éœ€è¦åˆ†å¸ƒå¼é”</li>
</ol>
<h2 class="anchor anchorTargetStickyNavbar__9bU" id="ç›¸å…³æ¨¡å¼">ç›¸å…³æ¨¡å¼<a href="#ç›¸å…³æ¨¡å¼" class="hash-link" aria-label="Direct link to ç›¸å…³æ¨¡å¼" title="Direct link to ç›¸å…³æ¨¡å¼" translate="no">â€‹</a></h2>
<ul>
<li class=""><strong>å·¥å‚æ¨¡å¼</strong> - å•ä¾‹å·¥å‚è´Ÿè´£åˆ›å»ºå¯¹è±¡</li>
<li class=""><strong>æŠ½è±¡å·¥å‚æ¨¡å¼</strong> - å·¥å‚æœ¬èº«å¯ä»¥æ˜¯å•ä¾‹</li>
<li class=""><strong>åŸå‹æ¨¡å¼</strong> - ä¸å•ä¾‹ç›¸åï¼ŒåŸå‹ç”¨äºåˆ›å»ºå¤šä¸ªå®ä¾‹</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar__9bU" id="æ€»ç»“">æ€»ç»“<a href="#æ€»ç»“" class="hash-link" aria-label="Direct link to æ€»ç»“" title="Direct link to æ€»ç»“" translate="no">â€‹</a></h2>
<p>å•ä¾‹æ¨¡å¼æ˜¯æœ€ç®€å•ä½†ä¹Ÿæœ€å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ä¹‹ä¸€ã€‚é€‰æ‹©åˆé€‚çš„å®ç°æ–¹å¼å¾ˆé‡è¦ï¼š</p>
<ul>
<li class=""><strong>ç®€å•åœºæ™¯</strong> â†’ é¥¿æ±‰å¼æˆ–æšä¸¾</li>
<li class=""><strong>éœ€è¦å»¶è¿ŸåŠ è½½</strong> â†’ é™æ€å†…éƒ¨ç±»</li>
<li class=""><strong>éœ€è¦é˜²å¾¡åå°„/åºåˆ—åŒ–</strong> â†’ æšä¸¾</li>
<li class=""><strong>ä¼ä¸šåº”ç”¨</strong> â†’ ä½¿ç”¨ Spring ç­‰ IoC å®¹å™¨ç®¡ç†</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_LFcd"><a href="https://github.com/to-lib/to-lib.github.io/tree/main/docs/java-design-patterns/singleton-pattern.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_cm6n" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_o2CG"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/java-design-patterns/overview"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Javaè®¾è®¡æ¨¡å¼æ¦‚è¿°</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/java-design-patterns/factory-pattern"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">å·¥å‚æ–¹æ³•æ¨¡å¼ (Factory Method Pattern)</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_Odgc thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#æ¨¡å¼å®šä¹‰" class="table-of-contents__link toc-highlight">æ¨¡å¼å®šä¹‰</a></li><li><a href="#é—®é¢˜åˆ†æ" class="table-of-contents__link toc-highlight">é—®é¢˜åˆ†æ</a></li><li><a href="#å®ç°æ–¹å¼å¯¹æ¯”" class="table-of-contents__link toc-highlight">å®ç°æ–¹å¼å¯¹æ¯”</a></li><li><a href="#å®ç°æ–¹å¼è¯¦è§£" class="table-of-contents__link toc-highlight">å®ç°æ–¹å¼è¯¦è§£</a><ul><li><a href="#1-æ‡’åŠ è½½å•ä¾‹çº¿ç¨‹ä¸å®‰å…¨" class="table-of-contents__link toc-highlight">1. æ‡’åŠ è½½å•ä¾‹ï¼ˆçº¿ç¨‹ä¸å®‰å…¨ï¼‰âŒ</a></li><li><a href="#2-é¥¿æ±‰å¼å•ä¾‹çº¿ç¨‹å®‰å…¨" class="table-of-contents__link toc-highlight">2. é¥¿æ±‰å¼å•ä¾‹ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰âœ…</a></li><li><a href="#3-æ‡’åŠ è½½å•ä¾‹åŒæ­¥æ–¹æ³•" class="table-of-contents__link toc-highlight">3. æ‡’åŠ è½½å•ä¾‹ï¼ˆåŒæ­¥æ–¹æ³•ï¼‰âœ…</a></li><li><a href="#4-åŒé‡æ£€æŸ¥é”å®šæ¨è" class="table-of-contents__link toc-highlight">4. åŒé‡æ£€æŸ¥é”å®šï¼ˆæ¨èï¼‰â­â­â­</a></li><li><a href="#5-é™æ€å†…éƒ¨ç±»å•ä¾‹æœ€æ¨è" class="table-of-contents__link toc-highlight">5. é™æ€å†…éƒ¨ç±»å•ä¾‹ï¼ˆæœ€æ¨èï¼‰â­â­â­â­â­</a></li><li><a href="#6-æšä¸¾å•ä¾‹æœ€å®‰å…¨" class="table-of-contents__link toc-highlight">6. æšä¸¾å•ä¾‹ï¼ˆæœ€å®‰å…¨ï¼‰â­â­â­â­</a></li></ul></li><li><a href="#å®é™…åº”ç”¨ç¤ºä¾‹" class="table-of-contents__link toc-highlight">å®é™…åº”ç”¨ç¤ºä¾‹</a><ul><li><a href="#æ—¥å¿—è®°å½•å™¨" class="table-of-contents__link toc-highlight">æ—¥å¿—è®°å½•å™¨</a></li><li><a href="#é…ç½®ç®¡ç†å™¨" class="table-of-contents__link toc-highlight">é…ç½®ç®¡ç†å™¨</a></li><li><a href="#æ•°æ®åº“è¿æ¥æ± æšä¸¾å®ç°" class="table-of-contents__link toc-highlight">æ•°æ®åº“è¿æ¥æ± ï¼ˆæšä¸¾å®ç°ï¼‰</a></li></ul></li><li><a href="#å•ä¾‹æ¨¡å¼çš„ç ´åä¸é˜²å¾¡" class="table-of-contents__link toc-highlight">å•ä¾‹æ¨¡å¼çš„ç ´åä¸é˜²å¾¡</a><ul><li><a href="#1-åå°„ç ´å" class="table-of-contents__link toc-highlight">1. åå°„ç ´å</a></li><li><a href="#2-åºåˆ—åŒ–ç ´å" class="table-of-contents__link toc-highlight">2. åºåˆ—åŒ–ç ´å</a></li></ul></li><li><a href="#ä¼˜ç¼ºç‚¹" class="table-of-contents__link toc-highlight">ä¼˜ç¼ºç‚¹</a><ul><li><a href="#ä¼˜ç‚¹" class="table-of-contents__link toc-highlight">ä¼˜ç‚¹</a></li><li><a href="#ç¼ºç‚¹" class="table-of-contents__link toc-highlight">ç¼ºç‚¹</a></li></ul></li><li><a href="#é€‚ç”¨åœºæ™¯" class="table-of-contents__link toc-highlight">é€‚ç”¨åœºæ™¯</a></li><li><a href="#java-æ ‡å‡†åº“ä¸­çš„åº”ç”¨" class="table-of-contents__link toc-highlight">Java æ ‡å‡†åº“ä¸­çš„åº”ç”¨</a></li><li><a href="#spring-æ¡†æ¶ä¸­çš„å•ä¾‹" class="table-of-contents__link toc-highlight">Spring æ¡†æ¶ä¸­çš„å•ä¾‹</a></li><li><a href="#æœ€ä½³å®è·µå»ºè®®" class="table-of-contents__link toc-highlight">æœ€ä½³å®è·µå»ºè®®</a></li><li><a href="#ç›¸å…³æ¨¡å¼" class="table-of-contents__link toc-highlight">ç›¸å…³æ¨¡å¼</a></li><li><a href="#æ€»ç»“" class="table-of-contents__link toc-highlight">æ€»ç»“</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/java-design-patterns/overview">Design Patterns</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/spring">Spring Framework</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/springboot">Spring Boot</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_Cy_U"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/to-lib/to-lib.github.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_Cy_U"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2025 to-lib. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>