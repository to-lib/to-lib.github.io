---
sidebar_position: 1
title: PostgreSQL ç®€ä»‹
---

# PostgreSQL ç®€ä»‹

PostgreSQL æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„å¼€æºå¯¹è±¡å…³ç³»å‹æ•°æ®åº“ç³»ç»Ÿï¼Œå…·æœ‰è¶…è¿‡ 35 å¹´çš„ç§¯æå¼€å‘å†å²ï¼Œåœ¨å¯é æ€§ã€åŠŸèƒ½å¥å£®æ€§å’Œæ€§èƒ½æ–¹é¢èµ¢å¾—äº†è‰¯å¥½çš„å£°èª‰ã€‚

## ğŸ¯ å­¦ä¹ ç›®æ ‡

æœ¬æ•™ç¨‹å°†å¸®åŠ©ä½ ï¼š

- æŒæ¡ PostgreSQL çš„æ ¸å¿ƒæ¦‚å¿µå’ŒåŸºç¡€çŸ¥è¯†
- å­¦ä¹  SQL è¯­æ³•å’Œæ•°æ®ç±»å‹
- ç†è§£ç´¢å¼•ã€äº‹åŠ¡å’Œå¹¶å‘æ§åˆ¶
- æŒæ¡æ€§èƒ½ä¼˜åŒ–å’Œå¤‡ä»½æ¢å¤
- äº†è§£é«˜çº§ç‰¹æ€§å’Œæœ€ä½³å®è·µ

## âœ¨ ä¸»è¦ç‰¹æ€§

### 1. å®Œå…¨ç¬¦åˆ ACID

- **åŸå­æ€§ï¼ˆAtomicityï¼‰**ï¼šäº‹åŠ¡è¦ä¹ˆå®Œå…¨æ‰§è¡Œï¼Œè¦ä¹ˆå®Œå…¨ä¸æ‰§è¡Œ
- **ä¸€è‡´æ€§ï¼ˆConsistencyï¼‰**ï¼šäº‹åŠ¡æ‰§è¡Œå‰åæ•°æ®ä¿æŒä¸€è‡´
- **éš”ç¦»æ€§ï¼ˆIsolationï¼‰**ï¼šå¹¶å‘äº‹åŠ¡ä¹‹é—´ç›¸äº’éš”ç¦»
- **æŒä¹…æ€§ï¼ˆDurabilityï¼‰**ï¼šå·²æäº¤çš„äº‹åŠ¡æ°¸ä¹…ä¿å­˜

### 2. ä¸°å¯Œçš„æ•°æ®ç±»å‹

- åŸºæœ¬ç±»å‹ï¼šæ•´æ•°ã€æµ®ç‚¹æ•°ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼ã€æ—¥æœŸæ—¶é—´
- é«˜çº§ç±»å‹ï¼šæ•°ç»„ã€JSON/JSONBã€UUIDã€èŒƒå›´ç±»å‹
- å‡ ä½•ç±»å‹ï¼šç‚¹ã€çº¿ã€åœ†ã€å¤šè¾¹å½¢ç­‰
- è‡ªå®šä¹‰ç±»å‹ï¼šå¯åˆ›å»ºè‡ªå·±çš„æ•°æ®ç±»å‹

### 3. å¼ºå¤§çš„æ‰©å±•æ€§

- **å¤–é”®çº¦æŸ**ï¼šç»´æŠ¤æ•°æ®å®Œæ•´æ€§
- **è§¦å‘å™¨å’Œå­˜å‚¨è¿‡ç¨‹**ï¼šè‡ªå®šä¹‰ä¸šåŠ¡é€»è¾‘
- **è§†å›¾å’Œç‰©åŒ–è§†å›¾**ï¼šç®€åŒ–å¤æ‚æŸ¥è¯¢
- **å…¨æ–‡æœç´¢**ï¼šå†…ç½®å¼ºå¤§çš„æœç´¢åŠŸèƒ½
- **æ‰©å±•æ’ä»¶**ï¼šPostGISã€pg_stat_statements ç­‰

### 4. é«˜çº§æŸ¥è¯¢åŠŸèƒ½

- å¤æ‚ JOIN æ“ä½œ
- çª—å£å‡½æ•°
- å…¬ç”¨è¡¨è¡¨è¾¾å¼ï¼ˆCTEï¼‰
- é€’å½’æŸ¥è¯¢
- JSON æŸ¥è¯¢å’Œæ“ä½œ

## ğŸš€ ä¸ºä»€ä¹ˆé€‰æ‹© PostgreSQLï¼Ÿ

### vs MySQL

| ç‰¹æ€§          | PostgreSQL          | MySQL                      |
| ------------- | ------------------- | -------------------------- |
| **ACID æ”¯æŒ** | å®Œå…¨æ”¯æŒ            | éƒ¨åˆ†æ”¯æŒï¼ˆå–å†³äºå­˜å‚¨å¼•æ“ï¼‰ |
| **å¹¶å‘æ§åˆ¶**  | MVCC                | é”æœºåˆ¶                     |
| **å¤æ‚æŸ¥è¯¢**  | ä¼˜ç§€                | è‰¯å¥½                       |
| **æ•°æ®ç±»å‹**  | éå¸¸ä¸°å¯Œ            | åŸºæœ¬                       |
| **JSON æ”¯æŒ** | JSONBï¼ˆäºŒè¿›åˆ¶å­˜å‚¨ï¼‰ | JSONï¼ˆæ–‡æœ¬å­˜å‚¨ï¼‰           |
| **å…¨æ–‡æœç´¢**  | å†…ç½®                | åŸºç¡€                       |
| **æ‰©å±•æ€§**    | å¼ºå¤§                | ä¸€èˆ¬                       |

### ä½¿ç”¨åœºæ™¯

**PostgreSQL æ›´é€‚åˆï¼š**

- å¤æ‚çš„æ•°æ®åˆ†æå’ŒæŠ¥è¡¨
- éœ€è¦ä¸¥æ ¼ ACID ä¿è¯çš„åº”ç”¨
- åœ°ç†ä¿¡æ¯ç³»ç»Ÿï¼ˆGISï¼‰
- ç§‘å­¦è®¡ç®—å’Œæ•°æ®ç§‘å­¦
- éœ€è¦ JSON æ–‡æ¡£å­˜å‚¨çš„åº”ç”¨

**MySQL æ›´é€‚åˆï¼š**

- ç®€å•çš„è¯»å†™å¯†é›†å‹åº”ç”¨
- Web åº”ç”¨çš„å¿«é€Ÿå¼€å‘
- å¯¹äº‹åŠ¡è¦æ±‚ä¸é«˜çš„åœºæ™¯

## ğŸ“š å­¦ä¹ è·¯å¾„

### åˆå­¦è€…

1. [åŸºç¡€æ¦‚å¿µ](./basic-concepts) - äº†è§£æ•°æ®åº“ã€è¡¨ã€å­—æ®µç­‰åŸºæœ¬æ¦‚å¿µ
2. [æ•°æ®ç±»å‹](./data-types) - æŒæ¡ PostgreSQL çš„æ•°æ®ç±»å‹
3. [SQL è¯­æ³•](./sql-syntax) - å­¦ä¹ åŸºæœ¬çš„ SQL æŸ¥è¯¢è¯­å¥

### è¿›é˜¶

4. [ç´¢å¼•ä¼˜åŒ–](./indexes) - ç†è§£ç´¢å¼•åŸç†å’Œä½¿ç”¨
5. [äº‹åŠ¡ç®¡ç†](./transactions) - æŒæ¡äº‹åŠ¡å’Œå¹¶å‘æ§åˆ¶
6. [æ€§èƒ½ä¼˜åŒ–](./performance-optimization) - æå‡æ•°æ®åº“æ€§èƒ½

### é«˜çº§

7. [å¤‡ä»½æ¢å¤](./backup-recovery) - å­¦ä¹ æ•°æ®å¤‡ä»½å’Œæ¢å¤ç­–ç•¥
8. [å¤åˆ¶ä¸é«˜å¯ç”¨](./replication) - é…ç½®ä¸»ä»å¤åˆ¶å’Œé«˜å¯ç”¨
9. [å®‰å…¨ç®¡ç†](./security) - ç”¨æˆ·æƒé™å’Œå®‰å…¨æœ€ä½³å®è·µ

## ğŸ› ï¸ å¿«é€Ÿå¼€å§‹

### å®‰è£… PostgreSQL

**macOS (ä½¿ç”¨ Homebrew):**

```bash
# å®‰è£…
brew install postgresql@16

# å¯åŠ¨æœåŠ¡
brew services start postgresql@16

# æ£€æŸ¥çŠ¶æ€
psql --version
```

**Ubuntu/Debian:**

```bash
# æ·»åŠ ä»“åº“
sudo sh -c 'echo "deb http://apt.postgresql.org/pub/repos/apt $(lsb_release -cs)-pgdg main" > /etc/apt/sources.list.d/pgdg.list'
wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -

# å®‰è£…
sudo apt-get update
sudo apt-get install postgresql-16

# å¯åŠ¨æœåŠ¡
sudo systemctl start postgresql
```

**Docker:**

```bash
# è¿è¡Œ PostgreSQL å®¹å™¨
docker run --name postgres \
  -e POSTGRES_PASSWORD=mysecretpassword \
  -p 5432:5432 \
  -d postgres:16

# è¿æ¥æ•°æ®åº“
docker exec -it postgres psql -U postgres
```

### ç¬¬ä¸€ä¸ªæŸ¥è¯¢

```sql
-- åˆ›å»ºæ•°æ®åº“
CREATE DATABASE myapp;

-- è¿æ¥åˆ°æ•°æ®åº“
\c myapp

-- åˆ›å»ºè¡¨
CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    username VARCHAR(50) UNIQUE NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- æ’å…¥æ•°æ®
INSERT INTO users (username, email)
VALUES ('john_doe', 'john@example.com');

-- æŸ¥è¯¢æ•°æ®
SELECT * FROM users;
```

## ğŸ“– å®˜æ–¹èµ„æº

- **å®˜æ–¹ç½‘ç«™**: [https://www.postgresql.org/](https://www.postgresql.org/)
- **å®˜æ–¹æ–‡æ¡£**: [https://www.postgresql.org/docs/](https://www.postgresql.org/docs/)
- **ä¸­æ–‡ç¤¾åŒº**: [http://www.postgres.cn/](http://www.postgres.cn/)
- **GitHub**: [https://github.com/postgres/postgres](https://github.com/postgres/postgres)

## ğŸ“ å­¦ä¹ å»ºè®®

1. **åŠ¨æ‰‹å®è·µ**ï¼šè¾¹å­¦è¾¹ç»ƒï¼Œåœ¨æœ¬åœ°æ­å»ºç¯å¢ƒ
2. **ç†è§£åŸç†**ï¼šä¸ä»…çŸ¥å…¶ç„¶ï¼Œæ›´è¦çŸ¥å…¶æ‰€ä»¥ç„¶
3. **æŸ¥é˜…æ–‡æ¡£**ï¼šå®˜æ–¹æ–‡æ¡£æ˜¯æœ€å¥½çš„å­¦ä¹ èµ„æº
4. **è§£å†³é—®é¢˜**ï¼šé‡åˆ°é—®é¢˜å¤šæ€è€ƒï¼Œå¤šæŸ¥èµ„æ–™
5. **å…³æ³¨ç¤¾åŒº**ï¼šå‚ä¸æŠ€æœ¯ç¤¾åŒºï¼Œäº†è§£æœ€æ–°åŠ¨æ€

## ğŸ’¡ ä¸‹ä¸€æ­¥

ç°åœ¨ä½ å·²ç»å¯¹ PostgreSQL æœ‰äº†åŸºæœ¬çš„äº†è§£ï¼Œå¯ä»¥å¼€å§‹æ·±å…¥å­¦ä¹ ï¼š

- ğŸ“˜ [åŸºç¡€æ¦‚å¿µ](./basic-concepts) - äº†è§£æ ¸å¿ƒæ¦‚å¿µ
- ğŸ“˜ [æ•°æ®ç±»å‹](./data-types) - æŒæ¡æ•°æ®ç±»å‹
- ğŸ“˜ [SQL è¯­æ³•](./sql-syntax) - å­¦ä¹  SQL æŸ¥è¯¢

ç¥ä½ å­¦ä¹ æ„‰å¿«ï¼ğŸ‰
