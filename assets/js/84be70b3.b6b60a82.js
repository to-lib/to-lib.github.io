"use strict";(globalThis.webpackChunkto_lib_github_io=globalThis.webpackChunkto_lib_github_io||[]).push([[16e3],{48885:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>s});var l=i(99378);const p={},t=l.createContext(p);function a(e){const n=l.useContext(t);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(p):e.components||p:a(e.components),l.createElement(t.Provider,{value:n},e.children)}},52033:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>r,contentTitle:()=>s,default:()=>m,frontMatter:()=>a,metadata:()=>l,toc:()=>u});const l=JSON.parse('{"id":"ffmpeg/filters","title":"\u6ee4\u955c\u4f7f\u7528","description":"FFmpeg \u6ee4\u955c\u7cfb\u7edf\u8be6\u89e3","source":"@site/docs/ffmpeg/filters.md","sourceDirName":"ffmpeg","slug":"/ffmpeg/filters","permalink":"/docs/ffmpeg/filters","draft":false,"unlisted":false,"editUrl":"https://github.com/to-lib/to-lib.github.io/tree/main/docs/ffmpeg/filters.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6,"title":"\u6ee4\u955c\u4f7f\u7528","description":"FFmpeg \u6ee4\u955c\u7cfb\u7edf\u8be6\u89e3"},"sidebar":"ffmpeg","previous":{"title":"\u5b57\u5e55\u5904\u7406","permalink":"/docs/ffmpeg/subtitles"},"next":{"title":"\u786c\u4ef6\u52a0\u901f","permalink":"/docs/ffmpeg/hardware-acceleration"}}');var p=i(22714),t=i(48885);const a={sidebar_position:6,title:"\u6ee4\u955c\u4f7f\u7528",description:"FFmpeg \u6ee4\u955c\u7cfb\u7edf\u8be6\u89e3"},s="FFmpeg \u6ee4\u955c\u4f7f\u7528",r={},u=[{value:"\u6ee4\u955c\u57fa\u7840",id:"\u6ee4\u955c\u57fa\u7840",level:2},{value:"\u6ee4\u955c\u8bed\u6cd5",id:"\u6ee4\u955c\u8bed\u6cd5",level:3},{value:"\u67e5\u770b\u53ef\u7528\u6ee4\u955c",id:"\u67e5\u770b\u53ef\u7528\u6ee4\u955c",level:3},{value:"\u5e38\u7528\u89c6\u9891\u6ee4\u955c",id:"\u5e38\u7528\u89c6\u9891\u6ee4\u955c",level:2},{value:"\u7f29\u653e\uff08scale\uff09",id:"\u7f29\u653escale",level:3},{value:"\u88c1\u526a\uff08crop\uff09",id:"\u88c1\u526acrop",level:3},{value:"\u586b\u5145\uff08pad\uff09",id:"\u586b\u5145pad",level:3},{value:"\u8986\u76d6\uff08overlay\uff09",id:"\u8986\u76d6overlay",level:3},{value:"\u6587\u5b57\u7ed8\u5236\uff08drawtext\uff09",id:"\u6587\u5b57\u7ed8\u5236drawtext",level:3},{value:"\u989c\u8272\u8c03\u6574\u6ee4\u955c",id:"\u989c\u8272\u8c03\u6574\u6ee4\u955c",level:2},{value:"\u8272\u5f69\u8c03\u8282\uff08eq\uff09",id:"\u8272\u5f69\u8c03\u8282eq",level:3},{value:"\u8272\u8c03\u8c03\u8282\uff08hue\uff09",id:"\u8272\u8c03\u8c03\u8282hue",level:3},{value:"\u989c\u8272\u66f2\u7ebf\uff08curves\uff09",id:"\u989c\u8272\u66f2\u7ebfcurves",level:3},{value:"\u989c\u8272\u6620\u5c04\uff08colorchannelmixer\uff09",id:"\u989c\u8272\u6620\u5c04colorchannelmixer",level:3},{value:"\u7279\u6548\u6ee4\u955c",id:"\u7279\u6548\u6ee4\u955c",level:2},{value:"\u6a21\u7cca\u6548\u679c",id:"\u6a21\u7cca\u6548\u679c",level:3},{value:"\u9510\u5316\u6548\u679c",id:"\u9510\u5316\u6548\u679c",level:3},{value:"\u964d\u566a",id:"\u964d\u566a",level:3},{value:"\u8fb9\u7f18\u68c0\u6d4b",id:"\u8fb9\u7f18\u68c0\u6d4b",level:3},{value:"\u8001\u7535\u5f71\u6548\u679c",id:"\u8001\u7535\u5f71\u6548\u679c",level:3},{value:"\u590d\u6742\u6ee4\u955c\u56fe",id:"\u590d\u6742\u6ee4\u955c\u56fe",level:2},{value:"\u6807\u7b7e\u7cfb\u7edf",id:"\u6807\u7b7e\u7cfb\u7edf",level:3},{value:"\u5206\u88c2\u548c\u5408\u5e76",id:"\u5206\u88c2\u548c\u5408\u5e76",level:3},{value:"\u6761\u4ef6\u6ee4\u955c",id:"\u6761\u4ef6\u6ee4\u955c",level:3},{value:"\u5e38\u7528\u97f3\u9891\u6ee4\u955c",id:"\u5e38\u7528\u97f3\u9891\u6ee4\u955c",level:2},{value:"\u6df7\u97f3\uff08amix\uff09",id:"\u6df7\u97f3amix",level:3},{value:"\u97f3\u91cf\u8c03\u8282",id:"\u97f3\u91cf\u8c03\u8282",level:3},{value:"\u91cd\u91c7\u6837\uff08aresample\uff09",id:"\u91cd\u91c7\u6837aresample",level:3},{value:"\u58f0\u9053\u6620\u5c04\uff08channelmap\uff09",id:"\u58f0\u9053\u6620\u5c04channelmap",level:3}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,t.R)(),...e.components};return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(n.header,{children:(0,p.jsx)(n.h1,{id:"ffmpeg-\u6ee4\u955c\u4f7f\u7528",children:"FFmpeg \u6ee4\u955c\u4f7f\u7528"})}),"\n",(0,p.jsx)(n.p,{children:"FFmpeg \u7684\u6ee4\u955c\u7cfb\u7edf\u975e\u5e38\u5f3a\u5927\uff0c\u53ef\u4ee5\u5b9e\u73b0\u5404\u79cd\u97f3\u89c6\u9891\u6548\u679c\u5904\u7406\u3002"}),"\n",(0,p.jsx)(n.h2,{id:"\u6ee4\u955c\u57fa\u7840",children:"\u6ee4\u955c\u57fa\u7840"}),"\n",(0,p.jsx)(n.h3,{id:"\u6ee4\u955c\u8bed\u6cd5",children:"\u6ee4\u955c\u8bed\u6cd5"}),"\n",(0,p.jsx)(n.pre,{children:(0,p.jsx)(n.code,{className:"language-bash",children:'# \u5355\u4e2a\u6ee4\u955c\nffmpeg -i input.mp4 -vf "\u6ee4\u955c\u540d=\u53c2\u6570" output.mp4\n\n# \u591a\u4e2a\u6ee4\u955c\uff08\u9017\u53f7\u5206\u9694\uff09\nffmpeg -i input.mp4 -vf "\u6ee4\u955c1,\u6ee4\u955c2,\u6ee4\u955c3" output.mp4\n\n# \u97f3\u9891\u6ee4\u955c\nffmpeg -i input.mp4 -af "\u6ee4\u955c\u540d=\u53c2\u6570" output.mp4\n\n# \u590d\u6742\u6ee4\u955c\u56fe\nffmpeg -i input.mp4 -filter_complex "\u6ee4\u955c\u56fe\u8868\u8fbe\u5f0f" output.mp4\n'})}),"\n",(0,p.jsx)(n.h3,{id:"\u67e5\u770b\u53ef\u7528\u6ee4\u955c",children:"\u67e5\u770b\u53ef\u7528\u6ee4\u955c"}),"\n",(0,p.jsx)(n.pre,{children:(0,p.jsx)(n.code,{className:"language-bash",children:"# \u5217\u51fa\u6240\u6709\u6ee4\u955c\nffmpeg -filters\n\n# \u67e5\u770b\u7279\u5b9a\u6ee4\u955c\u5e2e\u52a9\nffmpeg -h filter=scale\n"})}),"\n",(0,p.jsx)(n.h2,{id:"\u5e38\u7528\u89c6\u9891\u6ee4\u955c",children:"\u5e38\u7528\u89c6\u9891\u6ee4\u955c"}),"\n",(0,p.jsx)(n.h3,{id:"\u7f29\u653escale",children:"\u7f29\u653e\uff08scale\uff09"}),"\n",(0,p.jsx)(n.pre,{children:(0,p.jsx)(n.code,{className:"language-bash",children:'# \u6307\u5b9a\u5c3a\u5bf8\nffmpeg -i input.mp4 -vf "scale=1280:720" output.mp4\n\n# \u4fdd\u6301\u5bbd\u9ad8\u6bd4\nffmpeg -i input.mp4 -vf "scale=1280:-1" output.mp4\nffmpeg -i input.mp4 -vf "scale=-1:720" output.mp4\n\n# \u4f7f\u7528\u8868\u8fbe\u5f0f\nffmpeg -i input.mp4 -vf "scale=iw/2:ih/2" output.mp4\n\n# \u9ad8\u8d28\u91cf\u7f29\u653e\u7b97\u6cd5\nffmpeg -i input.mp4 -vf "scale=1280:720:flags=lanczos" output.mp4\n'})}),"\n",(0,p.jsx)(n.h3,{id:"\u88c1\u526acrop",children:"\u88c1\u526a\uff08crop\uff09"}),"\n",(0,p.jsx)(n.pre,{children:(0,p.jsx)(n.code,{className:"language-bash",children:'# \u88c1\u526a\u4e2d\u5fc3\u533a\u57df\nffmpeg -i input.mp4 -vf "crop=640:480" output.mp4\n\n# \u6307\u5b9a\u504f\u79fb\nffmpeg -i input.mp4 -vf "crop=640:480:100:50" output.mp4\n\n# \u88c1\u526a\u5c45\u4e2d\nffmpeg -i input.mp4 -vf "crop=640:480:(iw-640)/2:(ih-480)/2" output.mp4\n'})}),"\n",(0,p.jsx)(n.h3,{id:"\u586b\u5145pad",children:"\u586b\u5145\uff08pad\uff09"}),"\n",(0,p.jsx)(n.pre,{children:(0,p.jsx)(n.code,{className:"language-bash",children:'# \u6dfb\u52a0\u9ed1\u8fb9\nffmpeg -i input.mp4 -vf "pad=1920:1080:(ow-iw)/2:(oh-ih)/2" output.mp4\n\n# \u6307\u5b9a\u989c\u8272\nffmpeg -i input.mp4 -vf "pad=1920:1080:(ow-iw)/2:(oh-ih)/2:white" output.mp4\n'})}),"\n",(0,p.jsx)(n.h3,{id:"\u8986\u76d6overlay",children:"\u8986\u76d6\uff08overlay\uff09"}),"\n",(0,p.jsx)(n.pre,{children:(0,p.jsx)(n.code,{className:"language-bash",children:'# \u53f3\u4e0b\u89d2\u8986\u76d6\nffmpeg -i main.mp4 -i overlay.png \\\n    -filter_complex "[0:v][1:v]overlay=W-w-10:H-h-10" output.mp4\n\n# \u900f\u660e\u5ea6\u8c03\u8282\nffmpeg -i main.mp4 -i overlay.png \\\n    -filter_complex "[1:v]format=rgba,colorchannelmixer=aa=0.5[ov];[0:v][ov]overlay=10:10" \\\n    output.mp4\n'})}),"\n",(0,p.jsx)(n.h3,{id:"\u6587\u5b57\u7ed8\u5236drawtext",children:"\u6587\u5b57\u7ed8\u5236\uff08drawtext\uff09"}),"\n",(0,p.jsx)(n.pre,{children:(0,p.jsx)(n.code,{className:"language-bash",children:"# \u57fa\u7840\u6587\u5b57\nffmpeg -i input.mp4 -vf \\\n    \"drawtext=text='Hello World':fontsize=48:fontcolor=white:x=10:y=10\" \\\n    output.mp4\n\n# \u4f7f\u7528\u5b57\u4f53\u6587\u4ef6\nffmpeg -i input.mp4 -vf \\\n    \"drawtext=text='\u4f60\u597d\u4e16\u754c':fontfile=/path/to/font.ttf:fontsize=48:fontcolor=white:x=10:y=10\" \\\n    output.mp4\n\n# \u6dfb\u52a0\u80cc\u666f\u6846\nffmpeg -i input.mp4 -vf \\\n    \"drawtext=text='Hello':fontsize=48:fontcolor=white:box=1:boxcolor=black@0.5:boxborderw=5:x=10:y=10\" \\\n    output.mp4\n\n# \u52a8\u6001\u65f6\u95f4\u6233\nffmpeg -i input.mp4 -vf \\\n    \"drawtext=text='%{localtime}':fontsize=24:fontcolor=white:x=10:y=10\" \\\n    output.mp4\n"})}),"\n",(0,p.jsx)(n.h2,{id:"\u989c\u8272\u8c03\u6574\u6ee4\u955c",children:"\u989c\u8272\u8c03\u6574\u6ee4\u955c"}),"\n",(0,p.jsx)(n.h3,{id:"\u8272\u5f69\u8c03\u8282eq",children:"\u8272\u5f69\u8c03\u8282\uff08eq\uff09"}),"\n",(0,p.jsx)(n.pre,{children:(0,p.jsx)(n.code,{className:"language-bash",children:'# \u8c03\u6574\u4eae\u5ea6\u3001\u5bf9\u6bd4\u5ea6\u3001\u9971\u548c\u5ea6\nffmpeg -i input.mp4 -vf "eq=brightness=0.1:contrast=1.2:saturation=1.5" output.mp4\n\n# \u8c03\u6574\u4f3d\u9a6c\u503c\nffmpeg -i input.mp4 -vf "eq=gamma=1.5" output.mp4\n'})}),"\n",(0,p.jsx)(n.h3,{id:"\u8272\u8c03\u8c03\u8282hue",children:"\u8272\u8c03\u8c03\u8282\uff08hue\uff09"}),"\n",(0,p.jsx)(n.pre,{children:(0,p.jsx)(n.code,{className:"language-bash",children:'# \u8c03\u6574\u8272\u76f8\nffmpeg -i input.mp4 -vf "hue=h=90" output.mp4\n\n# \u8c03\u6574\u9971\u548c\u5ea6\nffmpeg -i input.mp4 -vf "hue=s=2" output.mp4\n'})}),"\n",(0,p.jsx)(n.h3,{id:"\u989c\u8272\u66f2\u7ebfcurves",children:"\u989c\u8272\u66f2\u7ebf\uff08curves\uff09"}),"\n",(0,p.jsx)(n.pre,{children:(0,p.jsx)(n.code,{className:"language-bash",children:"# \u589e\u52a0\u5bf9\u6bd4\u5ea6\nffmpeg -i input.mp4 -vf \"curves=preset=increase_contrast\" output.mp4\n\n# \u590d\u53e4\u6548\u679c\nffmpeg -i input.mp4 -vf \"curves=preset=vintage\" output.mp4\n\n# \u81ea\u5b9a\u4e49\u66f2\u7ebf\nffmpeg -i input.mp4 -vf \"curves=r='0/0 0.5/0.4 1/1':g='0/0 0.5/0.5 1/1':b='0/0 0.5/0.6 1/1'\" output.mp4\n"})}),"\n",(0,p.jsx)(n.h3,{id:"\u989c\u8272\u6620\u5c04colorchannelmixer",children:"\u989c\u8272\u6620\u5c04\uff08colorchannelmixer\uff09"}),"\n",(0,p.jsx)(n.pre,{children:(0,p.jsx)(n.code,{className:"language-bash",children:'# \u7070\u5ea6\u6548\u679c\nffmpeg -i input.mp4 -vf "colorchannelmixer=.3:.4:.3:0:.3:.4:.3:0:.3:.4:.3" output.mp4\n\n# \u68d5\u8910\u8272\u8c03\nffmpeg -i input.mp4 -vf "colorchannelmixer=.393:.769:.189:0:.349:.686:.168:0:.272:.534:.131" output.mp4\n'})}),"\n",(0,p.jsx)(n.h2,{id:"\u7279\u6548\u6ee4\u955c",children:"\u7279\u6548\u6ee4\u955c"}),"\n",(0,p.jsx)(n.h3,{id:"\u6a21\u7cca\u6548\u679c",children:"\u6a21\u7cca\u6548\u679c"}),"\n",(0,p.jsx)(n.pre,{children:(0,p.jsx)(n.code,{className:"language-bash",children:'# \u65b9\u6846\u6a21\u7cca\nffmpeg -i input.mp4 -vf "boxblur=5:1" output.mp4\n\n# \u9ad8\u65af\u6a21\u7cca\nffmpeg -i input.mp4 -vf "gblur=sigma=10" output.mp4\n'})}),"\n",(0,p.jsx)(n.h3,{id:"\u9510\u5316\u6548\u679c",children:"\u9510\u5316\u6548\u679c"}),"\n",(0,p.jsx)(n.pre,{children:(0,p.jsx)(n.code,{className:"language-bash",children:'# \u9510\u5316\nffmpeg -i input.mp4 -vf "unsharp=5:5:1.0:5:5:0.0" output.mp4\n'})}),"\n",(0,p.jsx)(n.h3,{id:"\u964d\u566a",children:"\u964d\u566a"}),"\n",(0,p.jsx)(n.pre,{children:(0,p.jsx)(n.code,{className:"language-bash",children:'# \u65f6\u57df\u964d\u566a\nffmpeg -i input.mp4 -vf "hqdn3d=4:4:6:6" output.mp4\n\n# \u7a7a\u57df\u964d\u566a\nffmpeg -i input.mp4 -vf "nlmeans=s=3:p=7:r=15" output.mp4\n'})}),"\n",(0,p.jsx)(n.h3,{id:"\u8fb9\u7f18\u68c0\u6d4b",children:"\u8fb9\u7f18\u68c0\u6d4b"}),"\n",(0,p.jsx)(n.pre,{children:(0,p.jsx)(n.code,{className:"language-bash",children:'# Sobel \u8fb9\u7f18\u68c0\u6d4b\nffmpeg -i input.mp4 -vf "edgedetect=mode=colormix:high=0" output.mp4\n'})}),"\n",(0,p.jsx)(n.h3,{id:"\u8001\u7535\u5f71\u6548\u679c",children:"\u8001\u7535\u5f71\u6548\u679c"}),"\n",(0,p.jsx)(n.pre,{children:(0,p.jsx)(n.code,{className:"language-bash",children:'# \u6dfb\u52a0\u566a\u70b9\u548c\u5212\u75d5\nffmpeg -i input.mp4 -vf \\\n    "noise=alls=20:allf=t+u,curves=preset=vintage,vignette" \\\n    output.mp4\n'})}),"\n",(0,p.jsx)(n.h2,{id:"\u590d\u6742\u6ee4\u955c\u56fe",children:"\u590d\u6742\u6ee4\u955c\u56fe"}),"\n",(0,p.jsx)(n.h3,{id:"\u6807\u7b7e\u7cfb\u7edf",children:"\u6807\u7b7e\u7cfb\u7edf"}),"\n",(0,p.jsx)(n.pre,{children:(0,p.jsx)(n.code,{className:"language-bash",children:'# \u4f7f\u7528\u6807\u7b7e\nffmpeg -i input1.mp4 -i input2.mp4 \\\n    -filter_complex "[0:v]scale=640:480[v0];[1:v]scale=640:480[v1];[v0][v1]hstack[out]" \\\n    -map "[out]" output.mp4\n'})}),"\n",(0,p.jsx)(n.h3,{id:"\u5206\u88c2\u548c\u5408\u5e76",children:"\u5206\u88c2\u548c\u5408\u5e76"}),"\n",(0,p.jsx)(n.pre,{children:(0,p.jsx)(n.code,{className:"language-bash",children:'# \u5206\u88c2\u6d41\nffmpeg -i input.mp4 \\\n    -filter_complex "[0:v]split=2[v1][v2];[v1]crop=iw/2:ih:0:0[left];[v2]crop=iw/2:ih:iw/2:0[right];[left][right]hstack" \\\n    output.mp4\n'})}),"\n",(0,p.jsx)(n.h3,{id:"\u6761\u4ef6\u6ee4\u955c",children:"\u6761\u4ef6\u6ee4\u955c"}),"\n",(0,p.jsx)(n.pre,{children:(0,p.jsx)(n.code,{className:"language-bash",children:"# \u6839\u636e\u65f6\u95f4\u5e94\u7528\u6548\u679c\nffmpeg -i input.mp4 \\\n    -vf \"drawtext=text='\u5f00\u59cb':enable='between(t,0,5)':fontsize=48:fontcolor=white:x=10:y=10\" \\\n    output.mp4\n"})}),"\n",(0,p.jsx)(n.h2,{id:"\u5e38\u7528\u97f3\u9891\u6ee4\u955c",children:"\u5e38\u7528\u97f3\u9891\u6ee4\u955c"}),"\n",(0,p.jsx)(n.h3,{id:"\u6df7\u97f3amix",children:"\u6df7\u97f3\uff08amix\uff09"}),"\n",(0,p.jsx)(n.pre,{children:(0,p.jsx)(n.code,{className:"language-bash",children:'ffmpeg -i audio1.mp3 -i audio2.mp3 \\\n    -filter_complex "[0:a][1:a]amix=inputs=2:duration=longest" \\\n    output.mp3\n'})}),"\n",(0,p.jsx)(n.h3,{id:"\u97f3\u91cf\u8c03\u8282",children:"\u97f3\u91cf\u8c03\u8282"}),"\n",(0,p.jsx)(n.pre,{children:(0,p.jsx)(n.code,{className:"language-bash",children:'# \u9759\u6001\u8c03\u8282\nffmpeg -i input.mp3 -af "volume=1.5" output.mp3\n\n# \u52a8\u6001\u8c03\u8282\nffmpeg -i input.mp3 -af "volume=\'if(lt(t,5),t/5,1)\':eval=frame" output.mp3\n'})}),"\n",(0,p.jsx)(n.h3,{id:"\u91cd\u91c7\u6837aresample",children:"\u91cd\u91c7\u6837\uff08aresample\uff09"}),"\n",(0,p.jsx)(n.pre,{children:(0,p.jsx)(n.code,{className:"language-bash",children:'ffmpeg -i input.mp3 -af "aresample=44100" output.mp3\n'})}),"\n",(0,p.jsx)(n.h3,{id:"\u58f0\u9053\u6620\u5c04channelmap",children:"\u58f0\u9053\u6620\u5c04\uff08channelmap\uff09"}),"\n",(0,p.jsx)(n.pre,{children:(0,p.jsx)(n.code,{className:"language-bash",children:'# \u5de6\u58f0\u9053\u590d\u5236\u5230\u53f3\u58f0\u9053\nffmpeg -i input.mp3 -af "channelmap=0|0" output.mp3\n'})})]})}function m(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,p.jsx)(n,{...e,children:(0,p.jsx)(c,{...e})}):c(e)}}}]);