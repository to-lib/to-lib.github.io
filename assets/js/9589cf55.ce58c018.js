"use strict";(globalThis.webpackChunkto_lib_github_io=globalThis.webpackChunkto_lib_github_io||[]).push([[82365],{15505:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>a,contentTitle:()=>s,default:()=>o,frontMatter:()=>c,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"c/multi-file","title":"\u591a\u6587\u4ef6\u7f16\u7a0b","description":"\u5927\u578b C \u9879\u76ee\u9700\u8981\u5c06\u4ee3\u7801\u62c6\u5206\u4e3a\u591a\u4e2a\u6587\u4ef6\uff0c\u5b9e\u73b0\u6a21\u5757\u5316\u8bbe\u8ba1\u3002","source":"@site/docs/c/multi-file.md","sourceDirName":"c","slug":"/c/multi-file","permalink":"/docs/c/multi-file","draft":false,"unlisted":false,"editUrl":"https://github.com/to-lib/to-lib.github.io/tree/main/docs/c/multi-file.md","tags":[],"version":"current","sidebarPosition":14,"frontMatter":{"sidebar_position":14,"title":"\u591a\u6587\u4ef6\u7f16\u7a0b"},"sidebar":"c","previous":{"title":"\u6570\u636e\u7ed3\u6784\u5b9e\u73b0","permalink":"/docs/c/data-structures"},"next":{"title":"\u5d4c\u5165\u5f0f\u7f16\u7a0b","permalink":"/docs/c/embedded"}}');var r=t(22714),l=t(48885);const c={sidebar_position:14,title:"\u591a\u6587\u4ef6\u7f16\u7a0b"},s="\u591a\u6587\u4ef6\u7f16\u7a0b",a={},d=[{value:"\u9879\u76ee\u7ed3\u6784",id:"\u9879\u76ee\u7ed3\u6784",level:2},{value:"\u5934\u6587\u4ef6",id:"\u5934\u6587\u4ef6",level:2},{value:"math_utils.h",id:"math_utilsh",level:3},{value:"string_utils.h",id:"string_utilsh",level:3},{value:"\u6e90\u6587\u4ef6",id:"\u6e90\u6587\u4ef6",level:2},{value:"math_utils.c",id:"math_utilsc",level:3},{value:"string_utils.c",id:"string_utilsc",level:3},{value:"main.c",id:"mainc",level:3},{value:"Makefile",id:"makefile",level:2},{value:"extern \u5173\u952e\u5b57",id:"extern-\u5173\u952e\u5b57",level:2},{value:"static \u5173\u952e\u5b57",id:"static-\u5173\u952e\u5b57",level:2},{value:"\u7f16\u8bd1\u547d\u4ee4",id:"\u7f16\u8bd1\u547d\u4ee4",level:2}];function u(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,l.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"\u591a\u6587\u4ef6\u7f16\u7a0b",children:"\u591a\u6587\u4ef6\u7f16\u7a0b"})}),"\n",(0,r.jsx)(e.p,{children:"\u5927\u578b C \u9879\u76ee\u9700\u8981\u5c06\u4ee3\u7801\u62c6\u5206\u4e3a\u591a\u4e2a\u6587\u4ef6\uff0c\u5b9e\u73b0\u6a21\u5757\u5316\u8bbe\u8ba1\u3002"}),"\n",(0,r.jsx)(e.h2,{id:"\u9879\u76ee\u7ed3\u6784",children:"\u9879\u76ee\u7ed3\u6784"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"project/\n\u251c\u2500\u2500 Makefile\n\u251c\u2500\u2500 include/\n\u2502   \u251c\u2500\u2500 math_utils.h\n\u2502   \u2514\u2500\u2500 string_utils.h\n\u251c\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 main.c\n\u2502   \u251c\u2500\u2500 math_utils.c\n\u2502   \u2514\u2500\u2500 string_utils.c\n\u2514\u2500\u2500 build/\n"})}),"\n",(0,r.jsx)(e.h2,{id:"\u5934\u6587\u4ef6",children:"\u5934\u6587\u4ef6"}),"\n",(0,r.jsx)(e.h3,{id:"math_utilsh",children:"math_utils.h"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-c",children:"#ifndef MATH_UTILS_H\n#define MATH_UTILS_H\n\n// \u51fd\u6570\u58f0\u660e\nint add(int a, int b);\nint subtract(int a, int b);\nint multiply(int a, int b);\ndouble divide(int a, int b);\n\n// \u5e38\u91cf\n#define PI 3.14159\n\n// \u7c7b\u578b\u5b9a\u4e49\ntypedef struct {\n    double x, y;\n} Point;\n\ndouble distance(Point a, Point b);\n\n#endif // MATH_UTILS_H\n"})}),"\n",(0,r.jsx)(e.h3,{id:"string_utilsh",children:"string_utils.h"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-c",children:"#ifndef STRING_UTILS_H\n#define STRING_UTILS_H\n\n#include <stddef.h>\n\n// \u5b57\u7b26\u4e32\u5de5\u5177\u51fd\u6570\nchar* str_reverse(char *str);\nchar* str_to_upper(char *str);\nchar* str_to_lower(char *str);\nint str_count_char(const char *str, char c);\n\n#endif // STRING_UTILS_H\n"})}),"\n",(0,r.jsx)(e.h2,{id:"\u6e90\u6587\u4ef6",children:"\u6e90\u6587\u4ef6"}),"\n",(0,r.jsx)(e.h3,{id:"math_utilsc",children:"math_utils.c"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-c",children:'#include "math_utils.h"\n#include <math.h>\n\nint add(int a, int b) { return a + b; }\nint subtract(int a, int b) { return a - b; }\nint multiply(int a, int b) { return a * b; }\n\ndouble divide(int a, int b) {\n    if (b == 0) return 0;\n    return (double)a / b;\n}\n\ndouble distance(Point a, Point b) {\n    double dx = b.x - a.x;\n    double dy = b.y - a.y;\n    return sqrt(dx*dx + dy*dy);\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"string_utilsc",children:"string_utils.c"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-c",children:'#include "string_utils.h"\n#include <string.h>\n#include <ctype.h>\n\nchar* str_reverse(char *str) {\n    int len = strlen(str);\n    for (int i = 0; i < len / 2; i++) {\n        char temp = str[i];\n        str[i] = str[len - 1 - i];\n        str[len - 1 - i] = temp;\n    }\n    return str;\n}\n\nchar* str_to_upper(char *str) {\n    for (char *p = str; *p; p++) {\n        *p = toupper(*p);\n    }\n    return str;\n}\n\nchar* str_to_lower(char *str) {\n    for (char *p = str; *p; p++) {\n        *p = tolower(*p);\n    }\n    return str;\n}\n\nint str_count_char(const char *str, char c) {\n    int count = 0;\n    while (*str) {\n        if (*str++ == c) count++;\n    }\n    return count;\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"mainc",children:"main.c"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-c",children:'#include <stdio.h>\n#include "math_utils.h"\n#include "string_utils.h"\n\nint main(void) {\n    // \u4f7f\u7528 math_utils\n    printf("10 + 5 = %d\\n", add(10, 5));\n    printf("10 / 3 = %.2f\\n", divide(10, 3));\n\n    Point a = {0, 0};\n    Point b = {3, 4};\n    printf("\u8ddd\u79bb: %.2f\\n", distance(a, b));\n\n    // \u4f7f\u7528 string_utils\n    char str[] = "Hello World";\n    printf("\u539f\u59cb: %s\\n", str);\n    printf("\u5927\u5199: %s\\n", str_to_upper(str));\n\n    char str2[] = "Hello World";\n    printf("\u53cd\u8f6c: %s\\n", str_reverse(str2));\n\n    return 0;\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"makefile",children:"Makefile"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-makefile",children:"CC = gcc\nCFLAGS = -Wall -Wextra -g -I./include\nLDFLAGS = -lm\n\nSRC_DIR = src\nBUILD_DIR = build\nSRCS = $(wildcard $(SRC_DIR)/*.c)\nOBJS = $(SRCS:$(SRC_DIR)/%.c=$(BUILD_DIR)/%.o)\nTARGET = $(BUILD_DIR)/program\n\nall: $(BUILD_DIR) $(TARGET)\n\n$(BUILD_DIR):\n\tmkdir -p $(BUILD_DIR)\n\n$(TARGET): $(OBJS)\n\t$(CC) $(OBJS) -o $@ $(LDFLAGS)\n\n$(BUILD_DIR)/%.o: $(SRC_DIR)/%.c\n\t$(CC) $(CFLAGS) -c $< -o $@\n\nclean:\n\trm -rf $(BUILD_DIR)\n\n.PHONY: all clean\n"})}),"\n",(0,r.jsx)(e.h2,{id:"extern-\u5173\u952e\u5b57",children:"extern \u5173\u952e\u5b57"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-c",children:'// config.c - \u5b9a\u4e49\u5168\u5c40\u53d8\u91cf\nint global_count = 0;\nconst char *app_name = "MyApp";\n\n// main.c - \u4f7f\u7528 extern \u58f0\u660e\nextern int global_count;\nextern const char *app_name;\n\nint main(void) {\n    printf("%s: count = %d\\n", app_name, global_count);\n    global_count++;\n    return 0;\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"static-\u5173\u952e\u5b57",children:"static \u5173\u952e\u5b57"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-c",children:'// file1.c\nstatic int private_var = 10;  // \u53ea\u5728\u672c\u6587\u4ef6\u53ef\u89c1\n\nstatic void helper(void) {    // \u53ea\u5728\u672c\u6587\u4ef6\u53ef\u89c1\n    printf("helper\\n");\n}\n\nvoid public_func(void) {      // \u53ef\u88ab\u5176\u4ed6\u6587\u4ef6\u8c03\u7528\n    helper();\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"\u7f16\u8bd1\u547d\u4ee4",children:"\u7f16\u8bd1\u547d\u4ee4"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# \u5206\u6b65\u7f16\u8bd1\ngcc -c -I./include src/math_utils.c -o build/math_utils.o\ngcc -c -I./include src/string_utils.c -o build/string_utils.o\ngcc -c -I./include src/main.c -o build/main.o\n\n# \u94fe\u63a5\ngcc build/*.o -o build/program -lm\n\n# \u6216\u4e00\u6b65\u5b8c\u6210\ngcc -I./include src/*.c -o program -lm\n\n# \u4f7f\u7528 Makefile\nmake\n./build/program\nmake clean\n"})}),"\n",(0,r.jsx)(e.p,{children:"\u591a\u6587\u4ef6\u7f16\u7a0b\u662f\u6784\u5efa\u5927\u578b\u9879\u76ee\u7684\u57fa\u7840\uff01"})]})}function o(n={}){const{wrapper:e}={...(0,l.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(u,{...n})}):u(n)}},48885:(n,e,t)=>{t.d(e,{R:()=>c,x:()=>s});var i=t(99378);const r={},l=i.createContext(r);function c(n){const e=i.useContext(l);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:c(n.components),i.createElement(l.Provider,{value:e},n.children)}}}]);