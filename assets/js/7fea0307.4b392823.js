"use strict";(globalThis.webpackChunkto_lib_github_io=globalThis.webpackChunkto_lib_github_io||[]).push([[54722],{38934:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>j,frontMatter:()=>l,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"mybatis/annotations","title":"MyBatis \u6ce8\u89e3\u6620\u5c04","description":"MyBatis \u652f\u6301\u4f7f\u7528\u6ce8\u89e3\u6765\u5b9a\u4e49 SQL \u6620\u5c04\uff0c\u65e0\u9700\u7f16\u5199 XML \u6587\u4ef6\u3002\u672c\u7ae0\u4ecb\u7ecd\u5e38\u7528\u6ce8\u89e3\u53ca\u5176\u4f7f\u7528\u65b9\u6cd5\u3002","source":"@site/docs/mybatis/annotations.md","sourceDirName":"mybatis","slug":"/mybatis/annotations","permalink":"/docs/mybatis/annotations","draft":false,"unlisted":false,"editUrl":"https://github.com/to-lib/to-lib.github.io/tree/main/docs/mybatis/annotations.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6,"title":"MyBatis \u6ce8\u89e3\u6620\u5c04"},"sidebar":"mybatis","previous":{"title":"MyBatis \u52a8\u6001 SQL","permalink":"/docs/mybatis/dynamic-sql"},"next":{"title":"MyBatis \u7f13\u5b58\u673a\u5236","permalink":"/docs/mybatis/caching"}}');var i=r(22714),d=r(48885);const l={sidebar_position:6,title:"MyBatis \u6ce8\u89e3\u6620\u5c04"},t="MyBatis \u6ce8\u89e3\u6620\u5c04",c={},a=[{value:"\u6ce8\u89e3\u6982\u89c8",id:"\u6ce8\u89e3\u6982\u89c8",level:2},{value:"CRUD \u6ce8\u89e3",id:"crud-\u6ce8\u89e3",level:3},{value:"\u7ed3\u679c\u6620\u5c04\u6ce8\u89e3",id:"\u7ed3\u679c\u6620\u5c04\u6ce8\u89e3",level:3},{value:"\u52a8\u6001 SQL \u6ce8\u89e3",id:"\u52a8\u6001-sql-\u6ce8\u89e3",level:3},{value:"\u5176\u4ed6\u6ce8\u89e3",id:"\u5176\u4ed6\u6ce8\u89e3",level:3},{value:"\u57fa\u672c CRUD \u6ce8\u89e3",id:"\u57fa\u672c-crud-\u6ce8\u89e3",level:2},{value:"@Select \u67e5\u8be2",id:"select-\u67e5\u8be2",level:3},{value:"@Insert \u63d2\u5165",id:"insert-\u63d2\u5165",level:3},{value:"@Update \u66f4\u65b0",id:"update-\u66f4\u65b0",level:3},{value:"@Delete \u5220\u9664",id:"delete-\u5220\u9664",level:3},{value:"@Options \u914d\u7f6e\u9009\u9879",id:"options-\u914d\u7f6e\u9009\u9879",level:2},{value:"Options \u5c5e\u6027",id:"options-\u5c5e\u6027",level:3},{value:"@Results \u7ed3\u679c\u6620\u5c04",id:"results-\u7ed3\u679c\u6620\u5c04",level:2},{value:"\u57fa\u672c\u6620\u5c04",id:"\u57fa\u672c\u6620\u5c04",level:3},{value:"@Result \u5c5e\u6027",id:"result-\u5c5e\u6027",level:3},{value:"\u5173\u8054\u6620\u5c04",id:"\u5173\u8054\u6620\u5c04",level:2},{value:"@One \u4e00\u5bf9\u4e00",id:"one-\u4e00\u5bf9\u4e00",level:3},{value:"@Many \u4e00\u5bf9\u591a",id:"many-\u4e00\u5bf9\u591a",level:3},{value:"FetchType \u52a0\u8f7d\u7c7b\u578b",id:"fetchtype-\u52a0\u8f7d\u7c7b\u578b",level:3},{value:"@Provider \u52a8\u6001 SQL",id:"provider-\u52a8\u6001-sql",level:2},{value:"@SelectProvider",id:"selectprovider",level:3},{value:"@InsertProvider",id:"insertprovider",level:3},{value:"@UpdateProvider",id:"updateprovider",level:3},{value:"@DeleteProvider",id:"deleteprovider",level:3},{value:"SQL \u6784\u5efa\u5668",id:"sql-\u6784\u5efa\u5668",level:3},{value:"SQL \u7c7b\u65b9\u6cd5",id:"sql-\u7c7b\u65b9\u6cd5",level:3},{value:"@Param \u53c2\u6570\u6ce8\u89e3",id:"param-\u53c2\u6570\u6ce8\u89e3",level:2},{value:"\u811a\u672c\u6a21\u5f0f",id:"\u811a\u672c\u6a21\u5f0f",level:2},{value:"\u7f13\u5b58\u6ce8\u89e3",id:"\u7f13\u5b58\u6ce8\u89e3",level:2},{value:"@CacheNamespace",id:"cachenamespace",level:3},{value:"@CacheNamespaceRef",id:"cachenamespaceref",level:3},{value:"XML vs \u6ce8\u89e3\u5bf9\u6bd4",id:"xml-vs-\u6ce8\u89e3\u5bf9\u6bd4",level:2},{value:"\u4f7f\u7528\u5efa\u8bae",id:"\u4f7f\u7528\u5efa\u8bae",level:3},{value:"\u5b8c\u6574\u793a\u4f8b",id:"\u5b8c\u6574\u793a\u4f8b",level:2},{value:"\u76f8\u5173\u94fe\u63a5",id:"\u76f8\u5173\u94fe\u63a5",level:2}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"mybatis-\u6ce8\u89e3\u6620\u5c04",children:"MyBatis \u6ce8\u89e3\u6620\u5c04"})}),"\n",(0,i.jsx)(n.p,{children:"MyBatis \u652f\u6301\u4f7f\u7528\u6ce8\u89e3\u6765\u5b9a\u4e49 SQL \u6620\u5c04\uff0c\u65e0\u9700\u7f16\u5199 XML \u6587\u4ef6\u3002\u672c\u7ae0\u4ecb\u7ecd\u5e38\u7528\u6ce8\u89e3\u53ca\u5176\u4f7f\u7528\u65b9\u6cd5\u3002"}),"\n",(0,i.jsx)(n.h2,{id:"\u6ce8\u89e3\u6982\u89c8",children:"\u6ce8\u89e3\u6982\u89c8"}),"\n",(0,i.jsx)(n.h3,{id:"crud-\u6ce8\u89e3",children:"CRUD \u6ce8\u89e3"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\u6ce8\u89e3"}),(0,i.jsx)(n.th,{children:"\u63cf\u8ff0"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"@Select"})}),(0,i.jsx)(n.td,{children:"\u67e5\u8be2\u8bed\u53e5"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"@Insert"})}),(0,i.jsx)(n.td,{children:"\u63d2\u5165\u8bed\u53e5"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"@Update"})}),(0,i.jsx)(n.td,{children:"\u66f4\u65b0\u8bed\u53e5"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"@Delete"})}),(0,i.jsx)(n.td,{children:"\u5220\u9664\u8bed\u53e5"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"\u7ed3\u679c\u6620\u5c04\u6ce8\u89e3",children:"\u7ed3\u679c\u6620\u5c04\u6ce8\u89e3"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\u6ce8\u89e3"}),(0,i.jsx)(n.th,{children:"\u63cf\u8ff0"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"@Results"})}),(0,i.jsx)(n.td,{children:"\u7ed3\u679c\u6620\u5c04\u96c6\u5408"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"@Result"})}),(0,i.jsx)(n.td,{children:"\u5355\u4e2a\u5b57\u6bb5\u6620\u5c04"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"@One"})}),(0,i.jsx)(n.td,{children:"\u4e00\u5bf9\u4e00\u5173\u8054"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"@Many"})}),(0,i.jsx)(n.td,{children:"\u4e00\u5bf9\u591a\u5173\u8054"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"@ResultMap"})}),(0,i.jsx)(n.td,{children:"\u5f15\u7528 XML \u4e2d\u7684 resultMap"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"\u52a8\u6001-sql-\u6ce8\u89e3",children:"\u52a8\u6001 SQL \u6ce8\u89e3"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\u6ce8\u89e3"}),(0,i.jsx)(n.th,{children:"\u63cf\u8ff0"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"@SelectProvider"})}),(0,i.jsx)(n.td,{children:"\u52a8\u6001\u67e5\u8be2 SQL"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"@InsertProvider"})}),(0,i.jsx)(n.td,{children:"\u52a8\u6001\u63d2\u5165 SQL"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"@UpdateProvider"})}),(0,i.jsx)(n.td,{children:"\u52a8\u6001\u66f4\u65b0 SQL"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"@DeleteProvider"})}),(0,i.jsx)(n.td,{children:"\u52a8\u6001\u5220\u9664 SQL"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"\u5176\u4ed6\u6ce8\u89e3",children:"\u5176\u4ed6\u6ce8\u89e3"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\u6ce8\u89e3"}),(0,i.jsx)(n.th,{children:"\u63cf\u8ff0"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"@Options"})}),(0,i.jsx)(n.td,{children:"\u914d\u7f6e\u9009\u9879\uff08\u4e3b\u952e\u3001\u8d85\u65f6\u7b49\uff09"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"@Param"})}),(0,i.jsx)(n.td,{children:"\u53c2\u6570\u547d\u540d"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"@MapKey"})}),(0,i.jsx)(n.td,{children:"Map \u7ed3\u679c\u7684 key"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"@Flush"})}),(0,i.jsx)(n.td,{children:"\u5237\u65b0\u8bed\u53e5"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"@CacheNamespace"})}),(0,i.jsx)(n.td,{children:"\u7f13\u5b58\u914d\u7f6e"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"\u57fa\u672c-crud-\u6ce8\u89e3",children:"\u57fa\u672c CRUD \u6ce8\u89e3"}),"\n",(0,i.jsx)(n.h3,{id:"select-\u67e5\u8be2",children:"@Select \u67e5\u8be2"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'public interface UserMapper {\n    \n    // \u7b80\u5355\u67e5\u8be2\n    @Select("SELECT * FROM user WHERE id = #{id}")\n    User selectById(Long id);\n    \n    // \u67e5\u8be2\u5217\u8868\n    @Select("SELECT * FROM user")\n    List<User> selectAll();\n    \n    // \u6761\u4ef6\u67e5\u8be2\n    @Select("SELECT * FROM user WHERE name = #{name} AND age = #{age}")\n    List<User> selectByNameAndAge(@Param("name") String name, \n                                   @Param("age") Integer age);\n    \n    // \u6a21\u7cca\u67e5\u8be2\n    @Select("SELECT * FROM user WHERE name LIKE CONCAT(\'%\', #{name}, \'%\')")\n    List<User> selectByNameLike(String name);\n    \n    // \u8fd4\u56de Map\n    @Select("SELECT * FROM user WHERE id = #{id}")\n    Map<String, Object> selectByIdAsMap(Long id);\n    \n    // \u8fd4\u56de Map \u96c6\u5408\uff0c\u4ee5 id \u4e3a key\n    @Select("SELECT * FROM user")\n    @MapKey("id")\n    Map<Long, User> selectAllAsMap();\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"insert-\u63d2\u5165",children:"@Insert \u63d2\u5165"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'public interface UserMapper {\n    \n    // \u7b80\u5355\u63d2\u5165\n    @Insert("INSERT INTO user(name, email, age) VALUES(#{name}, #{email}, #{age})")\n    int insert(User user);\n    \n    // \u83b7\u53d6\u81ea\u589e\u4e3b\u952e\n    @Insert("INSERT INTO user(name, email, age) VALUES(#{name}, #{email}, #{age})")\n    @Options(useGeneratedKeys = true, keyProperty = "id")\n    int insertWithKey(User user);\n    \n    // \u4f7f\u7528 SelectKey\uff08Oracle \u5e8f\u5217\uff09\n    @Insert("INSERT INTO user(id, name, email) VALUES(#{id}, #{name}, #{email})")\n    @SelectKey(statement = "SELECT user_seq.NEXTVAL FROM DUAL", \n               keyProperty = "id", before = true, resultType = Long.class)\n    int insertWithSequence(User user);\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"update-\u66f4\u65b0",children:"@Update \u66f4\u65b0"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'public interface UserMapper {\n    \n    // \u7b80\u5355\u66f4\u65b0\n    @Update("UPDATE user SET name = #{name}, email = #{email} WHERE id = #{id}")\n    int update(User user);\n    \n    // \u90e8\u5206\u66f4\u65b0\n    @Update("UPDATE user SET name = #{name} WHERE id = #{id}")\n    int updateName(@Param("id") Long id, @Param("name") String name);\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"delete-\u5220\u9664",children:"@Delete \u5220\u9664"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'public interface UserMapper {\n    \n    // \u7b80\u5355\u5220\u9664\n    @Delete("DELETE FROM user WHERE id = #{id}")\n    int deleteById(Long id);\n    \n    // \u6761\u4ef6\u5220\u9664\n    @Delete("DELETE FROM user WHERE age < #{age}")\n    int deleteByAgeLessThan(Integer age);\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"options-\u914d\u7f6e\u9009\u9879",children:"@Options \u914d\u7f6e\u9009\u9879"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"@Options"})," \u7528\u4e8e\u914d\u7f6e\u8bed\u53e5\u7684\u5404\u79cd\u9009\u9879\u3002"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'public interface UserMapper {\n    \n    @Insert("INSERT INTO user(name, email) VALUES(#{name}, #{email})")\n    @Options(\n        useGeneratedKeys = true,    // \u4f7f\u7528\u81ea\u589e\u4e3b\u952e\n        keyProperty = "id",         // \u4e3b\u952e\u5c5e\u6027\u540d\n        keyColumn = "id",           // \u4e3b\u952e\u5217\u540d\n        timeout = 30,               // \u8d85\u65f6\u65f6\u95f4\uff08\u79d2\uff09\n        flushCache = Options.FlushCachePolicy.TRUE,  // \u5237\u65b0\u7f13\u5b58\n        useCache = false,           // \u4e0d\u4f7f\u7528\u7f13\u5b58\n        fetchSize = 100,            // \u6bcf\u6b21\u83b7\u53d6\u8bb0\u5f55\u6570\n        statementType = StatementType.PREPARED  // \u8bed\u53e5\u7c7b\u578b\n    )\n    int insert(User user);\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"options-\u5c5e\u6027",children:"Options \u5c5e\u6027"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\u5c5e\u6027"}),(0,i.jsx)(n.th,{children:"\u63cf\u8ff0"}),(0,i.jsx)(n.th,{children:"\u9ed8\u8ba4\u503c"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"useGeneratedKeys"})}),(0,i.jsx)(n.td,{children:"\u4f7f\u7528\u81ea\u589e\u4e3b\u952e"}),(0,i.jsx)(n.td,{children:"false"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"keyProperty"})}),(0,i.jsx)(n.td,{children:"\u4e3b\u952e\u5c5e\u6027\u540d"}),(0,i.jsx)(n.td,{children:"-"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"keyColumn"})}),(0,i.jsx)(n.td,{children:"\u4e3b\u952e\u5217\u540d"}),(0,i.jsx)(n.td,{children:"-"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"timeout"})}),(0,i.jsx)(n.td,{children:"\u8d85\u65f6\u65f6\u95f4\uff08\u79d2\uff09"}),(0,i.jsx)(n.td,{children:"-1\uff08\u65e0\u9650\u5236\uff09"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"flushCache"})}),(0,i.jsx)(n.td,{children:"\u5237\u65b0\u7f13\u5b58\u7b56\u7565"}),(0,i.jsx)(n.td,{children:"DEFAULT"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"useCache"})}),(0,i.jsx)(n.td,{children:"\u4f7f\u7528\u4e8c\u7ea7\u7f13\u5b58"}),(0,i.jsx)(n.td,{children:"true"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"fetchSize"})}),(0,i.jsx)(n.td,{children:"\u6bcf\u6b21\u83b7\u53d6\u8bb0\u5f55\u6570"}),(0,i.jsx)(n.td,{children:"-1"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"statementType"})}),(0,i.jsx)(n.td,{children:"\u8bed\u53e5\u7c7b\u578b"}),(0,i.jsx)(n.td,{children:"PREPARED"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"results-\u7ed3\u679c\u6620\u5c04",children:"@Results \u7ed3\u679c\u6620\u5c04"}),"\n",(0,i.jsx)(n.h3,{id:"\u57fa\u672c\u6620\u5c04",children:"\u57fa\u672c\u6620\u5c04"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'public interface UserMapper {\n    \n    @Select("SELECT id, user_name, user_email, user_age FROM user WHERE id = #{id}")\n    @Results(id = "userResultMap", value = {\n        @Result(property = "id", column = "id", id = true),\n        @Result(property = "name", column = "user_name"),\n        @Result(property = "email", column = "user_email"),\n        @Result(property = "age", column = "user_age")\n    })\n    User selectById(Long id);\n    \n    // \u590d\u7528 resultMap\n    @Select("SELECT id, user_name, user_email, user_age FROM user")\n    @ResultMap("userResultMap")\n    List<User> selectAll();\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"result-\u5c5e\u6027",children:"@Result \u5c5e\u6027"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\u5c5e\u6027"}),(0,i.jsx)(n.th,{children:"\u63cf\u8ff0"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"property"})}),(0,i.jsx)(n.td,{children:"Java \u5c5e\u6027\u540d"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"column"})}),(0,i.jsx)(n.td,{children:"\u6570\u636e\u5e93\u5217\u540d"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"id"})}),(0,i.jsx)(n.td,{children:"\u662f\u5426\u4e3a\u4e3b\u952e"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"javaType"})}),(0,i.jsx)(n.td,{children:"Java \u7c7b\u578b"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"jdbcType"})}),(0,i.jsx)(n.td,{children:"JDBC \u7c7b\u578b"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"typeHandler"})}),(0,i.jsx)(n.td,{children:"\u7c7b\u578b\u5904\u7406\u5668"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"one"})}),(0,i.jsx)(n.td,{children:"\u4e00\u5bf9\u4e00\u5173\u8054"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"many"})}),(0,i.jsx)(n.td,{children:"\u4e00\u5bf9\u591a\u5173\u8054"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"\u5173\u8054\u6620\u5c04",children:"\u5173\u8054\u6620\u5c04"}),"\n",(0,i.jsx)(n.h3,{id:"one-\u4e00\u5bf9\u4e00",children:"@One \u4e00\u5bf9\u4e00"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'public interface OrderMapper {\n    \n    // \u5d4c\u5957\u67e5\u8be2\u65b9\u5f0f\n    @Select("SELECT * FROM orders WHERE id = #{id}")\n    @Results({\n        @Result(property = "id", column = "id", id = true),\n        @Result(property = "orderNo", column = "order_no"),\n        @Result(property = "amount", column = "amount"),\n        @Result(property = "user", column = "user_id",\n                one = @One(select = "com.example.mapper.UserMapper.selectById",\n                          fetchType = FetchType.LAZY))\n    })\n    Order selectById(Long id);\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"many-\u4e00\u5bf9\u591a",children:"@Many \u4e00\u5bf9\u591a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'public interface UserMapper {\n    \n    // \u5d4c\u5957\u67e5\u8be2\u65b9\u5f0f\n    @Select("SELECT * FROM user WHERE id = #{id}")\n    @Results({\n        @Result(property = "id", column = "id", id = true),\n        @Result(property = "name", column = "name"),\n        @Result(property = "orders", column = "id",\n                many = @Many(select = "com.example.mapper.OrderMapper.selectByUserId",\n                            fetchType = FetchType.LAZY))\n    })\n    User selectWithOrders(Long id);\n}\n\npublic interface OrderMapper {\n    \n    @Select("SELECT * FROM orders WHERE user_id = #{userId}")\n    List<Order> selectByUserId(Long userId);\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"fetchtype-\u52a0\u8f7d\u7c7b\u578b",children:"FetchType \u52a0\u8f7d\u7c7b\u578b"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\u7c7b\u578b"}),(0,i.jsx)(n.th,{children:"\u63cf\u8ff0"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"FetchType.DEFAULT"})}),(0,i.jsx)(n.td,{children:"\u4f7f\u7528\u5168\u5c40\u914d\u7f6e"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"FetchType.LAZY"})}),(0,i.jsx)(n.td,{children:"\u5ef6\u8fdf\u52a0\u8f7d"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"FetchType.EAGER"})}),(0,i.jsx)(n.td,{children:"\u7acb\u5373\u52a0\u8f7d"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"provider-\u52a8\u6001-sql",children:"@Provider \u52a8\u6001 SQL"}),"\n",(0,i.jsx)(n.p,{children:"Provider \u6ce8\u89e3\u7528\u4e8e\u52a8\u6001\u751f\u6210 SQL\uff0c\u9002\u5408\u590d\u6742\u7684\u52a8\u6001\u67e5\u8be2\u3002"}),"\n",(0,i.jsx)(n.h3,{id:"selectprovider",children:"@SelectProvider"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'public interface UserMapper {\n    \n    @SelectProvider(type = UserSqlProvider.class, method = "selectByCondition")\n    List<User> selectByCondition(UserQuery query);\n}\n\npublic class UserSqlProvider {\n    \n    public String selectByCondition(UserQuery query) {\n        return new SQL() {{\n            SELECT("*");\n            FROM("user");\n            if (query.getName() != null) {\n                WHERE("name LIKE CONCAT(\'%\', #{name}, \'%\')");\n            }\n            if (query.getEmail() != null) {\n                WHERE("email = #{email}");\n            }\n            if (query.getMinAge() != null) {\n                WHERE("age >= #{minAge}");\n            }\n            if (query.getMaxAge() != null) {\n                WHERE("age <= #{maxAge}");\n            }\n            ORDER_BY("create_time DESC");\n        }}.toString();\n    }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"insertprovider",children:"@InsertProvider"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'public interface UserMapper {\n    \n    @InsertProvider(type = UserSqlProvider.class, method = "insertSelective")\n    @Options(useGeneratedKeys = true, keyProperty = "id")\n    int insertSelective(User user);\n}\n\npublic class UserSqlProvider {\n    \n    public String insertSelective(User user) {\n        return new SQL() {{\n            INSERT_INTO("user");\n            if (user.getName() != null) {\n                VALUES("name", "#{name}");\n            }\n            if (user.getEmail() != null) {\n                VALUES("email", "#{email}");\n            }\n            if (user.getAge() != null) {\n                VALUES("age", "#{age}");\n            }\n            VALUES("create_time", "NOW()");\n        }}.toString();\n    }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"updateprovider",children:"@UpdateProvider"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'public interface UserMapper {\n    \n    @UpdateProvider(type = UserSqlProvider.class, method = "updateSelective")\n    int updateSelective(User user);\n}\n\npublic class UserSqlProvider {\n    \n    public String updateSelective(User user) {\n        return new SQL() {{\n            UPDATE("user");\n            if (user.getName() != null) {\n                SET("name = #{name}");\n            }\n            if (user.getEmail() != null) {\n                SET("email = #{email}");\n            }\n            if (user.getAge() != null) {\n                SET("age = #{age}");\n            }\n            SET("update_time = NOW()");\n            WHERE("id = #{id}");\n        }}.toString();\n    }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"deleteprovider",children:"@DeleteProvider"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'public interface UserMapper {\n    \n    @DeleteProvider(type = UserSqlProvider.class, method = "deleteByIds")\n    int deleteByIds(@Param("ids") List<Long> ids);\n}\n\npublic class UserSqlProvider {\n    \n    public String deleteByIds(@Param("ids") List<Long> ids) {\n        StringBuilder sql = new StringBuilder("DELETE FROM user WHERE id IN (");\n        for (int i = 0; i < ids.size(); i++) {\n            if (i > 0) sql.append(",");\n            sql.append("#{ids[").append(i).append("]}");\n        }\n        sql.append(")");\n        return sql.toString();\n    }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"sql-\u6784\u5efa\u5668",children:"SQL \u6784\u5efa\u5668"}),"\n",(0,i.jsxs)(n.p,{children:["MyBatis \u63d0\u4f9b ",(0,i.jsx)(n.code,{children:"SQL"})," \u7c7b\u6765\u6784\u5efa SQL \u8bed\u53e5\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'public class UserSqlProvider {\n    \n    public String buildSelectSql(UserQuery query) {\n        SQL sql = new SQL();\n        sql.SELECT("id", "name", "email", "age");\n        sql.FROM("user");\n        \n        if (query.getName() != null) {\n            sql.WHERE("name = #{name}");\n        }\n        if (query.getStatus() != null) {\n            sql.WHERE("status = #{status}");\n        }\n        \n        sql.ORDER_BY("create_time DESC");\n        \n        return sql.toString();\n    }\n    \n    // \u4f7f\u7528 Lambda \u98ce\u683c\n    public String buildSelectSqlLambda(UserQuery query) {\n        return new SQL() {{\n            SELECT("*");\n            FROM("user");\n            WHERE("status = 1");\n            if (query.getName() != null) {\n                AND();\n                WHERE("name = #{name}");\n            }\n            ORDER_BY("id DESC");\n        }}.toString();\n    }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"sql-\u7c7b\u65b9\u6cd5",children:"SQL \u7c7b\u65b9\u6cd5"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\u65b9\u6cd5"}),(0,i.jsx)(n.th,{children:"\u63cf\u8ff0"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"SELECT(String...)"})}),(0,i.jsx)(n.td,{children:"SELECT \u5b50\u53e5"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"SELECT_DISTINCT(String...)"})}),(0,i.jsx)(n.td,{children:"SELECT DISTINCT"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"FROM(String...)"})}),(0,i.jsx)(n.td,{children:"FROM \u5b50\u53e5"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"JOIN(String)"})}),(0,i.jsx)(n.td,{children:"JOIN"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"INNER_JOIN(String)"})}),(0,i.jsx)(n.td,{children:"INNER JOIN"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"LEFT_OUTER_JOIN(String)"})}),(0,i.jsx)(n.td,{children:"LEFT JOIN"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"RIGHT_OUTER_JOIN(String)"})}),(0,i.jsx)(n.td,{children:"RIGHT JOIN"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"WHERE(String)"})}),(0,i.jsx)(n.td,{children:"WHERE \u6761\u4ef6"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"OR()"})}),(0,i.jsx)(n.td,{children:"OR \u8fde\u63a5"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"AND()"})}),(0,i.jsx)(n.td,{children:"AND \u8fde\u63a5"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"GROUP_BY(String...)"})}),(0,i.jsx)(n.td,{children:"GROUP BY"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"HAVING(String)"})}),(0,i.jsx)(n.td,{children:"HAVING"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"ORDER_BY(String...)"})}),(0,i.jsx)(n.td,{children:"ORDER BY"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"LIMIT(String)"})}),(0,i.jsx)(n.td,{children:"LIMIT"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"OFFSET(String)"})}),(0,i.jsx)(n.td,{children:"OFFSET"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"INSERT_INTO(String)"})}),(0,i.jsx)(n.td,{children:"INSERT INTO"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"VALUES(String, String)"})}),(0,i.jsx)(n.td,{children:"VALUES"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"INTO_COLUMNS(String...)"})}),(0,i.jsx)(n.td,{children:"\u63d2\u5165\u5217"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"INTO_VALUES(String...)"})}),(0,i.jsx)(n.td,{children:"\u63d2\u5165\u503c"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"UPDATE(String)"})}),(0,i.jsx)(n.td,{children:"UPDATE"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"SET(String)"})}),(0,i.jsx)(n.td,{children:"SET"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"DELETE_FROM(String)"})}),(0,i.jsx)(n.td,{children:"DELETE FROM"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"param-\u53c2\u6570\u6ce8\u89e3",children:"@Param \u53c2\u6570\u6ce8\u89e3"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"@Param"})," \u7528\u4e8e\u7ed9\u53c2\u6570\u547d\u540d\uff0c\u5728\u591a\u53c2\u6570\u65f6\u5fc5\u987b\u4f7f\u7528\u3002"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'public interface UserMapper {\n    \n    // \u5355\u53c2\u6570\u53ef\u4ee5\u4e0d\u7528 @Param\n    @Select("SELECT * FROM user WHERE id = #{id}")\n    User selectById(Long id);\n    \n    // \u591a\u53c2\u6570\u5fc5\u987b\u4f7f\u7528 @Param\n    @Select("SELECT * FROM user WHERE name = #{name} AND age = #{age}")\n    List<User> selectByNameAndAge(@Param("name") String name, \n                                   @Param("age") Integer age);\n    \n    // \u5bf9\u8c61\u53c2\u6570 + \u5176\u4ed6\u53c2\u6570\n    @Update("UPDATE user SET name = #{user.name} WHERE id = #{id}")\n    int updateName(@Param("id") Long id, @Param("user") User user);\n    \n    // \u96c6\u5408\u53c2\u6570\n    @Select("<script>" +\n            "SELECT * FROM user WHERE id IN " +\n            "<foreach collection=\'ids\' item=\'id\' open=\'(\' separator=\',\' close=\')\'>" +\n            "#{id}" +\n            "</foreach>" +\n            "<\/script>")\n    List<User> selectByIds(@Param("ids") List<Long> ids);\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"\u811a\u672c\u6a21\u5f0f",children:"\u811a\u672c\u6a21\u5f0f"}),"\n",(0,i.jsxs)(n.p,{children:["\u4f7f\u7528 ",(0,i.jsx)(n.code,{children:"<script>"})," \u6807\u7b7e\u53ef\u4ee5\u5728\u6ce8\u89e3\u4e2d\u4f7f\u7528\u52a8\u6001 SQL \u6807\u7b7e\u3002"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'public interface UserMapper {\n    \n    // \u52a8\u6001\u6761\u4ef6\u67e5\u8be2\n    @Select("<script>" +\n            "SELECT * FROM user" +\n            "<where>" +\n            "  <if test=\'name != null\'>AND name = #{name}</if>" +\n            "  <if test=\'email != null\'>AND email = #{email}</if>" +\n            "  <if test=\'age != null\'>AND age = #{age}</if>" +\n            "</where>" +\n            "<\/script>")\n    List<User> selectByCondition(UserQuery query);\n    \n    // \u52a8\u6001\u66f4\u65b0\n    @Update("<script>" +\n            "UPDATE user" +\n            "<set>" +\n            "  <if test=\'name != null\'>name = #{name},</if>" +\n            "  <if test=\'email != null\'>email = #{email},</if>" +\n            "  <if test=\'age != null\'>age = #{age},</if>" +\n            "  update_time = NOW()," +\n            "</set>" +\n            "WHERE id = #{id}" +\n            "<\/script>")\n    int updateSelective(User user);\n    \n    // \u6279\u91cf\u63d2\u5165\n    @Insert("<script>" +\n            "INSERT INTO user(name, email, age) VALUES" +\n            "<foreach collection=\'list\' item=\'user\' separator=\',\'>" +\n            "  (#{user.name}, #{user.email}, #{user.age})" +\n            "</foreach>" +\n            "<\/script>")\n    int batchInsert(@Param("list") List<User> users);\n    \n    // choose/when/otherwise\n    @Select("<script>" +\n            "SELECT * FROM user" +\n            "<where>" +\n            "  <choose>" +\n            "    <when test=\'id != null\'>id = #{id}</when>" +\n            "    <when test=\'name != null\'>name = #{name}</when>" +\n            "    <otherwise>status = 1</otherwise>" +\n            "  </choose>" +\n            "</where>" +\n            "<\/script>")\n    List<User> selectByPriority(UserQuery query);\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"\u7f13\u5b58\u6ce8\u89e3",children:"\u7f13\u5b58\u6ce8\u89e3"}),"\n",(0,i.jsx)(n.h3,{id:"cachenamespace",children:"@CacheNamespace"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"@CacheNamespace(\n    implementation = PerpetualCache.class,  // \u7f13\u5b58\u5b9e\u73b0\n    eviction = LruCache.class,              // \u6dd8\u6c70\u7b56\u7565\n    flushInterval = 60000,                  // \u5237\u65b0\u95f4\u9694\uff08\u6beb\u79d2\uff09\n    size = 512,                             // \u7f13\u5b58\u5927\u5c0f\n    readWrite = true,                       // \u8bfb\u5199\u7f13\u5b58\n    blocking = false                        // \u963b\u585e\n)\npublic interface UserMapper {\n    // ...\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"cachenamespaceref",children:"@CacheNamespaceRef"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"// \u5f15\u7528\u5176\u4ed6 Mapper \u7684\u7f13\u5b58\n@CacheNamespaceRef(UserMapper.class)\npublic interface OrderMapper {\n    // ...\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"xml-vs-\u6ce8\u89e3\u5bf9\u6bd4",children:"XML vs \u6ce8\u89e3\u5bf9\u6bd4"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\u65b9\u9762"}),(0,i.jsx)(n.th,{children:"XML"}),(0,i.jsx)(n.th,{children:"\u6ce8\u89e3"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"\u590d\u6742 SQL"}),(0,i.jsx)(n.td,{children:"\u2705 \u66f4\u9002\u5408"}),(0,i.jsx)(n.td,{children:"\u274c \u53ef\u8bfb\u6027\u5dee"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"\u7b80\u5355 CRUD"}),(0,i.jsx)(n.td,{children:"\u274c \u7e41\u7410"}),(0,i.jsx)(n.td,{children:"\u2705 \u7b80\u6d01"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"\u52a8\u6001 SQL"}),(0,i.jsx)(n.td,{children:"\u2705 \u5f3a\u5927"}),(0,i.jsx)(n.td,{children:"\u26a0\ufe0f \u9700\u8981 script \u6216 Provider"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"\u7ed3\u679c\u6620\u5c04"}),(0,i.jsx)(n.td,{children:"\u2705 \u7075\u6d3b"}),(0,i.jsx)(n.td,{children:"\u26a0\ufe0f \u529f\u80fd\u6709\u9650"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"\u7ef4\u62a4\u6027"}),(0,i.jsx)(n.td,{children:"\u2705 SQL \u96c6\u4e2d\u7ba1\u7406"}),(0,i.jsx)(n.td,{children:"\u26a0\ufe0f \u5206\u6563\u5728\u4ee3\u7801\u4e2d"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"\u91cd\u6784"}),(0,i.jsx)(n.td,{children:"\u274c \u9700\u8981\u624b\u52a8\u540c\u6b65"}),(0,i.jsx)(n.td,{children:"\u2705 IDE \u652f\u6301"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"\u5b66\u4e60\u66f2\u7ebf"}),(0,i.jsx)(n.td,{children:"\u4e2d\u7b49"}),(0,i.jsx)(n.td,{children:"\u4f4e"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"\u4f7f\u7528\u5efa\u8bae",children:"\u4f7f\u7528\u5efa\u8bae"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u7b80\u5355 CRUD"})," - \u4f7f\u7528\u6ce8\u89e3\uff0c\u7b80\u6d01\u9ad8\u6548"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u590d\u6742\u67e5\u8be2"})," - \u4f7f\u7528 XML\uff0c\u53ef\u8bfb\u6027\u597d"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u52a8\u6001 SQL"})," - \u4f7f\u7528 XML \u6216 Provider"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"\u6df7\u5408\u4f7f\u7528"})," - \u540c\u4e00 Mapper \u53ef\u4ee5\u6df7\u5408\u4f7f\u7528"]}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'// \u6df7\u5408\u4f7f\u7528\u793a\u4f8b\npublic interface UserMapper {\n    \n    // \u7b80\u5355\u67e5\u8be2\u7528\u6ce8\u89e3\n    @Select("SELECT * FROM user WHERE id = #{id}")\n    User selectById(Long id);\n    \n    // \u590d\u6742\u67e5\u8be2\u5728 XML \u4e2d\u5b9a\u4e49\n    List<User> selectByCondition(UserQuery query);\n    \n    // \u52a8\u6001 SQL \u7528 Provider\n    @SelectProvider(type = UserSqlProvider.class, method = "buildDynamicSql")\n    List<User> selectDynamic(Map<String, Object> params);\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"\u5b8c\u6574\u793a\u4f8b",children:"\u5b8c\u6574\u793a\u4f8b"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'@CacheNamespace(flushInterval = 60000, size = 512)\npublic interface UserMapper {\n    \n    // \u57fa\u672c\u67e5\u8be2\n    @Select("SELECT * FROM user WHERE id = #{id}")\n    @Results(id = "baseResultMap", value = {\n        @Result(property = "id", column = "id", id = true),\n        @Result(property = "name", column = "name"),\n        @Result(property = "email", column = "email"),\n        @Result(property = "age", column = "age"),\n        @Result(property = "createTime", column = "create_time")\n    })\n    User selectById(Long id);\n    \n    // \u590d\u7528 ResultMap\n    @Select("SELECT * FROM user")\n    @ResultMap("baseResultMap")\n    List<User> selectAll();\n    \n    // \u5e26\u5173\u8054\u67e5\u8be2\n    @Select("SELECT * FROM user WHERE id = #{id}")\n    @Results({\n        @Result(property = "id", column = "id", id = true),\n        @Result(property = "name", column = "name"),\n        @Result(property = "orders", column = "id",\n                many = @Many(select = "com.example.mapper.OrderMapper.selectByUserId"))\n    })\n    User selectWithOrders(Long id);\n    \n    // \u63d2\u5165\n    @Insert("INSERT INTO user(name, email, age, create_time) " +\n            "VALUES(#{name}, #{email}, #{age}, NOW())")\n    @Options(useGeneratedKeys = true, keyProperty = "id")\n    int insert(User user);\n    \n    // \u52a8\u6001\u66f4\u65b0\n    @UpdateProvider(type = UserSqlProvider.class, method = "updateSelective")\n    int updateSelective(User user);\n    \n    // \u5220\u9664\n    @Delete("DELETE FROM user WHERE id = #{id}")\n    int deleteById(Long id);\n    \n    // \u52a8\u6001\u67e5\u8be2\n    @SelectProvider(type = UserSqlProvider.class, method = "selectByCondition")\n    List<User> selectByCondition(UserQuery query);\n    \n    // \u6279\u91cf\u64cd\u4f5c\n    @Insert("<script>" +\n            "INSERT INTO user(name, email, age) VALUES " +\n            "<foreach collection=\'list\' item=\'u\' separator=\',\'>" +\n            "(#{u.name}, #{u.email}, #{u.age})" +\n            "</foreach>" +\n            "<\/script>")\n    int batchInsert(@Param("list") List<User> users);\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"\u76f8\u5173\u94fe\u63a5",children:"\u76f8\u5173\u94fe\u63a5"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/docs/mybatis/xml-mapping",children:"XML \u6620\u5c04"})," - XML \u65b9\u5f0f\u8be6\u89e3"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/docs/mybatis/dynamic-sql",children:"\u52a8\u6001 SQL"})," - \u52a8\u6001 SQL \u6807\u7b7e"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/docs/mybatis/caching",children:"\u7f13\u5b58\u673a\u5236"})," - \u7f13\u5b58\u914d\u7f6e\u8be6\u89e3"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"\u6700\u540e\u66f4\u65b0"}),": 2025 \u5e74 12 \u6708"]})]})}function j(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},48885:(e,n,r)=>{r.d(n,{R:()=>l,x:()=>t});var s=r(99378);const i={},d=s.createContext(i);function l(e){const n=s.useContext(d);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),s.createElement(d.Provider,{value:n},e.children)}}}]);