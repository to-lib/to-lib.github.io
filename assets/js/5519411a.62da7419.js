"use strict";(globalThis.webpackChunkto_lib_github_io=globalThis.webpackChunkto_lib_github_io||[]).push([[89304],{8075:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>l,contentTitle:()=>c,default:()=>p,frontMatter:()=>d,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"cpp/pointers-references","title":"\u6307\u9488\u548c\u5f15\u7528","description":"\u6307\u9488\u548c\u5f15\u7528\u662f C++ \u7684\u6838\u5fc3\u6982\u5ff5\uff0c\u7406\u89e3\u5b83\u4eec\u5bf9\u4e8e\u638c\u63e1 C++ \u81f3\u5173\u91cd\u8981\u3002","source":"@site/docs/cpp/pointers-references.md","sourceDirName":"cpp","slug":"/cpp/pointers-references","permalink":"/docs/cpp/pointers-references","draft":false,"unlisted":false,"editUrl":"https://github.com/to-lib/to-lib.github.io/tree/main/docs/cpp/pointers-references.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6,"title":"\u6307\u9488\u548c\u5f15\u7528"},"sidebar":"cpp","previous":{"title":"\u7c7b\u578b\u8f6c\u6362","permalink":"/docs/cpp/type-casting"},"next":{"title":"\u6587\u4ef6 I/O","permalink":"/docs/cpp/file-io"}}');var s=t(22714),i=t(48885);const d={sidebar_position:6,title:"\u6307\u9488\u548c\u5f15\u7528"},c="C++ \u6307\u9488\u548c\u5f15\u7528",l={},o=[{value:"\ud83c\udfaf \u6307\u9488\u57fa\u7840",id:"-\u6307\u9488\u57fa\u7840",level:2},{value:"\ud83d\udd17 \u5f15\u7528",id:"-\u5f15\u7528",level:2},{value:"\ud83d\udcca \u6307\u9488 vs \u5f15\u7528",id:"-\u6307\u9488-vs-\u5f15\u7528",level:2},{value:"\ud83d\udd12 const \u4fee\u9970\u7b26",id:"-const-\u4fee\u9970\u7b26",level:2},{value:"\ud83d\udce6 \u6307\u9488\u4e0e\u6570\u7ec4",id:"-\u6307\u9488\u4e0e\u6570\u7ec4",level:2},{value:"\ud83c\udfad \u51fd\u6570\u53c2\u6570\u4f20\u9012",id:"-\u51fd\u6570\u53c2\u6570\u4f20\u9012",level:2},{value:"\u2194\ufe0f \u53f3\u503c\u5f15\u7528 (C++11)",id:"\ufe0f-\u53f3\u503c\u5f15\u7528-c11",level:2},{value:"\ud83d\udccb \u667a\u80fd\u6307\u9488\u9884\u89c8",id:"-\u667a\u80fd\u6307\u9488\u9884\u89c8",level:2},{value:"\u26a1 \u6700\u4f73\u5b9e\u8df5",id:"-\u6700\u4f73\u5b9e\u8df5",level:2}];function a(n){const e={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"c-\u6307\u9488\u548c\u5f15\u7528",children:"C++ \u6307\u9488\u548c\u5f15\u7528"})}),"\n",(0,s.jsx)(e.p,{children:"\u6307\u9488\u548c\u5f15\u7528\u662f C++ \u7684\u6838\u5fc3\u6982\u5ff5\uff0c\u7406\u89e3\u5b83\u4eec\u5bf9\u4e8e\u638c\u63e1 C++ \u81f3\u5173\u91cd\u8981\u3002"}),"\n",(0,s.jsx)(e.h2,{id:"-\u6307\u9488\u57fa\u7840",children:"\ud83c\udfaf \u6307\u9488\u57fa\u7840"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-cpp",children:'#include <iostream>\n\nint main() {\n    int x = 10;\n    int* ptr = &x;     // ptr \u5b58\u50a8 x \u7684\u5730\u5740\n\n    std::cout << "x \u7684\u503c: " << x << std::endl;\n    std::cout << "x \u7684\u5730\u5740: " << &x << std::endl;\n    std::cout << "ptr \u7684\u503c: " << ptr << std::endl;\n    std::cout << "*ptr (\u89e3\u5f15\u7528): " << *ptr << std::endl;\n\n    *ptr = 20;  // \u901a\u8fc7\u6307\u9488\u4fee\u6539 x\n    std::cout << "x \u73b0\u5728\u662f: " << x << std::endl;  // 20\n\n    // \u7a7a\u6307\u9488\n    int* nullPtr = nullptr;  // C++11 \u63a8\u8350\n    int* nullPtr2 = NULL;    // C \u98ce\u683c\n\n    if (nullPtr == nullptr) {\n        std::cout << "\u6307\u9488\u4e3a\u7a7a" << std::endl;\n    }\n\n    return 0;\n}\n'})}),"\n",(0,s.jsx)(e.h2,{id:"-\u5f15\u7528",children:"\ud83d\udd17 \u5f15\u7528"}),"\n",(0,s.jsx)(e.p,{children:"\u5f15\u7528\u662f\u53d8\u91cf\u7684\u522b\u540d\uff0c\u5fc5\u987b\u521d\u59cb\u5316\u4e14\u4e0d\u80fd\u91cd\u65b0\u7ed1\u5b9a\uff1a"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-cpp",children:'#include <iostream>\n\nint main() {\n    int x = 10;\n    int& ref = x;  // ref \u662f x \u7684\u5f15\u7528\n\n    std::cout << "x: " << x << std::endl;\n    std::cout << "ref: " << ref << std::endl;\n\n    ref = 20;  // \u4fee\u6539 ref \u5c31\u662f\u4fee\u6539 x\n    std::cout << "x \u73b0\u5728\u662f: " << x << std::endl;  // 20\n\n    // \u5f15\u7528\u5fc5\u987b\u521d\u59cb\u5316\n    // int& badRef;  // \u9519\u8bef\uff01\n\n    // \u5f15\u7528\u4e0d\u80fd\u91cd\u65b0\u7ed1\u5b9a\n    int y = 30;\n    ref = y;  // \u8fd9\u662f\u8d4b\u503c\uff0c\u4e0d\u662f\u91cd\u65b0\u7ed1\u5b9a\n\n    return 0;\n}\n'})}),"\n",(0,s.jsx)(e.h2,{id:"-\u6307\u9488-vs-\u5f15\u7528",children:"\ud83d\udcca \u6307\u9488 vs \u5f15\u7528"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"\u7279\u6027"}),(0,s.jsx)(e.th,{children:"\u6307\u9488"}),(0,s.jsx)(e.th,{children:"\u5f15\u7528"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"\u53ef\u4e3a\u7a7a"}),(0,s.jsx)(e.td,{children:"\u2705"}),(0,s.jsx)(e.td,{children:"\u274c"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"\u53ef\u91cd\u65b0\u8d4b\u503c"}),(0,s.jsx)(e.td,{children:"\u2705"}),(0,s.jsx)(e.td,{children:"\u274c"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"\u9700\u8981\u89e3\u5f15\u7528"}),(0,s.jsxs)(e.td,{children:["\u2705 ",(0,s.jsx)(e.code,{children:"*ptr"})]}),(0,s.jsx)(e.td,{children:"\u274c"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"\u652f\u6301\u7b97\u672f\u8fd0\u7b97"}),(0,s.jsx)(e.td,{children:"\u2705"}),(0,s.jsx)(e.td,{children:"\u274c"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"\u7528\u4e8e\u51fd\u6570\u53c2\u6570"}),(0,s.jsx)(e.td,{children:"\u53ef\u9009\u53c2\u6570"}),(0,s.jsx)(e.td,{children:"\u5fc5\u4f20\u53c2\u6570"})]})]})]}),"\n",(0,s.jsx)(e.h2,{id:"-const-\u4fee\u9970\u7b26",children:"\ud83d\udd12 const \u4fee\u9970\u7b26"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-cpp",children:"int main() {\n    int x = 10;\n    int y = 20;\n\n    // \u6307\u5411 const \u7684\u6307\u9488\uff08\u4e0d\u80fd\u901a\u8fc7\u6307\u9488\u4fee\u6539\u503c\uff09\n    const int* ptr1 = &x;\n    // *ptr1 = 30;  // \u9519\u8bef\n    ptr1 = &y;      // OK\n\n    // const \u6307\u9488\uff08\u6307\u9488\u672c\u8eab\u4e0d\u80fd\u6539\u53d8\uff09\n    int* const ptr2 = &x;\n    *ptr2 = 30;     // OK\n    // ptr2 = &y;   // \u9519\u8bef\n\n    // const \u6307\u9488\u6307\u5411 const\n    const int* const ptr3 = &x;\n    // *ptr3 = 40;  // \u9519\u8bef\n    // ptr3 = &y;   // \u9519\u8bef\n\n    // const \u5f15\u7528\n    const int& cref = x;\n    // cref = 50;   // \u9519\u8bef\n\n    return 0;\n}\n"})}),"\n",(0,s.jsx)(e.h2,{id:"-\u6307\u9488\u4e0e\u6570\u7ec4",children:"\ud83d\udce6 \u6307\u9488\u4e0e\u6570\u7ec4"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-cpp",children:'#include <iostream>\n\nint main() {\n    int arr[5] = {10, 20, 30, 40, 50};\n    int* ptr = arr;  // \u6570\u7ec4\u540d\u5c31\u662f\u9996\u5730\u5740\n\n    // \u6307\u9488\u904d\u5386\u6570\u7ec4\n    for (int i = 0; i < 5; i++) {\n        std::cout << *(ptr + i) << " ";  // \u6307\u9488\u7b97\u672f\n        std::cout << ptr[i] << " ";      // \u7b49\u4ef7\u5199\u6cd5\n    }\n\n    // \u6307\u9488\u79fb\u52a8\n    ptr++;  // \u79fb\u52a8\u5230\u4e0b\u4e00\u4e2a\u5143\u7d20\n    std::cout << *ptr << std::endl;  // 20\n\n    return 0;\n}\n'})}),"\n",(0,s.jsx)(e.h2,{id:"-\u51fd\u6570\u53c2\u6570\u4f20\u9012",children:"\ud83c\udfad \u51fd\u6570\u53c2\u6570\u4f20\u9012"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-cpp",children:"#include <iostream>\n\n// \u503c\u4f20\u9012\uff08\u62f7\u8d1d\uff09\nvoid byValue(int x) {\n    x = 100;  // \u4e0d\u5f71\u54cd\u539f\u503c\n}\n\n// \u6307\u9488\u4f20\u9012\nvoid byPointer(int* ptr) {\n    if (ptr) *ptr = 100;\n}\n\n// \u5f15\u7528\u4f20\u9012\nvoid byReference(int& ref) {\n    ref = 100;\n}\n\n// const \u5f15\u7528\uff08\u53ea\u8bfb\uff0c\u907f\u514d\u62f7\u8d1d\uff09\nvoid byConstRef(const std::string& str) {\n    std::cout << str << std::endl;\n}\n\nint main() {\n    int a = 10;\n\n    byValue(a);\n    std::cout << a << std::endl;  // 10\n\n    byPointer(&a);\n    std::cout << a << std::endl;  // 100\n\n    a = 10;\n    byReference(a);\n    std::cout << a << std::endl;  // 100\n\n    return 0;\n}\n"})}),"\n",(0,s.jsx)(e.h2,{id:"\ufe0f-\u53f3\u503c\u5f15\u7528-c11",children:"\u2194\ufe0f \u53f3\u503c\u5f15\u7528 (C++11)"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-cpp",children:"#include <iostream>\n#include <utility>\n\nint main() {\n    int x = 10;\n\n    int& lref = x;      // \u5de6\u503c\u5f15\u7528\n    // int& lref2 = 10; // \u9519\u8bef\uff1a\u4e0d\u80fd\u7ed1\u5b9a\u5230\u53f3\u503c\n\n    int&& rref = 10;    // \u53f3\u503c\u5f15\u7528\n    int&& rref2 = std::move(x);  // \u5c06\u5de6\u503c\u8f6c\u4e3a\u53f3\u503c\n\n    // \u53f3\u503c\u5f15\u7528\u4e3b\u8981\u7528\u4e8e\u79fb\u52a8\u8bed\u4e49\n    return 0;\n}\n"})}),"\n",(0,s.jsx)(e.h2,{id:"-\u667a\u80fd\u6307\u9488\u9884\u89c8",children:"\ud83d\udccb \u667a\u80fd\u6307\u9488\u9884\u89c8"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-cpp",children:"#include <memory>\n\nint main() {\n    // unique_ptr - \u72ec\u5360\u6240\u6709\u6743\n    auto uptr = std::make_unique<int>(42);\n\n    // shared_ptr - \u5171\u4eab\u6240\u6709\u6743\n    auto sptr = std::make_shared<int>(42);\n\n    // weak_ptr - \u5f31\u5f15\u7528\n    std::weak_ptr<int> wptr = sptr;\n\n    return 0;\n}\n"})}),"\n",(0,s.jsx)(e.h2,{id:"-\u6700\u4f73\u5b9e\u8df5",children:"\u26a1 \u6700\u4f73\u5b9e\u8df5"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"\u4f18\u5148\u4f7f\u7528\u5f15\u7528"})," - \u6bd4\u6307\u9488\u66f4\u5b89\u5168"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"\u4f7f\u7528 const \u5f15\u7528\u4f20\u9012\u5927\u5bf9\u8c61"})," - \u907f\u514d\u62f7\u8d1d"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"\u4f7f\u7528 nullptr"})," - \u800c\u975e NULL \u6216 0"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"\u4f7f\u7528\u667a\u80fd\u6307\u9488"})," - \u81ea\u52a8\u7ba1\u7406\u5185\u5b58"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"\u68c0\u67e5\u6307\u9488\u662f\u5426\u4e3a\u7a7a"})," - \u907f\u514d\u7a7a\u6307\u9488\u89e3\u5f15\u7528"]}),"\n"]})]})}function p(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(a,{...n})}):a(n)}},48885:(n,e,t)=>{t.d(e,{R:()=>d,x:()=>c});var r=t(99378);const s={},i=r.createContext(s);function d(n){const e=r.useContext(i);return r.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:d(n.components),r.createElement(i.Provider,{value:e},n.children)}}}]);