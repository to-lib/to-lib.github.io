"use strict";(globalThis.webpackChunkto_lib_github_io=globalThis.webpackChunkto_lib_github_io||[]).push([[74963],{48885:(n,e,r)=>{r.d(e,{R:()=>o,x:()=>a});var t=r(99378);const s={},i=t.createContext(s);function o(n){const e=t.useContext(i);return t.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:o(n.components),t.createElement(i.Provider,{value:e},n.children)}},67587:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>c,contentTitle:()=>a,default:()=>p,frontMatter:()=>o,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"java/senior-interview/framework-source","title":"\u6846\u67b6\u6e90\u7801\u5206\u6790","description":"21. Spring IoC \u5bb9\u5668\u542f\u52a8\u6d41\u7a0b\u662f\u600e\u6837\u7684\uff1f","source":"@site/docs/java/senior-interview/framework-source.md","sourceDirName":"java/senior-interview","slug":"/java/senior-interview/framework-source","permalink":"/docs/java/senior-interview/framework-source","draft":false,"unlisted":false,"editUrl":"https://github.com/to-lib/to-lib.github.io/tree/main/docs/java/senior-interview/framework-source.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6,"title":"\u6846\u67b6\u6e90\u7801\u5206\u6790"},"sidebar":"java","previous":{"title":"\u67b6\u6784\u8bbe\u8ba1","permalink":"/docs/java/senior-interview/architecture"},"next":{"title":"\u5206\u5e03\u5f0f\u4e0e\u4e2d\u95f4\u4ef6","permalink":"/docs/java/senior-interview/distributed"}}');var s=r(22714),i=r(48885);const o={sidebar_position:6,title:"\u6846\u67b6\u6e90\u7801\u5206\u6790"},a="\ud83c\udfaf \u6846\u67b6\u6e90\u7801\u5206\u6790\uff08\u4e13\u5bb6\u7ea7\uff09",c={},l=[{value:"21. Spring IoC \u5bb9\u5668\u542f\u52a8\u6d41\u7a0b\u662f\u600e\u6837\u7684\uff1f",id:"21-spring-ioc-\u5bb9\u5668\u542f\u52a8\u6d41\u7a0b\u662f\u600e\u6837\u7684",level:2},{value:"22. Spring AOP \u662f\u5982\u4f55\u5b9e\u73b0\u7684\uff1f",id:"22-spring-aop-\u662f\u5982\u4f55\u5b9e\u73b0\u7684",level:2},{value:"23. Spring Boot \u81ea\u52a8\u914d\u7f6e\u539f\u7406\u662f\u4ec0\u4e48\uff1f",id:"23-spring-boot-\u81ea\u52a8\u914d\u7f6e\u539f\u7406\u662f\u4ec0\u4e48",level:2},{value:"24. MyBatis \u7684\u6267\u884c\u6d41\u7a0b\u548c\u7f13\u5b58\u673a\u5236\u662f\u600e\u6837\u7684\uff1f",id:"24-mybatis-\u7684\u6267\u884c\u6d41\u7a0b\u548c\u7f13\u5b58\u673a\u5236\u662f\u600e\u6837\u7684",level:2},{value:"25. Netty \u7684\u7ebf\u7a0b\u6a21\u578b\u548c\u6838\u5fc3\u7ec4\u4ef6\u662f\u4ec0\u4e48\uff1f",id:"25-netty-\u7684\u7ebf\u7a0b\u6a21\u578b\u548c\u6838\u5fc3\u7ec4\u4ef6\u662f\u4ec0\u4e48",level:2}];function d(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"-\u6846\u67b6\u6e90\u7801\u5206\u6790\u4e13\u5bb6\u7ea7",children:"\ud83c\udfaf \u6846\u67b6\u6e90\u7801\u5206\u6790\uff08\u4e13\u5bb6\u7ea7\uff09"})}),"\n",(0,s.jsx)(e.h2,{id:"21-spring-ioc-\u5bb9\u5668\u542f\u52a8\u6d41\u7a0b\u662f\u600e\u6837\u7684",children:"21. Spring IoC \u5bb9\u5668\u542f\u52a8\u6d41\u7a0b\u662f\u600e\u6837\u7684\uff1f"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u7b54\u6848\u8981\u70b9\uff1a"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u6838\u5fc3\u542f\u52a8\u6d41\u7a0b\uff1a"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:"// AbstractApplicationContext.refresh() \u65b9\u6cd5\npublic void refresh() {\n    // 1. \u51c6\u5907\u5237\u65b0\n    prepareRefresh();\n    \n    // 2. \u83b7\u53d6 BeanFactory\n    ConfigurableListableBeanFactory beanFactory = obtainFreshBeanFactory();\n    \n    // 3. \u51c6\u5907 BeanFactory\n    prepareBeanFactory(beanFactory);\n    \n    // 4. \u540e\u7f6e\u5904\u7406 BeanFactory\n    postProcessBeanFactory(beanFactory);\n    \n    // 5. \u8c03\u7528 BeanFactoryPostProcessor\n    invokeBeanFactoryPostProcessors(beanFactory);\n    \n    // 6. \u6ce8\u518c BeanPostProcessor\n    registerBeanPostProcessors(beanFactory);\n    \n    // 7. \u521d\u59cb\u5316\u6d88\u606f\u6e90\n    initMessageSource();\n    \n    // 8. \u521d\u59cb\u5316\u4e8b\u4ef6\u5e7f\u64ad\u5668\n    initApplicationEventMulticaster();\n    \n    // 9. \u5b50\u7c7b\u6269\u5c55\u70b9\n    onRefresh();\n    \n    // 10. \u6ce8\u518c\u76d1\u542c\u5668\n    registerListeners();\n    \n    // 11. \u5b9e\u4f8b\u5316\u6240\u6709\u975e\u61d2\u52a0\u8f7d\u7684\u5355\u4f8b Bean\n    finishBeanFactoryInitialization(beanFactory);\n    \n    // 12. \u5b8c\u6210\u5237\u65b0\n    finishRefresh();\n}\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Bean \u521b\u5efa\u6d41\u7a0b\uff1a"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"getBean() \n    \u2192 doGetBean()\n        \u2192 getSingleton() // \u4ece\u7f13\u5b58\u83b7\u53d6\n        \u2192 createBean()\n            \u2192 resolveBeforeInstantiation() // \u5b9e\u4f8b\u5316\u524d\u5904\u7406\n            \u2192 doCreateBean()\n                \u2192 createBeanInstance() // \u5b9e\u4f8b\u5316\n                \u2192 populateBean() // \u5c5e\u6027\u586b\u5145\n                \u2192 initializeBean() // \u521d\u59cb\u5316\n                    \u2192 invokeAwareMethods()\n                    \u2192 applyBeanPostProcessorsBeforeInitialization()\n                    \u2192 invokeInitMethods()\n                    \u2192 applyBeanPostProcessorsAfterInitialization()\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u4e09\u7ea7\u7f13\u5b58\u89e3\u51b3\u5faa\u73af\u4f9d\u8d56\uff1a"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:"// DefaultSingletonBeanRegistry\n// \u4e00\u7ea7\u7f13\u5b58\uff1a\u5b8c\u6574\u7684 Bean\nprivate final Map<String, Object> singletonObjects = new ConcurrentHashMap<>();\n\n// \u4e8c\u7ea7\u7f13\u5b58\uff1a\u65e9\u671f\u66b4\u9732\u7684 Bean\uff08\u672a\u5b8c\u6210\u5c5e\u6027\u586b\u5145\uff09\nprivate final Map<String, Object> earlySingletonObjects = new ConcurrentHashMap<>();\n\n// \u4e09\u7ea7\u7f13\u5b58\uff1aBean \u5de5\u5382\nprivate final Map<String, ObjectFactory<?>> singletonFactories = new HashMap<>();\n"})}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"\u5ef6\u4f38\uff1a"})," \u53c2\u8003 ",(0,s.jsx)(e.a,{href:"/docs/spring/core-concepts",children:"Spring \u6838\u5fc3\u6982\u5ff5"})]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"22-spring-aop-\u662f\u5982\u4f55\u5b9e\u73b0\u7684",children:"22. Spring AOP \u662f\u5982\u4f55\u5b9e\u73b0\u7684\uff1f"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u7b54\u6848\u8981\u70b9\uff1a"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"AOP \u5b9e\u73b0\u65b9\u5f0f\uff1a"})}),"\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"\u65b9\u5f0f"}),(0,s.jsx)(e.th,{children:"\u6761\u4ef6"}),(0,s.jsx)(e.th,{children:"\u7279\u70b9"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"JDK \u52a8\u6001\u4ee3\u7406"}),(0,s.jsx)(e.td,{children:"\u76ee\u6807\u7c7b\u5b9e\u73b0\u63a5\u53e3"}),(0,s.jsx)(e.td,{children:"\u57fa\u4e8e\u63a5\u53e3\u4ee3\u7406"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"CGLIB \u4ee3\u7406"}),(0,s.jsx)(e.td,{children:"\u76ee\u6807\u7c7b\u65e0\u63a5\u53e3"}),(0,s.jsx)(e.td,{children:"\u57fa\u4e8e\u7ee7\u627f\u4ee3\u7406"})]})]})]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"JDK \u52a8\u6001\u4ee3\u7406\u539f\u7406\uff1a"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:'public class JdkProxyDemo {\n    public static void main(String[] args) {\n        UserService target = new UserServiceImpl();\n        \n        UserService proxy = (UserService) Proxy.newProxyInstance(\n            target.getClass().getClassLoader(),\n            target.getClass().getInterfaces(),\n            new InvocationHandler() {\n                @Override\n                public Object invoke(Object proxy, Method method, Object[] args) \n                        throws Throwable {\n                    System.out.println("Before: " + method.getName());\n                    Object result = method.invoke(target, args);\n                    System.out.println("After: " + method.getName());\n                    return result;\n                }\n            }\n        );\n        \n        proxy.getUser("1");\n    }\n}\n'})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"CGLIB \u4ee3\u7406\u539f\u7406\uff1a"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:'public class CglibProxyDemo {\n    public static void main(String[] args) {\n        Enhancer enhancer = new Enhancer();\n        enhancer.setSuperclass(UserServiceImpl.class);\n        enhancer.setCallback(new MethodInterceptor() {\n            @Override\n            public Object intercept(Object obj, Method method, Object[] args, \n                    MethodProxy proxy) throws Throwable {\n                System.out.println("Before: " + method.getName());\n                Object result = proxy.invokeSuper(obj, args);\n                System.out.println("After: " + method.getName());\n                return result;\n            }\n        });\n        \n        UserServiceImpl proxy = (UserServiceImpl) enhancer.create();\n        proxy.getUser("1");\n    }\n}\n'})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Spring AOP \u4ee3\u7406\u521b\u5efa\u6d41\u7a0b\uff1a"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"@EnableAspectJAutoProxy\n    \u2192 \u6ce8\u518c AnnotationAwareAspectJAutoProxyCreator\n        \u2192 postProcessAfterInitialization()\n            \u2192 wrapIfNecessary()\n                \u2192 getAdvicesAndAdvisorsForBean() // \u83b7\u53d6\u5207\u9762\n                \u2192 createProxy() // \u521b\u5efa\u4ee3\u7406\n                    \u2192 ProxyFactory.getProxy()\n                        \u2192 JdkDynamicAopProxy \u6216 CglibAopProxy\n"})}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"\u5ef6\u4f38\uff1a"})," \u53c2\u8003 ",(0,s.jsx)(e.a,{href:"/docs/spring/aop",children:"Spring AOP \u8be6\u89e3"})]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"23-spring-boot-\u81ea\u52a8\u914d\u7f6e\u539f\u7406\u662f\u4ec0\u4e48",children:"23. Spring Boot \u81ea\u52a8\u914d\u7f6e\u539f\u7406\u662f\u4ec0\u4e48\uff1f"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u7b54\u6848\u8981\u70b9\uff1a"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u81ea\u52a8\u914d\u7f6e\u6838\u5fc3\u6ce8\u89e3\uff1a"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:"@SpringBootApplication\n    \u251c\u2500\u2500 @SpringBootConfiguration  // \u914d\u7f6e\u7c7b\n    \u251c\u2500\u2500 @EnableAutoConfiguration  // \u542f\u7528\u81ea\u52a8\u914d\u7f6e\n    \u2502       \u2514\u2500\u2500 @Import(AutoConfigurationImportSelector.class)\n    \u2514\u2500\u2500 @ComponentScan            // \u7ec4\u4ef6\u626b\u63cf\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u81ea\u52a8\u914d\u7f6e\u52a0\u8f7d\u6d41\u7a0b\uff1a"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"1. @EnableAutoConfiguration\n    \u2193\n2. AutoConfigurationImportSelector.selectImports()\n    \u2193\n3. SpringFactoriesLoader.loadFactoryNames()\n    \u2193\n4. \u8bfb\u53d6 META-INF/spring.factories\n    \u2193\n5. \u8fc7\u6ee4\u6761\u4ef6\u6ce8\u89e3\uff08@ConditionalOnXxx\uff09\n    \u2193\n6. \u52a0\u8f7d\u7b26\u5408\u6761\u4ef6\u7684\u81ea\u52a8\u914d\u7f6e\u7c7b\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"spring.factories \u793a\u4f8b\uff1a"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-properties",children:"# META-INF/spring.factories\norg.springframework.boot.autoconfigure.EnableAutoConfiguration=\\\norg.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration,\\\norg.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration,\\\norg.springframework.boot.autoconfigure.data.redis.RedisAutoConfiguration\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u6761\u4ef6\u6ce8\u89e3\u539f\u7406\uff1a"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:'@Configuration\n@ConditionalOnClass(DataSource.class)  // \u7c7b\u8def\u5f84\u5b58\u5728 DataSource\n@ConditionalOnMissingBean(DataSource.class)  // \u672a\u81ea\u5b9a\u4e49 DataSource Bean\n@EnableConfigurationProperties(DataSourceProperties.class)\npublic class DataSourceAutoConfiguration {\n    \n    @Bean\n    @ConfigurationProperties(prefix = "spring.datasource")\n    public DataSource dataSource() {\n        return DataSourceBuilder.create().build();\n    }\n}\n'})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u81ea\u5b9a\u4e49 Starter\uff1a"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:"// 1. \u521b\u5efa\u81ea\u52a8\u914d\u7f6e\u7c7b\n@Configuration\n@ConditionalOnClass(MyService.class)\n@EnableConfigurationProperties(MyProperties.class)\npublic class MyAutoConfiguration {\n    \n    @Bean\n    @ConditionalOnMissingBean\n    public MyService myService(MyProperties properties) {\n        return new MyService(properties);\n    }\n}\n\n// 2. \u521b\u5efa spring.factories\n// META-INF/spring.factories\norg.springframework.boot.autoconfigure.EnableAutoConfiguration=\\\ncom.example.MyAutoConfiguration\n"})}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"\u5ef6\u4f38\uff1a"})," \u53c2\u8003 ",(0,s.jsx)(e.a,{href:"/docs/springboot",children:"Spring Boot \u81ea\u52a8\u914d\u7f6e"})]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"24-mybatis-\u7684\u6267\u884c\u6d41\u7a0b\u548c\u7f13\u5b58\u673a\u5236\u662f\u600e\u6837\u7684",children:"24. MyBatis \u7684\u6267\u884c\u6d41\u7a0b\u548c\u7f13\u5b58\u673a\u5236\u662f\u600e\u6837\u7684\uff1f"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u7b54\u6848\u8981\u70b9\uff1a"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"MyBatis \u6267\u884c\u6d41\u7a0b\uff1a"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"SqlSessionFactory\n    \u2193 openSession()\nSqlSession\n    \u2193 getMapper()\nMapperProxy\uff08\u52a8\u6001\u4ee3\u7406\uff09\n    \u2193 invoke()\nMapperMethod\n    \u2193 execute()\nExecutor\uff08\u6267\u884c\u5668\uff09\n    \u2193 query/update\nStatementHandler\n    \u2193 prepare/parameterize/query\nResultSetHandler\n    \u2193 handleResultSets\n\u8fd4\u56de\u7ed3\u679c\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u6838\u5fc3\u7ec4\u4ef6\uff1a"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:'// 1. SqlSessionFactory \u521b\u5efa\nSqlSessionFactory factory = new SqlSessionFactoryBuilder()\n    .build(Resources.getResourceAsStream("mybatis-config.xml"));\n\n// 2. \u83b7\u53d6 SqlSession\ntry (SqlSession session = factory.openSession()) {\n    // 3. \u83b7\u53d6 Mapper \u4ee3\u7406\n    UserMapper mapper = session.getMapper(UserMapper.class);\n    \n    // 4. \u6267\u884c\u67e5\u8be2\n    User user = mapper.selectById(1L);\n}\n'})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u7f13\u5b58\u673a\u5236\uff1a"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    \u4e8c\u7ea7\u7f13\u5b58\uff08Mapper \u7ea7\u522b\uff09                \u2502\n\u2502                    namespace \u8303\u56f4\u5171\u4eab                    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                           \u2193 \u672a\u547d\u4e2d\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    \u4e00\u7ea7\u7f13\u5b58\uff08SqlSession \u7ea7\u522b\uff09           \u2502\n\u2502                    \u9ed8\u8ba4\u5f00\u542f\uff0c\u540c\u4e00 SqlSession \u5171\u4eab        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                           \u2193 \u672a\u547d\u4e2d\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                         \u6570\u636e\u5e93                           \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u4e8c\u7ea7\u7f13\u5b58\u914d\u7f6e\uff1a"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-xml",children:'\x3c!-- mybatis-config.xml --\x3e\n<settings>\n    <setting name="cacheEnabled" value="true"/>\n</settings>\n\n\x3c!-- UserMapper.xml --\x3e\n<mapper namespace="com.example.mapper.UserMapper">\n    <cache eviction="LRU" flushInterval="60000" size="512" readOnly="true"/>\n    \n    <select id="selectById" resultType="User" useCache="true">\n        SELECT * FROM user WHERE id = #{id}\n    </select>\n</mapper>\n'})}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"\u5ef6\u4f38\uff1a"})," \u53c2\u8003 ",(0,s.jsx)(e.a,{href:"/docs/spring",children:"MyBatis \u6838\u5fc3\u539f\u7406"})]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"25-netty-\u7684\u7ebf\u7a0b\u6a21\u578b\u548c\u6838\u5fc3\u7ec4\u4ef6\u662f\u4ec0\u4e48",children:"25. Netty \u7684\u7ebf\u7a0b\u6a21\u578b\u548c\u6838\u5fc3\u7ec4\u4ef6\u662f\u4ec0\u4e48\uff1f"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u7b54\u6848\u8981\u70b9\uff1a"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Netty \u7ebf\u7a0b\u6a21\u578b\uff08\u4e3b\u4ece Reactor\uff09\uff1a"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                    \u2502   BossGroup     \u2502  \u63a5\u6536\u8fde\u63a5\n                    \u2502  (1\u4e2aEventLoop) \u2502\n                    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                             \u2502 \u5206\u53d1\n        \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n        \u2502                    \u2502                    \u2502\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  WorkerGroup  \u2502  \u2502   WorkerGroup     \u2502  \u2502  WorkerGroup  \u2502\n\u2502  EventLoop-1  \u2502  \u2502   EventLoop-2     \u2502  \u2502  EventLoop-N  \u2502\n\u2502  (\u5904\u7406IO)     \u2502  \u2502   (\u5904\u7406IO)        \u2502  \u2502  (\u5904\u7406IO)     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u6838\u5fc3\u7ec4\u4ef6\uff1a"})}),"\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"\u7ec4\u4ef6"}),(0,s.jsx)(e.th,{children:"\u4f5c\u7528"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"Channel"})}),(0,s.jsx)(e.td,{children:"\u7f51\u7edc\u8fde\u63a5\u901a\u9053"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"EventLoop"})}),(0,s.jsx)(e.td,{children:"\u4e8b\u4ef6\u5faa\u73af\uff0c\u5904\u7406 IO \u4e8b\u4ef6"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"ChannelPipeline"})}),(0,s.jsx)(e.td,{children:"\u5904\u7406\u5668\u94fe"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"ChannelHandler"})}),(0,s.jsx)(e.td,{children:"\u4e8b\u4ef6\u5904\u7406\u5668"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"ByteBuf"})}),(0,s.jsx)(e.td,{children:"\u5b57\u8282\u7f13\u51b2\u533a"})]})]})]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Netty \u670d\u52a1\u7aef\u793a\u4f8b\uff1a"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-java",children:'public class NettyServer {\n    public static void main(String[] args) throws Exception {\n        EventLoopGroup bossGroup = new NioEventLoopGroup(1);\n        EventLoopGroup workerGroup = new NioEventLoopGroup();\n        \n        try {\n            ServerBootstrap bootstrap = new ServerBootstrap();\n            bootstrap.group(bossGroup, workerGroup)\n                .channel(NioServerSocketChannel.class)\n                .option(ChannelOption.SO_BACKLOG, 128)\n                .childOption(ChannelOption.SO_KEEPALIVE, true)\n                .childHandler(new ChannelInitializer<SocketChannel>() {\n                    @Override\n                    protected void initChannel(SocketChannel ch) {\n                        ChannelPipeline pipeline = ch.pipeline();\n                        pipeline.addLast(new StringDecoder());\n                        pipeline.addLast(new StringEncoder());\n                        pipeline.addLast(new MyServerHandler());\n                    }\n                });\n            \n            ChannelFuture future = bootstrap.bind(8080).sync();\n            future.channel().closeFuture().sync();\n        } finally {\n            bossGroup.shutdownGracefully();\n            workerGroup.shutdownGracefully();\n        }\n    }\n}\n\nclass MyServerHandler extends SimpleChannelInboundHandler<String> {\n    @Override\n    protected void channelRead0(ChannelHandlerContext ctx, String msg) {\n        System.out.println("Received: " + msg);\n        ctx.writeAndFlush("Server: " + msg);\n    }\n}\n'})}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"\u5ef6\u4f38\uff1a"})," \u53c2\u8003 ",(0,s.jsx)(e.a,{href:"/docs/netty/core-components",children:"Netty \u6838\u5fc3\u7ec4\u4ef6"})]})]})}function p(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(d,{...n})}):d(n)}}}]);