"use strict";(globalThis.webpackChunkto_lib_github_io=globalThis.webpackChunkto_lib_github_io||[]).push([[93732],{26908:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>d,contentTitle:()=>o,default:()=>p,frontMatter:()=>s,metadata:()=>c,toc:()=>l});const c=JSON.parse('{"id":"cpp/exception-handling","title":"\u5f02\u5e38\u5904\u7406","description":"\u5f02\u5e38\u5904\u7406\u662f C++ \u9519\u8bef\u5904\u7406\u7684\u91cd\u8981\u673a\u5236\u3002","source":"@site/docs/cpp/exception-handling.md","sourceDirName":"cpp","slug":"/cpp/exception-handling","permalink":"/docs/cpp/exception-handling","draft":false,"unlisted":false,"editUrl":"https://github.com/to-lib/to-lib.github.io/tree/main/docs/cpp/exception-handling.md","tags":[],"version":"current","sidebarPosition":19,"frontMatter":{"sidebar_position":19,"title":"\u5f02\u5e38\u5904\u7406"},"sidebar":"cpp","previous":{"title":"\u9884\u5904\u7406\u5668","permalink":"/docs/cpp/preprocessor"},"next":{"title":"C++11 \u65b0\u7279\u6027","permalink":"/docs/cpp/cpp11-features"}}');var i=t(22714),r=t(48885);const s={sidebar_position:19,title:"\u5f02\u5e38\u5904\u7406"},o="C++ \u5f02\u5e38\u5904\u7406",d={},l=[{value:"\ud83c\udfaf \u57fa\u672c\u8bed\u6cd5",id:"-\u57fa\u672c\u8bed\u6cd5",level:2},{value:"\ud83d\udce6 \u6807\u51c6\u5f02\u5e38\u7c7b",id:"-\u6807\u51c6\u5f02\u5e38\u7c7b",level:2},{value:"\ud83d\udd27 \u81ea\u5b9a\u4e49\u5f02\u5e38",id:"-\u81ea\u5b9a\u4e49\u5f02\u5e38",level:2},{value:"\ud83d\udee1\ufe0f noexcept",id:"\ufe0f-noexcept",level:2},{value:"\ud83d\udccb RAII \u4e0e\u5f02\u5e38\u5b89\u5168",id:"-raii-\u4e0e\u5f02\u5e38\u5b89\u5168",level:2},{value:"\u26a1 \u6700\u4f73\u5b9e\u8df5",id:"-\u6700\u4f73\u5b9e\u8df5",level:2}];function a(n){const e={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.header,{children:(0,i.jsx)(e.h1,{id:"c-\u5f02\u5e38\u5904\u7406",children:"C++ \u5f02\u5e38\u5904\u7406"})}),"\n",(0,i.jsx)(e.p,{children:"\u5f02\u5e38\u5904\u7406\u662f C++ \u9519\u8bef\u5904\u7406\u7684\u91cd\u8981\u673a\u5236\u3002"}),"\n",(0,i.jsx)(e.h2,{id:"-\u57fa\u672c\u8bed\u6cd5",children:"\ud83c\udfaf \u57fa\u672c\u8bed\u6cd5"}),"\n",(0,i.jsx)(e.mermaid,{value:"sequenceDiagram\n    participant Main\n    participant Function\n    participant Object\n\n    Main->>Function: Call function()\n    activate Function\n    Function->>Object: Create local object\n    activate Object\n\n    Note right of Function: Error Occurs!\n    Function--xMain: Throw Exception\n\n    Object->>Object: Destructor called (Unwinding)\n    deactivate Object\n    deactivate Function\n\n    Main->>Main: Catch Block handles error"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-cpp",children:'#include <stdexcept>\n#include <iostream>\n\ndouble divide(double a, double b) {\n    if (b == 0) {\n        throw std::runtime_error("\u9664\u6570\u4e0d\u80fd\u4e3a\u96f6");\n    }\n    return a / b;\n}\n\nint main() {\n    try {\n        double result = divide(10, 0);\n        std::cout << result << std::endl;\n    } catch (const std::runtime_error& e) {\n        std::cerr << "\u8fd0\u884c\u65f6\u9519\u8bef: " << e.what() << std::endl;\n    } catch (const std::exception& e) {\n        std::cerr << "\u5f02\u5e38: " << e.what() << std::endl;\n    } catch (...) {\n        std::cerr << "\u672a\u77e5\u5f02\u5e38" << std::endl;\n    }\n\n    return 0;\n}\n'})}),"\n",(0,i.jsx)(e.h2,{id:"-\u6807\u51c6\u5f02\u5e38\u7c7b",children:"\ud83d\udce6 \u6807\u51c6\u5f02\u5e38\u7c7b"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-cpp",children:"// \u5e38\u7528\u5f02\u5e38\u7c7b\nstd::exception         // \u57fa\u7c7b\nstd::runtime_error     // \u8fd0\u884c\u65f6\u9519\u8bef\nstd::logic_error       // \u903b\u8f91\u9519\u8bef\nstd::invalid_argument  // \u65e0\u6548\u53c2\u6570\nstd::out_of_range      // \u8d8a\u754c\nstd::bad_alloc         // \u5185\u5b58\u5206\u914d\u5931\u8d25\n"})}),"\n",(0,i.jsx)(e.h2,{id:"-\u81ea\u5b9a\u4e49\u5f02\u5e38",children:"\ud83d\udd27 \u81ea\u5b9a\u4e49\u5f02\u5e38"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-cpp",children:'class MyException : public std::exception {\nprivate:\n    std::string message;\n\npublic:\n    MyException(const std::string& msg) : message(msg) {}\n\n    const char* what() const noexcept override {\n        return message.c_str();\n    }\n};\n\nvoid test() {\n    throw MyException("\u81ea\u5b9a\u4e49\u9519\u8bef");\n}\n'})}),"\n",(0,i.jsx)(e.h2,{id:"\ufe0f-noexcept",children:"\ud83d\udee1\ufe0f noexcept"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-cpp",children:"// \u627f\u8bfa\u4e0d\u629b\u51fa\u5f02\u5e38\nvoid safeFunc() noexcept {\n    // \u4e0d\u4f1a\u629b\u51fa\u5f02\u5e38\n}\n\n// \u6761\u4ef6\u6027 noexcept\ntemplate<typename T>\nvoid process(T& t) noexcept(noexcept(t.doSomething())) {\n    t.doSomething();\n}\n\n// \u79fb\u52a8\u64cd\u4f5c\u5e94\u8be5\u6807\u8bb0\u4e3a noexcept\nclass Widget {\npublic:\n    Widget(Widget&& other) noexcept;\n    Widget& operator=(Widget&& other) noexcept;\n};\n"})}),"\n",(0,i.jsx)(e.h2,{id:"-raii-\u4e0e\u5f02\u5e38\u5b89\u5168",children:"\ud83d\udccb RAII \u4e0e\u5f02\u5e38\u5b89\u5168"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-cpp",children:'class Resource {\npublic:\n    Resource() { /* \u83b7\u53d6\u8d44\u6e90 */ }\n    ~Resource() { /* \u91ca\u653e\u8d44\u6e90 */ }\n};\n\nvoid example() {\n    Resource r;  // RAII\n\n    throw std::runtime_error("Error");\n    // r \u7684\u6790\u6784\u51fd\u6570\u4ecd\u4f1a\u88ab\u8c03\u7528\n}\n'})}),"\n",(0,i.jsx)(e.h2,{id:"-\u6700\u4f73\u5b9e\u8df5",children:"\u26a1 \u6700\u4f73\u5b9e\u8df5"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u6309\u5f15\u7528\u6355\u83b7"})," - ",(0,i.jsx)(e.code,{children:"catch (const Exception& e)"})]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u4f7f\u7528\u6807\u51c6\u5f02\u5e38"})," - \u6216\u7ee7\u627f\u81ea std::exception"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u6807\u8bb0 noexcept"})," - \u4e0d\u629b\u5f02\u5e38\u7684\u51fd\u6570"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"RAII"})," - \u786e\u4fdd\u8d44\u6e90\u5b89\u5168\u91ca\u653e"]}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.strong,{children:"\u4e0d\u5728\u6790\u6784\u51fd\u6570\u4e2d\u629b\u5f02\u5e38"})}),"\n"]})]})}function p(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(a,{...n})}):a(n)}},48885:(n,e,t)=>{t.d(e,{R:()=>s,x:()=>o});var c=t(99378);const i={},r=c.createContext(i);function s(n){const e=c.useContext(r);return c.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:s(n.components),c.createElement(r.Provider,{value:e},n.children)}}}]);