"use strict";(globalThis.webpackChunkto_lib_github_io=globalThis.webpackChunkto_lib_github_io||[]).push([[52012],{37622:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>p,frontMatter:()=>c,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"cpp/best-practices","title":"\u6700\u4f73\u5b9e\u8df5","description":"\u9075\u5faa\u8fd9\u4e9b\u6700\u4f73\u5b9e\u8df5\uff0c\u7f16\u5199\u5b89\u5168\u3001\u9ad8\u6548\u3001\u53ef\u7ef4\u62a4\u7684 C++ \u4ee3\u7801\u3002","source":"@site/docs/cpp/best-practices.md","sourceDirName":"cpp","slug":"/cpp/best-practices","permalink":"/docs/cpp/best-practices","draft":false,"unlisted":false,"editUrl":"https://github.com/to-lib/to-lib.github.io/tree/main/docs/cpp/best-practices.md","tags":[],"version":"current","sidebarPosition":25,"frontMatter":{"sidebar_position":25,"title":"\u6700\u4f73\u5b9e\u8df5"},"sidebar":"cpp","previous":{"title":"\u8bbe\u8ba1\u6a21\u5f0f","permalink":"/docs/cpp/design-patterns"},"next":{"title":"\u8c03\u8bd5\u6280\u5de7","permalink":"/docs/cpp/debugging"}}');var s=t(22714),r=t(48885);const c={sidebar_position:25,title:"\u6700\u4f73\u5b9e\u8df5"},l="C++ \u6700\u4f73\u5b9e\u8df5",d={},o=[{value:"\ud83d\udee1\ufe0f \u5185\u5b58\u5b89\u5168",id:"\ufe0f-\u5185\u5b58\u5b89\u5168",level:2},{value:"\ud83d\udce6 \u73b0\u4ee3 C++ \u7279\u6027",id:"-\u73b0\u4ee3-c-\u7279\u6027",level:2},{value:"\ud83d\udd27 \u7c7b\u8bbe\u8ba1",id:"-\u7c7b\u8bbe\u8ba1",level:2},{value:"\u26a1 \u6027\u80fd\u4f18\u5316",id:"-\u6027\u80fd\u4f18\u5316",level:2},{value:"\ud83d\udccb \u4ee3\u7801\u98ce\u683c",id:"-\u4ee3\u7801\u98ce\u683c",level:2},{value:"\ud83d\udd0d \u8c03\u8bd5\u5efa\u8bae",id:"-\u8c03\u8bd5\u5efa\u8bae",level:2},{value:"\u26a0\ufe0f \u5e38\u89c1\u9677\u9631",id:"\ufe0f-\u5e38\u89c1\u9677\u9631",level:2}];function a(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"c-\u6700\u4f73\u5b9e\u8df5",children:"C++ \u6700\u4f73\u5b9e\u8df5"})}),"\n",(0,s.jsx)(n.p,{children:"\u9075\u5faa\u8fd9\u4e9b\u6700\u4f73\u5b9e\u8df5\uff0c\u7f16\u5199\u5b89\u5168\u3001\u9ad8\u6548\u3001\u53ef\u7ef4\u62a4\u7684 C++ \u4ee3\u7801\u3002"}),"\n",(0,s.jsx)(n.h2,{id:"\ufe0f-\u5185\u5b58\u5b89\u5168",children:"\ud83d\udee1\ufe0f \u5185\u5b58\u5b89\u5168"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cpp",children:'// \u2705 \u4f7f\u7528\u667a\u80fd\u6307\u9488\nauto ptr = std::make_unique<Widget>();\nauto shared = std::make_shared<Resource>();\n\n// \u2705 RAII \u7ba1\u7406\u8d44\u6e90\nstd::lock_guard<std::mutex> lock(mtx);\nstd::ifstream file("data.txt");  // \u81ea\u52a8\u5173\u95ed\n\n// \u274c \u907f\u514d\u88f8 new/delete\n// int* p = new int(42);\n// delete p;\n'})}),"\n",(0,s.jsx)(n.h2,{id:"-\u73b0\u4ee3-c-\u7279\u6027",children:"\ud83d\udce6 \u73b0\u4ee3 C++ \u7279\u6027"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cpp",children:"// \u2705 \u4f7f\u7528 auto\nauto iter = container.begin();\nauto result = calculate();\n\n// \u2705 \u4f7f\u7528\u8303\u56f4 for\nfor (const auto& item : container) { }\n\n// \u2705 \u4f7f\u7528\u7edf\u4e00\u521d\u59cb\u5316\nstd::vector<int> v{1, 2, 3};\nWidget w{};\n\n// \u2705 \u4f7f\u7528 nullptr\nif (ptr == nullptr) { }\n"})}),"\n",(0,s.jsx)(n.h2,{id:"-\u7c7b\u8bbe\u8ba1",children:"\ud83d\udd27 \u7c7b\u8bbe\u8ba1"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cpp",children:"class Widget {\npublic:\n    // \u2705 \u6784\u9020\u51fd\u6570\u4f7f\u7528\u521d\u59cb\u5316\u5217\u8868\n    Widget(int x, std::string s) : value(x), name(std::move(s)) {}\n\n    // \u2705 \u6807\u8bb0 const \u6210\u5458\u51fd\u6570\n    int getValue() const { return value; }\n\n    // \u2705 \u79fb\u52a8\u64cd\u4f5c\u6807\u8bb0 noexcept\n    Widget(Widget&&) noexcept = default;\n    Widget& operator=(Widget&&) noexcept = default;\n\n    // \u2705 \u4f7f\u7528 override\n    void foo() override;\n\nprivate:\n    int value;\n    std::string name;\n};\n"})}),"\n",(0,s.jsx)(n.h2,{id:"-\u6027\u80fd\u4f18\u5316",children:"\u26a1 \u6027\u80fd\u4f18\u5316"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cpp",children:"// \u2705 \u4f20\u9012\u5927\u5bf9\u8c61\u4f7f\u7528 const \u5f15\u7528\nvoid process(const std::vector<int>& data);\n\n// \u2705 \u4f7f\u7528 move \u8f6c\u79fb\u6240\u6709\u6743\nvoid consume(std::string&& s);\n\n// \u2705 \u9884\u5206\u914d\u5bb9\u5668\u5bb9\u91cf\nstd::vector<int> v;\nv.reserve(1000);\n\n// \u2705 \u4f7f\u7528 emplace\nv.emplace_back(1, 2, 3);\n"})}),"\n",(0,s.jsx)(n.h2,{id:"-\u4ee3\u7801\u98ce\u683c",children:"\ud83d\udccb \u4ee3\u7801\u98ce\u683c"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-cpp",children:"// \u2705 \u4f7f\u7528\u6709\u610f\u4e49\u7684\u547d\u540d\nint userCount;\nvoid calculateTotalPrice();\n\n// \u2705 \u4f7f\u7528 constexpr \u7f16\u8bd1\u671f\u5e38\u91cf\nconstexpr int MAX_SIZE = 100;\n\n// \u2705 \u5f00\u542f\u7f16\u8bd1\u8b66\u544a\n// g++ -Wall -Wextra -Wpedantic -Werror\n"})}),"\n",(0,s.jsx)(n.h2,{id:"-\u8c03\u8bd5\u5efa\u8bae",children:"\ud83d\udd0d \u8c03\u8bd5\u5efa\u8bae"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u4f7f\u7528 AddressSanitizer \u68c0\u6d4b\u5185\u5b58\u95ee\u9898"}),"\n",(0,s.jsx)(n.li,{children:"\u4f7f\u7528 Valgrind \u68c0\u6d4b\u5185\u5b58\u6cc4\u6f0f"}),"\n",(0,s.jsx)(n.li,{children:"\u4f7f\u7528\u9759\u6001\u5206\u6790\u5de5\u5177 (clang-tidy)"}),"\n",(0,s.jsx)(n.li,{children:"\u7f16\u5199\u5355\u5143\u6d4b\u8bd5"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"\ufe0f-\u5e38\u89c1\u9677\u9631",children:"\u26a0\ufe0f \u5e38\u89c1\u9677\u9631"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u907f\u514d\u672a\u5b9a\u4e49\u884c\u4e3a"})," - \u7a7a\u6307\u9488\u89e3\u5f15\u7528\u3001\u8d8a\u754c\u8bbf\u95ee"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u907f\u514d\u6570\u636e\u7ade\u4e89"})," - \u4f7f\u7528\u9501\u4fdd\u62a4\u5171\u4eab\u6570\u636e"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u907f\u514d\u60ac\u7a7a\u5f15\u7528"})," - \u6ce8\u610f\u5bf9\u8c61\u751f\u547d\u5468\u671f"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u907f\u514d\u9690\u5f0f\u8f6c\u6362"})," - \u4f7f\u7528 explicit"]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},48885:(e,n,t)=>{t.d(n,{R:()=>c,x:()=>l});var i=t(99378);const s={},r=i.createContext(s);function c(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);