"use strict";(globalThis.webpackChunkto_lib_github_io=globalThis.webpackChunkto_lib_github_io||[]).push([[9779],{10631:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>d,contentTitle:()=>s,default:()=>c,frontMatter:()=>a,metadata:()=>i,toc:()=>u});const i=JSON.parse('{"id":"rust/generics-traits","title":"\u6cdb\u578b\u548c Trait","description":"\u6cdb\u578b\u548c Trait \u662f Rust \u5b9e\u73b0\u4ee3\u7801\u590d\u7528\u548c\u62bd\u8c61\u7684\u91cd\u8981\u7279\u6027\u3002","source":"@site/docs/rust/generics-traits.md","sourceDirName":"rust","slug":"/rust/generics-traits","permalink":"/docs/rust/generics-traits","draft":false,"unlisted":false,"editUrl":"https://github.com/to-lib/to-lib.github.io/tree/main/docs/rust/generics-traits.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6,"title":"\u6cdb\u578b\u548c Trait"},"sidebar":"rust","previous":{"title":"\u9519\u8bef\u5904\u7406","permalink":"/docs/rust/error-handling"},"next":{"title":"\u751f\u547d\u5468\u671f","permalink":"/docs/rust/lifetimes"}}');var r=t(22714),l=t(48885);const a={sidebar_position:6,title:"\u6cdb\u578b\u548c Trait"},s="\u6cdb\u578b\u548c Trait",d={},u=[{value:"\u6cdb\u578b",id:"\u6cdb\u578b",level:2},{value:"\u6cdb\u578b\u51fd\u6570",id:"\u6cdb\u578b\u51fd\u6570",level:3},{value:"\u6cdb\u578b\u7ed3\u6784\u4f53",id:"\u6cdb\u578b\u7ed3\u6784\u4f53",level:3},{value:"\u591a\u4e2a\u6cdb\u578b\u53c2\u6570",id:"\u591a\u4e2a\u6cdb\u578b\u53c2\u6570",level:3},{value:"\u6cdb\u578b\u679a\u4e3e",id:"\u6cdb\u578b\u679a\u4e3e",level:3},{value:"\u6cdb\u578b\u65b9\u6cd5",id:"\u6cdb\u578b\u65b9\u6cd5",level:3},{value:"Trait",id:"trait",level:2},{value:"\u5b9a\u4e49 Trait",id:"\u5b9a\u4e49-trait",level:3},{value:"\u5b9e\u73b0 Trait",id:"\u5b9e\u73b0-trait",level:3},{value:"\u9ed8\u8ba4\u5b9e\u73b0",id:"\u9ed8\u8ba4\u5b9e\u73b0",level:3},{value:"\u9ed8\u8ba4\u5b9e\u73b0\u8c03\u7528\u5176\u4ed6\u65b9\u6cd5",id:"\u9ed8\u8ba4\u5b9e\u73b0\u8c03\u7528\u5176\u4ed6\u65b9\u6cd5",level:3},{value:"Trait \u4f5c\u4e3a\u53c2\u6570",id:"trait-\u4f5c\u4e3a\u53c2\u6570",level:2},{value:"impl Trait \u8bed\u6cd5",id:"impl-trait-\u8bed\u6cd5",level:3},{value:"Trait Bound \u8bed\u6cd5",id:"trait-bound-\u8bed\u6cd5",level:3},{value:"\u591a\u4e2a Trait Bound",id:"\u591a\u4e2a-trait-bound",level:3},{value:"where \u5b50\u53e5",id:"where-\u5b50\u53e5",level:3},{value:"\u8fd4\u56de\u5b9e\u73b0 Trait \u7684\u7c7b\u578b",id:"\u8fd4\u56de\u5b9e\u73b0-trait-\u7684\u7c7b\u578b",level:2},{value:"\u9650\u5236\uff1a\u53ea\u80fd\u8fd4\u56de\u5355\u4e00\u7c7b\u578b",id:"\u9650\u5236\u53ea\u80fd\u8fd4\u56de\u5355\u4e00\u7c7b\u578b",level:3},{value:"\u4f7f\u7528 Trait Bound \u6709\u6761\u4ef6\u5730\u5b9e\u73b0\u65b9\u6cd5",id:"\u4f7f\u7528-trait-bound-\u6709\u6761\u4ef6\u5730\u5b9e\u73b0\u65b9\u6cd5",level:2},{value:"\u5e38\u7528 Trait",id:"\u5e38\u7528-trait",level:2},{value:"Clone",id:"clone",level:3},{value:"Copy",id:"copy",level:3},{value:"Debug",id:"debug",level:3},{value:"Display",id:"display",level:3},{value:"PartialEq \u548c Eq",id:"partialeq-\u548c-eq",level:3},{value:"PartialOrd \u548c Ord",id:"partialord-\u548c-ord",level:3},{value:"\u8fd0\u7b97\u7b26\u91cd\u8f7d",id:"\u8fd0\u7b97\u7b26\u91cd\u8f7d",level:2},{value:"\u5173\u8054\u7c7b\u578b",id:"\u5173\u8054\u7c7b\u578b",level:2},{value:"\u5b8c\u5168\u9650\u5b9a\u8bed\u6cd5",id:"\u5b8c\u5168\u9650\u5b9a\u8bed\u6cd5",level:2},{value:"Trait \u5bf9\u8c61",id:"trait-\u5bf9\u8c61",level:2},{value:"\u52a8\u6001\u5206\u53d1",id:"\u52a8\u6001\u5206\u53d1",level:3},{value:"\u6700\u4f73\u5b9e\u8df5",id:"\u6700\u4f73\u5b9e\u8df5",level:2},{value:"1. \u4f18\u5148\u4f7f\u7528\u6cdb\u578b\u800c\u975e\u91cd\u590d\u4ee3\u7801",id:"1-\u4f18\u5148\u4f7f\u7528\u6cdb\u578b\u800c\u975e\u91cd\u590d\u4ee3\u7801",level:3},{value:"2. \u4f7f\u7528 derive \u5b8f",id:"2-\u4f7f\u7528-derive-\u5b8f",level:3},{value:"3. \u4e3a\u5916\u90e8\u7c7b\u578b\u5b9e\u73b0\u672c\u5730 Trait",id:"3-\u4e3a\u5916\u90e8\u7c7b\u578b\u5b9e\u73b0\u672c\u5730-trait",level:3},{value:"\u9ad8\u7ea7 Trait \u4f7f\u7528",id:"\u9ad8\u7ea7-trait-\u4f7f\u7528",level:2},{value:"\u5173\u8054\u7c7b\u578b",id:"\u5173\u8054\u7c7b\u578b-1",level:3},{value:"Trait \u5bf9\u8c61\u8be6\u89e3",id:"trait-\u5bf9\u8c61\u8be6\u89e3",level:3},{value:"Trait \u5bf9\u8c61 vs \u6cdb\u578b",id:"trait-\u5bf9\u8c61-vs-\u6cdb\u578b",level:3},{value:"\u8d85 Trait (Supertrait)",id:"\u8d85-trait-supertrait",level:3},{value:"Newtype \u6a21\u5f0f\u7ed5\u8fc7\u5b64\u513f\u89c4\u5219",id:"newtype-\u6a21\u5f0f\u7ed5\u8fc7\u5b64\u513f\u89c4\u5219",level:3},{value:"Trait \u8fb9\u754c\u9ad8\u7ea7\u6280\u5de7",id:"trait-\u8fb9\u754c\u9ad8\u7ea7\u6280\u5de7",level:2},{value:"Where \u5b50\u53e5",id:"where-\u5b50\u53e5-1",level:3},{value:"\u591a\u4e2a Trait \u8fb9\u754c",id:"\u591a\u4e2a-trait-\u8fb9\u754c",level:3},{value:"\u8fd4\u56de\u5b9e\u73b0 Trait \u7684\u7c7b\u578b",id:"\u8fd4\u56de\u5b9e\u73b0-trait-\u7684\u7c7b\u578b-1",level:3},{value:"\u6709\u6761\u4ef6\u5730\u5b9e\u73b0\u65b9\u6cd5",id:"\u6709\u6761\u4ef6\u5730\u5b9e\u73b0\u65b9\u6cd5",level:3},{value:"Blanket Implementation",id:"blanket-implementation",level:3},{value:"\u8fd0\u7b97\u7b26\u91cd\u8f7d",id:"\u8fd0\u7b97\u7b26\u91cd\u8f7d-1",level:2},{value:"\u5b8c\u5168\u9650\u5b9a\u8bed\u6cd5",id:"\u5b8c\u5168\u9650\u5b9a\u8bed\u6cd5-1",level:2},{value:"\u603b\u7ed3",id:"\u603b\u7ed3",level:2}];function o(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"\u6cdb\u578b\u548c-trait",children:"\u6cdb\u578b\u548c Trait"})}),"\n",(0,r.jsx)(e.p,{children:"\u6cdb\u578b\u548c Trait \u662f Rust \u5b9e\u73b0\u4ee3\u7801\u590d\u7528\u548c\u62bd\u8c61\u7684\u91cd\u8981\u7279\u6027\u3002"}),"\n",(0,r.jsx)(e.h2,{id:"\u6cdb\u578b",children:"\u6cdb\u578b"}),"\n",(0,r.jsx)(e.h3,{id:"\u6cdb\u578b\u51fd\u6570",children:"\u6cdb\u578b\u51fd\u6570"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:"//\u6cdb\u578b\u51fd\u6570\nfn largest<T: PartialOrd>(list: &[T]) -> &T {\n    let mut largest = &list[0];\n    \n    for item in list {\n        if item > largest {\n            largest = item;\n        }\n    }\n    \n    largest\n}\n\nfn main() {\n    let number_list = vec![34, 50, 25, 100, 65];\n    let result = largest(&number_list);\n    println!(\"\u6700\u5927\u7684\u6570\u5b57\u662f {}\", result);\n    \n    let char_list = vec!['y', 'm', 'a', 'q'];\n    let result = largest(&char_list);\n    println!(\"\u6700\u5927\u7684\u5b57\u7b26\u662f {}\", result);\n}\n"})}),"\n",(0,r.jsx)(e.h3,{id:"\u6cdb\u578b\u7ed3\u6784\u4f53",children:"\u6cdb\u578b\u7ed3\u6784\u4f53"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:"struct Point<T> {\n    x: T,\n    y: T,\n}\n\nfn main() {\n    let integer = Point { x: 5, y: 10 };\n    let float = Point { x: 1.0, y: 4.0 };\n}\n"})}),"\n",(0,r.jsx)(e.h3,{id:"\u591a\u4e2a\u6cdb\u578b\u53c2\u6570",children:"\u591a\u4e2a\u6cdb\u578b\u53c2\u6570"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:"struct Point<T, U> {\n    x: T,\n    y: U,\n}\n\nfn main() {\n    let both_integer = Point { x: 5, y: 10 };\n    let both_float = Point { x: 1.0, y: 4.0 };\n    let integer_and_float = Point { x: 5, y: 4.0 };\n}\n"})}),"\n",(0,r.jsx)(e.h3,{id:"\u6cdb\u578b\u679a\u4e3e",children:"\u6cdb\u578b\u679a\u4e3e"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:"enum Option<T> {\n    Some(T),\n    None,\n}\n\nenum Result<T, E> {\n    Ok(T),\n    Err(E),\n}\n"})}),"\n",(0,r.jsx)(e.h3,{id:"\u6cdb\u578b\u65b9\u6cd5",children:"\u6cdb\u578b\u65b9\u6cd5"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'struct Point<T> {\n    x: T,\n    y: T,\n}\n\nimpl<T> Point<T> {\n    fn x(&self) -> &T {\n        &self.x\n    }\n}\n\n// \u53ea\u4e3a\u7279\u5b9a\u7c7b\u578b\u5b9e\u73b0\u65b9\u6cd5\nimpl Point<f32> {\n    fn distance_from_origin(&self) -> f32 {\n        (self.x.powi(2) + self.y.powi(2)).sqrt()\n    }\n}\n\nfn main() {\n    let p = Point { x: 5, y: 10 };\n    println!("p.x = {}", p.x());\n    \n    let p = Point { x: 3.0, y: 4.0 };\n    println!("\u8ddd\u79bb\u539f\u70b9: {}", p.distance_from_origin());\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"trait",children:"Trait"}),"\n",(0,r.jsx)(e.p,{children:"Trait \u5b9a\u4e49\u5171\u4eab\u7684\u884c\u4e3a\u3002"}),"\n",(0,r.jsx)(e.h3,{id:"\u5b9a\u4e49-trait",children:"\u5b9a\u4e49 Trait"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:"pub trait Summary {\n    fn summarize(&self) -> String;\n}\n"})}),"\n",(0,r.jsx)(e.h3,{id:"\u5b9e\u73b0-trait",children:"\u5b9e\u73b0 Trait"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'pub struct NewsArticle {\n    pub headline: String,\n    pub location: String,\n    pub author: String,\n    pub content: String,\n}\n\nimpl Summary for NewsArticle {\n    fn summarize(&self) -> String {\n        format!("{}, by {} ({})", self.headline, self.author, self.location)\n    }\n}\n\npub struct Tweet {\n    pub username: String,\n    pub content: String,\n    pub reply: bool,\n    pub retweet: bool,\n}\n\nimpl Summary for Tweet {\n    fn summarize(&self) -> String {\n        format!("{}: {}", self.username, self.content)\n    }\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u9ed8\u8ba4\u5b9e\u73b0",children:"\u9ed8\u8ba4\u5b9e\u73b0"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'pub trait Summary {\n    fn summarize(&self) -> String {\n        String::from("(\u9605\u8bfb\u66f4\u591a...)")\n    }\n}\n\n// \u4f7f\u7528\u9ed8\u8ba4\u5b9e\u73b0\nimpl Summary for NewsArticle {}\n\nfn main() {\n    let article = NewsArticle {\n        headline: String::from("\u5927\u65b0\u95fb\uff01"),\n        location: String::from("\u5317\u4eac"),\n        author: String::from("\u5f20\u4e09"),\n        content: String::from("\u65b0\u95fb\u5185\u5bb9..."),\n    };\n    \n    println!("\u65b0\u6587\u7ae0\uff01{}", article.summarize());\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u9ed8\u8ba4\u5b9e\u73b0\u8c03\u7528\u5176\u4ed6\u65b9\u6cd5",children:"\u9ed8\u8ba4\u5b9e\u73b0\u8c03\u7528\u5176\u4ed6\u65b9\u6cd5"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'pub trait Summary {\n    fn summarize_author(&self) -> String;\n    \n    fn summarize(&self) -> String {\n        format!("(\u66f4\u591a\u6765\u81ea {}...)", self.summarize_author())\n    }\n}\n\nimpl Summary for Tweet {\n    fn summarize_author(&self) -> String {\n        format!("@{}", self.username)\n    }\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"trait-\u4f5c\u4e3a\u53c2\u6570",children:"Trait \u4f5c\u4e3a\u53c2\u6570"}),"\n",(0,r.jsx)(e.h3,{id:"impl-trait-\u8bed\u6cd5",children:"impl Trait \u8bed\u6cd5"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'pub fn notify(item: &impl Summary) {\n    println!("\u7a81\u53d1\u65b0\u95fb\uff01{}", item.summarize());\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"trait-bound-\u8bed\u6cd5",children:"Trait Bound \u8bed\u6cd5"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'pub fn notify<T: Summary>(item: &T) {\n    println!("\u7a81\u53d1\u65b0\u95fb\uff01{}", item.summarize());\n}\n\n// \u591a\u4e2a\u53c2\u6570\npub fn notify<T: Summary>(item1: &T, item2: &T) {\n    // ...\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u591a\u4e2a-trait-bound",children:"\u591a\u4e2a Trait Bound"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:"use std::fmt::Display;\n\npub fn notify(item: &(impl Summary + Display)) {\n    // ...\n}\n\n// \u6216\npub fn notify<T: Summary + Display>(item: &T) {\n    // ...\n}\n"})}),"\n",(0,r.jsx)(e.h3,{id:"where-\u5b50\u53e5",children:"where \u5b50\u53e5"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:"// \u4e0d\u4f7f\u7528 where\nfn some_function<T: Display + Clone, U: Clone + Debug>(t: &T, u: &U) -> i32 {\n    // ...\n    0\n}\n\n// \u4f7f\u7528 where\uff08\u66f4\u6e05\u6670\uff09\nfn some_function<T, U>(t: &T, u: &U) -> i32\nwhere\n    T: Display + Clone,\n    U: Clone + Debug,\n{\n    // ...\n    0\n}\n"})}),"\n",(0,r.jsx)(e.h2,{id:"\u8fd4\u56de\u5b9e\u73b0-trait-\u7684\u7c7b\u578b",children:"\u8fd4\u56de\u5b9e\u73b0 Trait \u7684\u7c7b\u578b"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'fn returns_summarizable() -> impl Summary {\n    Tweet {\n        username: String::from("horse_ebooks"),\n        content: String::from("\u5f53\u7136\uff0c\u6b63\u5982\u4f60\u53ef\u80fd\u5df2\u7ecf\u77e5\u9053\u7684\u90a3\u6837"),\n        reply: false,\n        retweet: false,\n    }\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u9650\u5236\u53ea\u80fd\u8fd4\u56de\u5355\u4e00\u7c7b\u578b",children:"\u9650\u5236\uff1a\u53ea\u80fd\u8fd4\u56de\u5355\u4e00\u7c7b\u578b"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:"// \u9519\u8bef\uff1a\u4e0d\u80fd\u8fd4\u56de\u4e0d\u540c\u7684\u7c7b\u578b\n// fn returns_summarizable(switch: bool) -> impl Summary {\n//     if switch {\n//         NewsArticle { ... }\n//     } else {\n//         Tweet { ... }\n//     }\n// }\n"})}),"\n",(0,r.jsx)(e.h2,{id:"\u4f7f\u7528-trait-bound-\u6709\u6761\u4ef6\u5730\u5b9e\u73b0\u65b9\u6cd5",children:"\u4f7f\u7528 Trait Bound \u6709\u6761\u4ef6\u5730\u5b9e\u73b0\u65b9\u6cd5"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'use std::fmt::Display;\n\nstruct Pair<T> {\n    x: T,\n    y: T,\n}\n\nimpl<T> Pair<T> {\n    fn new(x: T, y: T) -> Self {\n        Self { x, y }\n    }\n}\n\n// \u53ea\u4e3a\u5b9e\u73b0\u4e86 Display \u548c PartialOrd \u7684\u7c7b\u578b\u5b9e\u73b0\u6b64\u65b9\u6cd5\nimpl<T: Display + PartialOrd> Pair<T> {\n    fn cmp_display(&self) {\n        if self.x >= self.y {\n            println!("\u6700\u5927\u7684\u662f x = {}", self.x);\n        } else {\n            println!("\u6700\u5927\u7684\u662f y = {}", self.y);\n        }\n    }\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"\u5e38\u7528-trait",children:"\u5e38\u7528 Trait"}),"\n",(0,r.jsx)(e.h3,{id:"clone",children:"Clone"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:"#[derive(Clone)]\nstruct Point {\n    x: i32,\n    y: i32,\n}\n\nfn main() {\n    let p1 = Point { x: 1, y: 2 };\n    let p2 = p1.clone();\n}\n"})}),"\n",(0,r.jsx)(e.h3,{id:"copy",children:"Copy"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'#[derive(Copy, Clone)]\nstruct Point {\n    x: i32,\n    y: i32,\n}\n\nfn main() {\n    let p1 = Point { x: 1, y: 2 };\n    let p2 = p1;  // \u81ea\u52a8\u590d\u5236\n    println!("p1: ({}, {})", p1.x, p1.y);  // p1 \u4ecd\u7136\u6709\u6548\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"debug",children:"Debug"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'#[derive(Debug)]\nstruct Rectangle {\n    width: u32,\n    height: u32,\n}\n\nfn main() {\n    let rect = Rectangle {\n        width: 30,\n        height: 50,\n    };\n    \n    println!("{:?}", rect);\n    println!("{:#?}", rect);\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"display",children:"Display"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'use std::fmt;\n\nstruct Point {\n    x: i32,\n    y: i32,\n}\n\nimpl fmt::Display for Point {\n    fn fmt(&self, f: &mut fmt::Formatter) -> fmt::Result {\n        write!(f, "({}, {})", self.x, self.y)\n    }\n}\n\nfn main() {\n    let p = Point { x: 3, y: 4 };\n    println!("\u70b9\u7684\u5750\u6807: {}", p);\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"partialeq-\u548c-eq",children:"PartialEq \u548c Eq"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:"#[derive(PartialEq, Eq)]\nstruct Point {\n    x: i32,\n    y: i32,\n}\n\nfn main() {\n    let p1 = Point { x: 1, y: 2 };\n    let p2 = Point { x: 1, y: 2 };\n    \n    assert_eq!(p1, p2);\n}\n"})}),"\n",(0,r.jsx)(e.h3,{id:"partialord-\u548c-ord",children:"PartialOrd \u548c Ord"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:"#[derive(PartialEq, Eq, PartialOrd, Ord)]\nstruct Point {\n    x: i32,\n    y: i32,\n}\n\nfn main() {\n    let p1 = Point { x: 1, y: 2 };\n    let p2 = Point { x: 2, y: 3 };\n    \n    assert!(p1 < p2);\n}\n"})}),"\n",(0,r.jsx)(e.h2,{id:"\u8fd0\u7b97\u7b26\u91cd\u8f7d",children:"\u8fd0\u7b97\u7b26\u91cd\u8f7d"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:"use std::ops::Add;\n\n#[derive(Debug, PartialEq)]\nstruct Point {\n    x: i32,\n    y: i32,\n}\n\nimpl Add for Point {\n    type Output = Point;\n    \n    fn add(self, other: Point) -> Point {\n        Point {\n            x: self.x + other.x,\n            y: self.y + other.y,\n        }\n    }\n}\n\nfn main() {\n    let p1 = Point { x: 1, y: 2 };\n    let p2 = Point { x: 3, y: 4 };\n    let p3 = p1 + p2;\n    \n    assert_eq!(p3, Point { x: 4, y: 6 });\n}\n"})}),"\n",(0,r.jsx)(e.h2,{id:"\u5173\u8054\u7c7b\u578b",children:"\u5173\u8054\u7c7b\u578b"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:"pub trait Iterator {\n    type Item;  // \u5173\u8054\u7c7b\u578b\n    \n    fn next(&mut self) -> Option<Self::Item>;\n}\n\nstruct Counter {\n    count: u32,\n}\n\nimpl Iterator for Counter {\n    type Item = u32;\n    \n    fn next(&mut self) -> Option<Self::Item> {\n        self.count += 1;\n        \n        if self.count < 6 {\n            Some(self.count)\n        } else {\n            None\n        }\n    }\n}\n"})}),"\n",(0,r.jsx)(e.h2,{id:"\u5b8c\u5168\u9650\u5b9a\u8bed\u6cd5",children:"\u5b8c\u5168\u9650\u5b9a\u8bed\u6cd5"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'trait Pilot {\n    fn fly(&self);\n}\n\ntrait Wizard {\n    fn fly(&self);\n}\n\nstruct Human;\n\nimpl Pilot for Human {\n    fn fly(&self) {\n        println!("\u673a\u957f\u8bb2\u8bdd");\n    }\n}\n\nimpl Wizard for Human {\n    fn fly(&self) {\n        println!("\u98de\u8d77\u6765\uff01");\n    }\n}\n\nimpl Human {\n    fn fly(&self) {\n        println!("\u6325\u52a8\u624b\u81c2");\n    }\n}\n\nfn main() {\n    let person = Human;\n    Pilot::fly(&person);   // \u673a\u957f\u8bb2\u8bdd\n    Wizard::fly(&person);  // \u98de\u8d77\u6765\uff01\n    person.fly();          // \u6325\u52a8\u624b\u81c2\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"trait-\u5bf9\u8c61",children:"Trait \u5bf9\u8c61"}),"\n",(0,r.jsx)(e.h3,{id:"\u52a8\u6001\u5206\u53d1",children:"\u52a8\u6001\u5206\u53d1"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'pub trait Draw {\n    fn draw(&self);\n}\n\npub struct Screen {\n    pub components: Vec<Box<dyn Draw>>,\n}\n\nimpl Screen {\n    pub fn run(&self) {\n        for component in self.components.iter() {\n            component.draw();\n        }\n    }\n}\n\npub struct Button {\n    pub width: u32,\n    pub height: u32,\n}\n\nimpl Draw for Button {\n    fn draw(&self) {\n        println!("\u7ed8\u5236\u6309\u94ae");\n    }\n}\n\npub struct TextField {\n    pub width: u32,\n}\n\nimpl Draw for TextField {\n    fn draw(&self) {\n        println!("\u7ed8\u5236\u6587\u672c\u6846");\n    }\n}\n\nfn main() {\n    let screen = Screen {\n        components: vec![\n            Box::new(Button {\n                width: 50,\n                height: 10,\n            }),\n            Box::new(TextField {\n                width: 100,\n            }),\n        ],\n    };\n    \n    screen.run();\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"\u6700\u4f73\u5b9e\u8df5",children:"\u6700\u4f73\u5b9e\u8df5"}),"\n",(0,r.jsx)(e.h3,{id:"1-\u4f18\u5148\u4f7f\u7528\u6cdb\u578b\u800c\u975e\u91cd\u590d\u4ee3\u7801",children:"1. \u4f18\u5148\u4f7f\u7528\u6cdb\u578b\u800c\u975e\u91cd\u590d\u4ee3\u7801"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:"// \u4e0d\u597d\uff1a\u91cd\u590d\u4ee3\u7801\nfn largest_i32(list: &[i32]) -> i32 { /* ... */ 0 }\nfn largest_char(list: &[char]) -> char { /* ... */ 'a' }\n\n// \u597d\uff1a\u4f7f\u7528\u6cdb\u578b\nfn largest<T: PartialOrd + Copy>(list: &[T]) -> T { /* ... */ list[0] }\n"})}),"\n",(0,r.jsx)(e.h3,{id:"2-\u4f7f\u7528-derive-\u5b8f",children:"2. \u4f7f\u7528 derive \u5b8f"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:"#[derive(Debug, Clone, PartialEq, Eq)]\nstruct Point {\n    x: i32,\n    y: i32,\n}\n"})}),"\n",(0,r.jsx)(e.h3,{id:"3-\u4e3a\u5916\u90e8\u7c7b\u578b\u5b9e\u73b0\u672c\u5730-trait",children:"3. \u4e3a\u5916\u90e8\u7c7b\u578b\u5b9e\u73b0\u672c\u5730 Trait"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'// \u53ef\u4ee5\u4e3a Vec<T> \u5b9e\u73b0\u6211\u4eec\u81ea\u5df1\u7684 trait\ntrait MyTrait {\n    fn my_method(&self);\n}\n\nimpl<T> MyTrait for Vec<T> {\n    fn my_method(&self) {\n        println!("\u81ea\u5b9a\u4e49\u65b9\u6cd5");\n    }\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"\u9ad8\u7ea7-trait-\u4f7f\u7528",children:"\u9ad8\u7ea7 Trait \u4f7f\u7528"}),"\n",(0,r.jsx)(e.h3,{id:"\u5173\u8054\u7c7b\u578b-1",children:"\u5173\u8054\u7c7b\u578b"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:"trait Iterator {\n    type Item;  // \u5173\u8054\u7c7b\u578b\n    \n    fn next(&mut self) -> Option<Self::Item>;\n}\n\nstruct Counter {\n    count: u32,\n}\n\nimpl Iterator for Counter {\n    type Item = u32;  // \u6307\u5b9a\u5173\u8054\u7c7b\u578b\n    \n    fn next(&mut self) -> Option<Self::Item> {\n        self.count += 1;\n        if self.count < 6 {\n            Some(self.count)\n        } else {\n            None\n        }\n    }\n}\n"})}),"\n",(0,r.jsx)(e.h3,{id:"trait-\u5bf9\u8c61\u8be6\u89e3",children:"Trait \u5bf9\u8c61\u8be6\u89e3"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'trait Draw {\n    fn draw(&self);\n}\n\nstruct Circle {\n    radius: f64,\n}\n\nstruct Rectangle {\n    width: f64,\n    height: f64,\n}\n\nimpl Draw for Circle {\n    fn draw(&self) {\n        println!("\u7ed8\u5236\u5706\u5f62,\u534a\u5f84: {}", self.radius);\n    }\n}\n\nimpl Draw for Rectangle {\n    fn draw(&self) {\n        println!("\u7ed8\u5236\u77e9\u5f62,\u5bbd: {}, \u9ad8: {}", self.width, self.height);\n    }\n}\n\n// \u4f7f\u7528 trait \u5bf9\u8c61\nfn draw_all(shapes: &[Box<dyn Draw>]) {\n    for shape in shapes {\n        shape.draw();\n    }\n}\n\nfn main() {\n    let shapes: Vec<Box<dyn Draw>> = vec![\n        Box::new(Circle { radius: 5.0 }),\n        Box::new(Rectangle { width: 10.0, height: 20.0 }),\n    ];\n    \n    draw_all(&shapes);\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"trait-\u5bf9\u8c61-vs-\u6cdb\u578b",children:"Trait \u5bf9\u8c61 vs \u6cdb\u578b"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:"// \u9759\u6001\u5206\u53d1(\u6cdb\u578b):\u7f16\u8bd1\u65f6\u786e\u5b9a\u7c7b\u578b,\u6027\u80fd\u66f4\u597d\nfn draw_generic<T: Draw>(shape: &T) {\n    shape.draw();\n}\n\n// \u52a8\u6001\u5206\u53d1(trait\u5bf9\u8c61):\u8fd0\u884c\u65f6\u786e\u5b9a\u7c7b\u578b,\u66f4\u7075\u6d3b\nfn draw_dynamic(shape: &dyn Draw) {\n    shape.draw();\n}\n"})}),"\n",(0,r.jsx)(e.h3,{id:"\u8d85-trait-supertrait",children:"\u8d85 Trait (Supertrait)"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'use std::fmt::Display;\n\n// OutlinePrint \u4f9d\u8d56 Display trait\ntrait OutlinePrint: Display {\n    fn outline_print(&self) {\n        let output = self.to_string();\n        let len = output.len();\n        println!("{}", "*".repeat(len + 4));\n        println!("*{}*", " ".repeat(len + 2));\n        println!("* {} *", output);\n        println!("*{}*", " ".repeat(len + 2));\n        println!("{}", "*".repeat(len + 4));\n    }\n}\n\nstruct Point {\n    x: i32,\n    y: i32,\n}\n\nimpl Display for Point {\n    fn fmt(&self, f: &mut std::fmt::Formatter) -> std::fmt::Result {\n        write!(f, "({}, {})", self.x, self.y)\n    }\n}\n\nimpl OutlinePrint for Point {}\n\nfn main() {\n    let point = Point { x: 1, y: 3 };\n    point.outline_print();\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"newtype-\u6a21\u5f0f\u7ed5\u8fc7\u5b64\u513f\u89c4\u5219",children:"Newtype \u6a21\u5f0f\u7ed5\u8fc7\u5b64\u513f\u89c4\u5219"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'use std::fmt;\n\n// \u4e3a\u5916\u90e8\u7c7b\u578bVec<String>\u5b9e\u73b0\u5916\u90e8trait Display\nstruct Wrapper(Vec<String>);\n\nimpl fmt::Display for Wrapper {\n    fn fmt(&self, f: &mut fmt::Formatter) -> fmt::Result {\n        write!(f, "[{}]", self.0.join(", "))\n    }\n}\n\nfn main() {\n    let w = Wrapper(vec![\n        String::from("hello"),\n        String::from("world"),\n    ]);\n    println!("w = {}", w);\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"trait-\u8fb9\u754c\u9ad8\u7ea7\u6280\u5de7",children:"Trait \u8fb9\u754c\u9ad8\u7ea7\u6280\u5de7"}),"\n",(0,r.jsx)(e.h3,{id:"where-\u5b50\u53e5-1",children:"Where \u5b50\u53e5"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:"// \u590d\u6742\u7684 trait \u8fb9\u754c\u4f7f\u7528 where\nfn some_function<T, U>(t: &T, u: &U) -> i32\nwhere\n    T: Display + Clone,\n    U: Clone + Debug,\n{\n    // \u51fd\u6570\u4f53\n    0\n}\n"})}),"\n",(0,r.jsx)(e.h3,{id:"\u591a\u4e2a-trait-\u8fb9\u754c",children:"\u591a\u4e2a Trait \u8fb9\u754c"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'use std::fmt::{Debug, Display};\n\nfn compare_prints<T: Debug + Display>(t: &T) {\n    println!("Debug: {:?}", t);\n    println!("Display: {}", t);\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u8fd4\u56de\u5b9e\u73b0-trait-\u7684\u7c7b\u578b-1",children:"\u8fd4\u56de\u5b9e\u73b0 Trait \u7684\u7c7b\u578b"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'fn returns_summarizable() -> impl Summary {\n    Tweet {\n        username: String::from("horse_ebooks"),\n        content: String::from("of course"),\n        reply: false,\n        retweet: false,\n    }\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u6709\u6761\u4ef6\u5730\u5b9e\u73b0\u65b9\u6cd5",children:"\u6709\u6761\u4ef6\u5730\u5b9e\u73b0\u65b9\u6cd5"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'use std::fmt::Display;\n\nstruct Pair<T> {\n    x: T,\n    y: T,\n}\n\nimpl<T> Pair<T> {\n    fn new(x: T, y: T) -> Self {\n        Pair { x, y }\n    }\n}\n\n// \u53ea\u4e3a\u5b9e\u73b0\u4e86 Display + PartialOrd \u7684\u7c7b\u578b\u5b9e\u73b0 cmp_display\nimpl<T: Display + PartialOrd> Pair<T> {\n    fn cmp_display(&self) {\n        if self.x >= self.y {\n            println!("\u6700\u5927\u503c\u662f x = {}", self.x);\n        } else {\n            println!("\u6700\u5927\u503c\u662f y = {}", self.y);\n        }\n    }\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"blanket-implementation",children:"Blanket Implementation"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'// \u4e3a\u6240\u6709\u5b9e\u73b0\u4e86 Display \u7684\u7c7b\u578b\u5b9e\u73b0 ToString\ntrait ToString {\n    fn to_string(&self) -> String;\n}\n\nimpl<T: Display> ToString for T {\n    fn to_string(&self) -> String {\n        format!("{}", self)\n    }\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"\u8fd0\u7b97\u7b26\u91cd\u8f7d-1",children:"\u8fd0\u7b97\u7b26\u91cd\u8f7d"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'use std::ops::Add;\n\n#[derive(Debug, Copy, Clone, PartialEq)]\nstruct Point {\n    x: i32,\n    y: i32,\n}\n\nimpl Add for Point {\n    type Output = Point;\n\n    fn add(self, other: Point) -> Point {\n        Point {\n            x: self.x + other.x,\n            y: self.y + other.y,\n        }\n    }\n}\n\nfn main() {\n    let p1 = Point { x: 1, y: 0 };\n    let p2 = Point { x: 2, y: 3 };\n    let p3 = p1 + p2;\n    \n    println!("{:?} + {:?} = {:?}", p1, p2, p3);\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"\u5b8c\u5168\u9650\u5b9a\u8bed\u6cd5-1",children:"\u5b8c\u5168\u9650\u5b9a\u8bed\u6cd5"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'trait Pilot {\n    fn fly(&self);\n}\n\ntrait Wizard {\n    fn fly(&self);\n}\n\nstruct Human;\n\nimpl Pilot for Human {\n    fn fly(&self) {\n        println!("\u8fd9\u662f\u4f60\u7684\u673a\u957f\u5728\u8bb2\u8bdd");\n    }\n}\n\nimpl Wizard for Human {\n    fn fly(&self) {\n        println!("\u98de\u8d77\u6765!");\n    }\n}\n\nimpl Human {\n    fn fly(&self) {\n        println!("*\u75af\u72c2\u6325\u52a8\u624b\u81c2*");\n    }\n}\n\nfn main() {\n    let person = Human;\n    \n    person.fly();                // \u8c03\u7528 Human::fly\n    Pilot::fly(&person);         // \u8c03\u7528 Pilot::fly\n    Wizard::fly(&person);        // \u8c03\u7528 Wizard::fly\n    <Human as Pilot>::fly(&person);  // \u5b8c\u5168\u9650\u5b9a\u8bed\u6cd5\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"\u603b\u7ed3",children:"\u603b\u7ed3"}),"\n",(0,r.jsx)(e.p,{children:"\u672c\u6587\u4ecb\u7ecd\u4e86\u6cdb\u578b\u548c Trait\uff1a"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u2705 \u6cdb\u578b\u51fd\u6570\u3001\u7ed3\u6784\u4f53\u548c\u679a\u4e3e"}),"\n",(0,r.jsx)(e.li,{children:"\u2705 Trait \u5b9a\u4e49\u548c\u5b9e\u73b0"}),"\n",(0,r.jsx)(e.li,{children:"\u2705 Trait Bound"}),"\n",(0,r.jsx)(e.li,{children:"\u2705 \u9ed8\u8ba4\u5b9e\u73b0"}),"\n",(0,r.jsx)(e.li,{children:"\u2705 \u5e38\u7528 Trait"}),"\n",(0,r.jsx)(e.li,{children:"\u2705 Trait \u5bf9\u8c61"}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:["\u638c\u63e1\u6cdb\u578b\u548c Trait \u540e\uff0c\u7ee7\u7eed\u5b66\u4e60 ",(0,r.jsx)(e.a,{href:"/docs/rust/concurrency",children:"\u5e76\u53d1\u7f16\u7a0b"}),"\u3002"]})]})}function c(n={}){const{wrapper:e}={...(0,l.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(o,{...n})}):o(n)}},48885:(n,e,t)=>{t.d(e,{R:()=>a,x:()=>s});var i=t(99378);const r={},l=i.createContext(r);function a(n){const e=i.useContext(l);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:a(n.components),i.createElement(l.Provider,{value:e},n.children)}}}]);