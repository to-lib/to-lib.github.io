"use strict";(globalThis.webpackChunkto_lib_github_io=globalThis.webpackChunkto_lib_github_io||[]).push([[1229],{48885:(n,e,a)=>{a.d(e,{R:()=>o,x:()=>l});var t=a(99378);const r={},s=t.createContext(r);function o(n){const e=t.useContext(s);return t.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:o(n.components),t.createElement(s.Provider,{value:e},n.children)}},64008:(n,e,a)=>{a.r(e),a.d(e,{assets:()=>i,contentTitle:()=>l,default:()=>m,frontMatter:()=>o,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"react/forms","title":"\u8868\u5355\u5904\u7406","description":"[!TIP]","source":"@site/docs/react/forms.md","sourceDirName":"react","slug":"/react/forms","permalink":"/docs/react/forms","draft":false,"unlisted":false,"editUrl":"https://github.com/to-lib/to-lib.github.io/tree/main/docs/react/forms.md","tags":[],"version":"current","sidebarPosition":12,"frontMatter":{"sidebar_position":12,"title":"\u8868\u5355\u5904\u7406"},"sidebar":"react","previous":{"title":"\u6027\u80fd\u4f18\u5316","permalink":"/docs/react/performance-optimization"},"next":{"title":"React 19 \u65b0\u7279\u6027","permalink":"/docs/react/react19-features"}}');var r=a(22714),s=a(48885);const o={sidebar_position:12,title:"\u8868\u5355\u5904\u7406"},l="React \u8868\u5355\u5904\u7406",i={},d=[{value:"\ud83c\udfaf \u53d7\u63a7\u7ec4\u4ef6",id:"-\u53d7\u63a7\u7ec4\u4ef6",level:2},{value:"\u57fa\u7840\u8f93\u5165",id:"\u57fa\u7840\u8f93\u5165",level:3},{value:"\u591a\u4e2a\u8f93\u5165",id:"\u591a\u4e2a\u8f93\u5165",level:3},{value:"\u9009\u62e9\u6846\u548c\u590d\u9009\u6846",id:"\u9009\u62e9\u6846\u548c\u590d\u9009\u6846",level:3},{value:"\ud83d\udd13 \u975e\u53d7\u63a7\u7ec4\u4ef6",id:"-\u975e\u53d7\u63a7\u7ec4\u4ef6",level:2},{value:"\u57fa\u7840\u7528\u6cd5",id:"\u57fa\u7840\u7528\u6cd5",level:3},{value:"\u2705 \u8868\u5355\u9a8c\u8bc1",id:"-\u8868\u5355\u9a8c\u8bc1",level:2},{value:"\u624b\u52a8\u9a8c\u8bc1",id:"\u624b\u52a8\u9a8c\u8bc1",level:3},{value:"\ud83d\udee0\ufe0f React Hook Form",id:"\ufe0f-react-hook-form",level:2},{value:"\u57fa\u7840\u7528\u6cd5",id:"\u57fa\u7840\u7528\u6cd5-1",level:3},{value:"\u590d\u6742\u9a8c\u8bc1",id:"\u590d\u6742\u9a8c\u8bc1",level:3},{value:"\ud83d\udcd6 \u5b9e\u7528\u793a\u4f8b",id:"-\u5b9e\u7528\u793a\u4f8b",level:2},{value:"\u52a8\u6001\u8868\u5355\u5b57\u6bb5",id:"\u52a8\u6001\u8868\u5355\u5b57\u6bb5",level:3},{value:"\u6587\u4ef6\u4e0a\u4f20",id:"\u6587\u4ef6\u4e0a\u4f20",level:3},{value:"\u591a\u6b65\u8868\u5355",id:"\u591a\u6b65\u8868\u5355",level:3}];function c(n){const e={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"react-\u8868\u5355\u5904\u7406",children:"React \u8868\u5355\u5904\u7406"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"[!TIP]\n\u8868\u5355\u662f Web \u5e94\u7528\u7684\u91cd\u8981\u7ec4\u6210\u90e8\u5206\uff0cReact \u63d0\u4f9b\u4e86\u53d7\u63a7\u7ec4\u4ef6\u548c\u975e\u53d7\u63a7\u7ec4\u4ef6\u4e24\u79cd\u65b9\u5f0f\u5904\u7406\u8868\u5355\u3002"}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"-\u53d7\u63a7\u7ec4\u4ef6",children:"\ud83c\udfaf \u53d7\u63a7\u7ec4\u4ef6"}),"\n",(0,r.jsx)(e.p,{children:"\u53d7\u63a7\u7ec4\u4ef6\u7684\u8868\u5355\u6570\u636e\u7531 React \u7ec4\u4ef6\u7684 state \u7ba1\u7406\u3002"}),"\n",(0,r.jsx)(e.h3,{id:"\u57fa\u7840\u8f93\u5165",children:"\u57fa\u7840\u8f93\u5165"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-jsx",children:'function Form() {\n  const [name, setName] = useState("");\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    console.log("Submitted:", name);\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <input\n        type="text"\n        value={name}\n        onChange={(e) => setName(e.target.value)}\n        placeholder="Enter name"\n      />\n      <button type="submit">Submit</button>\n    </form>\n  );\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u591a\u4e2a\u8f93\u5165",children:"\u591a\u4e2a\u8f93\u5165"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-jsx",children:'function ContactForm() {\n  const [formData, setFormData] = useState({\n    name: "",\n    email: "",\n    message: "",\n  });\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData((prev) => ({\n      ...prev,\n      [name]: value,\n    }));\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    console.log("Form data:", formData);\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <input\n        name="name"\n        value={formData.name}\n        onChange={handleChange}\n        placeholder="Name"\n      />\n      <input\n        name="email"\n        type="email"\n        value={formData.email}\n        onChange={handleChange}\n        placeholder="Email"\n      />\n      <textarea\n        name="message"\n        value={formData.message}\n        onChange={handleChange}\n        placeholder="Message"\n      />\n      <button type="submit">Send</button>\n    </form>\n  );\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u9009\u62e9\u6846\u548c\u590d\u9009\u6846",children:"\u9009\u62e9\u6846\u548c\u590d\u9009\u6846"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-jsx",children:'function PreferencesForm() {\n  const [preferences, setPreferences] = useState({\n    theme: "light",\n    notifications: true,\n    newsletter: false,\n  });\n\n  const handleChange = (e) => {\n    const { name, value, type, checked } = e.target;\n    setPreferences((prev) => ({\n      ...prev,\n      [name]: type === "checkbox" ? checked : value,\n    }));\n  };\n\n  return (\n    <form>\n      {/* \u9009\u62e9\u6846 */}\n      <select name="theme" value={preferences.theme} onChange={handleChange}>\n        <option value="light">Light</option>\n        <option value="dark">Dark</option>\n        <option value="auto">Auto</option>\n      </select>\n\n      {/* \u590d\u9009\u6846 */}\n      <label>\n        <input\n          type="checkbox"\n          name="notifications"\n          checked={preferences.notifications}\n          onChange={handleChange}\n        />\n        Enable Notifications\n      </label>\n\n      <label>\n        <input\n          type="checkbox"\n          name="newsletter"\n          checked={preferences.newsletter}\n          onChange={handleChange}\n        />\n        Subscribe to Newsletter\n      </label>\n    </form>\n  );\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"-\u975e\u53d7\u63a7\u7ec4\u4ef6",children:"\ud83d\udd13 \u975e\u53d7\u63a7\u7ec4\u4ef6"}),"\n",(0,r.jsx)(e.p,{children:"\u975e\u53d7\u63a7\u7ec4\u4ef6\u4f7f\u7528 ref \u76f4\u63a5\u8bbf\u95ee DOM \u5143\u7d20\u7684\u503c\u3002"}),"\n",(0,r.jsx)(e.h3,{id:"\u57fa\u7840\u7528\u6cd5",children:"\u57fa\u7840\u7528\u6cd5"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-jsx",children:'function UncontrolledForm() {\n  const nameRef = useRef();\n  const emailRef = useRef();\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    console.log("Name:", nameRef.current.value);\n    console.log("Email:", emailRef.current.value);\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <input ref={nameRef} type="text" defaultValue="Alice" />\n      <input ref={emailRef} type="email" />\n      <button type="submit">Submit</button>\n    </form>\n  );\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"-\u8868\u5355\u9a8c\u8bc1",children:"\u2705 \u8868\u5355\u9a8c\u8bc1"}),"\n",(0,r.jsx)(e.h3,{id:"\u624b\u52a8\u9a8c\u8bc1",children:"\u624b\u52a8\u9a8c\u8bc1"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-jsx",children:'function LoginForm() {\n  const [formData, setFormData] = useState({\n    email: "",\n    password: "",\n  });\n  const [errors, setErrors] = useState({});\n\n  const validate = () => {\n    const newErrors = {};\n\n    if (!formData.email) {\n      newErrors.email = "Email is required";\n    } else if (!/\\S+@\\S+\\.\\S+/.test(formData.email)) {\n      newErrors.email = "Email is invalid";\n    }\n\n    if (!formData.password) {\n      newErrors.password = "Password is required";\n    } else if (formData.password.length < 6) {\n      newErrors.password = "Password must be at least 6 characters";\n    }\n\n    return newErrors;\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    const validationErrors = validate();\n\n    if (Object.keys(validationErrors).length > 0) {\n      setErrors(validationErrors);\n      return;\n    }\n\n    console.log("Form is valid!", formData);\n    setErrors({});\n  };\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData((prev) => ({ ...prev, [name]: value }));\n    // \u6e05\u9664\u8be5\u5b57\u6bb5\u7684\u9519\u8bef\n    if (errors[name]) {\n      setErrors((prev) => ({ ...prev, [name]: "" }));\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <div>\n        <input\n          name="email"\n          type="email"\n          value={formData.email}\n          onChange={handleChange}\n          placeholder="Email"\n        />\n        {errors.email && <span className="error">{errors.email}</span>}\n      </div>\n\n      <div>\n        <input\n          name="password"\n          type="password"\n          value={formData.password}\n          onChange={handleChange}\n          placeholder="Password"\n        />\n        {errors.password && <span className="error">{errors.password}</span>}\n      </div>\n\n      <button type="submit">Login</button>\n    </form>\n  );\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"\ufe0f-react-hook-form",children:"\ud83d\udee0\ufe0f React Hook Form"}),"\n",(0,r.jsx)(e.p,{children:"React Hook Form \u662f\u4e00\u4e2a\u9ad8\u6027\u80fd\u3001\u7075\u6d3b\u7684\u8868\u5355\u5e93\u3002"}),"\n",(0,r.jsx)(e.h3,{id:"\u57fa\u7840\u7528\u6cd5-1",children:"\u57fa\u7840\u7528\u6cd5"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-jsx",children:'import { useForm } from "react-hook-form";\n\nfunction RegistrationForm() {\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n  } = useForm();\n\n  const onSubmit = (data) => {\n    console.log(data);\n  };\n\n  return (\n    <form onSubmit={handleSubmit(onSubmit)}>\n      <input\n        {...register("name", { required: "Name is required" })}\n        placeholder="Name"\n      />\n      {errors.name && <span>{errors.name.message}</span>}\n\n      <input\n        {...register("email", {\n          required: "Email is required",\n          pattern: {\n            value: /\\S+@\\S+\\.\\S+/,\n            message: "Invalid email",\n          },\n        })}\n        placeholder="Email"\n      />\n      {errors.email && <span>{errors.email.message}</span>}\n\n      <input\n        {...register("password", {\n          required: "Password is required",\n          minLength: {\n            value: 6,\n            message: "Password must be at least 6 characters",\n          },\n        })}\n        type="password"\n        placeholder="Password"\n      />\n      {errors.password && <span>{errors.password.message}</span>}\n\n      <button type="submit">Register</button>\n    </form>\n  );\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u590d\u6742\u9a8c\u8bc1",children:"\u590d\u6742\u9a8c\u8bc1"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-jsx",children:'function AdvancedForm() {\n  const {\n    register,\n    handleSubmit,\n    watch,\n    formState: { errors },\n  } = useForm();\n\n  const password = watch("password");\n\n  const onSubmit = (data) => {\n    console.log(data);\n  };\n\n  return (\n    <form onSubmit={handleSubmit(onSubmit)}>\n      <input\n        {...register("username", {\n          required: "Username is required",\n          minLength: {\n            value: 3,\n            message: "Username must be at least 3 characters",\n          },\n          validate: async (value) => {\n            // \u5f02\u6b65\u9a8c\u8bc1\n            const exists = await checkUsernameExists(value);\n            return !exists || "Username already taken";\n          },\n        })}\n        placeholder="Username"\n      />\n      {errors.username && <span>{errors.username.message}</span>}\n\n      <input\n        {...register("password", {\n          required: "Password is required",\n          minLength: {\n            value: 8,\n            message: "Password must be at least 8 characters",\n          },\n        })}\n        type="password"\n        placeholder="Password"\n      />\n      {errors.password && <span>{errors.password.message}</span>}\n\n      <input\n        {...register("confirmPassword", {\n          required: "Please confirm password",\n          validate: (value) => value === password || "Passwords do not match",\n        })}\n        type="password"\n        placeholder="Confirm Password"\n      />\n      {errors.confirmPassword && <span>{errors.confirmPassword.message}</span>}\n\n      <button type="submit">Submit</button>\n    </form>\n  );\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"-\u5b9e\u7528\u793a\u4f8b",children:"\ud83d\udcd6 \u5b9e\u7528\u793a\u4f8b"}),"\n",(0,r.jsx)(e.h3,{id:"\u52a8\u6001\u8868\u5355\u5b57\u6bb5",children:"\u52a8\u6001\u8868\u5355\u5b57\u6bb5"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-jsx",children:'function DynamicForm() {\n  const [fields, setFields] = useState([{ id: 1, value: "" }]);\n\n  const addField = () => {\n    setFields([...fields, { id: Date.now(), value: "" }]);\n  };\n\n  const removeField = (id) => {\n    setFields(fields.filter((field) => field.id !== id));\n  };\n\n  const handleChange = (id, value) => {\n    setFields(\n      fields.map((field) => (field.id === id ? { ...field, value } : field))\n    );\n  };\n\n  return (\n    <form>\n      {fields.map((field) => (\n        <div key={field.id}>\n          <input\n            value={field.value}\n            onChange={(e) => handleChange(field.id, e.target.value)}\n          />\n          <button type="button" onClick={() => removeField(field.id)}>\n            Remove\n          </button>\n        </div>\n      ))}\n      <button type="button" onClick={addField}>\n        Add Field\n      </button>\n    </form>\n  );\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u6587\u4ef6\u4e0a\u4f20",children:"\u6587\u4ef6\u4e0a\u4f20"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-jsx",children:'function FileUploadForm() {\n  const [file, setFile] = useState(null);\n  const [preview, setPreview] = useState(null);\n\n  const handleFileChange = (e) => {\n    const selectedFile = e.target.files[0];\n    setFile(selectedFile);\n\n    // \u9884\u89c8\u56fe\u7247\n    if (selectedFile && selectedFile.type.startsWith("image/")) {\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        setPreview(reader.result);\n      };\n      reader.readAsDataURL(selectedFile);\n    }\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    const formData = new FormData();\n    formData.append("file", file);\n\n    const response = await fetch("/api/upload", {\n      method: "POST",\n      body: formData,\n    });\n\n    console.log("Uploaded!", response);\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <input type="file" accept="image/*" onChange={handleFileChange} />\n\n      {preview && (\n        <img src={preview} alt="Preview" style={{ maxWidth: "200px" }} />\n      )}\n\n      <button type="submit" disabled={!file}>\n        Upload\n      </button>\n    </form>\n  );\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u591a\u6b65\u8868\u5355",children:"\u591a\u6b65\u8868\u5355"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-jsx",children:'function MultiStepForm() {\n  const [step, setStep] = useState(1);\n  const [formData, setFormData] = useState({\n    personal: {},\n    address: {},\n    payment: {},\n  });\n\n  const handleNext = () => setStep(step + 1);\n  const handlePrev = () => setStep(step - 1);\n\n  const handleChange = (section, data) => {\n    setFormData((prev) => ({\n      ...prev,\n      [section]: { ...prev[section], ...data },\n    }));\n  };\n\n  return (\n    <div>\n      {step === 1 && (\n        <PersonalInfo\n          data={formData.personal}\n          onChange={(data) => handleChange("personal", data)}\n          onNext={handleNext}\n        />\n      )}\n\n      {step === 2 && (\n        <AddressInfo\n          data={formData.address}\n          onChange={(data) => handleChange("address", data)}\n          onNext={handleNext}\n          onPrev={handlePrev}\n        />\n      )}\n\n      {step === 3 && (\n        <PaymentInfo\n          data={formData.payment}\n          onChange={(data) => handleChange("payment", data)}\n          onPrev={handlePrev}\n          onSubmit={() => console.log("Final:", formData)}\n        />\n      )}\n    </div>\n  );\n}\n'})}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u4e0b\u4e00\u6b65"}),": \u67e5\u770b ",(0,r.jsx)(e.a,{href:"./styling",children:"\u6837\u5f0f\u65b9\u6848"})," \u4e86\u89e3\u5982\u4f55\u4e3a\u8868\u5355\u6dfb\u52a0\u6837\u5f0f\uff0c\u6216\u5b66\u4e60 ",(0,r.jsx)(e.a,{href:"./typescript",children:"TypeScript"})," \u4e3a\u8868\u5355\u6dfb\u52a0\u7c7b\u578b\u5b89\u5168\u3002"]})]})}function m(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(c,{...n})}):c(n)}}}]);