"use strict";(globalThis.webpackChunkto_lib_github_io=globalThis.webpackChunkto_lib_github_io||[]).push([[93509],{18371:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>o,contentTitle:()=>d,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"ai/moe","title":"\ud83e\udde9 Mixture of Experts","description":"Mixture of Experts \u662f\u4e00\u79cd\u7a00\u758f\u6fc0\u6d3b\u7684\u6a21\u578b\u67b6\u6784\uff0c\u901a\u8fc7\u8def\u7531\u673a\u5236\u9009\u62e9\u6027\u6fc0\u6d3b\u90e8\u5206\u4e13\u5bb6\u7f51\u7edc\uff0c\u5728\u4fdd\u6301\u5927\u6a21\u578b\u80fd\u529b\u7684\u540c\u65f6\u964d\u4f4e\u8ba1\u7b97\u6210\u672c\u3002","source":"@site/docs/ai/moe.md","sourceDirName":"ai","slug":"/ai/moe","permalink":"/docs/ai/moe","draft":false,"unlisted":false,"editUrl":"https://github.com/to-lib/to-lib.github.io/tree/main/docs/ai/moe.md","tags":[],"version":"current","sidebarPosition":36,"frontMatter":{"sidebar_position":36,"title":"\ud83e\udde9 Mixture of Experts"}}');var i=t(22714),s=t(48885);const l={sidebar_position:36,title:"\ud83e\udde9 Mixture of Experts"},d="Mixture of Experts (MoE)",o={},a=[{value:"MoE \u539f\u7406",id:"moe-\u539f\u7406",level:2},{value:"MoE vs Dense \u6a21\u578b",id:"moe-vs-dense-\u6a21\u578b",level:2},{value:"\u4e3b\u6d41 MoE \u6a21\u578b",id:"\u4e3b\u6d41-moe-\u6a21\u578b",level:2},{value:"\u4f7f\u7528 MoE \u6a21\u578b",id:"\u4f7f\u7528-moe-\u6a21\u578b",level:2},{value:"Ollama",id:"ollama",level:3},{value:"vLLM",id:"vllm",level:3},{value:"Transformers",id:"transformers",level:3},{value:"MoE \u67b6\u6784\u5b9e\u73b0",id:"moe-\u67b6\u6784\u5b9e\u73b0",level:2},{value:"\u7b80\u5316\u7248 MoE \u5c42",id:"\u7b80\u5316\u7248-moe-\u5c42",level:3},{value:"\u8d1f\u8f7d\u5747\u8861\u635f\u5931",id:"\u8d1f\u8f7d\u5747\u8861\u635f\u5931",level:3},{value:"MoE \u4f18\u5316\u6280\u5de7",id:"moe-\u4f18\u5316\u6280\u5de7",level:2},{value:"\u4e13\u5bb6\u5e76\u884c",id:"\u4e13\u5bb6\u5e76\u884c",level:3},{value:"\u91cf\u5316 MoE \u6a21\u578b",id:"\u91cf\u5316-moe-\u6a21\u578b",level:3},{value:"MoE \u90e8\u7f72\u8003\u8651",id:"moe-\u90e8\u7f72\u8003\u8651",level:2},{value:"\u663e\u5b58\u9700\u6c42",id:"\u663e\u5b58\u9700\u6c42",level:3},{value:"\u63a8\u7406\u4f18\u5316",id:"\u63a8\u7406\u4f18\u5316",level:3},{value:"MoE vs Dense \u9009\u62e9",id:"moe-vs-dense-\u9009\u62e9",level:2},{value:"\u6700\u4f73\u5b9e\u8df5",id:"\u6700\u4f73\u5b9e\u8df5",level:2},{value:"\u5ef6\u4f38\u9605\u8bfb",id:"\u5ef6\u4f38\u9605\u8bfb",level:2}];function c(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.header,{children:(0,i.jsx)(e.h1,{id:"mixture-of-experts-moe",children:"Mixture of Experts (MoE)"})}),"\n",(0,i.jsx)(e.p,{children:"Mixture of Experts \u662f\u4e00\u79cd\u7a00\u758f\u6fc0\u6d3b\u7684\u6a21\u578b\u67b6\u6784\uff0c\u901a\u8fc7\u8def\u7531\u673a\u5236\u9009\u62e9\u6027\u6fc0\u6d3b\u90e8\u5206\u4e13\u5bb6\u7f51\u7edc\uff0c\u5728\u4fdd\u6301\u5927\u6a21\u578b\u80fd\u529b\u7684\u540c\u65f6\u964d\u4f4e\u8ba1\u7b97\u6210\u672c\u3002"}),"\n",(0,i.jsx)(e.h2,{id:"moe-\u539f\u7406",children:"MoE \u539f\u7406"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                    \u2502   Router    \u2502\n                    \u2502  (\u95e8\u63a7\u7f51\u7edc)  \u2502\n                    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                           \u2502\n           \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n           \u25bc       \u25bc       \u25bc       \u25bc       \u25bc\n        \u250c\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2510\n        \u2502 E1  \u2502 \u2502 E2  \u2502 \u2502 E3  \u2502 \u2502 E4  \u2502 \u2502 E5  \u2502\n        \u2502\u4e13\u5bb61\u2502 \u2502\u4e13\u5bb62\u2502 \u2502\u4e13\u5bb63\u2502 \u2502\u4e13\u5bb64\u2502 \u2502\u4e13\u5bb65\u2502\n        \u2514\u2500\u2500\u252c\u2500\u2500\u2518 \u2514\u2500\u2500\u252c\u2500\u2500\u2518 \u2514\u2500\u2500\u252c\u2500\u2500\u2518 \u2514\u2500\u2500\u252c\u2500\u2500\u2518 \u2514\u2500\u2500\u252c\u2500\u2500\u2518\n           \u2502       \u2502       \u2502       \u2502       \u2502\n           \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                           \u25bc\n                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                    \u2502  \u52a0\u6743\u6c42\u548c   \u2502\n                    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n\u6bcf\u6b21\u53ea\u6fc0\u6d3b Top-K \u4e2a\u4e13\u5bb6\uff08\u901a\u5e38 K=2\uff09\n"})}),"\n",(0,i.jsx)(e.h2,{id:"moe-vs-dense-\u6a21\u578b",children:"MoE vs Dense \u6a21\u578b"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"\u7279\u6027"}),(0,i.jsx)(e.th,{children:"Dense \u6a21\u578b"}),(0,i.jsx)(e.th,{children:"MoE \u6a21\u578b"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u53c2\u6570\u6fc0\u6d3b"}),(0,i.jsx)(e.td,{children:"100%"}),(0,i.jsx)(e.td,{children:"10-20%"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u603b\u53c2\u6570\u91cf"}),(0,i.jsx)(e.td,{children:"\u8f83\u5c0f"}),(0,i.jsx)(e.td,{children:"\u8f83\u5927"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u63a8\u7406\u6210\u672c"}),(0,i.jsx)(e.td,{children:"\u9ad8"}),(0,i.jsx)(e.td,{children:"\u4f4e"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u8bad\u7ec3\u96be\u5ea6"}),(0,i.jsx)(e.td,{children:"\u7b80\u5355"}),(0,i.jsx)(e.td,{children:"\u590d\u6742"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u4ee3\u8868\u6a21\u578b"}),(0,i.jsx)(e.td,{children:"LLaMA, GPT-4"}),(0,i.jsx)(e.td,{children:"Mixtral, DeepSeek"})]})]})]}),"\n",(0,i.jsx)(e.h2,{id:"\u4e3b\u6d41-moe-\u6a21\u578b",children:"\u4e3b\u6d41 MoE \u6a21\u578b"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"\u6a21\u578b"}),(0,i.jsx)(e.th,{children:"\u603b\u53c2\u6570"}),(0,i.jsx)(e.th,{children:"\u6fc0\u6d3b\u53c2\u6570"}),(0,i.jsx)(e.th,{children:"\u4e13\u5bb6\u6570"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"Mixtral 8x7B"}),(0,i.jsx)(e.td,{children:"47B"}),(0,i.jsx)(e.td,{children:"13B"}),(0,i.jsx)(e.td,{children:"8"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"Mixtral 8x22B"}),(0,i.jsx)(e.td,{children:"141B"}),(0,i.jsx)(e.td,{children:"39B"}),(0,i.jsx)(e.td,{children:"8"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"DeepSeek-V2"}),(0,i.jsx)(e.td,{children:"236B"}),(0,i.jsx)(e.td,{children:"21B"}),(0,i.jsx)(e.td,{children:"160"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"Qwen2-MoE"}),(0,i.jsx)(e.td,{children:"57B"}),(0,i.jsx)(e.td,{children:"14B"}),(0,i.jsx)(e.td,{children:"64"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"DBRX"}),(0,i.jsx)(e.td,{children:"132B"}),(0,i.jsx)(e.td,{children:"36B"}),(0,i.jsx)(e.td,{children:"16"})]})]})]}),"\n",(0,i.jsx)(e.h2,{id:"\u4f7f\u7528-moe-\u6a21\u578b",children:"\u4f7f\u7528 MoE \u6a21\u578b"}),"\n",(0,i.jsx)(e.h3,{id:"ollama",children:"Ollama"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:'# \u4e0b\u8f7d Mixtral\nollama pull mixtral\n\n# \u8fd0\u884c\nollama run mixtral "\u89e3\u91ca\u4ec0\u4e48\u662f MoE \u67b6\u6784"\n'})}),"\n",(0,i.jsx)(e.h3,{id:"vllm",children:"vLLM"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:'from vllm import LLM, SamplingParams\n\n# \u52a0\u8f7d MoE \u6a21\u578b\nllm = LLM(\n    model="mistralai/Mixtral-8x7B-Instruct-v0.1",\n    tensor_parallel_size=2,  # \u591a\u5361\u5e76\u884c\n    dtype="float16"\n)\n\nsampling_params = SamplingParams(\n    temperature=0.7,\n    max_tokens=512\n)\n\noutputs = llm.generate(["\u89e3\u91ca MoE \u67b6\u6784\u7684\u4f18\u52bf"], sampling_params)\nprint(outputs[0].outputs[0].text)\n'})}),"\n",(0,i.jsx)(e.h3,{id:"transformers",children:"Transformers"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:'from transformers import AutoModelForCausalLM, AutoTokenizer\nimport torch\n\nmodel_id = "mistralai/Mixtral-8x7B-Instruct-v0.1"\n\ntokenizer = AutoTokenizer.from_pretrained(model_id)\nmodel = AutoModelForCausalLM.from_pretrained(\n    model_id,\n    torch_dtype=torch.float16,\n    device_map="auto"\n)\n\nmessages = [{"role": "user", "content": "\u4ec0\u4e48\u662f MoE\uff1f"}]\ninputs = tokenizer.apply_chat_template(messages, return_tensors="pt").to("cuda")\n\noutputs = model.generate(inputs, max_new_tokens=256)\nprint(tokenizer.decode(outputs[0]))\n'})}),"\n",(0,i.jsx)(e.h2,{id:"moe-\u67b6\u6784\u5b9e\u73b0",children:"MoE \u67b6\u6784\u5b9e\u73b0"}),"\n",(0,i.jsx)(e.h3,{id:"\u7b80\u5316\u7248-moe-\u5c42",children:"\u7b80\u5316\u7248 MoE \u5c42"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:'import torch\nimport torch.nn as nn\nimport torch.nn.functional as F\n\nclass Expert(nn.Module):\n    """\u5355\u4e2a\u4e13\u5bb6\u7f51\u7edc"""\n    \n    def __init__(self, input_dim: int, hidden_dim: int):\n        super().__init__()\n        self.fc1 = nn.Linear(input_dim, hidden_dim)\n        self.fc2 = nn.Linear(hidden_dim, input_dim)\n        self.activation = nn.SiLU()\n    \n    def forward(self, x):\n        return self.fc2(self.activation(self.fc1(x)))\n\nclass Router(nn.Module):\n    """\u8def\u7531\u7f51\u7edc"""\n    \n    def __init__(self, input_dim: int, num_experts: int):\n        super().__init__()\n        self.gate = nn.Linear(input_dim, num_experts)\n    \n    def forward(self, x):\n        # \u8fd4\u56de\u6bcf\u4e2a\u4e13\u5bb6\u7684\u6743\u91cd\n        return F.softmax(self.gate(x), dim=-1)\n\nclass MoELayer(nn.Module):\n    """MoE \u5c42"""\n    \n    def __init__(\n        self,\n        input_dim: int,\n        hidden_dim: int,\n        num_experts: int = 8,\n        top_k: int = 2\n    ):\n        super().__init__()\n        self.num_experts = num_experts\n        self.top_k = top_k\n        \n        # \u521b\u5efa\u4e13\u5bb6\n        self.experts = nn.ModuleList([\n            Expert(input_dim, hidden_dim)\n            for _ in range(num_experts)\n        ])\n        \n        # \u8def\u7531\u5668\n        self.router = Router(input_dim, num_experts)\n    \n    def forward(self, x):\n        batch_size, seq_len, dim = x.shape\n        x_flat = x.view(-1, dim)\n        \n        # \u8ba1\u7b97\u8def\u7531\u6743\u91cd\n        router_logits = self.router(x_flat)\n        \n        # \u9009\u62e9 Top-K \u4e13\u5bb6\n        top_k_weights, top_k_indices = torch.topk(router_logits, self.top_k, dim=-1)\n        top_k_weights = F.softmax(top_k_weights, dim=-1)\n        \n        # \u8ba1\u7b97\u8f93\u51fa\n        output = torch.zeros_like(x_flat)\n        \n        for i in range(self.top_k):\n            expert_idx = top_k_indices[:, i]\n            expert_weight = top_k_weights[:, i].unsqueeze(-1)\n            \n            for j in range(self.num_experts):\n                mask = expert_idx == j\n                if mask.any():\n                    expert_input = x_flat[mask]\n                    expert_output = self.experts[j](expert_input)\n                    output[mask] += expert_weight[mask] * expert_output\n        \n        return output.view(batch_size, seq_len, dim)\n'})}),"\n",(0,i.jsx)(e.h3,{id:"\u8d1f\u8f7d\u5747\u8861\u635f\u5931",children:"\u8d1f\u8f7d\u5747\u8861\u635f\u5931"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:'def load_balancing_loss(router_logits: torch.Tensor, top_k: int = 2) -> torch.Tensor:\n    """\u8ba1\u7b97\u8d1f\u8f7d\u5747\u8861\u635f\u5931\uff0c\u9632\u6b62\u4e13\u5bb6\u4f7f\u7528\u4e0d\u5747"""\n    num_experts = router_logits.shape[-1]\n    \n    # \u8ba1\u7b97\u6bcf\u4e2a\u4e13\u5bb6\u88ab\u9009\u4e2d\u7684\u9891\u7387\n    top_k_indices = torch.topk(router_logits, top_k, dim=-1).indices\n    expert_counts = torch.zeros(num_experts, device=router_logits.device)\n    \n    for i in range(num_experts):\n        expert_counts[i] = (top_k_indices == i).float().sum()\n    \n    # \u5f52\u4e00\u5316\n    expert_probs = expert_counts / expert_counts.sum()\n    \n    # \u8ba1\u7b97\u4e0e\u5747\u5300\u5206\u5e03\u7684\u5dee\u5f02\n    uniform_prob = 1.0 / num_experts\n    loss = ((expert_probs - uniform_prob) ** 2).sum()\n    \n    return loss\n'})}),"\n",(0,i.jsx)(e.h2,{id:"moe-\u4f18\u5316\u6280\u5de7",children:"MoE \u4f18\u5316\u6280\u5de7"}),"\n",(0,i.jsx)(e.h3,{id:"\u4e13\u5bb6\u5e76\u884c",children:"\u4e13\u5bb6\u5e76\u884c"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:'# \u4f7f\u7528 DeepSpeed \u8fdb\u884c\u4e13\u5bb6\u5e76\u884c\nimport deepspeed\n\nconfig = {\n    "train_batch_size": 32,\n    "moe": {\n        "enabled": True,\n        "ep_size": 4,  # \u4e13\u5bb6\u5e76\u884c\u5ea6\n        "moe_param_group": True\n    }\n}\n\nmodel, optimizer, _, _ = deepspeed.initialize(\n    model=model,\n    config=config\n)\n'})}),"\n",(0,i.jsx)(e.h3,{id:"\u91cf\u5316-moe-\u6a21\u578b",children:"\u91cf\u5316 MoE \u6a21\u578b"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:'from transformers import AutoModelForCausalLM, BitsAndBytesConfig\n\n# 4-bit \u91cf\u5316\nbnb_config = BitsAndBytesConfig(\n    load_in_4bit=True,\n    bnb_4bit_quant_type="nf4",\n    bnb_4bit_compute_dtype=torch.float16\n)\n\nmodel = AutoModelForCausalLM.from_pretrained(\n    "mistralai/Mixtral-8x7B-Instruct-v0.1",\n    quantization_config=bnb_config,\n    device_map="auto"\n)\n'})}),"\n",(0,i.jsx)(e.h2,{id:"moe-\u90e8\u7f72\u8003\u8651",children:"MoE \u90e8\u7f72\u8003\u8651"}),"\n",(0,i.jsx)(e.h3,{id:"\u663e\u5b58\u9700\u6c42",children:"\u663e\u5b58\u9700\u6c42"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{children:"Mixtral 8x7B (FP16):\n- \u603b\u53c2\u6570\uff1a47B \xd7 2 bytes = 94 GB\n- \u4f46\u53ea\u9700\u52a0\u8f7d\u6fc0\u6d3b\u7684\u4e13\u5bb6\n- \u5b9e\u9645\u663e\u5b58\uff1a~26 GB\uff08\u5355\u5361\u53ef\u8fd0\u884c\u91cf\u5316\u7248\u672c\uff09\n\nDeepSeek-V2 (FP16):\n- \u603b\u53c2\u6570\uff1a236B\n- \u6fc0\u6d3b\u53c2\u6570\uff1a21B\n- \u63a8\u7406\u663e\u5b58\uff1a~50 GB\n"})}),"\n",(0,i.jsx)(e.h3,{id:"\u63a8\u7406\u4f18\u5316",children:"\u63a8\u7406\u4f18\u5316"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-python",children:'# \u4f7f\u7528 vLLM \u7684 MoE \u4f18\u5316\nfrom vllm import LLM\n\nllm = LLM(\n    model="mistralai/Mixtral-8x7B-Instruct-v0.1",\n    tensor_parallel_size=2,\n    # MoE \u7279\u5b9a\u4f18\u5316\n    enable_prefix_caching=True,  # \u524d\u7f00\u7f13\u5b58\n    max_num_seqs=256,            # \u6279\u5904\u7406\u5927\u5c0f\n)\n'})}),"\n",(0,i.jsx)(e.h2,{id:"moe-vs-dense-\u9009\u62e9",children:"MoE vs Dense \u9009\u62e9"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"\u573a\u666f"}),(0,i.jsx)(e.th,{children:"\u63a8\u8350"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u8d44\u6e90\u6709\u9650"}),(0,i.jsx)(e.td,{children:"MoE\uff08\u6fc0\u6d3b\u53c2\u6570\u5c11\uff09"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u8ffd\u6c42\u6781\u81f4\u6027\u80fd"}),(0,i.jsx)(e.td,{children:"Dense\uff08\u66f4\u7a33\u5b9a\uff09"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u591a\u4efb\u52a1\u573a\u666f"}),(0,i.jsx)(e.td,{children:"MoE\uff08\u4e13\u5bb6\u4e13\u4e1a\u5316\uff09"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u7b80\u5355\u90e8\u7f72"}),(0,i.jsx)(e.td,{children:"Dense\uff08\u67b6\u6784\u7b80\u5355\uff09"})]})]})]}),"\n",(0,i.jsx)(e.h2,{id:"\u6700\u4f73\u5b9e\u8df5",children:"\u6700\u4f73\u5b9e\u8df5"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u9009\u62e9\u5408\u9002\u7684 Top-K"}),"\uff1a\u901a\u5e38 K=2 \u662f\u597d\u7684\u5e73\u8861\u70b9"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u6ce8\u610f\u8d1f\u8f7d\u5747\u8861"}),"\uff1a\u9632\u6b62\u90e8\u5206\u4e13\u5bb6\u8fc7\u8f7d"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u91cf\u5316\u90e8\u7f72"}),"\uff1aMoE \u6a21\u578b\u7279\u522b\u9002\u5408\u91cf\u5316"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u4e13\u5bb6\u5e76\u884c"}),"\uff1a\u591a\u5361\u90e8\u7f72\u65f6\u4f7f\u7528\u4e13\u5bb6\u5e76\u884c"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u76d1\u63a7\u4e13\u5bb6\u4f7f\u7528"}),"\uff1a\u5206\u6790\u54ea\u4e9b\u4e13\u5bb6\u88ab\u9891\u7e41\u4f7f\u7528"]}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"\u5ef6\u4f38\u9605\u8bfb",children:"\u5ef6\u4f38\u9605\u8bfb"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://arxiv.org/abs/2401.04088",children:"Mixtral Paper"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://arxiv.org/abs/2405.04434",children:"DeepSeek-V2"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://arxiv.org/abs/2101.03961",children:"Switch Transformer"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://arxiv.org/abs/2006.16668",children:"GShard"})}),"\n"]})]})}function h(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(c,{...n})}):c(n)}},48885:(n,e,t)=>{t.d(e,{R:()=>l,x:()=>d});var r=t(99378);const i={},s=r.createContext(i);function l(n){const e=r.useContext(s);return r.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function d(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:l(n.components),r.createElement(s.Provider,{value:e},n.children)}}}]);