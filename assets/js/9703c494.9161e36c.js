"use strict";(globalThis.webpackChunkto_lib_github_io=globalThis.webpackChunkto_lib_github_io||[]).push([[22118],{48885:(n,e,s)=>{s.d(e,{R:()=>i,x:()=>c});var r=s(99378);const l={},d=r.createContext(l);function i(n){const e=r.useContext(d);return r.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:i(n.components),r.createElement(d.Provider,{value:e},n.children)}},58956:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>t});const r=JSON.parse('{"id":"redis/configuration","title":"\u914d\u7f6e\u4e0e\u90e8\u7f72","description":"\u672c\u7ae0\u5168\u9762\u4ecb\u7ecd Redis \u5728\u751f\u4ea7\u73af\u5883\u4e2d\u7684\u914d\u7f6e\u9879\u3001\u90e8\u7f72\u65b9\u5f0f\u548c\u6700\u4f73\u5b9e\u8df5\uff0c\u5e2e\u52a9\u4f60\u6784\u5efa\u7a33\u5b9a\u53ef\u9760\u7684 Redis \u670d\u52a1\u3002","source":"@site/docs/redis/configuration.md","sourceDirName":"redis","slug":"/redis/configuration","permalink":"/docs/redis/configuration","draft":false,"unlisted":false,"editUrl":"https://github.com/to-lib/to-lib.github.io/tree/main/docs/redis/configuration.md","tags":[],"version":"current","sidebarPosition":24,"frontMatter":{"sidebar_position":24,"title":"\u914d\u7f6e\u4e0e\u90e8\u7f72"},"sidebar":"redis","previous":{"title":"\u5b9e\u6218\u6848\u4f8b","permalink":"/docs/redis/practical-examples"},"next":{"title":"\u76d1\u63a7\u4e0e\u6392\u969c","permalink":"/docs/redis/monitoring-and-troubleshooting"}}');var l=s(22714),d=s(48885);const i={sidebar_position:24,title:"\u914d\u7f6e\u4e0e\u90e8\u7f72"},c="Redis \u914d\u7f6e\u4e0e\u90e8\u7f72",a={},t=[{value:"\u914d\u7f6e\u6587\u4ef6\u4f4d\u7f6e",id:"\u914d\u7f6e\u6587\u4ef6\u4f4d\u7f6e",level:2},{value:"\u542f\u52a8\u4e0e\u914d\u7f6e\u52a0\u8f7d",id:"\u542f\u52a8\u4e0e\u914d\u7f6e\u52a0\u8f7d",level:2},{value:"\u542f\u52a8\u65b9\u5f0f",id:"\u542f\u52a8\u65b9\u5f0f",level:3},{value:"\u52a8\u6001\u4fee\u6539\u914d\u7f6e",id:"\u52a8\u6001\u4fee\u6539\u914d\u7f6e",level:3},{value:"\u7f51\u7edc\u914d\u7f6e",id:"\u7f51\u7edc\u914d\u7f6e",level:2},{value:"\u7ed1\u5b9a\u5730\u5740\u4e0e\u7aef\u53e3",id:"\u7ed1\u5b9a\u5730\u5740\u4e0e\u7aef\u53e3",level:3},{value:"\u4fdd\u62a4\u6a21\u5f0f",id:"\u4fdd\u62a4\u6a21\u5f0f",level:3},{value:"\u8fde\u63a5\u7ba1\u7406",id:"\u8fde\u63a5\u7ba1\u7406",level:3},{value:"TLS/SSL \u914d\u7f6e",id:"tlsssl-\u914d\u7f6e",level:3},{value:"\u8ba4\u8bc1\u4e0e\u6743\u9650",id:"\u8ba4\u8bc1\u4e0e\u6743\u9650",level:2},{value:"\u5bc6\u7801\u8ba4\u8bc1",id:"\u5bc6\u7801\u8ba4\u8bc1",level:3},{value:"ACL \u6743\u9650\u63a7\u5236 (Redis 6.0+)",id:"acl-\u6743\u9650\u63a7\u5236-redis-60",level:3},{value:"\u5185\u5b58\u914d\u7f6e",id:"\u5185\u5b58\u914d\u7f6e",level:2},{value:"\u5185\u5b58\u9650\u5236",id:"\u5185\u5b58\u9650\u5236",level:3},{value:"\u5185\u5b58\u6dd8\u6c70\u7b56\u7565\u8be6\u89e3",id:"\u5185\u5b58\u6dd8\u6c70\u7b56\u7565\u8be6\u89e3",level:3},{value:"\u60f0\u6027\u5220\u9664 (Lazy Freeing)",id:"\u60f0\u6027\u5220\u9664-lazy-freeing",level:3},{value:"\u5185\u5b58\u788e\u7247\u6574\u7406",id:"\u5185\u5b58\u788e\u7247\u6574\u7406",level:3},{value:"\u6301\u4e45\u5316\u914d\u7f6e",id:"\u6301\u4e45\u5316\u914d\u7f6e",level:2},{value:"RDB \u914d\u7f6e",id:"rdb-\u914d\u7f6e",level:3},{value:"AOF \u914d\u7f6e",id:"aof-\u914d\u7f6e",level:3},{value:"Redis 7.0+ \u591a\u90e8\u5206 AOF",id:"redis-70-\u591a\u90e8\u5206-aof",level:3},{value:"\u590d\u5236\u914d\u7f6e",id:"\u590d\u5236\u914d\u7f6e",level:2},{value:"\u4ece\u8282\u70b9\u914d\u7f6e",id:"\u4ece\u8282\u70b9\u914d\u7f6e",level:3},{value:"\u590d\u5236\u7f13\u51b2\u533a",id:"\u590d\u5236\u7f13\u51b2\u533a",level:3},{value:"\u65e0\u76d8\u590d\u5236",id:"\u65e0\u76d8\u590d\u5236",level:3},{value:"\u5199\u5165\u8981\u6c42",id:"\u5199\u5165\u8981\u6c42",level:3},{value:"\u6162\u67e5\u8be2\u914d\u7f6e",id:"\u6162\u67e5\u8be2\u914d\u7f6e",level:2},{value:"\u65e5\u5fd7\u914d\u7f6e",id:"\u65e5\u5fd7\u914d\u7f6e",level:2},{value:"\u7ebf\u7a0b\u914d\u7f6e (Redis 6.0+)",id:"\u7ebf\u7a0b\u914d\u7f6e-redis-60",level:2},{value:"\u96c6\u7fa4\u914d\u7f6e",id:"\u96c6\u7fa4\u914d\u7f6e",level:2},{value:"\u54e8\u5175\u914d\u7f6e",id:"\u54e8\u5175\u914d\u7f6e",level:2},{value:"\u5bb9\u5668\u5316\u90e8\u7f72",id:"\u5bb9\u5668\u5316\u90e8\u7f72",level:2},{value:"Docker \u90e8\u7f72",id:"docker-\u90e8\u7f72",level:3},{value:"Kubernetes \u90e8\u7f72",id:"kubernetes-\u90e8\u7f72",level:3},{value:"\u751f\u4ea7\u73af\u5883\u63a8\u8350\u914d\u7f6e",id:"\u751f\u4ea7\u73af\u5883\u63a8\u8350\u914d\u7f6e",level:2},{value:"\u914d\u7f6e\u6545\u969c\u6392\u67e5",id:"\u914d\u7f6e\u6545\u969c\u6392\u67e5",level:2},{value:"\u5e38\u89c1\u914d\u7f6e\u95ee\u9898",id:"\u5e38\u89c1\u914d\u7f6e\u95ee\u9898",level:3},{value:"\u9a8c\u8bc1\u914d\u7f6e",id:"\u9a8c\u8bc1\u914d\u7f6e",level:3},{value:"\u5c0f\u7ed3",id:"\u5c0f\u7ed3",level:2}];function o(n){const e={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.header,{children:(0,l.jsx)(e.h1,{id:"redis-\u914d\u7f6e\u4e0e\u90e8\u7f72",children:"Redis \u914d\u7f6e\u4e0e\u90e8\u7f72"})}),"\n",(0,l.jsx)(e.p,{children:"\u672c\u7ae0\u5168\u9762\u4ecb\u7ecd Redis \u5728\u751f\u4ea7\u73af\u5883\u4e2d\u7684\u914d\u7f6e\u9879\u3001\u90e8\u7f72\u65b9\u5f0f\u548c\u6700\u4f73\u5b9e\u8df5\uff0c\u5e2e\u52a9\u4f60\u6784\u5efa\u7a33\u5b9a\u53ef\u9760\u7684 Redis \u670d\u52a1\u3002"}),"\n",(0,l.jsx)(e.h2,{id:"\u914d\u7f6e\u6587\u4ef6\u4f4d\u7f6e",children:"\u914d\u7f6e\u6587\u4ef6\u4f4d\u7f6e"}),"\n",(0,l.jsx)(e.p,{children:"\u4e0d\u540c\u5b89\u88c5\u65b9\u5f0f\u7684\u9ed8\u8ba4\u914d\u7f6e\u6587\u4ef6\u4f4d\u7f6e\uff1a"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"\u5b89\u88c5\u65b9\u5f0f"}),(0,l.jsx)(e.th,{children:"\u914d\u7f6e\u6587\u4ef6\u8def\u5f84"})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u6e90\u7801\u7f16\u8bd1"}),(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"/usr/local/redis/redis.conf"})})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"APT/YUM"}),(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"/etc/redis/redis.conf"})})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"Homebrew (macOS)"}),(0,l.jsxs)(e.td,{children:[(0,l.jsx)(e.code,{children:"/usr/local/etc/redis.conf"})," \u6216 ",(0,l.jsx)(e.code,{children:"/opt/homebrew/etc/redis.conf"})]})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"Docker"}),(0,l.jsx)(e.td,{children:"\u9700\u8981\u6302\u8f7d\u914d\u7f6e\u6587\u4ef6"})]})]})]}),"\n",(0,l.jsx)(e.h2,{id:"\u542f\u52a8\u4e0e\u914d\u7f6e\u52a0\u8f7d",children:"\u542f\u52a8\u4e0e\u914d\u7f6e\u52a0\u8f7d"}),"\n",(0,l.jsx)(e.h3,{id:"\u542f\u52a8\u65b9\u5f0f",children:"\u542f\u52a8\u65b9\u5f0f"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u6307\u5b9a\u914d\u7f6e\u6587\u4ef6\u542f\u52a8\nredis-server /etc/redis/redis.conf\n\n# \u547d\u4ee4\u884c\u8986\u76d6\u914d\u7f6e\nredis-server /etc/redis/redis.conf --port 6380 --daemonize yes\n\n# \u65e0\u914d\u7f6e\u6587\u4ef6\u542f\u52a8\uff08\u4f7f\u7528\u9ed8\u8ba4\u914d\u7f6e\uff09\nredis-server\n"})}),"\n",(0,l.jsx)(e.h3,{id:"\u52a8\u6001\u4fee\u6539\u914d\u7f6e",children:"\u52a8\u6001\u4fee\u6539\u914d\u7f6e"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:'# \u67e5\u770b\u914d\u7f6e\nredis-cli CONFIG GET maxmemory\nredis-cli CONFIG GET "*"\n\n# \u52a8\u6001\u4fee\u6539\uff08\u7acb\u5373\u751f\u6548\uff0c\u4e0d\u6301\u4e45\u5316\uff09\nredis-cli CONFIG SET maxmemory 2gb\n\n# \u5c06\u5f53\u524d\u914d\u7f6e\u5199\u5165\u914d\u7f6e\u6587\u4ef6\nredis-cli CONFIG REWRITE\n'})}),"\n",(0,l.jsx)(e.h2,{id:"\u7f51\u7edc\u914d\u7f6e",children:"\u7f51\u7edc\u914d\u7f6e"}),"\n",(0,l.jsx)(e.h3,{id:"\u7ed1\u5b9a\u5730\u5740\u4e0e\u7aef\u53e3",children:"\u7ed1\u5b9a\u5730\u5740\u4e0e\u7aef\u53e3"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-conf",children:"# \u7ed1\u5b9a IP \u5730\u5740\n# \u53ea\u5141\u8bb8\u672c\u5730\u8bbf\u95ee\nbind 127.0.0.1\n\n# \u5141\u8bb8\u672c\u5730\u548c\u5185\u7f51\u8bbf\u95ee\nbind 127.0.0.1 192.168.1.100\n\n# \u5141\u8bb8\u6240\u6709 IP\uff08\u4e0d\u63a8\u8350\uff0c\u9700\u914d\u5408\u5bc6\u7801\u548c\u9632\u706b\u5899\uff09\nbind 0.0.0.0\n\n# \u7aef\u53e3\uff08\u9ed8\u8ba4 6379\uff09\nport 6379\n\n# \u7981\u7528 TCP\uff08\u4ec5 Unix Socket\uff09\nport 0\nunixsocket /var/run/redis/redis.sock\nunixsocketperm 700\n"})}),"\n",(0,l.jsx)(e.h3,{id:"\u4fdd\u62a4\u6a21\u5f0f",children:"\u4fdd\u62a4\u6a21\u5f0f"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-conf",children:"# \u4fdd\u62a4\u6a21\u5f0f\uff08\u63a8\u8350\u5f00\u542f\uff09\n# \u5f53 bind 0.0.0.0 \u4e14\u65e0\u5bc6\u7801\u65f6\uff0c\u62d2\u7edd\u5916\u90e8\u8fde\u63a5\nprotected-mode yes\n"})}),"\n",(0,l.jsx)(e.h3,{id:"\u8fde\u63a5\u7ba1\u7406",children:"\u8fde\u63a5\u7ba1\u7406"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-conf",children:"# \u6700\u5927\u5ba2\u6237\u7aef\u8fde\u63a5\u6570\uff08\u9ed8\u8ba4 10000\uff09\nmaxclients 10000\n\n# \u5ba2\u6237\u7aef\u7a7a\u95f2\u8d85\u65f6\uff08\u79d2\uff0c0 \u8868\u793a\u4e0d\u8d85\u65f6\uff09\ntimeout 300\n\n# TCP keepalive\uff08\u79d2\uff0c\u63a8\u8350 300\uff09\ntcp-keepalive 300\n\n# TCP \u8fde\u63a5\u79ef\u538b\u961f\u5217\ntcp-backlog 511\n"})}),"\n",(0,l.jsx)(e.h3,{id:"tlsssl-\u914d\u7f6e",children:"TLS/SSL \u914d\u7f6e"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-conf",children:"# TLS \u7aef\u53e3\ntls-port 6380\n\n# \u8bc1\u4e66\u914d\u7f6e\ntls-cert-file /etc/redis/redis.crt\ntls-key-file /etc/redis/redis.key\ntls-ca-cert-file /etc/redis/ca.crt\n\n# \u5ba2\u6237\u7aef\u8bc1\u4e66\u9a8c\u8bc1\ntls-auth-clients optional\n\n# \u7981\u7528\u975e TLS \u7aef\u53e3\nport 0\n\n# \u4e3b\u4ece\u590d\u5236\u4f7f\u7528 TLS\ntls-replication yes\n\n# \u96c6\u7fa4\u4f7f\u7528 TLS\ntls-cluster yes\n"})}),"\n",(0,l.jsx)(e.h2,{id:"\u8ba4\u8bc1\u4e0e\u6743\u9650",children:"\u8ba4\u8bc1\u4e0e\u6743\u9650"}),"\n",(0,l.jsx)(e.h3,{id:"\u5bc6\u7801\u8ba4\u8bc1",children:"\u5bc6\u7801\u8ba4\u8bc1"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-conf",children:"# \u8bbe\u7f6e\u5bc6\u7801\uff08\u63a8\u8350 32 \u4f4d\u4ee5\u4e0a\u5f3a\u5bc6\u7801\uff09\nrequirepass your_strong_password_here\n\n# \u4e3b\u4ece\u590d\u5236\u8ba4\u8bc1\nmasterauth your_master_password\n"})}),"\n",(0,l.jsx)(e.h3,{id:"acl-\u6743\u9650\u63a7\u5236-redis-60",children:"ACL \u6743\u9650\u63a7\u5236 (Redis 6.0+)"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-conf",children:"# \u4f7f\u7528 ACL \u6587\u4ef6\naclfile /etc/redis/users.acl\n\n# \u6216\u76f4\u63a5\u5728\u914d\u7f6e\u6587\u4ef6\u5b9a\u4e49\u7528\u6237\nuser default on nopass ~* +@all\nuser readonly on >password ~* +@read -@write\nuser admin on >adminpass ~* +@all\n"})}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"ACL \u6587\u4ef6\u793a\u4f8b"})," (",(0,l.jsx)(e.code,{children:"/etc/redis/users.acl"}),")\uff1a"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"# \u9ed8\u8ba4\u7528\u6237\uff08\u5173\u95ed\u6216\u8bbe\u7f6e\u5bc6\u7801\uff09\nuser default off\n\n# \u5e94\u7528\u7528\u6237\uff08\u9650\u5236\u952e\u524d\u7f00\u548c\u547d\u4ee4\uff09\nuser app on >app_password ~app:* +@all -@dangerous\n\n# \u53ea\u8bfb\u7528\u6237\nuser reader on >reader_password ~* +@read\n\n# \u7ba1\u7406\u5458\u7528\u6237\nuser admin on >admin_password ~* +@all\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# ACL \u7ba1\u7406\u547d\u4ee4\nACL LIST                       # \u67e5\u770b\u6240\u6709\u7528\u6237\nACL WHOAMI                     # \u67e5\u770b\u5f53\u524d\u7528\u6237\nACL SETUSER username ...       # \u521b\u5efa/\u4fee\u6539\u7528\u6237\nACL DELUSER username           # \u5220\u9664\u7528\u6237\nACL LOAD                       # \u91cd\u65b0\u52a0\u8f7d ACL \u6587\u4ef6\nACL SAVE                       # \u4fdd\u5b58 ACL \u5230\u6587\u4ef6\n"})}),"\n",(0,l.jsx)(e.h2,{id:"\u5185\u5b58\u914d\u7f6e",children:"\u5185\u5b58\u914d\u7f6e"}),"\n",(0,l.jsx)(e.h3,{id:"\u5185\u5b58\u9650\u5236",children:"\u5185\u5b58\u9650\u5236"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-conf",children:"# \u6700\u5927\u5185\u5b58\uff08\u652f\u6301 kb, mb, gb\uff09\nmaxmemory 2gb\n\n# \u5185\u5b58\u6dd8\u6c70\u7b56\u7565\nmaxmemory-policy allkeys-lru\n\n# LRU/LFU \u91c7\u6837\u6570\u91cf\uff08\u7cbe\u5ea6\uff0c\u9ed8\u8ba4 5\uff09\nmaxmemory-samples 5\n\n# LFU \u914d\u7f6e\nlfu-log-factor 10\nlfu-decay-time 1\n"})}),"\n",(0,l.jsx)(e.h3,{id:"\u5185\u5b58\u6dd8\u6c70\u7b56\u7565\u8be6\u89e3",children:"\u5185\u5b58\u6dd8\u6c70\u7b56\u7565\u8be6\u89e3"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"\u7b56\u7565"}),(0,l.jsx)(e.th,{children:"\u8bf4\u660e"}),(0,l.jsx)(e.th,{children:"\u9002\u7528\u573a\u666f"})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"noeviction"})}),(0,l.jsx)(e.td,{children:"\u4e0d\u6dd8\u6c70\uff0c\u5199\u6ee1\u62a5\u9519"}),(0,l.jsx)(e.td,{children:"\u6570\u636e\u4e0d\u80fd\u4e22\u5931"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"allkeys-lru"})}),(0,l.jsx)(e.td,{children:"\u6240\u6709\u952e LRU \u6dd8\u6c70"}),(0,l.jsx)(e.td,{children:"\u7f13\u5b58\uff08\u63a8\u8350\uff09"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"allkeys-lfu"})}),(0,l.jsx)(e.td,{children:"\u6240\u6709\u952e LFU \u6dd8\u6c70"}),(0,l.jsx)(e.td,{children:"\u70ed\u70b9\u6570\u636e\u573a\u666f"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"allkeys-random"})}),(0,l.jsx)(e.td,{children:"\u968f\u673a\u6dd8\u6c70"}),(0,l.jsx)(e.td,{children:"\u5747\u5300\u8bbf\u95ee\u573a\u666f"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"volatile-lru"})}),(0,l.jsx)(e.td,{children:"\u6709\u8fc7\u671f\u65f6\u95f4\u7684\u952e LRU"}),(0,l.jsx)(e.td,{children:"\u6df7\u5408\u5b58\u50a8"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"volatile-lfu"})}),(0,l.jsx)(e.td,{children:"\u6709\u8fc7\u671f\u65f6\u95f4\u7684\u952e LFU"}),(0,l.jsx)(e.td,{children:"\u6df7\u5408\u5b58\u50a8"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"volatile-ttl"})}),(0,l.jsx)(e.td,{children:"\u4f18\u5148\u6dd8\u6c70\u5373\u5c06\u8fc7\u671f\u7684"}),(0,l.jsx)(e.td,{children:"\u5229\u7528 TTL \u63a7\u5236"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:(0,l.jsx)(e.code,{children:"volatile-random"})}),(0,l.jsx)(e.td,{children:"\u6709\u8fc7\u671f\u65f6\u95f4\u7684\u968f\u673a\u6dd8\u6c70"}),(0,l.jsx)(e.td,{children:"\u4e34\u65f6\u6570\u636e"})]})]})]}),"\n",(0,l.jsx)(e.h3,{id:"\u60f0\u6027\u5220\u9664-lazy-freeing",children:"\u60f0\u6027\u5220\u9664 (Lazy Freeing)"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-conf",children:"# \u6dd8\u6c70\u65f6\u5f02\u6b65\u5220\u9664\nlazyfree-lazy-eviction yes\n\n# \u8fc7\u671f\u952e\u5f02\u6b65\u5220\u9664\nlazyfree-lazy-expire yes\n\n# DEL \u547d\u4ee4\u5f02\u6b65\u5220\u9664\nlazyfree-lazy-server-del yes\n\n# \u4ece\u8282\u70b9\u5168\u91cf\u540c\u6b65\u524d\u6e05\u7a7a\u6570\u636e\u5f02\u6b65\nreplica-lazy-flush yes\n\n# UNLINK \u66ff\u4ee3 DEL\nlazyfree-lazy-user-del yes\n"})}),"\n",(0,l.jsx)(e.h3,{id:"\u5185\u5b58\u788e\u7247\u6574\u7406",children:"\u5185\u5b58\u788e\u7247\u6574\u7406"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-conf",children:"# \u5f00\u542f\u6d3b\u8dc3\u788e\u7247\u6574\u7406\nactivedefrag yes\n\n# \u788e\u7247\u7387\u9608\u503c\nactive-defrag-ignore-bytes 100mb\nactive-defrag-threshold-lower 10\nactive-defrag-threshold-upper 100\n\n# CPU \u4f7f\u7528\u9650\u5236\nactive-defrag-cycle-min 1\nactive-defrag-cycle-max 25\n"})}),"\n",(0,l.jsx)(e.h2,{id:"\u6301\u4e45\u5316\u914d\u7f6e",children:"\u6301\u4e45\u5316\u914d\u7f6e"}),"\n",(0,l.jsx)(e.h3,{id:"rdb-\u914d\u7f6e",children:"RDB \u914d\u7f6e"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-conf",children:'# \u81ea\u52a8\u4fdd\u5b58\u89c4\u5219\nsave 900 1      # 900\u79d2(15\u5206\u949f)\u5185\u81f3\u5c111\u4e2a\u952e\u6539\u53d8\nsave 300 10     # 300\u79d2(5\u5206\u949f)\u5185\u81f3\u5c1110\u4e2a\u952e\u6539\u53d8\nsave 60 10000   # 60\u79d2\u5185\u81f3\u5c1110000\u4e2a\u952e\u6539\u53d8\n\n# \u7981\u7528 RDB\nsave ""\n\n# RDB \u6587\u4ef6\u540d\ndbfilename dump.rdb\n\n# \u6570\u636e\u76ee\u5f55\ndir /var/lib/redis\n\n# \u4fdd\u5b58\u5931\u8d25\u65f6\u505c\u6b62\u5199\u5165\nstop-writes-on-bgsave-error yes\n\n# \u538b\u7f29 RDB \u6587\u4ef6\nrdbcompression yes\n\n# RDB \u6821\u9a8c\u548c\nrdbchecksum yes\n'})}),"\n",(0,l.jsx)(e.h3,{id:"aof-\u914d\u7f6e",children:"AOF \u914d\u7f6e"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-conf",children:'# \u5f00\u542f AOF\nappendonly yes\n\n# AOF \u6587\u4ef6\u540d\nappendfilename "appendonly.aof"\n\n# \u540c\u6b65\u7b56\u7565\n# always    - \u6bcf\u4e2a\u5199\u547d\u4ee4\u90fd\u540c\u6b65\uff08\u6700\u5b89\u5168\uff0c\u6700\u6162\uff09\n# everysec  - \u6bcf\u79d2\u540c\u6b65\uff08\u63a8\u8350\uff0c\u6027\u80fd\u548c\u5b89\u5168\u5e73\u8861\uff09\n# no        - \u7531\u64cd\u4f5c\u7cfb\u7edf\u51b3\u5b9a\uff08\u6700\u5feb\uff0c\u6700\u4e0d\u5b89\u5168\uff09\nappendfsync everysec\n\n# AOF \u91cd\u5199\u671f\u95f4\u4e0d\u6267\u884c fsync\uff08\u63d0\u9ad8\u6027\u80fd\uff09\nno-appendfsync-on-rewrite yes\n\n# \u81ea\u52a8\u91cd\u5199\u89e6\u53d1\nauto-aof-rewrite-percentage 100\nauto-aof-rewrite-min-size 64mb\n\n# AOF \u52a0\u8f7d\u65f6\u5ffd\u7565\u9519\u8bef\naof-load-truncated yes\n\n# \u6df7\u5408\u6301\u4e45\u5316\uff08RDB + AOF\uff0cRedis 4.0+\uff09\naof-use-rdb-preamble yes\n'})}),"\n",(0,l.jsx)(e.h3,{id:"redis-70-\u591a\u90e8\u5206-aof",children:"Redis 7.0+ \u591a\u90e8\u5206 AOF"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-conf",children:'# AOF \u76ee\u5f55\uff08Redis 7.0+\uff09\nappenddirname "appendonlydir"\n\n# AOF \u65f6\u95f4\u6233\uff08\u7528\u4e8e PITR\uff09\naof-timestamp-enabled no\n'})}),"\n",(0,l.jsx)(e.h2,{id:"\u590d\u5236\u914d\u7f6e",children:"\u590d\u5236\u914d\u7f6e"}),"\n",(0,l.jsx)(e.h3,{id:"\u4ece\u8282\u70b9\u914d\u7f6e",children:"\u4ece\u8282\u70b9\u914d\u7f6e"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-conf",children:"# \u6307\u5b9a\u4e3b\u8282\u70b9\nreplicaof 192.168.1.100 6379\n\n# \u4e3b\u8282\u70b9\u5bc6\u7801\nmasterauth your_master_password\n\n# \u4ece\u8282\u70b9\u53ea\u8bfb\nreplica-read-only yes\n\n# \u4e3b\u8282\u70b9\u4e0b\u7ebf\u65f6\u662f\u5426\u63d0\u4f9b\u670d\u52a1\nreplica-serve-stale-data yes\n\n# \u590d\u5236\u4f18\u5148\u7ea7\uff08\u8d8a\u5c0f\u4f18\u5148\u7ea7\u8d8a\u9ad8\uff0c\u7528\u4e8e\u54e8\u5175\u9009\u4e3e\uff09\nreplica-priority 100\n"})}),"\n",(0,l.jsx)(e.h3,{id:"\u590d\u5236\u7f13\u51b2\u533a",children:"\u590d\u5236\u7f13\u51b2\u533a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-conf",children:"# \u590d\u5236\u79ef\u538b\u7f13\u51b2\u533a\u5927\u5c0f\nrepl-backlog-size 1mb\n\n# \u7f13\u51b2\u533a\u91ca\u653e\u65f6\u95f4\uff08\u4e3b\u8282\u70b9\u65e0\u4ece\u8282\u70b9\u540e\uff09\nrepl-backlog-ttl 3600\n\n# \u590d\u5236\u8d85\u65f6\nrepl-timeout 60\n\n# \u7981\u7528 TCP_NODELAY\nrepl-disable-tcp-nodelay no\n"})}),"\n",(0,l.jsx)(e.h3,{id:"\u65e0\u76d8\u590d\u5236",children:"\u65e0\u76d8\u590d\u5236"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-conf",children:"# \u65e0\u76d8\u590d\u5236\uff08\u76f4\u63a5\u53d1\u9001 RDB \u6d41\uff0c\u4e0d\u5199\u78c1\u76d8\uff09\nrepl-diskless-sync yes\n\n# \u7b49\u5f85\u66f4\u591a\u4ece\u8282\u70b9\u7684\u5ef6\u8fdf\uff08\u79d2\uff09\nrepl-diskless-sync-delay 5\n\n# \u65e0\u76d8\u52a0\u8f7d\uff08\u4ece\u8282\u70b9\u76f4\u63a5\u52a0\u8f7d RDB \u6d41\uff09\nrepl-diskless-load disabled\n"})}),"\n",(0,l.jsx)(e.h3,{id:"\u5199\u5165\u8981\u6c42",children:"\u5199\u5165\u8981\u6c42"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-conf",children:"# \u8981\u6c42\u81f3\u5c11 N \u4e2a\u4ece\u8282\u70b9\u624d\u5141\u8bb8\u5199\u5165\nmin-replicas-to-write 1\n\n# \u4ece\u8282\u70b9\u5ef6\u8fdf\u4e0d\u8d85\u8fc7 N \u79d2\nmin-replicas-max-lag 10\n"})}),"\n",(0,l.jsx)(e.h2,{id:"\u6162\u67e5\u8be2\u914d\u7f6e",children:"\u6162\u67e5\u8be2\u914d\u7f6e"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-conf",children:"# \u6162\u67e5\u8be2\u9608\u503c\uff08\u5fae\u79d2\uff0c10000 = 10ms\uff09\nslowlog-log-slower-than 10000\n\n# \u6162\u67e5\u8be2\u65e5\u5fd7\u6700\u5927\u6761\u6570\nslowlog-max-len 128\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u67e5\u770b\u6162\u67e5\u8be2\nredis-cli SLOWLOG GET 10\nredis-cli SLOWLOG LEN\nredis-cli SLOWLOG RESET\n"})}),"\n",(0,l.jsx)(e.h2,{id:"\u65e5\u5fd7\u914d\u7f6e",children:"\u65e5\u5fd7\u914d\u7f6e"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-conf",children:"# \u65e5\u5fd7\u7ea7\u522b\uff1adebug, verbose, notice, warning\nloglevel notice\n\n# \u65e5\u5fd7\u6587\u4ef6\uff08\u7a7a\u5b57\u7b26\u4e32\u8f93\u51fa\u5230 stdout\uff09\nlogfile /var/log/redis/redis.log\n\n# \u662f\u5426\u8f93\u51fa\u5230 syslog\nsyslog-enabled no\nsyslog-ident redis\nsyslog-facility local0\n"})}),"\n",(0,l.jsx)(e.h2,{id:"\u7ebf\u7a0b\u914d\u7f6e-redis-60",children:"\u7ebf\u7a0b\u914d\u7f6e (Redis 6.0+)"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-conf",children:"# I/O \u7ebf\u7a0b\u6570\uff08\u5efa\u8bae CPU \u6838\u6570\u7684\u4e00\u534a\uff0c\u6700\u5927 128\uff09\nio-threads 4\n\n# I/O \u7ebf\u7a0b\u5904\u7406\u8bfb\u64cd\u4f5c\nio-threads-do-reads yes\n"})}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"\u6ce8\u610f"}),"\uff1aI/O \u591a\u7ebf\u7a0b\u4e3b\u8981\u7528\u4e8e\u7f51\u7edc I/O\uff0c\u547d\u4ee4\u6267\u884c\u4ecd\u7136\u662f\u5355\u7ebf\u7a0b\u3002"]}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"\u96c6\u7fa4\u914d\u7f6e",children:"\u96c6\u7fa4\u914d\u7f6e"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-conf",children:"# \u5f00\u542f\u96c6\u7fa4\u6a21\u5f0f\ncluster-enabled yes\n\n# \u96c6\u7fa4\u914d\u7f6e\u6587\u4ef6\uff08\u81ea\u52a8\u751f\u6210\uff09\ncluster-config-file nodes.conf\n\n# \u8282\u70b9\u8d85\u65f6\u65f6\u95f4\uff08\u6beb\u79d2\uff09\ncluster-node-timeout 15000\n\n# \u6545\u969c\u8f6c\u79fb\u8981\u6c42\u7684\u4ece\u8282\u70b9\u6570\u636e\u65b0\u9c9c\u5ea6\ncluster-replica-validity-factor 10\n\n# \u9700\u8981\u5b8c\u6574\u69fd\u4f4d\u8986\u76d6\u624d\u63d0\u4f9b\u670d\u52a1\ncluster-require-full-coverage yes\n\n# \u4ece\u8282\u70b9\u8fc1\u79fb\u9608\u503c\ncluster-migration-barrier 1\n\n# \u4e3b\u8282\u70b9\u4e0b\u7ebf\u65f6\u4ece\u8282\u70b9\u662f\u5426\u63d0\u4f9b\u8bfb\u670d\u52a1\ncluster-allow-reads-when-down no\n\n# \u69fd\u4f4d\u8fc1\u79fb\u65f6\u662f\u5426\u5141\u8bb8\u8282\u70b9\u63d0\u4f9b\u670d\u52a1\uff08Redis 7.0+\uff09\ncluster-allow-pubsubshard-when-down yes\n"})}),"\n",(0,l.jsx)(e.h2,{id:"\u54e8\u5175\u914d\u7f6e",children:"\u54e8\u5175\u914d\u7f6e"}),"\n",(0,l.jsxs)(e.p,{children:["\u54e8\u5175\u4f7f\u7528\u5355\u72ec\u7684\u914d\u7f6e\u6587\u4ef6 ",(0,l.jsx)(e.code,{children:"sentinel.conf"}),"\uff1a"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-conf",children:"# \u54e8\u5175\u7aef\u53e3\nport 26379\n\n# \u76d1\u63a7\u4e3b\u8282\u70b9\nsentinel monitor mymaster 192.168.1.100 6379 2\n\n# \u4e3b\u8282\u70b9\u5bc6\u7801\nsentinel auth-pass mymaster your_password\n\n# \u4e3b\u8282\u70b9\u4e0b\u7ebf\u5224\u5b9a\u65f6\u95f4\uff08\u6beb\u79d2\uff09\nsentinel down-after-milliseconds mymaster 30000\n\n# \u6545\u969c\u8f6c\u79fb\u8d85\u65f6\uff08\u6beb\u79d2\uff09\nsentinel failover-timeout mymaster 180000\n\n# \u5e76\u884c\u590d\u5236\u7684\u4ece\u8282\u70b9\u6570\nsentinel parallel-syncs mymaster 1\n"})}),"\n",(0,l.jsx)(e.h2,{id:"\u5bb9\u5668\u5316\u90e8\u7f72",children:"\u5bb9\u5668\u5316\u90e8\u7f72"}),"\n",(0,l.jsx)(e.h3,{id:"docker-\u90e8\u7f72",children:"Docker \u90e8\u7f72"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u57fa\u7840\u8fd0\u884c\ndocker run -d --name redis \\\n    -p 6379:6379 \\\n    redis:7.0\n\n# \u6302\u8f7d\u914d\u7f6e\u6587\u4ef6\u548c\u6570\u636e\ndocker run -d --name redis \\\n    -p 6379:6379 \\\n    -v /opt/redis/redis.conf:/usr/local/etc/redis/redis.conf \\\n    -v /opt/redis/data:/data \\\n    redis:7.0 redis-server /usr/local/etc/redis/redis.conf\n"})}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"Docker Compose \u793a\u4f8b"}),"\uff1a"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:'version: \'3.8\'\nservices:\n  redis:\n    image: redis:7.0\n    container_name: redis\n    restart: unless-stopped\n    ports:\n      - "6379:6379"\n    volumes:\n      - ./redis.conf:/usr/local/etc/redis/redis.conf\n      - redis-data:/data\n    command: redis-server /usr/local/etc/redis/redis.conf\n    healthcheck:\n      test: ["CMD", "redis-cli", "ping"]\n      interval: 30s\n      timeout: 10s\n      retries: 3\n\nvolumes:\n  redis-data:\n'})}),"\n",(0,l.jsx)(e.h3,{id:"kubernetes-\u90e8\u7f72",children:"Kubernetes \u90e8\u7f72"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"ConfigMap"}),"\uff1a"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"apiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: redis-config\ndata:\n  redis.conf: |\n    bind 0.0.0.0\n    port 6379\n    maxmemory 1gb\n    maxmemory-policy allkeys-lru\n    appendonly yes\n    appendfsync everysec\n"})}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"Deployment"}),"\uff1a"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:'apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: redis\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: redis\n  template:\n    metadata:\n      labels:\n        app: redis\n    spec:\n      containers:\n        - name: redis\n          image: redis:7.0\n          ports:\n            - containerPort: 6379\n          volumeMounts:\n            - name: config\n              mountPath: /usr/local/etc/redis\n            - name: data\n              mountPath: /data\n          command: ["redis-server", "/usr/local/etc/redis/redis.conf"]\n          resources:\n            requests:\n              memory: "256Mi"\n              cpu: "100m"\n            limits:\n              memory: "1Gi"\n              cpu: "500m"\n      volumes:\n        - name: config\n          configMap:\n            name: redis-config\n        - name: data\n          persistentVolumeClaim:\n            claimName: redis-pvc\n'})}),"\n",(0,l.jsx)(e.h2,{id:"\u751f\u4ea7\u73af\u5883\u63a8\u8350\u914d\u7f6e",children:"\u751f\u4ea7\u73af\u5883\u63a8\u8350\u914d\u7f6e"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-conf",children:"# === \u7f51\u7edc ===\nbind 127.0.0.1 192.168.1.100\nport 6379\nprotected-mode yes\ntcp-backlog 511\ntimeout 300\ntcp-keepalive 300\n\n# === \u8ba4\u8bc1 ===\nrequirepass your_strong_32char_password_here\n\n# === \u5185\u5b58 ===\nmaxmemory 2gb\nmaxmemory-policy allkeys-lru\nmaxmemory-samples 5\n\n# === \u60f0\u6027\u5220\u9664 ===\nlazyfree-lazy-eviction yes\nlazyfree-lazy-expire yes\nlazyfree-lazy-server-del yes\n\n# === \u6301\u4e45\u5316 ===\nsave 900 1\nsave 300 10\nsave 60 10000\nappendonly yes\nappendfsync everysec\nno-appendfsync-on-rewrite yes\naof-use-rdb-preamble yes\nauto-aof-rewrite-percentage 100\nauto-aof-rewrite-min-size 64mb\n\n# === \u6162\u67e5\u8be2 ===\nslowlog-log-slower-than 10000\nslowlog-max-len 128\n\n# === \u65e5\u5fd7 ===\nloglevel notice\nlogfile /var/log/redis/redis.log\n\n# === \u7ebf\u7a0b (Redis 6.0+) ===\nio-threads 4\nio-threads-do-reads yes\n\n# === \u788e\u7247\u6574\u7406 ===\nactivedefrag yes\n"})}),"\n",(0,l.jsx)(e.h2,{id:"\u914d\u7f6e\u6545\u969c\u6392\u67e5",children:"\u914d\u7f6e\u6545\u969c\u6392\u67e5"}),"\n",(0,l.jsx)(e.h3,{id:"\u5e38\u89c1\u914d\u7f6e\u95ee\u9898",children:"\u5e38\u89c1\u914d\u7f6e\u95ee\u9898"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"\u95ee\u9898"}),(0,l.jsx)(e.th,{children:"\u539f\u56e0"}),(0,l.jsx)(e.th,{children:"\u89e3\u51b3\u65b9\u6848"})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u65e0\u6cd5\u8fdc\u7a0b\u8fde\u63a5"}),(0,l.jsx)(e.td,{children:"bind 127.0.0.1"}),(0,l.jsx)(e.td,{children:"\u6dfb\u52a0\u5185\u7f51 IP \u5230 bind"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u8fde\u63a5\u88ab\u62d2\u7edd"}),(0,l.jsx)(e.td,{children:"protected-mode"}),(0,l.jsx)(e.td,{children:"\u8bbe\u7f6e\u5bc6\u7801\u6216\u5173\u95ed\u4fdd\u62a4\u6a21\u5f0f"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u5185\u5b58\u8d85\u9650\u62a5\u9519"}),(0,l.jsx)(e.td,{children:"maxmemory \u8bbe\u7f6e\u8fc7\u5c0f"}),(0,l.jsx)(e.td,{children:"\u589e\u52a0 maxmemory \u6216\u8c03\u6574\u6dd8\u6c70\u7b56\u7565"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u6301\u4e45\u5316\u5931\u8d25"}),(0,l.jsx)(e.td,{children:"\u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3"}),(0,l.jsx)(e.td,{children:"\u6e05\u7406\u78c1\u76d8\u6216\u8c03\u6574\u6301\u4e45\u5316\u7b56\u7565"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u542f\u52a8\u5931\u8d25"}),(0,l.jsx)(e.td,{children:"\u914d\u7f6e\u6587\u4ef6\u8bed\u6cd5\u9519\u8bef"}),(0,l.jsx)(e.td,{children:"\u68c0\u67e5\u914d\u7f6e\u6587\u4ef6\u683c\u5f0f"})]})]})]}),"\n",(0,l.jsx)(e.h3,{id:"\u9a8c\u8bc1\u914d\u7f6e",children:"\u9a8c\u8bc1\u914d\u7f6e"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:'# \u68c0\u67e5\u914d\u7f6e\u6587\u4ef6\u8bed\u6cd5\nredis-server /etc/redis/redis.conf --test-memory 1024\n\n# \u67e5\u770b\u8fd0\u884c\u65f6\u914d\u7f6e\nredis-cli CONFIG GET "*"\n\n# \u67e5\u770b\u914d\u7f6e\u4e0e\u9ed8\u8ba4\u503c\u7684\u5dee\u5f02\nredis-cli CONFIG GET "*" | diff - default.conf\n'})}),"\n",(0,l.jsx)(e.h2,{id:"\u5c0f\u7ed3",children:"\u5c0f\u7ed3"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"\u914d\u7f6e\u7c7b\u522b"}),(0,l.jsx)(e.th,{children:"\u6838\u5fc3\u914d\u7f6e\u9879"}),(0,l.jsx)(e.th,{children:"\u63a8\u8350\u503c"})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u7f51\u7edc"}),(0,l.jsx)(e.td,{children:"bind, port, protected-mode"}),(0,l.jsx)(e.td,{children:"\u5185\u7f51 IP, 6379, yes"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u8ba4\u8bc1"}),(0,l.jsx)(e.td,{children:"requirepass"}),(0,l.jsx)(e.td,{children:"32+ \u5b57\u7b26\u5f3a\u5bc6\u7801"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u5185\u5b58"}),(0,l.jsx)(e.td,{children:"maxmemory, maxmemory-policy"}),(0,l.jsx)(e.td,{children:"\u7269\u7406\u5185\u5b58 70%, allkeys-lru"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u6301\u4e45\u5316"}),(0,l.jsx)(e.td,{children:"appendonly, appendfsync"}),(0,l.jsx)(e.td,{children:"yes, everysec"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u6027\u80fd"}),(0,l.jsx)(e.td,{children:"io-threads"}),(0,l.jsx)(e.td,{children:"CPU \u6838\u6570 / 2"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"\u5b89\u5168"}),(0,l.jsx)(e.td,{children:"ACL"}),(0,l.jsx)(e.td,{children:"\u6700\u5c0f\u6743\u9650\u539f\u5219"})]})]})]}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"\u6700\u4f73\u5b9e\u8df5"}),"\uff1a"]}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u2705 \u4f7f\u7528\u914d\u7f6e\u6587\u4ef6\u800c\u975e\u547d\u4ee4\u884c\u53c2\u6570"}),"\n",(0,l.jsxs)(e.li,{children:["\u2705 \u4f7f\u7528 ",(0,l.jsx)(e.code,{children:"CONFIG REWRITE"})," \u6301\u4e45\u5316\u52a8\u6001\u4fee\u6539"]}),"\n",(0,l.jsx)(e.li,{children:"\u2705 \u5b9a\u671f\u5ba1\u67e5\u548c\u66f4\u65b0\u914d\u7f6e"}),"\n",(0,l.jsx)(e.li,{children:"\u2705 \u5728\u6d4b\u8bd5\u73af\u5883\u9a8c\u8bc1\u914d\u7f6e\u53d8\u66f4"}),"\n",(0,l.jsx)(e.li,{children:"\u2705 \u4fdd\u7559\u914d\u7f6e\u6587\u4ef6\u7684\u7248\u672c\u5386\u53f2"}),"\n"]})]})}function h(n={}){const{wrapper:e}={...(0,d.R)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(o,{...n})}):o(n)}}}]);