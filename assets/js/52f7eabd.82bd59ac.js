"use strict";(globalThis.webpackChunkto_lib_github_io=globalThis.webpackChunkto_lib_github_io||[]).push([[6191],{1266:(n,e,l)=>{l.d(e,{R:()=>t,x:()=>d});var s=l(9378);const r={},i=s.createContext(r);function t(n){const e=s.useContext(i);return s.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function d(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:t(n.components),s.createElement(i.Provider,{value:e},n.children)}},3604:(n,e,l)=>{l.r(e),l.d(e,{assets:()=>a,contentTitle:()=>d,default:()=>o,frontMatter:()=>t,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"rust/ownership","title":"\u6240\u6709\u6743\u7cfb\u7edf","description":"\u6240\u6709\u6743\uff08Ownership\uff09\u662f Rust \u6700\u72ec\u7279\u548c\u6700\u91cd\u8981\u7684\u7279\u6027\uff0c\u5b83\u4f7f Rust \u65e0\u9700\u5783\u573e\u56de\u6536\u5668\u5c31\u80fd\u4fdd\u8bc1\u5185\u5b58\u5b89\u5168\u3002","source":"@site/docs/rust/ownership.md","sourceDirName":"rust","slug":"/rust/ownership","permalink":"/docs/rust/ownership","draft":false,"unlisted":false,"editUrl":"https://github.com/to-lib/to-lib.github.io/tree/main/docs/rust/ownership.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"title":"\u6240\u6709\u6743\u7cfb\u7edf"},"sidebar":"rust","previous":{"title":"Rust \u57fa\u7840\u8bed\u6cd5","permalink":"/docs/rust/basic-syntax"},"next":{"title":"\u7ed3\u6784\u4f53\u548c\u679a\u4e3e","permalink":"/docs/rust/structs-enums"}}');var r=l(2714),i=l(1266);const t={sidebar_position:3,title:"\u6240\u6709\u6743\u7cfb\u7edf"},d="\u6240\u6709\u6743\u7cfb\u7edf",a={},c=[{value:"\u6240\u6709\u6743\u89c4\u5219",id:"\u6240\u6709\u6743\u89c4\u5219",level:2},{value:"\u4f5c\u7528\u57df",id:"\u4f5c\u7528\u57df",level:2},{value:"String \u7c7b\u578b",id:"string-\u7c7b\u578b",level:2},{value:"String vs &amp;str",id:"string-vs-str",level:3},{value:"\u5185\u5b58\u5206\u914d",id:"\u5185\u5b58\u5206\u914d",level:3},{value:"\u79fb\u52a8 (Move)",id:"\u79fb\u52a8-move",level:2},{value:"\u4e3a\u4ec0\u4e48\u79fb\u52a8\uff1f",id:"\u4e3a\u4ec0\u4e48\u79fb\u52a8",level:3},{value:"\u514b\u9686 (Clone)",id:"\u514b\u9686-clone",level:2},{value:"\u590d\u5236 (Copy)",id:"\u590d\u5236-copy",level:2},{value:"\u5b9e\u73b0\u4e86 Copy trait \u7684\u7c7b\u578b",id:"\u5b9e\u73b0\u4e86-copy-trait-\u7684\u7c7b\u578b",level:3},{value:"\u6240\u6709\u6743\u4e0e\u51fd\u6570",id:"\u6240\u6709\u6743\u4e0e\u51fd\u6570",level:2},{value:"\u4f20\u9012\u503c\u7ed9\u51fd\u6570",id:"\u4f20\u9012\u503c\u7ed9\u51fd\u6570",level:3},{value:"\u8fd4\u56de\u503c\u4e0e\u6240\u6709\u6743",id:"\u8fd4\u56de\u503c\u4e0e\u6240\u6709\u6743",level:3},{value:"\u5f15\u7528\u548c\u501f\u7528",id:"\u5f15\u7528\u548c\u501f\u7528",level:2},{value:"\u4e0d\u53ef\u53d8\u5f15\u7528",id:"\u4e0d\u53ef\u53d8\u5f15\u7528",level:3},{value:"\u53ef\u53d8\u5f15\u7528",id:"\u53ef\u53d8\u5f15\u7528",level:3},{value:"\u501f\u7528\u89c4\u5219",id:"\u501f\u7528\u89c4\u5219",level:3},{value:"\u60ac\u5782\u5f15\u7528",id:"\u60ac\u5782\u5f15\u7528",level:3},{value:"\u5207\u7247 (Slice)",id:"\u5207\u7247-slice",level:2},{value:"\u5b57\u7b26\u4e32\u5207\u7247",id:"\u5b57\u7b26\u4e32\u5207\u7247",level:3},{value:"\u5b57\u7b26\u4e32\u5207\u7247\u4f5c\u4e3a\u53c2\u6570",id:"\u5b57\u7b26\u4e32\u5207\u7247\u4f5c\u4e3a\u53c2\u6570",level:3},{value:"\u6570\u7ec4\u5207\u7247",id:"\u6570\u7ec4\u5207\u7247",level:3},{value:"\u6240\u6709\u6743\u6a21\u5f0f",id:"\u6240\u6709\u6743\u6a21\u5f0f",level:2},{value:"\u6a21\u5f0f 1\uff1a\u4f7f\u7528\u5f15\u7528\u907f\u514d\u6240\u6709\u6743\u8f6c\u79fb",id:"\u6a21\u5f0f-1\u4f7f\u7528\u5f15\u7528\u907f\u514d\u6240\u6709\u6743\u8f6c\u79fb",level:3},{value:"\u6a21\u5f0f 2\uff1a\u8fd4\u56de\u591a\u4e2a\u503c",id:"\u6a21\u5f0f-2\u8fd4\u56de\u591a\u4e2a\u503c",level:3},{value:"\u6a21\u5f0f 3\uff1a\u4fee\u6539\u6570\u636e",id:"\u6a21\u5f0f-3\u4fee\u6539\u6570\u636e",level:3},{value:"\u6700\u4f73\u5b9e\u8df5",id:"\u6700\u4f73\u5b9e\u8df5",level:2},{value:"1. \u4f18\u5148\u4f7f\u7528\u5f15\u7528",id:"1-\u4f18\u5148\u4f7f\u7528\u5f15\u7528",level:3},{value:"2. \u4fdd\u6301\u501f\u7528\u4f5c\u7528\u57df\u6700\u5c0f",id:"2-\u4fdd\u6301\u501f\u7528\u4f5c\u7528\u57df\u6700\u5c0f",level:3},{value:"3. \u4f7f\u7528 &amp;str \u800c\u975e &amp;String",id:"3-\u4f7f\u7528-str-\u800c\u975e-string",level:3},{value:"\u5e38\u89c1\u9519\u8bef",id:"\u5e38\u89c1\u9519\u8bef",level:2},{value:"\u9519\u8bef 1\uff1a\u4f7f\u7528\u5df2\u79fb\u52a8\u7684\u503c",id:"\u9519\u8bef-1\u4f7f\u7528\u5df2\u79fb\u52a8\u7684\u503c",level:3},{value:"\u9519\u8bef 2\uff1a\u60ac\u5782\u5f15\u7528",id:"\u9519\u8bef-2\u60ac\u5782\u5f15\u7528",level:3},{value:"\u9519\u8bef 3\uff1a\u591a\u4e2a\u53ef\u53d8\u5f15\u7528",id:"\u9519\u8bef-3\u591a\u4e2a\u53ef\u53d8\u5f15\u7528",level:3},{value:"\u603b\u7ed3",id:"\u603b\u7ed3",level:2}];function h(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"\u6240\u6709\u6743\u7cfb\u7edf",children:"\u6240\u6709\u6743\u7cfb\u7edf"})}),"\n",(0,r.jsx)(e.p,{children:"\u6240\u6709\u6743\uff08Ownership\uff09\u662f Rust \u6700\u72ec\u7279\u548c\u6700\u91cd\u8981\u7684\u7279\u6027\uff0c\u5b83\u4f7f Rust \u65e0\u9700\u5783\u573e\u56de\u6536\u5668\u5c31\u80fd\u4fdd\u8bc1\u5185\u5b58\u5b89\u5168\u3002"}),"\n",(0,r.jsx)(e.h2,{id:"\u6240\u6709\u6743\u89c4\u5219",children:"\u6240\u6709\u6743\u89c4\u5219"}),"\n",(0,r.jsx)(e.p,{children:"Rust \u7684\u6240\u6709\u6743\u6709\u4e09\u6761\u6838\u5fc3\u89c4\u5219\uff1a"}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.strong,{children:"\u6bcf\u4e2a\u503c\u90fd\u6709\u4e00\u4e2a\u6240\u6709\u8005"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.strong,{children:"\u503c\u5728\u4efb\u4f55\u65f6\u523b\u53ea\u80fd\u6709\u4e00\u4e2a\u6240\u6709\u8005"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.strong,{children:"\u5f53\u6240\u6709\u8005\u79bb\u5f00\u4f5c\u7528\u57df\u65f6\uff0c\u503c\u5c06\u88ab\u4e22\u5f03"})}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"\u4f5c\u7528\u57df",children:"\u4f5c\u7528\u57df"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    {                      // s \u65e0\u6548\uff0c\u5c1a\u672a\u58f0\u660e\n        let s = "hello";   // s \u4ece\u6b64\u5904\u5f00\u59cb\u6709\u6548\n        \n        // \u4f7f\u7528 s\n        println!("{}", s);\n    }                      // \u4f5c\u7528\u57df\u7ed3\u675f\uff0cs \u4e0d\u518d\u6709\u6548\n    \n    // println!("{}", s);  // \u9519\u8bef\uff1as \u5df2\u7ecf\u8d85\u51fa\u4f5c\u7528\u57df\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"string-\u7c7b\u578b",children:"String \u7c7b\u578b"}),"\n",(0,r.jsx)(e.h3,{id:"string-vs-str",children:"String vs &str"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    // \u5b57\u7b26\u4e32\u5b57\u9762\u91cf\uff1a\u4e0d\u53ef\u53d8\uff0c\u5b58\u50a8\u5728\u6808\u4e0a\n    let s1 = "hello";\n    \n    // String \u7c7b\u578b\uff1a\u53ef\u53d8\uff0c\u5b58\u50a8\u5728\u5806\u4e0a\n    let mut s2 = String::from("hello");\n    s2.push_str(", world");\n    println!("{}", s2);\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u5185\u5b58\u5206\u914d",children:"\u5185\u5b58\u5206\u914d"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let s = String::from("hello");\n    \n    // String \u7531\u4e09\u90e8\u5206\u7ec4\u6210\uff08\u5b58\u50a8\u5728\u6808\u4e0a\uff09\uff1a\n    // - ptr: \u6307\u5411\u5806\u4e0a\u5185\u5bb9\u7684\u6307\u9488\n    // - len: \u5f53\u524d\u957f\u5ea6\n    // - capacity: \u5bb9\u91cf\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"\u79fb\u52a8-move",children:"\u79fb\u52a8 (Move)"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let s1 = String::from("hello");\n    let s2 = s1;  // s1 \u7684\u6240\u6709\u6743\u79fb\u52a8\u5230 s2\n    \n    // println!("{}", s1);  // \u9519\u8bef\uff1as1 \u5df2\u5931\u6548\n    println!("{}", s2);     // \u6b63\u786e\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u4e3a\u4ec0\u4e48\u79fb\u52a8",children:"\u4e3a\u4ec0\u4e48\u79fb\u52a8\uff1f"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'// \u5982\u679c\u5141\u8bb8 s1 \u548c s2 \u540c\u65f6\u6709\u6548\uff1a\n// \u5f53\u5b83\u4eec\u79bb\u5f00\u4f5c\u7528\u57df\u65f6\uff0c\u4f1a\u5c1d\u8bd5\u4e24\u6b21\u91ca\u653e\u76f8\u540c\u7684\u5185\u5b58\n// \u8fd9\u5c31\u662f"\u53cc\u91cd\u91ca\u653e"\u9519\u8bef\uff0c\u53ef\u80fd\u5bfc\u81f4\u5185\u5b58\u635f\u574f\n\n// Rust \u7684\u89e3\u51b3\u65b9\u6848\uff1a\u79fb\u52a8\u540e\u4f7f\u524d\u4e00\u4e2a\u53d8\u91cf\u65e0\u6548\n'})}),"\n",(0,r.jsx)(e.h2,{id:"\u514b\u9686-clone",children:"\u514b\u9686 (Clone)"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    // \u6df1\u62f7\u8d1d\uff1a\u590d\u5236\u5806\u4e0a\u7684\u6570\u636e\n    let s1 = String::from("hello");\n    let s2 = s1.clone();\n    \n    println!("s1 = {}, s2 = {}", s1, s2);  // \u90fd\u6709\u6548\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"\u590d\u5236-copy",children:"\u590d\u5236 (Copy)"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    // \u6808\u4e0a\u7684\u6570\u636e\uff1a\u81ea\u52a8\u590d\u5236\n    let x = 5;\n    let y = x;\n    \n    println!("x = {}, y = {}", x, y);  // \u90fd\u6709\u6548\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u5b9e\u73b0\u4e86-copy-trait-\u7684\u7c7b\u578b",children:"\u5b9e\u73b0\u4e86 Copy trait \u7684\u7c7b\u578b"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u6240\u6709\u6574\u6570\u7c7b\u578b\uff08i32, u32 \u7b49\uff09"}),"\n",(0,r.jsx)(e.li,{children:"\u5e03\u5c14\u7c7b\u578b bool"}),"\n",(0,r.jsx)(e.li,{children:"\u6d6e\u70b9\u7c7b\u578b\uff08f32, f64\uff09"}),"\n",(0,r.jsx)(e.li,{children:"\u5b57\u7b26\u7c7b\u578b char"}),"\n",(0,r.jsx)(e.li,{children:"\u5143\u7ec4\uff08\u5982\u679c\u5143\u7d20\u90fd\u5b9e\u73b0\u4e86 Copy\uff09"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    // \u5b9e\u73b0\u4e86 Copy\n    let x = (1, 2);\n    let y = x;\n    println!("{:?}, {:?}", x, y);  // \u90fd\u6709\u6548\n    \n    // \u672a\u5b9e\u73b0 Copy\uff08\u5305\u542b String\uff09\n    let x = (String::from("hello"), 5);\n    let y = x;\n    // println!("{:?}", x);  // \u9519\u8bef\uff1ax \u5df2\u5931\u6548\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"\u6240\u6709\u6743\u4e0e\u51fd\u6570",children:"\u6240\u6709\u6743\u4e0e\u51fd\u6570"}),"\n",(0,r.jsx)(e.h3,{id:"\u4f20\u9012\u503c\u7ed9\u51fd\u6570",children:"\u4f20\u9012\u503c\u7ed9\u51fd\u6570"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let s = String::from("hello");\n    takes_ownership(s);  // s \u7684\u6240\u6709\u6743\u79fb\u52a8\u5230\u51fd\u6570\n    // println!("{}", s);  // \u9519\u8bef\uff1as \u5df2\u5931\u6548\n    \n    let x = 5;\n    makes_copy(x);   // x \u88ab\u590d\u5236\n    println!("{}", x);  // \u6b63\u786e\uff1ax \u4ecd\u7136\u6709\u6548\n}\n\nfn takes_ownership(some_string: String) {\n    println!("{}", some_string);\n}  // some_string \u79bb\u5f00\u4f5c\u7528\u57df\uff0c\u5185\u5b58\u88ab\u91ca\u653e\n\nfn makes_copy(some_integer: i32) {\n    println!("{}", some_integer);\n}  // some_integer \u79bb\u5f00\u4f5c\u7528\u57df\uff0c\u6ca1\u6709\u7279\u6b8a\u64cd\u4f5c\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u8fd4\u56de\u503c\u4e0e\u6240\u6709\u6743",children:"\u8fd4\u56de\u503c\u4e0e\u6240\u6709\u6743"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let s1 = gives_ownership();  // \u83b7\u5f97\u6240\u6709\u6743\n    \n    let s2 = String::from("hello");\n    let s3 = takes_and_gives_back(s2);  // s2 \u79fb\u52a8\uff0cs3 \u83b7\u5f97\u65b0\u6240\u6709\u6743\n    \n    // println!("{}", s2);  // \u9519\u8bef\uff1as2 \u5df2\u5931\u6548\n    println!("{}", s3);     // \u6b63\u786e\n}\n\nfn gives_ownership() -> String {\n    let some_string = String::from("hello");\n    some_string  // \u8fd4\u56de\uff0c\u6240\u6709\u6743\u79fb\u51fa\n}\n\nfn takes_and_gives_back(a_string: String) -> String {\n    a_string  // \u8fd4\u56de\uff0c\u6240\u6709\u6743\u79fb\u51fa\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"\u5f15\u7528\u548c\u501f\u7528",children:"\u5f15\u7528\u548c\u501f\u7528"}),"\n",(0,r.jsx)(e.p,{children:"\u5f15\u7528\u5141\u8bb8\u4f7f\u7528\u503c\u4f46\u4e0d\u83b7\u53d6\u6240\u6709\u6743\u3002"}),"\n",(0,r.jsx)(e.h3,{id:"\u4e0d\u53ef\u53d8\u5f15\u7528",children:"\u4e0d\u53ef\u53d8\u5f15\u7528"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let s1 = String::from("hello");\n    \n    let len = calculate_length(&s1);  // \u501f\u7528 s1\n    \n    println!("\'{}\' \u7684\u957f\u5ea6\u662f {}", s1, len);  // s1 \u4ecd\u7136\u6709\u6548\n}\n\nfn calculate_length(s: &String) -> usize {\n    s.len()\n}  // s \u79bb\u5f00\u4f5c\u7528\u57df\uff0c\u4f46\u4e0d\u4f1a\u91ca\u653e\u5185\u5b58\uff08\u56e0\u4e3a\u6ca1\u6709\u6240\u6709\u6743\uff09\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u53ef\u53d8\u5f15\u7528",children:"\u53ef\u53d8\u5f15\u7528"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let mut s = String::from("hello");\n    \n    change(&mut s);  // \u53ef\u53d8\u501f\u7528\n    \n    println!("{}", s);  // "hello, world"\n}\n\nfn change(some_string: &mut String) {\n    some_string.push_str(", world");\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u501f\u7528\u89c4\u5219",children:"\u501f\u7528\u89c4\u5219"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let mut s = String::from("hello");\n    \n    // \u89c4\u5219 1\uff1a\u540c\u4e00\u4f5c\u7528\u57df\u5185\uff0c\u53ea\u80fd\u6709\u4e00\u4e2a\u53ef\u53d8\u5f15\u7528\n    let r1 = &mut s;\n    // let r2 = &mut s;  // \u9519\u8bef\uff1a\u4e0d\u80fd\u540c\u65f6\u6709\u4e24\u4e2a\u53ef\u53d8\u5f15\u7528\n    println!("{}", r1);\n    \n    // \u89c4\u5219 2\uff1a\u4e0d\u80fd\u540c\u65f6\u6709\u53ef\u53d8\u5f15\u7528\u548c\u4e0d\u53ef\u53d8\u5f15\u7528\n    let r1 = &s;     // \u53ef\u4ee5\n    let r2 = &s;     // \u53ef\u4ee5\n    // let r3 = &mut s;  // \u9519\u8bef\uff1a\u5df2\u6709\u4e0d\u53ef\u53d8\u5f15\u7528\n    println!("{} and {}", r1, r2);\n    \n    // \u6ce8\u610f\uff1a\u5f15\u7528\u7684\u4f5c\u7528\u57df\u4ece\u58f0\u660e\u5230\u6700\u540e\u4e00\u6b21\u4f7f\u7528\n    let r1 = &s;\n    println!("{}", r1);  // r1 \u7684\u4f5c\u7528\u57df\u5230\u6b64\u7ed3\u675f\n    \n    let r2 = &mut s;  // \u6b63\u786e\uff1ar1 \u5df2\u4e0d\u518d\u4f7f\u7528\n    println!("{}", r2);\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u60ac\u5782\u5f15\u7528",children:"\u60ac\u5782\u5f15\u7528"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    // let reference_to_nothing = dangle();  // \u9519\u8bef\uff1a\u60ac\u5782\u5f15\u7528\n    let s = no_dangle();  // \u6b63\u786e\uff1a\u8fd4\u56de\u6240\u6709\u6743\n}\n\n// \u9519\u8bef\u793a\u4f8b\uff1a\u8fd4\u56de\u60ac\u5782\u5f15\u7528\n// fn dangle() -> &String {\n//     let s = String::from("hello");\n//     &s  // \u8fd4\u56de s \u7684\u5f15\u7528\uff0c\u4f46 s \u5c06\u88ab\u91ca\u653e\n// }\n\n// \u6b63\u786e\u793a\u4f8b\uff1a\u8fd4\u56de\u6240\u6709\u6743\nfn no_dangle() -> String {\n    let s = String::from("hello");\n    s  // \u8fd4\u56de s \u672c\u8eab\uff0c\u6240\u6709\u6743\u79fb\u51fa\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"\u5207\u7247-slice",children:"\u5207\u7247 (Slice)"}),"\n",(0,r.jsx)(e.p,{children:"\u5207\u7247\u662f\u5bf9\u96c6\u5408\u4e2d\u8fde\u7eed\u5e8f\u5217\u7684\u5f15\u7528\u3002"}),"\n",(0,r.jsx)(e.h3,{id:"\u5b57\u7b26\u4e32\u5207\u7247",children:"\u5b57\u7b26\u4e32\u5207\u7247"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let s = String::from("hello world");\n    \n    let hello = &s[0..5];   // "hello"\n    let world = &s[6..11];  // "world"\n    \n    // \u8bed\u6cd5\u7cd6\n    let hello = &s[..5];    // \u4ece\u5f00\u5934\n    let world = &s[6..];    // \u5230\u7ed3\u5c3e\n    let whole = &s[..];     // \u6574\u4e2a\u5b57\u7b26\u4e32\n    \n    println!("{} {}", hello, world);\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u5b57\u7b26\u4e32\u5207\u7247\u4f5c\u4e3a\u53c2\u6570",children:"\u5b57\u7b26\u4e32\u5207\u7247\u4f5c\u4e3a\u53c2\u6570"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let my_string = String::from("hello world");\n    \n    // \u63a5\u53d7 String \u7684\u5207\u7247\n    let word = first_word(&my_string[..]);\n    \n    let my_string_literal = "hello world";\n    \n    // \u63a5\u53d7\u5b57\u7b26\u4e32\u5b57\u9762\u91cf\u7684\u5207\u7247\n    let word = first_word(&my_string_literal[..]);\n    \n    // \u5b57\u7b26\u4e32\u5b57\u9762\u91cf\u672c\u8eab\u5c31\u662f\u5207\u7247\n    let word = first_word(my_string_literal);\n}\n\nfn first_word(s: &str) -> &str {\n    let bytes = s.as_bytes();\n    \n    for (i, &item) in bytes.iter().enumerate() {\n        if item == b\' \' {\n            return &s[0..i];\n        }\n    }\n    \n    &s[..]\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u6570\u7ec4\u5207\u7247",children:"\u6570\u7ec4\u5207\u7247"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:"fn main() {\n    let a = [1, 2, 3, 4, 5];\n    \n    let slice = &a[1..3];  // [2, 3]\n    \n    assert_eq!(slice, &[2, 3]);\n}\n"})}),"\n",(0,r.jsx)(e.h2,{id:"\u6240\u6709\u6743\u6a21\u5f0f",children:"\u6240\u6709\u6743\u6a21\u5f0f"}),"\n",(0,r.jsx)(e.h3,{id:"\u6a21\u5f0f-1\u4f7f\u7528\u5f15\u7528\u907f\u514d\u6240\u6709\u6743\u8f6c\u79fb",children:"\u6a21\u5f0f 1\uff1a\u4f7f\u7528\u5f15\u7528\u907f\u514d\u6240\u6709\u6743\u8f6c\u79fb"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let s = String::from("hello");\n    \n    // \u4e0d\u597d\uff1a\u6240\u6709\u6743\u8f6c\u79fb\n    let len = calculate_length_bad(s);\n    // println!("{}", s);  // \u9519\u8bef\uff1as \u5df2\u5931\u6548\n    \n    let s = String::from("hello");\n    \n    // \u597d\uff1a\u4f7f\u7528\u5f15\u7528\n    let len = calculate_length_good(&s);\n    println!("{}", s);  // \u6b63\u786e\uff1as \u4ecd\u7136\u6709\u6548\n}\n\nfn calculate_length_bad(s: String) -> usize {\n    s.len()\n}\n\nfn calculate_length_good(s: &String) -> usize {\n    s.len()\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u6a21\u5f0f-2\u8fd4\u56de\u591a\u4e2a\u503c",children:"\u6a21\u5f0f 2\uff1a\u8fd4\u56de\u591a\u4e2a\u503c"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let s1 = String::from("hello");\n    \n    // \u4e0d\u597d\uff1a\u8fd4\u56de\u5143\u7ec4\n    let (s2, len) = calculate_length_tuple(s1);\n    \n    // \u597d\uff1a\u4f7f\u7528\u5f15\u7528\n    let s1 = String::from("hello");\n    let len = calculate_length(&s1);\n    println!("\'{}\' \u7684\u957f\u5ea6\u662f {}", s1, len);\n}\n\nfn calculate_length_tuple(s: String) -> (String, usize) {\n    let length = s.len();\n    (s, length)\n}\n\nfn calculate_length(s: &String) -> usize {\n    s.len()\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u6a21\u5f0f-3\u4fee\u6539\u6570\u636e",children:"\u6a21\u5f0f 3\uff1a\u4fee\u6539\u6570\u636e"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let mut s = String::from("hello");\n    \n    // \u4f7f\u7528\u53ef\u53d8\u5f15\u7528\u4fee\u6539\u6570\u636e\n    append_world(&mut s);\n    \n    println!("{}", s);  // "hello, world"\n}\n\nfn append_world(s: &mut String) {\n    s.push_str(", world");\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"\u6700\u4f73\u5b9e\u8df5",children:"\u6700\u4f73\u5b9e\u8df5"}),"\n",(0,r.jsx)(e.h3,{id:"1-\u4f18\u5148\u4f7f\u7528\u5f15\u7528",children:"1. \u4f18\u5148\u4f7f\u7528\u5f15\u7528"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'// \u4e0d\u597d\uff1aunnecessary ownership transfer\nfn process(data: String) {\n    println!("{}", data);\n}\n\n// \u597d\uff1a\u4f7f\u7528\u5f15\u7528\nfn process(data: &str) {\n    println!("{}", data);\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"2-\u4fdd\u6301\u501f\u7528\u4f5c\u7528\u57df\u6700\u5c0f",children:"2. \u4fdd\u6301\u501f\u7528\u4f5c\u7528\u57df\u6700\u5c0f"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let mut s = String::from("hello");\n    \n    {\n        let r = &mut s;\n        r.push_str(", world");\n    }  // r \u79bb\u5f00\u4f5c\u7528\u57df\n    \n    // \u73b0\u5728\u53ef\u4ee5\u518d\u6b21\u501f\u7528\n    let r2 = &s;\n    println!("{}", r2);\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"3-\u4f7f\u7528-str-\u800c\u975e-string",children:"3. \u4f7f\u7528 &str \u800c\u975e &String"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:"// \u4e0d\u597d\nfn first_word(s: &String) -> &str {\n    // ...\n    &s[..]\n}\n\n// \u597d\uff1a\u66f4\u7075\u6d3b\nfn first_word(s: &str) -> &str {\n    // \u53ef\u4ee5\u63a5\u53d7 &String \u548c &str\n    &s[..]\n}\n"})}),"\n",(0,r.jsx)(e.h2,{id:"\u5e38\u89c1\u9519\u8bef",children:"\u5e38\u89c1\u9519\u8bef"}),"\n",(0,r.jsx)(e.h3,{id:"\u9519\u8bef-1\u4f7f\u7528\u5df2\u79fb\u52a8\u7684\u503c",children:"\u9519\u8bef 1\uff1a\u4f7f\u7528\u5df2\u79fb\u52a8\u7684\u503c"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let s = String::from("hello");\n    let s2 = s;\n    // println!("{}", s);  // \u9519\u8bef\uff1as \u5df2\u5931\u6548\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u9519\u8bef-2\u60ac\u5782\u5f15\u7528",children:"\u9519\u8bef 2\uff1a\u60ac\u5782\u5f15\u7528"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'// fn dangle() -> &String {\n//     let s = String::from("hello");\n//     &s  // \u9519\u8bef\uff1a\u8fd4\u56de\u60ac\u5782\u5f15\u7528\n// }\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u9519\u8bef-3\u591a\u4e2a\u53ef\u53d8\u5f15\u7528",children:"\u9519\u8bef 3\uff1a\u591a\u4e2a\u53ef\u53d8\u5f15\u7528"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let mut s = String::from("hello");\n    \n    let r1 = &mut s;\n    // let r2 = &mut s;  // \u9519\u8bef\uff1a\u5df2\u6709\u53ef\u53d8\u5f15\u7528\n    println!("{}", r1);\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"\u603b\u7ed3",children:"\u603b\u7ed3"}),"\n",(0,r.jsx)(e.p,{children:"\u672c\u6587\u4ecb\u7ecd\u4e86 Rust \u7684\u6240\u6709\u6743\u7cfb\u7edf\uff1a"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u2705 \u6240\u6709\u6743\u4e09\u5927\u89c4\u5219"}),"\n",(0,r.jsx)(e.li,{children:"\u2705 \u79fb\u52a8\u3001\u514b\u9686\u548c\u590d\u5236"}),"\n",(0,r.jsx)(e.li,{children:"\u2705 \u6240\u6709\u6743\u4e0e\u51fd\u6570"}),"\n",(0,r.jsx)(e.li,{children:"\u2705 \u5f15\u7528\u548c\u501f\u7528"}),"\n",(0,r.jsx)(e.li,{children:"\u2705 \u53ef\u53d8\u5f15\u7528\u548c\u4e0d\u53ef\u53d8\u5f15\u7528"}),"\n",(0,r.jsx)(e.li,{children:"\u2705 \u5207\u7247\u7c7b\u578b"}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:["\u638c\u63e1\u6240\u6709\u6743\u540e\uff0c\u7ee7\u7eed\u5b66\u4e60 ",(0,r.jsx)(e.a,{href:"./structs-enums",children:"\u7ed3\u6784\u4f53\u548c\u679a\u4e3e"}),"\u3002"]})]})}function o(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(h,{...n})}):h(n)}}}]);