"use strict";(globalThis.webpackChunkto_lib_github_io=globalThis.webpackChunkto_lib_github_io||[]).push([[89281],{37554:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>o,frontMatter:()=>d,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"springcloud-alibaba/monitoring","title":"\u76d1\u63a7\u4e0e\u8fd0\u7ef4","description":"[!IMPORTANT]","source":"@site/docs/springcloud-alibaba/monitoring.md","sourceDirName":"springcloud-alibaba","slug":"/springcloud-alibaba/monitoring","permalink":"/docs/springcloud-alibaba/monitoring","draft":false,"unlisted":false,"editUrl":"https://github.com/to-lib/to-lib.github.io/tree/main/docs/springcloud-alibaba/monitoring.md","tags":[],"version":"current","sidebarPosition":12,"frontMatter":{"id":"monitoring","title":"\u76d1\u63a7\u4e0e\u8fd0\u7ef4","sidebar_label":"\u76d1\u63a7\u4e0e\u8fd0\u7ef4","sidebar_position":12},"sidebar":"springcloudAlibaba","previous":{"title":"\u6700\u4f73\u5b9e\u8df5","permalink":"/docs/springcloud-alibaba/best-practices"},"next":{"title":"\u5feb\u901f\u53c2\u8003","permalink":"/docs/springcloud-alibaba/quick-reference"}}');var l=s(22714),i=s(48885);const d={id:"monitoring",title:"\u76d1\u63a7\u4e0e\u8fd0\u7ef4",sidebar_label:"\u76d1\u63a7\u4e0e\u8fd0\u7ef4",sidebar_position:12},t="Spring Cloud Alibaba \u76d1\u63a7\u4e0e\u8fd0\u7ef4",c={},a=[{value:"1. Nacos \u76d1\u63a7",id:"1-nacos-\u76d1\u63a7",level:2},{value:"Nacos \u63a7\u5236\u53f0",id:"nacos-\u63a7\u5236\u53f0",level:3},{value:"\u5173\u952e\u6307\u6807",id:"\u5173\u952e\u6307\u6807",level:3},{value:"Metrics \u63a5\u53e3",id:"metrics-\u63a5\u53e3",level:3},{value:"\u65e5\u5fd7\u76d1\u63a7",id:"\u65e5\u5fd7\u76d1\u63a7",level:3},{value:"2. Sentinel \u76d1\u63a7",id:"2-sentinel-\u76d1\u63a7",level:2},{value:"Sentinel Dashboard",id:"sentinel-dashboard",level:3},{value:"\u5b9e\u65f6\u76d1\u63a7\u6307\u6807",id:"\u5b9e\u65f6\u76d1\u63a7\u6307\u6807",level:3},{value:"Metrics \u63a5\u53e3",id:"metrics-\u63a5\u53e3-1",level:3},{value:"3. Seata \u76d1\u63a7",id:"3-seata-\u76d1\u63a7",level:2},{value:"Seata Server \u63a7\u5236\u53f0",id:"seata-server-\u63a7\u5236\u53f0",level:3},{value:"\u5173\u952e\u6307\u6807",id:"\u5173\u952e\u6307\u6807-1",level:3},{value:"\u65e5\u5fd7\u76d1\u63a7",id:"\u65e5\u5fd7\u76d1\u63a7-1",level:3},{value:"Metrics \u96c6\u6210",id:"metrics-\u96c6\u6210",level:3},{value:"4. RocketMQ \u76d1\u63a7",id:"4-rocketmq-\u76d1\u63a7",level:2},{value:"RocketMQ Dashboard",id:"rocketmq-dashboard",level:3},{value:"\u5173\u952e\u6307\u6807",id:"\u5173\u952e\u6307\u6807-2",level:3},{value:"\u6d88\u606f\u5806\u79ef\u76d1\u63a7",id:"\u6d88\u606f\u5806\u79ef\u76d1\u63a7",level:3},{value:"5. Dubbo \u76d1\u63a7",id:"5-dubbo-\u76d1\u63a7",level:2},{value:"Dubbo Admin",id:"dubbo-admin",level:3},{value:"\u5173\u952e\u6307\u6807",id:"\u5173\u952e\u6307\u6807-3",level:3},{value:"6. Spring Boot Actuator",id:"6-spring-boot-actuator",level:2},{value:"\u6dfb\u52a0\u4f9d\u8d56",id:"\u6dfb\u52a0\u4f9d\u8d56",level:3},{value:"\u914d\u7f6e",id:"\u914d\u7f6e",level:3},{value:"\u6838\u5fc3\u7aef\u70b9",id:"\u6838\u5fc3\u7aef\u70b9",level:3},{value:"\u81ea\u5b9a\u4e49\u5065\u5eb7\u68c0\u67e5",id:"\u81ea\u5b9a\u4e49\u5065\u5eb7\u68c0\u67e5",level:3},{value:"7. Prometheus + Grafana",id:"7-prometheus--grafana",level:2},{value:"Prometheus \u914d\u7f6e",id:"prometheus-\u914d\u7f6e",level:3},{value:"Grafana Dashboard",id:"grafana-dashboard",level:3},{value:"\u5173\u952e\u6307\u6807\u9762\u677f",id:"\u5173\u952e\u6307\u6807\u9762\u677f",level:3},{value:"8. \u65e5\u5fd7\u6536\u96c6 (ELK)",id:"8-\u65e5\u5fd7\u6536\u96c6-elk",level:2},{value:"\u67b6\u6784",id:"\u67b6\u6784",level:3},{value:"Logback \u914d\u7f6e",id:"logback-\u914d\u7f6e",level:3},{value:"9. \u94fe\u8def\u8ffd\u8e2a (Sleuth + Zipkin)",id:"9-\u94fe\u8def\u8ffd\u8e2a-sleuth--zipkin",level:2},{value:"\u6dfb\u52a0\u4f9d\u8d56",id:"\u6dfb\u52a0\u4f9d\u8d56-1",level:3},{value:"\u914d\u7f6e",id:"\u914d\u7f6e-1",level:3},{value:"Zipkin Server",id:"zipkin-server",level:3},{value:"10. \u544a\u8b66\u914d\u7f6e",id:"10-\u544a\u8b66\u914d\u7f6e",level:2},{value:"Prometheus Alertmanager",id:"prometheus-alertmanager",level:3},{value:"Alertmanager \u914d\u7f6e",id:"alertmanager-\u914d\u7f6e",level:3},{value:"11. \u76d1\u63a7\u6700\u4f73\u5b9e\u8df5",id:"11-\u76d1\u63a7\u6700\u4f73\u5b9e\u8df5",level:2},{value:"\u6838\u5fc3\u6307\u6807 (RED)",id:"\u6838\u5fc3\u6307\u6807-red",level:3},{value:"\u9ec4\u91d1\u6307\u6807 (USE)",id:"\u9ec4\u91d1\u6307\u6807-use",level:3},{value:"\u544a\u8b66\u539f\u5219",id:"\u544a\u8b66\u539f\u5219",level:3},{value:"\u65e5\u5fd7\u89c4\u8303",id:"\u65e5\u5fd7\u89c4\u8303",level:3},{value:"12. \u8fd0\u7ef4\u5de5\u5177\u811a\u672c",id:"12-\u8fd0\u7ef4\u5de5\u5177\u811a\u672c",level:2},{value:"\u5065\u5eb7\u68c0\u67e5\u811a\u672c",id:"\u5065\u5eb7\u68c0\u67e5\u811a\u672c",level:3},{value:"\u65e5\u5fd7\u5206\u6790\u811a\u672c",id:"\u65e5\u5fd7\u5206\u6790\u811a\u672c",level:3},{value:"13. \u603b\u7ed3",id:"13-\u603b\u7ed3",level:2},{value:"\u76d1\u63a7\u8986\u76d6",id:"\u76d1\u63a7\u8986\u76d6",level:3},{value:"\u5173\u952e\u8981\u70b9",id:"\u5173\u952e\u8981\u70b9",level:3}];function h(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"spring-cloud-alibaba-\u76d1\u63a7\u4e0e\u8fd0\u7ef4",children:"Spring Cloud Alibaba \u76d1\u63a7\u4e0e\u8fd0\u7ef4"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsxs)(n.p,{children:["[!IMPORTANT]\n",(0,l.jsx)(n.strong,{children:"\u751f\u4ea7\u73af\u5883\u5fc5\u5907"}),": \u5b8c\u5584\u7684\u76d1\u63a7\u4f53\u7cfb\u662f\u4fdd\u969c\u7cfb\u7edf\u7a33\u5b9a\u8fd0\u884c\u7684\u57fa\u7840,\u672c\u6587\u4ecb\u7ecd Spring Cloud Alibaba \u5404\u7ec4\u4ef6\u7684\u76d1\u63a7\u548c\u8fd0\u7ef4\u65b9\u6848\u3002"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"1-nacos-\u76d1\u63a7",children:"1. Nacos \u76d1\u63a7"}),"\n",(0,l.jsx)(n.h3,{id:"nacos-\u63a7\u5236\u53f0",children:"Nacos \u63a7\u5236\u53f0"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u8bbf\u95ee"}),": ",(0,l.jsx)(n.code,{children:"http://localhost:8848/nacos"})]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u6838\u5fc3\u529f\u80fd"}),":"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u670d\u52a1\u5217\u8868\u67e5\u770b"}),"\n",(0,l.jsx)(n.li,{children:"\u670d\u52a1\u5b9e\u4f8b\u5065\u5eb7\u72b6\u6001"}),"\n",(0,l.jsx)(n.li,{children:"\u914d\u7f6e\u7ba1\u7406"}),"\n",(0,l.jsx)(n.li,{children:"\u547d\u540d\u7a7a\u95f4\u7ba1\u7406"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"\u5173\u952e\u6307\u6807",children:"\u5173\u952e\u6307\u6807"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u6307\u6807"}),(0,l.jsx)(n.th,{children:"\u8bf4\u660e"}),(0,l.jsx)(n.th,{children:"\u6b63\u5e38\u8303\u56f4"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u670d\u52a1\u5b9e\u4f8b\u6570"}),(0,l.jsx)(n.td,{children:"\u6ce8\u518c\u7684\u670d\u52a1\u5b9e\u4f8b\u6570"}),(0,l.jsx)(n.td,{children:"-"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u5065\u5eb7\u5b9e\u4f8b\u6bd4\u4f8b"}),(0,l.jsx)(n.td,{children:"\u5065\u5eb7\u5b9e\u4f8b/\u603b\u5b9e\u4f8b"}),(0,l.jsx)(n.td,{children:"> 80%"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u914d\u7f6e\u53d8\u66f4\u6b21\u6570"}),(0,l.jsx)(n.td,{children:"\u914d\u7f6e\u4fee\u6539\u9891\u7387"}),(0,l.jsx)(n.td,{children:"-"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u670d\u52a1\u8ba2\u9605\u6570"}),(0,l.jsx)(n.td,{children:"\u670d\u52a1\u88ab\u8ba2\u9605\u6b21\u6570"}),(0,l.jsx)(n.td,{children:"-"})]})]})]}),"\n",(0,l.jsx)(n.h3,{id:"metrics-\u63a5\u53e3",children:"Metrics \u63a5\u53e3"}),"\n",(0,l.jsx)(n.p,{children:"Nacos \u63d0\u4f9b Prometheus \u683c\u5f0f\u7684 Metrics:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Nacos Metrics\ncurl http://localhost:8848/nacos/actuator/prometheus\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u65e5\u5fd7\u76d1\u63a7",children:"\u65e5\u5fd7\u76d1\u63a7"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u65e5\u5fd7\u8def\u5f84"}),": ",(0,l.jsx)(n.code,{children:"${nacos.home}/logs/"})]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# \u5173\u952e\u65e5\u5fd7\u6587\u4ef6\nnacos.log          # \u4e3b\u65e5\u5fd7\nnaming-server.log  # \u670d\u52a1\u6ce8\u518c\u65e5\u5fd7\nconfig-server.log  # \u914d\u7f6e\u4e2d\u5fc3\u65e5\u5fd7\n"})}),"\n",(0,l.jsx)(n.h2,{id:"2-sentinel-\u76d1\u63a7",children:"2. Sentinel \u76d1\u63a7"}),"\n",(0,l.jsx)(n.h3,{id:"sentinel-dashboard",children:"Sentinel Dashboard"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u542f\u52a8\u63a7\u5236\u53f0"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"java -Dserver.port=8080 -jar sentinel-dashboard.jar\n"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u8bbf\u95ee"}),": ",(0,l.jsx)(n.code,{children:"http://localhost:8080"})]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u6838\u5fc3\u529f\u80fd"}),":"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u5b9e\u65f6\u76d1\u63a7"}),"\n",(0,l.jsx)(n.li,{children:"\u89c4\u5219\u914d\u7f6e"}),"\n",(0,l.jsx)(n.li,{children:"\u7c07\u70b9\u94fe\u8def"}),"\n",(0,l.jsx)(n.li,{children:"\u673a\u5668\u5217\u8868"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"\u5b9e\u65f6\u76d1\u63a7\u6307\u6807",children:"\u5b9e\u65f6\u76d1\u63a7\u6307\u6807"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u6307\u6807"}),(0,l.jsx)(n.th,{children:"\u8bf4\u660e"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"QPS"}),(0,l.jsx)(n.td,{children:"\u6bcf\u79d2\u8bf7\u6c42\u6570"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u901a\u8fc7 QPS"}),(0,l.jsx)(n.td,{children:"\u901a\u8fc7\u7684\u8bf7\u6c42\u6570"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u62d2\u7edd QPS"}),(0,l.jsx)(n.td,{children:"\u88ab\u9650\u6d41\u7684\u8bf7\u6c42\u6570"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u5f02\u5e38 QPS"}),(0,l.jsx)(n.td,{children:"\u5f02\u5e38\u7684\u8bf7\u6c42\u6570"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u5e73\u5747\u54cd\u5e94\u65f6\u95f4"}),(0,l.jsx)(n.td,{children:"\u54cd\u5e94\u65f6\u95f4"})]})]})]}),"\n",(0,l.jsx)(n.h3,{id:"metrics-\u63a5\u53e3-1",children:"Metrics \u63a5\u53e3"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:'@RestController\npublic class MetricsController {\n\n    @GetMapping("/metrics")\n    public Map<String, Object> getMetrics() {\n        Map<String, Object> metrics = new HashMap<>();\n        \n        // \u83b7\u53d6\u6240\u6709\u8d44\u6e90\u7684\u7edf\u8ba1\u4fe1\u606f\n        for (String resource : InMemoryMetricsRepository.getInstance().listResourcesOfType(MetricEvent.PASS)) {\n            metrics.put(resource, InMemoryMetricsRepository.getInstance()\n                .queryByAppAndResourceBetween(resource, 0, System.currentTimeMillis()));\n        }\n        \n        return metrics;\n    }\n}\n'})}),"\n",(0,l.jsx)(n.h2,{id:"3-seata-\u76d1\u63a7",children:"3. Seata \u76d1\u63a7"}),"\n",(0,l.jsx)(n.h3,{id:"seata-server-\u63a7\u5236\u53f0",children:"Seata Server \u63a7\u5236\u53f0"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u8bbf\u95ee"}),": ",(0,l.jsx)(n.code,{children:"http://localhost:7091"})]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u6838\u5fc3\u529f\u80fd"}),":"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u5168\u5c40\u4e8b\u52a1\u67e5\u8be2"}),"\n",(0,l.jsx)(n.li,{children:"\u5206\u652f\u4e8b\u52a1\u67e5\u8be2"}),"\n",(0,l.jsx)(n.li,{children:"\u5168\u5c40\u9501\u67e5\u8be2"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"\u5173\u952e\u6307\u6807-1",children:"\u5173\u952e\u6307\u6807"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u6307\u6807"}),(0,l.jsx)(n.th,{children:"\u8bf4\u660e"}),(0,l.jsx)(n.th,{children:"\u544a\u8b66\u9608\u503c"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u6d3b\u8dc3\u5168\u5c40\u4e8b\u52a1\u6570"}),(0,l.jsx)(n.td,{children:"\u6b63\u5728\u6267\u884c\u7684\u5168\u5c40\u4e8b\u52a1"}),(0,l.jsx)(n.td,{children:"> 1000"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u5168\u5c40\u4e8b\u52a1\u8d85\u65f6\u6570"}),(0,l.jsx)(n.td,{children:"\u8d85\u65f6\u7684\u5168\u5c40\u4e8b\u52a1"}),(0,l.jsx)(n.td,{children:"> 0"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u4e8b\u52a1\u63d0\u4ea4\u6210\u529f\u7387"}),(0,l.jsx)(n.td,{children:"\u63d0\u4ea4\u6210\u529f/\u603b\u4e8b\u52a1"}),(0,l.jsx)(n.td,{children:"< 95%"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u4e8b\u52a1\u56de\u6eda\u7387"}),(0,l.jsx)(n.td,{children:"\u56de\u6eda/\u603b\u4e8b\u52a1"}),(0,l.jsx)(n.td,{children:"> 5%"})]})]})]}),"\n",(0,l.jsx)(n.h3,{id:"\u65e5\u5fd7\u76d1\u63a7-1",children:"\u65e5\u5fd7\u76d1\u63a7"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Seata Server \u65e5\u5fd7\n${seata.home}/logs/seata_gc.log\n${seata.home}/logs/seata.log\n"})}),"\n",(0,l.jsx)(n.h3,{id:"metrics-\u96c6\u6210",children:"Metrics \u96c6\u6210"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:"# application.yml\nseata:\n  metrics:\n    enabled: true\n    registry-type: compact\n    exporter-list: prometheus\n    exporter-prometheus-port: 9898\n"})}),"\n",(0,l.jsx)(n.p,{children:"\u8bbf\u95ee Metrics:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"curl http://localhost:9898/metrics\n"})}),"\n",(0,l.jsx)(n.h2,{id:"4-rocketmq-\u76d1\u63a7",children:"4. RocketMQ \u76d1\u63a7"}),"\n",(0,l.jsx)(n.h3,{id:"rocketmq-dashboard",children:"RocketMQ Dashboard"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u4e0b\u8f7d\u548c\u542f\u52a8"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/apache/rocketmq-dashboard.git\ncd rocketmq-dashboard\nmvn clean package -Dmaven.test.skip=true\njava -jar target/rocketmq-dashboard-1.0.0.jar\n"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u8bbf\u95ee"}),": ",(0,l.jsx)(n.code,{children:"http://localhost:8080"})]}),"\n",(0,l.jsx)(n.h3,{id:"\u5173\u952e\u6307\u6807-2",children:"\u5173\u952e\u6307\u6807"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u6307\u6807"}),(0,l.jsx)(n.th,{children:"\u8bf4\u660e"}),(0,l.jsx)(n.th,{children:"\u544a\u8b66\u9608\u503c"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u6d88\u606f\u5806\u79ef\u6570"}),(0,l.jsx)(n.td,{children:"\u672a\u6d88\u8d39\u7684\u6d88\u606f\u6570"}),(0,l.jsx)(n.td,{children:"> 10000"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u6d88\u8d39 TPS"}),(0,l.jsx)(n.td,{children:"\u6bcf\u79d2\u6d88\u8d39\u6d88\u606f\u6570"}),(0,l.jsx)(n.td,{children:"-"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u751f\u4ea7 TPS"}),(0,l.jsx)(n.td,{children:"\u6bcf\u79d2\u751f\u4ea7\u6d88\u606f\u6570"}),(0,l.jsx)(n.td,{children:"-"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u6d88\u8d39\u5ef6\u8fdf"}),(0,l.jsx)(n.td,{children:"\u6d88\u606f\u5ef6\u8fdf\u65f6\u95f4"}),(0,l.jsx)(n.td,{children:"> 1s"})]})]})]}),"\n",(0,l.jsx)(n.h3,{id:"\u6d88\u606f\u5806\u79ef\u76d1\u63a7",children:"\u6d88\u606f\u5806\u79ef\u76d1\u63a7"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:'@Component\npublic class RocketMQMonitor {\n\n    @Autowired\n    private DefaultMQAdminExt mqAdminExt;\n\n    public long getMessageBacklog(String consumerGroup, String topic) {\n        try {\n            ConsumeStats consumeStats = mqAdminExt.examineConsumeStats(consumerGroup);\n            long diff = consumeStats.computeTotalDiff();\n            return diff;\n        } catch (Exception e) {\n            log.error("\u83b7\u53d6\u6d88\u606f\u5806\u79ef\u5931\u8d25", e);\n            return -1;\n        }\n    }\n}\n'})}),"\n",(0,l.jsx)(n.h2,{id:"5-dubbo-\u76d1\u63a7",children:"5. Dubbo \u76d1\u63a7"}),"\n",(0,l.jsx)(n.h3,{id:"dubbo-admin",children:"Dubbo Admin"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u542f\u52a8"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/apache/dubbo-admin.git\ncd dubbo-admin\nmvn clean package\ncd dubbo-admin-distribution/target\njava -jar dubbo-admin-0.6.0.jar\n"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u8bbf\u95ee"}),": ",(0,l.jsx)(n.code,{children:"http://localhost:8080"})]}),"\n",(0,l.jsx)(n.h3,{id:"\u5173\u952e\u6307\u6807-3",children:"\u5173\u952e\u6307\u6807"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u6307\u6807"}),(0,l.jsx)(n.th,{children:"\u8bf4\u660e"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u670d\u52a1\u63d0\u4f9b\u8005\u6570"}),(0,l.jsx)(n.td,{children:"Provider \u6570\u91cf"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u670d\u52a1\u6d88\u8d39\u8005\u6570"}),(0,l.jsx)(n.td,{children:"Consumer \u6570\u91cf"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u8c03\u7528\u6210\u529f\u7387"}),(0,l.jsx)(n.td,{children:"\u6210\u529f/\u603b\u8c03\u7528"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u5e73\u5747\u54cd\u5e94\u65f6\u95f4"}),(0,l.jsx)(n.td,{children:"\u5e73\u5747 RT"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"\u8c03\u7528 QPS"}),(0,l.jsx)(n.td,{children:"\u6bcf\u79d2\u8c03\u7528\u6570"})]})]})]}),"\n",(0,l.jsx)(n.h2,{id:"6-spring-boot-actuator",children:"6. Spring Boot Actuator"}),"\n",(0,l.jsx)(n.h3,{id:"\u6dfb\u52a0\u4f9d\u8d56",children:"\u6dfb\u52a0\u4f9d\u8d56"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-xml",children:"<dependency>\n    <groupId>org.springframework.boot</groupId>\n    <artifactId>spring-boot-starter-actuator</artifactId>\n</dependency>\n\n<dependency>\n    <groupId>io.micrometer</groupId>\n    <artifactId>micrometer-registry-prometheus</artifactId>\n</dependency>\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u914d\u7f6e",children:"\u914d\u7f6e"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:'management:\n  endpoints:\n    web:\n      exposure:\n        include: "*"\n  endpoint:\n    health:\n      show-details: always\n  metrics:\n    export:\n      prometheus:\n        enabled: true\n'})}),"\n",(0,l.jsx)(n.h3,{id:"\u6838\u5fc3\u7aef\u70b9",children:"\u6838\u5fc3\u7aef\u70b9"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"\u7aef\u70b9"}),(0,l.jsx)(n.th,{children:"\u8bf4\u660e"}),(0,l.jsx)(n.th,{children:"URL"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"health"}),(0,l.jsx)(n.td,{children:"\u5065\u5eb7\u68c0\u67e5"}),(0,l.jsx)(n.td,{children:"/actuator/health"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"info"}),(0,l.jsx)(n.td,{children:"\u5e94\u7528\u4fe1\u606f"}),(0,l.jsx)(n.td,{children:"/actuator/info"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"metrics"}),(0,l.jsx)(n.td,{children:"\u5ea6\u91cf\u6307\u6807"}),(0,l.jsx)(n.td,{children:"/actuator/metrics"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"prometheus"}),(0,l.jsx)(n.td,{children:"Prometheus\u683c\u5f0f"}),(0,l.jsx)(n.td,{children:"/actuator/prometheus"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"env"}),(0,l.jsx)(n.td,{children:"\u73af\u5883\u53d8\u91cf"}),(0,l.jsx)(n.td,{children:"/actuator/env"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"beans"}),(0,l.jsx)(n.td,{children:"Spring Beans"}),(0,l.jsx)(n.td,{children:"/actuator/beans"})]})]})]}),"\n",(0,l.jsx)(n.h3,{id:"\u81ea\u5b9a\u4e49\u5065\u5eb7\u68c0\u67e5",children:"\u81ea\u5b9a\u4e49\u5065\u5eb7\u68c0\u67e5"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:'@Component\npublic class CustomHealthIndicator implements HealthIndicator {\n\n    @Override\n    public Health health() {\n        // \u68c0\u67e5\u6570\u636e\u5e93\u8fde\u63a5\n        if (checkDatabase()) {\n            return Health.up()\n                .withDetail("database", "MySQL")\n                .withDetail("status", "UP")\n                .build();\n        }\n        \n        return Health.down()\n            .withDetail("database", "MySQL")\n            .withDetail("error", "\u8fde\u63a5\u5931\u8d25")\n            .build();\n    }\n    \n    private boolean checkDatabase() {\n        // \u5b9e\u9645\u68c0\u67e5\u903b\u8f91\n        return true;\n    }\n}\n'})}),"\n",(0,l.jsx)(n.h2,{id:"7-prometheus--grafana",children:"7. Prometheus + Grafana"}),"\n",(0,l.jsx)(n.h3,{id:"prometheus-\u914d\u7f6e",children:"Prometheus \u914d\u7f6e"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",metastring:'title="prometheus.yml"',children:"global:\n  scrape_interval: 15s\n\nscrape_configs:\n  # Nacos\n  - job_name: 'nacos'\n    static_configs:\n      - targets: ['localhost:8848']\n    metrics_path: '/nacos/actuator/prometheus'\n\n  # Sentinel\n  - job_name: 'sentinel'\n    static_configs:\n      - targets: ['localhost:8719']\n\n  # Spring Boot \u5e94\u7528\n  - job_name: 'spring-boot-apps'\n    static_configs:\n      - targets:\n        - 'localhost:8081'  # user-service\n        - 'localhost:8082'  # order-service\n    metrics_path: '/actuator/prometheus'\n\n  # Seata\n  - job_name: 'seata'\n    static_configs:\n      - targets: ['localhost:9898']\n"})}),"\n",(0,l.jsx)(n.h3,{id:"grafana-dashboard",children:"Grafana Dashboard"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u63a8\u8350 Dashboard"}),":"]}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Spring Boot Dashboard"}),": ID 6756"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"JVM Dashboard"}),": ID 4701"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"MySQL Dashboard"}),": ID 7362"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Redis Dashboard"}),": ID 11835"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u5bfc\u5165 Dashboard"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"Grafana \u2192 Create \u2192 Import \u2192 \u8f93\u5165 Dashboard ID\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u5173\u952e\u6307\u6807\u9762\u677f",children:"\u5173\u952e\u6307\u6807\u9762\u677f"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"JVM \u76d1\u63a7"}),":"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Heap Memory Usage"}),"\n",(0,l.jsx)(n.li,{children:"Non-Heap Memory Usage"}),"\n",(0,l.jsx)(n.li,{children:"GC Count"}),"\n",(0,l.jsx)(n.li,{children:"GC Time"}),"\n",(0,l.jsx)(n.li,{children:"Thread Count"}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u5e94\u7528\u76d1\u63a7"}),":"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"QPS"}),"\n",(0,l.jsx)(n.li,{children:"Response Time (P50, P95, P99)"}),"\n",(0,l.jsx)(n.li,{children:"Error Rate"}),"\n",(0,l.jsx)(n.li,{children:"HTTP Status Codes"}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u6570\u636e\u5e93\u76d1\u63a7"}),":"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Connection Pool Size"}),"\n",(0,l.jsx)(n.li,{children:"Active Connections"}),"\n",(0,l.jsx)(n.li,{children:"Query Time"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"8-\u65e5\u5fd7\u6536\u96c6-elk",children:"8. \u65e5\u5fd7\u6536\u96c6 (ELK)"}),"\n",(0,l.jsx)(n.h3,{id:"\u67b6\u6784",children:"\u67b6\u6784"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"\u5e94\u7528\u670d\u52a1 \u2192 Filebeat \u2192 Logstash \u2192 Elasticsearch \u2192 Kibana\n"})}),"\n",(0,l.jsx)(n.h3,{id:"logback-\u914d\u7f6e",children:"Logback \u914d\u7f6e"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-xml",metastring:'title="logback-spring.xml"',children:'<?xml version="1.0" encoding="UTF-8"?>\n<configuration>\n    \x3c!-- \u63a7\u5236\u53f0\u8f93\u51fa --\x3e\n    <appender name="CONSOLE" class="ch.qos.logback.core.ConsoleAppender">\n        <encoder>\n            <pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>\n        </encoder>\n    </appender>\n\n    \x3c!-- \u6587\u4ef6\u8f93\u51fa --\x3e\n    <appender name="FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">\n        <file>logs/application.log</file>\n        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">\n            <fileNamePattern>logs/application.%d{yyyy-MM-dd}.log</fileNamePattern>\n            <maxHistory>30</maxHistory>\n        </rollingPolicy>\n        <encoder>\n            <pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>\n        </encoder>\n    </appender>\n\n    \x3c!-- JSON \u683c\u5f0f (\u7528\u4e8e ELK) --\x3e\n    <appender name="JSON" class="ch.qos.logback.core.rolling.RollingFileAppender">\n        <file>logs/application-json.log</file>\n        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">\n            <fileNamePattern>logs/application-json.%d{yyyy-MM-dd}.log</fileNamePattern>\n            <maxHistory>30</maxHistory>\n        </rollingPolicy>\n        <encoder class="net.logstash.logback.encoder.LogstashEncoder"/>\n    </appender>\n\n    <root level="INFO">\n        <appender-ref ref="CONSOLE"/>\n        <appender-ref ref="FILE"/>\n        <appender-ref ref="JSON"/>\n    </root>\n</configuration>\n'})}),"\n",(0,l.jsx)(n.h2,{id:"9-\u94fe\u8def\u8ffd\u8e2a-sleuth--zipkin",children:"9. \u94fe\u8def\u8ffd\u8e2a (Sleuth + Zipkin)"}),"\n",(0,l.jsx)(n.h3,{id:"\u6dfb\u52a0\u4f9d\u8d56-1",children:"\u6dfb\u52a0\u4f9d\u8d56"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-xml",children:"<dependency>\n    <groupId>org.springframework.cloud</groupId>\n    <artifactId>spring-cloud-starter-sleuth</artifactId>\n</dependency>\n\n<dependency>\n    <groupId>org.springframework.cloud</groupId>\n    <artifactId>spring-cloud-sleuth-zipkin</artifactId>\n</dependency>\n"})}),"\n",(0,l.jsx)(n.h3,{id:"\u914d\u7f6e-1",children:"\u914d\u7f6e"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:"spring:\n  zipkin:\n    base-url: http://localhost:9411\n    sender:\n      type: web\n  sleuth:\n    sampler:\n      probability: 1.0  # \u91c7\u6837\u7387 100%\n"})}),"\n",(0,l.jsx)(n.h3,{id:"zipkin-server",children:"Zipkin Server"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Docker \u542f\u52a8\ndocker run -d -p 9411:9411 openzipkin/zipkin\n"})}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u8bbf\u95ee"}),": ",(0,l.jsx)(n.code,{children:"http://localhost:9411"})]}),"\n",(0,l.jsx)(n.h2,{id:"10-\u544a\u8b66\u914d\u7f6e",children:"10. \u544a\u8b66\u914d\u7f6e"}),"\n",(0,l.jsx)(n.h3,{id:"prometheus-alertmanager",children:"Prometheus Alertmanager"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",metastring:'title="alert.rules.yml"',children:'groups:\n  - name: application_alerts\n    rules:\n      # \u9519\u8bef\u7387\u544a\u8b66\n      - alert: HighErrorRate\n        expr: rate(http_server_requests_seconds_count{status=~"5.."}[5m]) > 0.01\n        for: 5m\n        labels:\n          severity: critical\n        annotations:\n          summary: "\u9ad8\u9519\u8bef\u7387\u544a\u8b66"\n          description: "\u670d\u52a1 {{ $labels.application }} \u9519\u8bef\u7387\u8d85\u8fc7 1%"\n\n      # \u54cd\u5e94\u65f6\u95f4\u544a\u8b66\n      - alert: SlowResponse\n        expr: http_server_requests_seconds{quantile="0.95"} > 1\n        for: 5m\n        labels:\n          severity: warning\n        annotations:\n          summary: "\u54cd\u5e94\u65f6\u95f4\u8fc7\u6162"\n          description: "\u670d\u52a1 {{ $labels.application }} P95 \u54cd\u5e94\u65f6\u95f4\u8d85\u8fc7 1s"\n\n      # \u670d\u52a1\u4e0b\u7ebf\u544a\u8b66\n      - alert: ServiceDown\n        expr: up == 0\n        for: 1m\n        labels:\n          severity: critical\n        annotations:\n          summary: "\u670d\u52a1\u4e0b\u7ebf"\n          description: "\u670d\u52a1 {{ $labels.job }} \u5df2\u4e0b\u7ebf"\n'})}),"\n",(0,l.jsx)(n.h3,{id:"alertmanager-\u914d\u7f6e",children:"Alertmanager \u914d\u7f6e"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",metastring:'title="alertmanager.yml"',children:"global:\n  resolve_timeout: 5m\n\nroute:\n  receiver: 'default'\n  group_by: ['alertname']\n  group_wait: 10s\n  group_interval: 10s\n  repeat_interval: 1h\n\nreceivers:\n  - name: 'default'\n    email_configs:\n      - to: 'ops@example.com'\n        from: 'alert@example.com'\n        smarthost: 'smtp.example.com:587'\n        auth_username: 'alert@example.com'\n        auth_password: 'password'\n    webhook_configs:\n      - url: 'http://localhost:8080/alert/webhook'\n"})}),"\n",(0,l.jsx)(n.h2,{id:"11-\u76d1\u63a7\u6700\u4f73\u5b9e\u8df5",children:"11. \u76d1\u63a7\u6700\u4f73\u5b9e\u8df5"}),"\n",(0,l.jsx)(n.h3,{id:"\u6838\u5fc3\u6307\u6807-red",children:"\u6838\u5fc3\u6307\u6807 (RED)"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Rate"}),": \u8bf7\u6c42\u901f\u7387 (QPS)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Error"}),": \u9519\u8bef\u7387"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Duration"}),": \u54cd\u5e94\u65f6\u95f4"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"\u9ec4\u91d1\u6307\u6807-use",children:"\u9ec4\u91d1\u6307\u6807 (USE)"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Utilization"}),": \u8d44\u6e90\u5229\u7528\u7387"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Saturation"}),": \u8d44\u6e90\u9971\u548c\u5ea6"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Errors"}),": \u9519\u8bef"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"\u544a\u8b66\u539f\u5219",children:"\u544a\u8b66\u539f\u5219"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u51c6\u786e\u6027"}),": \u907f\u514d\u8bef\u62a5\u548c\u6f0f\u62a5"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u53ca\u65f6\u6027"}),": \u5feb\u901f\u53d1\u73b0\u95ee\u9898"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u53ef\u64cd\u4f5c\u6027"}),": \u544a\u8b66\u8981\u80fd\u6307\u5bfc\u5904\u7406"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u5206\u7ea7"}),": Critical > Warning > Info"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"\u65e5\u5fd7\u89c4\u8303",children:"\u65e5\u5fd7\u89c4\u8303"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u65e5\u5fd7\u7ea7\u522b\u4f7f\u7528"}),":"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"ERROR"}),": \u5f71\u54cd\u4e1a\u52a1\u7684\u9519\u8bef"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"WARN"}),": \u6f5c\u5728\u95ee\u9898"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"INFO"}),": \u91cd\u8981\u4e1a\u52a1\u6d41\u7a0b"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"DEBUG"}),": \u8c03\u8bd5\u4fe1\u606f"]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u65e5\u5fd7\u683c\u5f0f"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:'// \u2705 \u597d\u7684\u65e5\u5fd7\nlog.info("\u7528\u6237\u767b\u5f55\u6210\u529f, userId={}, ip={}", userId, ip);\n\n// \u274c \u4e0d\u597d\u7684\u65e5\u5fd7\nlog.info("\u7528\u6237" + userId + "\u767b\u5f55\u4e86");\n'})}),"\n",(0,l.jsx)(n.h2,{id:"12-\u8fd0\u7ef4\u5de5\u5177\u811a\u672c",children:"12. \u8fd0\u7ef4\u5de5\u5177\u811a\u672c"}),"\n",(0,l.jsx)(n.h3,{id:"\u5065\u5eb7\u68c0\u67e5\u811a\u672c",children:"\u5065\u5eb7\u68c0\u67e5\u811a\u672c"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'#!/bin/bash\n\n# \u68c0\u67e5\u670d\u52a1\u5065\u5eb7\u72b6\u6001\ncheck_health() {\n    SERVICE=$1\n    PORT=$2\n    \n    HEALTH=$(curl -s http://localhost:${PORT}/actuator/health | jq -r \'.status\')\n    \n    if [ "$HEALTH" == "UP" ]; then\n        echo "\u2705 $SERVICE is UP"\n    else\n        echo "\u274c $SERVICE is DOWN"\n        # \u53d1\u9001\u544a\u8b66\n        send_alert "$SERVICE is DOWN"\n    fi\n}\n\ncheck_health "user-service" 8081\ncheck_health "order-service" 8082\ncheck_health "api-gateway" 8080\n'})}),"\n",(0,l.jsx)(n.h3,{id:"\u65e5\u5fd7\u5206\u6790\u811a\u672c",children:"\u65e5\u5fd7\u5206\u6790\u811a\u672c"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'#!/bin/bash\n\n# \u5206\u6790\u9519\u8bef\u65e5\u5fd7\nanalyze_errors() {\n    LOG_FILE=$1\n    TIME_RANGE="5 minutes ago"\n    \n    echo "=== \u6700\u8fd1 5 \u5206\u949f\u9519\u8bef\u7edf\u8ba1 ==="\n    grep -i "error" $LOG_FILE | \\\n        awk -v d="$(date --date="$TIME_RANGE" +%s)" \'$0 > d\' | \\\n        wc -l\n    \n    echo "=== TOP 10 \u9519\u8bef\u7c7b\u578b ==="\n    grep -i "error" $LOG_FILE | \\\n        awk \'{print $NF}\' | \\\n        sort | uniq -c | \\\n        sort -rn | head -10\n}\n\nanalyze_errors "/var/log/application.log"\n'})}),"\n",(0,l.jsx)(n.h2,{id:"13-\u603b\u7ed3",children:"13. \u603b\u7ed3"}),"\n",(0,l.jsx)(n.h3,{id:"\u76d1\u63a7\u8986\u76d6",children:"\u76d1\u63a7\u8986\u76d6"}),"\n",(0,l.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",checked:!0,disabled:!0})," ","\u57fa\u7840\u8bbe\u65bd\u76d1\u63a7 (CPU\u3001\u5185\u5b58\u3001\u78c1\u76d8\u3001\u7f51\u7edc)"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",checked:!0,disabled:!0})," ","\u5e94\u7528\u76d1\u63a7 (QPS\u3001RT\u3001\u9519\u8bef\u7387)"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",checked:!0,disabled:!0})," ","\u4e2d\u95f4\u4ef6\u76d1\u63a7 (Nacos\u3001Sentinel\u3001RocketMQ)"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",checked:!0,disabled:!0})," ","\u6570\u636e\u5e93\u76d1\u63a7 (MySQL\u3001Redis)"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",checked:!0,disabled:!0})," ","\u65e5\u5fd7\u6536\u96c6\u548c\u5206\u6790"]}),"\n",(0,l.jsxs)(n.li,{className:"task-list-item",children:[(0,l.jsx)(n.input,{type:"checkbox",checked:!0,disabled:!0})," ","\u94fe\u8def\u8ffd\u8e2a"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"\u5173\u952e\u8981\u70b9",children:"\u5173\u952e\u8981\u70b9"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u76d1\u63a7\u8981\u8986\u76d6\u5168\u94fe\u8def"}),"\n",(0,l.jsx)(n.li,{children:"\u544a\u8b66\u8981\u53ca\u65f6\u51c6\u786e"}),"\n",(0,l.jsx)(n.li,{children:"\u65e5\u5fd7\u8981\u7ed3\u6784\u5316"}),"\n",(0,l.jsx)(n.li,{children:"\u5b9a\u671freview\u76d1\u63a7\u6307\u6807"}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u4e0b\u4e00\u6b65"}),": \u5b66\u4e60 ",(0,l.jsx)(n.a,{href:"/docs/springcloud-alibaba/faq",children:"FAQ \u5e38\u89c1\u95ee\u9898"})]})]})}function o(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(h,{...e})}):h(e)}},48885:(e,n,s)=>{s.d(n,{R:()=>d,x:()=>t});var r=s(99378);const l={},i=r.createContext(l);function d(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:d(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);