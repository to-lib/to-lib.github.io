"use strict";(globalThis.webpackChunkto_lib_github_io=globalThis.webpackChunkto_lib_github_io||[]).push([[81480],{26095:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>c,contentTitle:()=>d,default:()=>p,frontMatter:()=>a,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"c/structs-unions","title":"\u7ed3\u6784\u4f53\u548c\u8054\u5408\u4f53","description":"\u7ed3\u6784\u4f53\u548c\u8054\u5408\u4f53\u5141\u8bb8\u5c06\u4e0d\u540c\u7c7b\u578b\u7684\u6570\u636e\u7ec4\u5408\u6210\u4e00\u4e2a\u5355\u5143\u3002","source":"@site/docs/c/structs-unions.md","sourceDirName":"c","slug":"/c/structs-unions","permalink":"/docs/c/structs-unions","draft":false,"unlisted":false,"editUrl":"https://github.com/to-lib/to-lib.github.io/tree/main/docs/c/structs-unions.md","tags":[],"version":"current","sidebarPosition":8,"frontMatter":{"sidebar_position":8,"title":"\u7ed3\u6784\u4f53\u548c\u8054\u5408\u4f53"},"sidebar":"c","previous":{"title":"\u5185\u5b58\u7ba1\u7406","permalink":"/docs/c/memory-management"},"next":{"title":"\u6587\u4ef6\u64cd\u4f5c","permalink":"/docs/c/file-io"}}');var r=t(22714),s=t(48885);const a={sidebar_position:8,title:"\u7ed3\u6784\u4f53\u548c\u8054\u5408\u4f53"},d="\u7ed3\u6784\u4f53\u548c\u8054\u5408\u4f53",c={},o=[{value:"\u7ed3\u6784\u4f53\u57fa\u7840",id:"\u7ed3\u6784\u4f53\u57fa\u7840",level:2},{value:"\u5b9a\u4e49\u548c\u4f7f\u7528",id:"\u5b9a\u4e49\u548c\u4f7f\u7528",level:3},{value:"typedef \u7b80\u5316",id:"typedef-\u7b80\u5316",level:3},{value:"\u7ed3\u6784\u4f53\u548c\u6307\u9488",id:"\u7ed3\u6784\u4f53\u548c\u6307\u9488",level:2},{value:"\u7ed3\u6784\u4f53\u6570\u7ec4",id:"\u7ed3\u6784\u4f53\u6570\u7ec4",level:2},{value:"\u8054\u5408\u4f53",id:"\u8054\u5408\u4f53",level:2},{value:"\u5e26\u6807\u7b7e\u7684\u8054\u5408\u4f53",id:"\u5e26\u6807\u7b7e\u7684\u8054\u5408\u4f53",level:2},{value:"\u679a\u4e3e",id:"\u679a\u4e3e",level:2},{value:"\u4f4d\u57df",id:"\u4f4d\u57df",level:2}];function l(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,s.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"\u7ed3\u6784\u4f53\u548c\u8054\u5408\u4f53",children:"\u7ed3\u6784\u4f53\u548c\u8054\u5408\u4f53"})}),"\n",(0,r.jsx)(e.p,{children:"\u7ed3\u6784\u4f53\u548c\u8054\u5408\u4f53\u5141\u8bb8\u5c06\u4e0d\u540c\u7c7b\u578b\u7684\u6570\u636e\u7ec4\u5408\u6210\u4e00\u4e2a\u5355\u5143\u3002"}),"\n",(0,r.jsx)(e.h2,{id:"\u7ed3\u6784\u4f53\u57fa\u7840",children:"\u7ed3\u6784\u4f53\u57fa\u7840"}),"\n",(0,r.jsx)(e.h3,{id:"\u5b9a\u4e49\u548c\u4f7f\u7528",children:"\u5b9a\u4e49\u548c\u4f7f\u7528"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-c",children:'#include <stdio.h>\n#include <string.h>\n\n// \u7ed3\u6784\u4f53\u5b9a\u4e49\nstruct Student {\n    char name[50];\n    int age;\n    float score;\n};\n\nint main(void) {\n    // \u58f0\u660e\u5e76\u521d\u59cb\u5316\n    struct Student s1 = {"\u5f20\u4e09", 20, 95.5};\n\n    // \u8bbf\u95ee\u6210\u5458\n    printf("\u59d3\u540d: %s\\n", s1.name);\n    printf("\u5e74\u9f84: %d\\n", s1.age);\n    printf("\u6210\u7ee9: %.1f\\n", s1.score);\n\n    // \u4fee\u6539\u6210\u5458\n    s1.age = 21;\n    strcpy(s1.name, "\u674e\u56db");\n\n    // \u9010\u4e2a\u521d\u59cb\u5316\n    struct Student s2;\n    strcpy(s2.name, "\u738b\u4e94");\n    s2.age = 19;\n    s2.score = 88.0;\n\n    return 0;\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"typedef-\u7b80\u5316",children:"typedef \u7b80\u5316"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-c",children:'#include <stdio.h>\n\ntypedef struct {\n    int x;\n    int y;\n} Point;\n\ntypedef struct {\n    Point topLeft;\n    Point bottomRight;\n} Rectangle;\n\nint main(void) {\n    Point p1 = {10, 20};\n    Point p2 = {100, 200};\n\n    Rectangle rect = {p1, p2};\n\n    printf("\u77e9\u5f62: (%d,%d) - (%d,%d)\\n",\n           rect.topLeft.x, rect.topLeft.y,\n           rect.bottomRight.x, rect.bottomRight.y);\n\n    return 0;\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"\u7ed3\u6784\u4f53\u548c\u6307\u9488",children:"\u7ed3\u6784\u4f53\u548c\u6307\u9488"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-c",children:'#include <stdio.h>\n#include <stdlib.h>\n#include <string.h>\n\ntypedef struct {\n    char name[50];\n    int age;\n} Person;\n\nvoid printPerson(const Person *p) {\n    printf("\u59d3\u540d: %s, \u5e74\u9f84: %d\\n", p->name, p->age);\n}\n\nvoid birthday(Person *p) {\n    p->age++;\n}\n\nint main(void) {\n    Person p1 = {"\u5f20\u4e09", 25};\n    Person *ptr = &p1;\n\n    // -> \u8fd0\u7b97\u7b26\u8bbf\u95ee\u6210\u5458\n    printf("\u59d3\u540d: %s\\n", ptr->name);\n\n    printPerson(&p1);\n    birthday(&p1);\n    printPerson(&p1);\n\n    // \u52a8\u6001\u5206\u914d\u7ed3\u6784\u4f53\n    Person *p2 = malloc(sizeof(Person));\n    strcpy(p2->name, "\u674e\u56db");\n    p2->age = 30;\n\n    printPerson(p2);\n    free(p2);\n\n    return 0;\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"\u7ed3\u6784\u4f53\u6570\u7ec4",children:"\u7ed3\u6784\u4f53\u6570\u7ec4"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-c",children:'#include <stdio.h>\n\ntypedef struct {\n    char name[20];\n    int score;\n} Player;\n\nint main(void) {\n    Player players[] = {\n        {"Alice", 100},\n        {"Bob", 85},\n        {"Charlie", 92}\n    };\n    int n = sizeof(players) / sizeof(players[0]);\n\n    // \u627e\u6700\u9ad8\u5206\n    int maxIdx = 0;\n    for (int i = 1; i < n; i++) {\n        if (players[i].score > players[maxIdx].score) {\n            maxIdx = i;\n        }\n    }\n\n    printf("\u6700\u9ad8\u5206: %s - %d\\n",\n           players[maxIdx].name, players[maxIdx].score);\n\n    return 0;\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"\u8054\u5408\u4f53",children:"\u8054\u5408\u4f53"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-c",children:'#include <stdio.h>\n\n// \u8054\u5408\u4f53\uff1a\u6240\u6709\u6210\u5458\u5171\u4eab\u540c\u4e00\u5757\u5185\u5b58\nunion Data {\n    int i;\n    float f;\n    char str[20];\n};\n\nint main(void) {\n    union Data data;\n\n    printf("sizeof(union Data) = %zu\\n", sizeof(data));\n\n    data.i = 10;\n    printf("data.i = %d\\n", data.i);\n\n    data.f = 3.14f;\n    printf("data.f = %f\\n", data.f);\n    // \u6b64\u65f6 data.i \u7684\u503c\u5df2\u7ecf\u88ab\u8986\u76d6\n\n    return 0;\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"\u5e26\u6807\u7b7e\u7684\u8054\u5408\u4f53",children:"\u5e26\u6807\u7b7e\u7684\u8054\u5408\u4f53"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-c",children:'#include <stdio.h>\n\ntypedef enum { INT, FLOAT, STRING } DataType;\n\ntypedef struct {\n    DataType type;\n    union {\n        int i;\n        float f;\n        char str[20];\n    } value;\n} Variant;\n\nvoid printVariant(Variant *v) {\n    switch (v->type) {\n        case INT:\n            printf("Int: %d\\n", v->value.i);\n            break;\n        case FLOAT:\n            printf("Float: %f\\n", v->value.f);\n            break;\n        case STRING:\n            printf("String: %s\\n", v->value.str);\n            break;\n    }\n}\n\nint main(void) {\n    Variant v1 = {INT, .value.i = 42};\n    Variant v2 = {FLOAT, .value.f = 3.14f};\n\n    printVariant(&v1);\n    printVariant(&v2);\n\n    return 0;\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"\u679a\u4e3e",children:"\u679a\u4e3e"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-c",children:'#include <stdio.h>\n\ntypedef enum {\n    MONDAY = 1,\n    TUESDAY,\n    WEDNESDAY,\n    THURSDAY,\n    FRIDAY,\n    SATURDAY,\n    SUNDAY\n} Weekday;\n\ntypedef enum {\n    RED = 0xFF0000,\n    GREEN = 0x00FF00,\n    BLUE = 0x0000FF\n} Color;\n\nint main(void) {\n    Weekday today = WEDNESDAY;\n\n    if (today >= MONDAY && today <= FRIDAY) {\n        printf("\u5de5\u4f5c\u65e5\\n");\n    } else {\n        printf("\u5468\u672b\\n");\n    }\n\n    Color c = RED;\n    printf("\u7ea2\u8272: 0x%X\\n", c);\n\n    return 0;\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"\u4f4d\u57df",children:"\u4f4d\u57df"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-c",children:'#include <stdio.h>\n\n// \u4f4d\u57df\uff1a\u7cbe\u786e\u63a7\u5236\u4f4d\u6570\nstruct Flags {\n    unsigned int isActive : 1;   // 1 \u4f4d\n    unsigned int priority : 3;   // 3 \u4f4d (0-7)\n    unsigned int type : 4;       // 4 \u4f4d (0-15)\n};\n\nint main(void) {\n    struct Flags f = {1, 5, 10};\n\n    printf("sizeof(Flags) = %zu\\n", sizeof(f));\n    printf("isActive: %u\\n", f.isActive);\n    printf("priority: %u\\n", f.priority);\n    printf("type: %u\\n", f.type);\n\n    return 0;\n}\n'})}),"\n",(0,r.jsx)(e.p,{children:"\u638c\u63e1\u7ed3\u6784\u4f53\u540e\uff0c\u5c31\u53ef\u4ee5\u7ee7\u7eed\u5b66\u4e60\u6587\u4ef6\u64cd\u4f5c\u4e86\uff01"})]})}function p(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(l,{...n})}):l(n)}},48885:(n,e,t)=>{t.d(e,{R:()=>a,x:()=>d});var i=t(99378);const r={},s=i.createContext(r);function a(n){const e=i.useContext(s);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function d(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:a(n.components),i.createElement(s.Provider,{value:e},n.children)}}}]);