"use strict";(globalThis.webpackChunkto_lib_github_io=globalThis.webpackChunkto_lib_github_io||[]).push([[76191],{3604:(n,e,l)=>{l.r(e),l.d(e,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"rust/ownership","title":"\u6240\u6709\u6743\u7cfb\u7edf","description":"\u6240\u6709\u6743\uff08Ownership\uff09\u662f Rust \u6700\u72ec\u7279\u548c\u6700\u91cd\u8981\u7684\u7279\u6027\uff0c\u5b83\u4f7f Rust \u65e0\u9700\u5783\u573e\u56de\u6536\u5668\u5c31\u80fd\u4fdd\u8bc1\u5185\u5b58\u5b89\u5168\u3002","source":"@site/docs/rust/ownership.md","sourceDirName":"rust","slug":"/rust/ownership","permalink":"/docs/rust/ownership","draft":false,"unlisted":false,"editUrl":"https://github.com/to-lib/to-lib.github.io/tree/main/docs/rust/ownership.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"title":"\u6240\u6709\u6743\u7cfb\u7edf"},"sidebar":"rust","previous":{"title":"Rust \u57fa\u7840\u8bed\u6cd5","permalink":"/docs/rust/basic-syntax"},"next":{"title":"\u7ed3\u6784\u4f53\u548c\u679a\u4e3e","permalink":"/docs/rust/structs-enums"}}');var r=l(22714),i=l(48885);const t={sidebar_position:3,title:"\u6240\u6709\u6743\u7cfb\u7edf"},a="\u6240\u6709\u6743\u7cfb\u7edf",d={},c=[{value:"\u6240\u6709\u6743\u89c4\u5219",id:"\u6240\u6709\u6743\u89c4\u5219",level:2},{value:"\u4f5c\u7528\u57df",id:"\u4f5c\u7528\u57df",level:2},{value:"String \u7c7b\u578b",id:"string-\u7c7b\u578b",level:2},{value:"String vs &amp;str",id:"string-vs-str",level:3},{value:"\u5185\u5b58\u5206\u914d",id:"\u5185\u5b58\u5206\u914d",level:3},{value:"\u79fb\u52a8 (Move)",id:"\u79fb\u52a8-move",level:2},{value:"\u4e3a\u4ec0\u4e48\u79fb\u52a8\uff1f",id:"\u4e3a\u4ec0\u4e48\u79fb\u52a8",level:3},{value:"\u514b\u9686 (Clone)",id:"\u514b\u9686-clone",level:2},{value:"\u590d\u5236 (Copy)",id:"\u590d\u5236-copy",level:2},{value:"\u5b9e\u73b0\u4e86 Copy trait \u7684\u7c7b\u578b",id:"\u5b9e\u73b0\u4e86-copy-trait-\u7684\u7c7b\u578b",level:3},{value:"\u6240\u6709\u6743\u4e0e\u51fd\u6570",id:"\u6240\u6709\u6743\u4e0e\u51fd\u6570",level:2},{value:"\u4f20\u9012\u503c\u7ed9\u51fd\u6570",id:"\u4f20\u9012\u503c\u7ed9\u51fd\u6570",level:3},{value:"\u8fd4\u56de\u503c\u4e0e\u6240\u6709\u6743",id:"\u8fd4\u56de\u503c\u4e0e\u6240\u6709\u6743",level:3},{value:"\u5f15\u7528\u548c\u501f\u7528",id:"\u5f15\u7528\u548c\u501f\u7528",level:2},{value:"\u4e0d\u53ef\u53d8\u5f15\u7528",id:"\u4e0d\u53ef\u53d8\u5f15\u7528",level:3},{value:"\u53ef\u53d8\u5f15\u7528",id:"\u53ef\u53d8\u5f15\u7528",level:3},{value:"\u501f\u7528\u89c4\u5219",id:"\u501f\u7528\u89c4\u5219",level:3},{value:"\u60ac\u5782\u5f15\u7528",id:"\u60ac\u5782\u5f15\u7528",level:3},{value:"\u5207\u7247 (Slice)",id:"\u5207\u7247-slice",level:2},{value:"\u5b57\u7b26\u4e32\u5207\u7247",id:"\u5b57\u7b26\u4e32\u5207\u7247",level:3},{value:"\u5b57\u7b26\u4e32\u5207\u7247\u4f5c\u4e3a\u53c2\u6570",id:"\u5b57\u7b26\u4e32\u5207\u7247\u4f5c\u4e3a\u53c2\u6570",level:3},{value:"\u6570\u7ec4\u5207\u7247",id:"\u6570\u7ec4\u5207\u7247",level:3},{value:"\u6240\u6709\u6743\u6a21\u5f0f",id:"\u6240\u6709\u6743\u6a21\u5f0f",level:2},{value:"\u6a21\u5f0f 1\uff1a\u4f7f\u7528\u5f15\u7528\u907f\u514d\u6240\u6709\u6743\u8f6c\u79fb",id:"\u6a21\u5f0f-1\u4f7f\u7528\u5f15\u7528\u907f\u514d\u6240\u6709\u6743\u8f6c\u79fb",level:3},{value:"\u6a21\u5f0f 2\uff1a\u8fd4\u56de\u591a\u4e2a\u503c",id:"\u6a21\u5f0f-2\u8fd4\u56de\u591a\u4e2a\u503c",level:3},{value:"\u6a21\u5f0f 3\uff1a\u4fee\u6539\u6570\u636e",id:"\u6a21\u5f0f-3\u4fee\u6539\u6570\u636e",level:3},{value:"\u6700\u4f73\u5b9e\u8df5",id:"\u6700\u4f73\u5b9e\u8df5",level:2},{value:"1. \u4f18\u5148\u4f7f\u7528\u5f15\u7528",id:"1-\u4f18\u5148\u4f7f\u7528\u5f15\u7528",level:3},{value:"2. \u4fdd\u6301\u501f\u7528\u4f5c\u7528\u57df\u6700\u5c0f",id:"2-\u4fdd\u6301\u501f\u7528\u4f5c\u7528\u57df\u6700\u5c0f",level:3},{value:"3. \u4f7f\u7528 &amp;str \u800c\u975e &amp;String",id:"3-\u4f7f\u7528-str-\u800c\u975e-string",level:3},{value:"\u5e38\u89c1\u9519\u8bef",id:"\u5e38\u89c1\u9519\u8bef",level:2},{value:"\u9519\u8bef 1\uff1a\u4f7f\u7528\u5df2\u79fb\u52a8\u7684\u503c",id:"\u9519\u8bef-1\u4f7f\u7528\u5df2\u79fb\u52a8\u7684\u503c",level:3},{value:"\u9519\u8bef 2\uff1a\u60ac\u5782\u5f15\u7528",id:"\u9519\u8bef-2\u60ac\u5782\u5f15\u7528",level:3},{value:"\u9519\u8bef 3\uff1a\u591a\u4e2a\u53ef\u53d8\u5f15\u7528",id:"\u9519\u8bef-3\u591a\u4e2a\u53ef\u53d8\u5f15\u7528",level:3},{value:"\u5185\u5b58\u5e03\u5c40\u8be6\u89e3",id:"\u5185\u5b58\u5e03\u5c40\u8be6\u89e3",level:2},{value:"\u6808\u548c\u5806",id:"\u6808\u548c\u5806",level:3},{value:"String \u7684\u5185\u5b58\u5e03\u5c40",id:"string-\u7684\u5185\u5b58\u5e03\u5c40",level:3},{value:"\u79fb\u52a8\u7684\u5185\u5b58\u6548\u679c",id:"\u79fb\u52a8\u7684\u5185\u5b58\u6548\u679c",level:3},{value:"\u514b\u9686\u7684\u5185\u5b58\u6548\u679c",id:"\u514b\u9686\u7684\u5185\u5b58\u6548\u679c",level:3},{value:"Copy \u7c7b\u578b\u7684\u5185\u5b58",id:"copy-\u7c7b\u578b\u7684\u5185\u5b58",level:3},{value:"\u751f\u547d\u5468\u671f\u9884\u89c8",id:"\u751f\u547d\u5468\u671f\u9884\u89c8",level:2},{value:"\u7f16\u8bd1\u5668\u5982\u4f55\u8ddf\u8e2a\u751f\u547d\u5468\u671f",id:"\u7f16\u8bd1\u5668\u5982\u4f55\u8ddf\u8e2a\u751f\u547d\u5468\u671f",level:3},{value:"\u51fd\u6570\u8fd4\u56de\u5f15\u7528",id:"\u51fd\u6570\u8fd4\u56de\u5f15\u7528",level:3},{value:"\u7ed3\u6784\u4f53\u4e2d\u7684\u5f15\u7528",id:"\u7ed3\u6784\u4f53\u4e2d\u7684\u5f15\u7528",level:3},{value:"\u5b9e\u6218\u573a\u666f",id:"\u5b9e\u6218\u573a\u666f",level:2},{value:"\u573a\u666f1:\u89e3\u6790\u5668\u72b6\u6001",id:"\u573a\u666f1\u89e3\u6790\u5668\u72b6\u6001",level:3},{value:"\u573a\u666f2:\u7f13\u5b58\u7cfb\u7edf",id:"\u573a\u666f2\u7f13\u5b58\u7cfb\u7edf",level:3},{value:"\u573a\u666f3:\u6570\u636e\u6d41\u5904\u7406",id:"\u573a\u666f3\u6570\u636e\u6d41\u5904\u7406",level:3},{value:"\u6027\u80fd\u4f18\u5316\u5efa\u8bae",id:"\u6027\u80fd\u4f18\u5316\u5efa\u8bae",level:2},{value:"1. \u907f\u514d\u4e0d\u5fc5\u8981\u7684\u514b\u9686",id:"1-\u907f\u514d\u4e0d\u5fc5\u8981\u7684\u514b\u9686",level:3},{value:"2. \u4f7f\u7528 Cow \u4f18\u5316\u5199\u65f6\u590d\u5236",id:"2-\u4f7f\u7528-cow-\u4f18\u5316\u5199\u65f6\u590d\u5236",level:3},{value:"3. \u4f7f\u7528\u5207\u7247\u800c\u975e\u5b8c\u6574\u96c6\u5408",id:"3-\u4f7f\u7528\u5207\u7247\u800c\u975e\u5b8c\u6574\u96c6\u5408",level:3},{value:"4. \u9884\u5206\u914d\u5bb9\u91cf",id:"4-\u9884\u5206\u914d\u5bb9\u91cf",level:3},{value:"5. \u4f7f\u7528 &amp;str \u800c\u975e String",id:"5-\u4f7f\u7528-str-\u800c\u975e-string",level:3},{value:"6. \u907f\u514d\u8fd0\u884c\u65f6\u501f\u7528\u68c0\u67e5",id:"6-\u907f\u514d\u8fd0\u884c\u65f6\u501f\u7528\u68c0\u67e5",level:3},{value:"7. \u8fd4\u56de\u8fed\u4ee3\u5668\u800c\u975eVec",id:"7-\u8fd4\u56de\u8fed\u4ee3\u5668\u800c\u975evec",level:3},{value:"8. \u4f7f\u7528\u5f15\u7528\u4f18\u5316\u5faa\u73af",id:"8-\u4f7f\u7528\u5f15\u7528\u4f18\u5316\u5faa\u73af",level:3},{value:"\u603b\u7ed3",id:"\u603b\u7ed3",level:2}];function o(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"\u6240\u6709\u6743\u7cfb\u7edf",children:"\u6240\u6709\u6743\u7cfb\u7edf"})}),"\n",(0,r.jsx)(e.p,{children:"\u6240\u6709\u6743\uff08Ownership\uff09\u662f Rust \u6700\u72ec\u7279\u548c\u6700\u91cd\u8981\u7684\u7279\u6027\uff0c\u5b83\u4f7f Rust \u65e0\u9700\u5783\u573e\u56de\u6536\u5668\u5c31\u80fd\u4fdd\u8bc1\u5185\u5b58\u5b89\u5168\u3002"}),"\n",(0,r.jsx)(e.h2,{id:"\u6240\u6709\u6743\u89c4\u5219",children:"\u6240\u6709\u6743\u89c4\u5219"}),"\n",(0,r.jsx)(e.p,{children:"Rust \u7684\u6240\u6709\u6743\u6709\u4e09\u6761\u6838\u5fc3\u89c4\u5219\uff1a"}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.strong,{children:"\u6bcf\u4e2a\u503c\u90fd\u6709\u4e00\u4e2a\u6240\u6709\u8005"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.strong,{children:"\u503c\u5728\u4efb\u4f55\u65f6\u523b\u53ea\u80fd\u6709\u4e00\u4e2a\u6240\u6709\u8005"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.strong,{children:"\u5f53\u6240\u6709\u8005\u79bb\u5f00\u4f5c\u7528\u57df\u65f6\uff0c\u503c\u5c06\u88ab\u4e22\u5f03"})}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"\u4f5c\u7528\u57df",children:"\u4f5c\u7528\u57df"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    {                      // s \u65e0\u6548\uff0c\u5c1a\u672a\u58f0\u660e\n        let s = "hello";   // s \u4ece\u6b64\u5904\u5f00\u59cb\u6709\u6548\n        \n        // \u4f7f\u7528 s\n        println!("{}", s);\n    }                      // \u4f5c\u7528\u57df\u7ed3\u675f\uff0cs \u4e0d\u518d\u6709\u6548\n    \n    // println!("{}", s);  // \u9519\u8bef\uff1as \u5df2\u7ecf\u8d85\u51fa\u4f5c\u7528\u57df\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"string-\u7c7b\u578b",children:"String \u7c7b\u578b"}),"\n",(0,r.jsx)(e.h3,{id:"string-vs-str",children:"String vs &str"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    // \u5b57\u7b26\u4e32\u5b57\u9762\u91cf\uff1a\u4e0d\u53ef\u53d8\uff0c\u5b58\u50a8\u5728\u6808\u4e0a\n    let s1 = "hello";\n    \n    // String \u7c7b\u578b\uff1a\u53ef\u53d8\uff0c\u5b58\u50a8\u5728\u5806\u4e0a\n    let mut s2 = String::from("hello");\n    s2.push_str(", world");\n    println!("{}", s2);\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u5185\u5b58\u5206\u914d",children:"\u5185\u5b58\u5206\u914d"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let s = String::from("hello");\n    \n    // String \u7531\u4e09\u90e8\u5206\u7ec4\u6210\uff08\u5b58\u50a8\u5728\u6808\u4e0a\uff09\uff1a\n    // - ptr: \u6307\u5411\u5806\u4e0a\u5185\u5bb9\u7684\u6307\u9488\n    // - len: \u5f53\u524d\u957f\u5ea6\n    // - capacity: \u5bb9\u91cf\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"\u79fb\u52a8-move",children:"\u79fb\u52a8 (Move)"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let s1 = String::from("hello");\n    let s2 = s1;  // s1 \u7684\u6240\u6709\u6743\u79fb\u52a8\u5230 s2\n    \n    // println!("{}", s1);  // \u9519\u8bef\uff1as1 \u5df2\u5931\u6548\n    println!("{}", s2);     // \u6b63\u786e\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u4e3a\u4ec0\u4e48\u79fb\u52a8",children:"\u4e3a\u4ec0\u4e48\u79fb\u52a8\uff1f"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'// \u5982\u679c\u5141\u8bb8 s1 \u548c s2 \u540c\u65f6\u6709\u6548\uff1a\n// \u5f53\u5b83\u4eec\u79bb\u5f00\u4f5c\u7528\u57df\u65f6\uff0c\u4f1a\u5c1d\u8bd5\u4e24\u6b21\u91ca\u653e\u76f8\u540c\u7684\u5185\u5b58\n// \u8fd9\u5c31\u662f"\u53cc\u91cd\u91ca\u653e"\u9519\u8bef\uff0c\u53ef\u80fd\u5bfc\u81f4\u5185\u5b58\u635f\u574f\n\n// Rust \u7684\u89e3\u51b3\u65b9\u6848\uff1a\u79fb\u52a8\u540e\u4f7f\u524d\u4e00\u4e2a\u53d8\u91cf\u65e0\u6548\n'})}),"\n",(0,r.jsx)(e.h2,{id:"\u514b\u9686-clone",children:"\u514b\u9686 (Clone)"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    // \u6df1\u62f7\u8d1d\uff1a\u590d\u5236\u5806\u4e0a\u7684\u6570\u636e\n    let s1 = String::from("hello");\n    let s2 = s1.clone();\n    \n    println!("s1 = {}, s2 = {}", s1, s2);  // \u90fd\u6709\u6548\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"\u590d\u5236-copy",children:"\u590d\u5236 (Copy)"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    // \u6808\u4e0a\u7684\u6570\u636e\uff1a\u81ea\u52a8\u590d\u5236\n    let x = 5;\n    let y = x;\n    \n    println!("x = {}, y = {}", x, y);  // \u90fd\u6709\u6548\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u5b9e\u73b0\u4e86-copy-trait-\u7684\u7c7b\u578b",children:"\u5b9e\u73b0\u4e86 Copy trait \u7684\u7c7b\u578b"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u6240\u6709\u6574\u6570\u7c7b\u578b\uff08i32, u32 \u7b49\uff09"}),"\n",(0,r.jsx)(e.li,{children:"\u5e03\u5c14\u7c7b\u578b bool"}),"\n",(0,r.jsx)(e.li,{children:"\u6d6e\u70b9\u7c7b\u578b\uff08f32, f64\uff09"}),"\n",(0,r.jsx)(e.li,{children:"\u5b57\u7b26\u7c7b\u578b char"}),"\n",(0,r.jsx)(e.li,{children:"\u5143\u7ec4\uff08\u5982\u679c\u5143\u7d20\u90fd\u5b9e\u73b0\u4e86 Copy\uff09"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    // \u5b9e\u73b0\u4e86 Copy\n    let x = (1, 2);\n    let y = x;\n    println!("{:?}, {:?}", x, y);  // \u90fd\u6709\u6548\n    \n    // \u672a\u5b9e\u73b0 Copy\uff08\u5305\u542b String\uff09\n    let x = (String::from("hello"), 5);\n    let y = x;\n    // println!("{:?}", x);  // \u9519\u8bef\uff1ax \u5df2\u5931\u6548\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"\u6240\u6709\u6743\u4e0e\u51fd\u6570",children:"\u6240\u6709\u6743\u4e0e\u51fd\u6570"}),"\n",(0,r.jsx)(e.h3,{id:"\u4f20\u9012\u503c\u7ed9\u51fd\u6570",children:"\u4f20\u9012\u503c\u7ed9\u51fd\u6570"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let s = String::from("hello");\n    takes_ownership(s);  // s \u7684\u6240\u6709\u6743\u79fb\u52a8\u5230\u51fd\u6570\n    // println!("{}", s);  // \u9519\u8bef\uff1as \u5df2\u5931\u6548\n    \n    let x = 5;\n    makes_copy(x);   // x \u88ab\u590d\u5236\n    println!("{}", x);  // \u6b63\u786e\uff1ax \u4ecd\u7136\u6709\u6548\n}\n\nfn takes_ownership(some_string: String) {\n    println!("{}", some_string);\n}  // some_string \u79bb\u5f00\u4f5c\u7528\u57df\uff0c\u5185\u5b58\u88ab\u91ca\u653e\n\nfn makes_copy(some_integer: i32) {\n    println!("{}", some_integer);\n}  // some_integer \u79bb\u5f00\u4f5c\u7528\u57df\uff0c\u6ca1\u6709\u7279\u6b8a\u64cd\u4f5c\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u8fd4\u56de\u503c\u4e0e\u6240\u6709\u6743",children:"\u8fd4\u56de\u503c\u4e0e\u6240\u6709\u6743"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let s1 = gives_ownership();  // \u83b7\u5f97\u6240\u6709\u6743\n    \n    let s2 = String::from("hello");\n    let s3 = takes_and_gives_back(s2);  // s2 \u79fb\u52a8\uff0cs3 \u83b7\u5f97\u65b0\u6240\u6709\u6743\n    \n    // println!("{}", s2);  // \u9519\u8bef\uff1as2 \u5df2\u5931\u6548\n    println!("{}", s3);     // \u6b63\u786e\n}\n\nfn gives_ownership() -> String {\n    let some_string = String::from("hello");\n    some_string  // \u8fd4\u56de\uff0c\u6240\u6709\u6743\u79fb\u51fa\n}\n\nfn takes_and_gives_back(a_string: String) -> String {\n    a_string  // \u8fd4\u56de\uff0c\u6240\u6709\u6743\u79fb\u51fa\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"\u5f15\u7528\u548c\u501f\u7528",children:"\u5f15\u7528\u548c\u501f\u7528"}),"\n",(0,r.jsx)(e.p,{children:"\u5f15\u7528\u5141\u8bb8\u4f7f\u7528\u503c\u4f46\u4e0d\u83b7\u53d6\u6240\u6709\u6743\u3002"}),"\n",(0,r.jsx)(e.h3,{id:"\u4e0d\u53ef\u53d8\u5f15\u7528",children:"\u4e0d\u53ef\u53d8\u5f15\u7528"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let s1 = String::from("hello");\n    \n    let len = calculate_length(&s1);  // \u501f\u7528 s1\n    \n    println!("\'{}\' \u7684\u957f\u5ea6\u662f {}", s1, len);  // s1 \u4ecd\u7136\u6709\u6548\n}\n\nfn calculate_length(s: &String) -> usize {\n    s.len()\n}  // s \u79bb\u5f00\u4f5c\u7528\u57df\uff0c\u4f46\u4e0d\u4f1a\u91ca\u653e\u5185\u5b58\uff08\u56e0\u4e3a\u6ca1\u6709\u6240\u6709\u6743\uff09\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u53ef\u53d8\u5f15\u7528",children:"\u53ef\u53d8\u5f15\u7528"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let mut s = String::from("hello");\n    \n    change(&mut s);  // \u53ef\u53d8\u501f\u7528\n    \n    println!("{}", s);  // "hello, world"\n}\n\nfn change(some_string: &mut String) {\n    some_string.push_str(", world");\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u501f\u7528\u89c4\u5219",children:"\u501f\u7528\u89c4\u5219"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let mut s = String::from("hello");\n    \n    // \u89c4\u5219 1\uff1a\u540c\u4e00\u4f5c\u7528\u57df\u5185\uff0c\u53ea\u80fd\u6709\u4e00\u4e2a\u53ef\u53d8\u5f15\u7528\n    let r1 = &mut s;\n    // let r2 = &mut s;  // \u9519\u8bef\uff1a\u4e0d\u80fd\u540c\u65f6\u6709\u4e24\u4e2a\u53ef\u53d8\u5f15\u7528\n    println!("{}", r1);\n    \n    // \u89c4\u5219 2\uff1a\u4e0d\u80fd\u540c\u65f6\u6709\u53ef\u53d8\u5f15\u7528\u548c\u4e0d\u53ef\u53d8\u5f15\u7528\n    let r1 = &s;     // \u53ef\u4ee5\n    let r2 = &s;     // \u53ef\u4ee5\n    // let r3 = &mut s;  // \u9519\u8bef\uff1a\u5df2\u6709\u4e0d\u53ef\u53d8\u5f15\u7528\n    println!("{} and {}", r1, r2);\n    \n    // \u6ce8\u610f\uff1a\u5f15\u7528\u7684\u4f5c\u7528\u57df\u4ece\u58f0\u660e\u5230\u6700\u540e\u4e00\u6b21\u4f7f\u7528\n    let r1 = &s;\n    println!("{}", r1);  // r1 \u7684\u4f5c\u7528\u57df\u5230\u6b64\u7ed3\u675f\n    \n    let r2 = &mut s;  // \u6b63\u786e\uff1ar1 \u5df2\u4e0d\u518d\u4f7f\u7528\n    println!("{}", r2);\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u60ac\u5782\u5f15\u7528",children:"\u60ac\u5782\u5f15\u7528"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    // let reference_to_nothing = dangle();  // \u9519\u8bef\uff1a\u60ac\u5782\u5f15\u7528\n    let s = no_dangle();  // \u6b63\u786e\uff1a\u8fd4\u56de\u6240\u6709\u6743\n}\n\n// \u9519\u8bef\u793a\u4f8b\uff1a\u8fd4\u56de\u60ac\u5782\u5f15\u7528\n// fn dangle() -> &String {\n//     let s = String::from("hello");\n//     &s  // \u8fd4\u56de s \u7684\u5f15\u7528\uff0c\u4f46 s \u5c06\u88ab\u91ca\u653e\n// }\n\n// \u6b63\u786e\u793a\u4f8b\uff1a\u8fd4\u56de\u6240\u6709\u6743\nfn no_dangle() -> String {\n    let s = String::from("hello");\n    s  // \u8fd4\u56de s \u672c\u8eab\uff0c\u6240\u6709\u6743\u79fb\u51fa\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"\u5207\u7247-slice",children:"\u5207\u7247 (Slice)"}),"\n",(0,r.jsx)(e.p,{children:"\u5207\u7247\u662f\u5bf9\u96c6\u5408\u4e2d\u8fde\u7eed\u5e8f\u5217\u7684\u5f15\u7528\u3002"}),"\n",(0,r.jsx)(e.h3,{id:"\u5b57\u7b26\u4e32\u5207\u7247",children:"\u5b57\u7b26\u4e32\u5207\u7247"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let s = String::from("hello world");\n    \n    let hello = &s[0..5];   // "hello"\n    let world = &s[6..11];  // "world"\n    \n    // \u8bed\u6cd5\u7cd6\n    let hello = &s[..5];    // \u4ece\u5f00\u5934\n    let world = &s[6..];    // \u5230\u7ed3\u5c3e\n    let whole = &s[..];     // \u6574\u4e2a\u5b57\u7b26\u4e32\n    \n    println!("{} {}", hello, world);\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u5b57\u7b26\u4e32\u5207\u7247\u4f5c\u4e3a\u53c2\u6570",children:"\u5b57\u7b26\u4e32\u5207\u7247\u4f5c\u4e3a\u53c2\u6570"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let my_string = String::from("hello world");\n    \n    // \u63a5\u53d7 String \u7684\u5207\u7247\n    let word = first_word(&my_string[..]);\n    \n    let my_string_literal = "hello world";\n    \n    // \u63a5\u53d7\u5b57\u7b26\u4e32\u5b57\u9762\u91cf\u7684\u5207\u7247\n    let word = first_word(&my_string_literal[..]);\n    \n    // \u5b57\u7b26\u4e32\u5b57\u9762\u91cf\u672c\u8eab\u5c31\u662f\u5207\u7247\n    let word = first_word(my_string_literal);\n}\n\nfn first_word(s: &str) -> &str {\n    let bytes = s.as_bytes();\n    \n    for (i, &item) in bytes.iter().enumerate() {\n        if item == b\' \' {\n            return &s[0..i];\n        }\n    }\n    \n    &s[..]\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u6570\u7ec4\u5207\u7247",children:"\u6570\u7ec4\u5207\u7247"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:"fn main() {\n    let a = [1, 2, 3, 4, 5];\n    \n    let slice = &a[1..3];  // [2, 3]\n    \n    assert_eq!(slice, &[2, 3]);\n}\n"})}),"\n",(0,r.jsx)(e.h2,{id:"\u6240\u6709\u6743\u6a21\u5f0f",children:"\u6240\u6709\u6743\u6a21\u5f0f"}),"\n",(0,r.jsx)(e.h3,{id:"\u6a21\u5f0f-1\u4f7f\u7528\u5f15\u7528\u907f\u514d\u6240\u6709\u6743\u8f6c\u79fb",children:"\u6a21\u5f0f 1\uff1a\u4f7f\u7528\u5f15\u7528\u907f\u514d\u6240\u6709\u6743\u8f6c\u79fb"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let s = String::from("hello");\n    \n    // \u4e0d\u597d\uff1a\u6240\u6709\u6743\u8f6c\u79fb\n    let len = calculate_length_bad(s);\n    // println!("{}", s);  // \u9519\u8bef\uff1as \u5df2\u5931\u6548\n    \n    let s = String::from("hello");\n    \n    // \u597d\uff1a\u4f7f\u7528\u5f15\u7528\n    let len = calculate_length_good(&s);\n    println!("{}", s);  // \u6b63\u786e\uff1as \u4ecd\u7136\u6709\u6548\n}\n\nfn calculate_length_bad(s: String) -> usize {\n    s.len()\n}\n\nfn calculate_length_good(s: &String) -> usize {\n    s.len()\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u6a21\u5f0f-2\u8fd4\u56de\u591a\u4e2a\u503c",children:"\u6a21\u5f0f 2\uff1a\u8fd4\u56de\u591a\u4e2a\u503c"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let s1 = String::from("hello");\n    \n    // \u4e0d\u597d\uff1a\u8fd4\u56de\u5143\u7ec4\n    let (s2, len) = calculate_length_tuple(s1);\n    \n    // \u597d\uff1a\u4f7f\u7528\u5f15\u7528\n    let s1 = String::from("hello");\n    let len = calculate_length(&s1);\n    println!("\'{}\' \u7684\u957f\u5ea6\u662f {}", s1, len);\n}\n\nfn calculate_length_tuple(s: String) -> (String, usize) {\n    let length = s.len();\n    (s, length)\n}\n\nfn calculate_length(s: &String) -> usize {\n    s.len()\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u6a21\u5f0f-3\u4fee\u6539\u6570\u636e",children:"\u6a21\u5f0f 3\uff1a\u4fee\u6539\u6570\u636e"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let mut s = String::from("hello");\n    \n    // \u4f7f\u7528\u53ef\u53d8\u5f15\u7528\u4fee\u6539\u6570\u636e\n    append_world(&mut s);\n    \n    println!("{}", s);  // "hello, world"\n}\n\nfn append_world(s: &mut String) {\n    s.push_str(", world");\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"\u6700\u4f73\u5b9e\u8df5",children:"\u6700\u4f73\u5b9e\u8df5"}),"\n",(0,r.jsx)(e.h3,{id:"1-\u4f18\u5148\u4f7f\u7528\u5f15\u7528",children:"1. \u4f18\u5148\u4f7f\u7528\u5f15\u7528"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'// \u4e0d\u597d\uff1aunnecessary ownership transfer\nfn process(data: String) {\n    println!("{}", data);\n}\n\n// \u597d\uff1a\u4f7f\u7528\u5f15\u7528\nfn process(data: &str) {\n    println!("{}", data);\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"2-\u4fdd\u6301\u501f\u7528\u4f5c\u7528\u57df\u6700\u5c0f",children:"2. \u4fdd\u6301\u501f\u7528\u4f5c\u7528\u57df\u6700\u5c0f"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let mut s = String::from("hello");\n    \n    {\n        let r = &mut s;\n        r.push_str(", world");\n    }  // r \u79bb\u5f00\u4f5c\u7528\u57df\n    \n    // \u73b0\u5728\u53ef\u4ee5\u518d\u6b21\u501f\u7528\n    let r2 = &s;\n    println!("{}", r2);\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"3-\u4f7f\u7528-str-\u800c\u975e-string",children:"3. \u4f7f\u7528 &str \u800c\u975e &String"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:"// \u4e0d\u597d\nfn first_word(s: &String) -> &str {\n    // ...\n    &s[..]\n}\n\n// \u597d\uff1a\u66f4\u7075\u6d3b\nfn first_word(s: &str) -> &str {\n    // \u53ef\u4ee5\u63a5\u53d7 &String \u548c &str\n    &s[..]\n}\n"})}),"\n",(0,r.jsx)(e.h2,{id:"\u5e38\u89c1\u9519\u8bef",children:"\u5e38\u89c1\u9519\u8bef"}),"\n",(0,r.jsx)(e.h3,{id:"\u9519\u8bef-1\u4f7f\u7528\u5df2\u79fb\u52a8\u7684\u503c",children:"\u9519\u8bef 1\uff1a\u4f7f\u7528\u5df2\u79fb\u52a8\u7684\u503c"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let s = String::from("hello");\n    let s2 = s;\n    // println!("{}", s);  // \u9519\u8bef\uff1as \u5df2\u5931\u6548\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u9519\u8bef-2\u60ac\u5782\u5f15\u7528",children:"\u9519\u8bef 2\uff1a\u60ac\u5782\u5f15\u7528"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'// fn dangle() -> &String {\n//     let s = String::from("hello");\n//     &s  // \u9519\u8bef\uff1a\u8fd4\u56de\u60ac\u5782\u5f15\u7528\n// }\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u9519\u8bef-3\u591a\u4e2a\u53ef\u53d8\u5f15\u7528",children:"\u9519\u8bef 3\uff1a\u591a\u4e2a\u53ef\u53d8\u5f15\u7528"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let mut s = String::from("hello");\n    \n    let r1 = &mut s;\n    // let r2 = &mut s;  // \u9519\u8bef\uff1a\u5df2\u6709\u53ef\u53d8\u5f15\u7528\n    println!("{}", r1);\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"\u5185\u5b58\u5e03\u5c40\u8be6\u89e3",children:"\u5185\u5b58\u5e03\u5c40\u8be6\u89e3"}),"\n",(0,r.jsx)(e.h3,{id:"\u6808\u548c\u5806",children:"\u6808\u548c\u5806"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    // \u6808\u4e0a\u5206\u914d:\u56fa\u5b9a\u5927\u5c0f,\u5feb\u901f\u8bbf\u95ee\n    let x = 5;              // i32: 4\u5b57\u8282,\u6808\u4e0a\n    let y = true;           // bool: 1\u5b57\u8282,\u6808\u4e0a\n    let z = 3.14;           // f64: 8\u5b57\u8282,\u6808\u4e0a\n    \n    // \u5806\u4e0a\u5206\u914d:\u52a8\u6001\u5927\u5c0f,\u8f83\u6162\u4f46\u7075\u6d3b\n    let s = String::from("hello");  // \u6307\u9488\u5728\u6808,\u6570\u636e\u5728\u5806\n    let v = vec![1, 2, 3];          // \u6307\u9488\u5728\u6808,\u6570\u636e\u5728\u5806\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"string-\u7684\u5185\u5b58\u5e03\u5c40",children:"String \u7684\u5185\u5b58\u5e03\u5c40"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let s = String::from("hello");\n    \n    // String \u5728\u6808\u4e0a\u5b58\u50a8\u4e09\u4e2a\u503c(\u517124\u5b57\u8282):\n    // - ptr: \u6307\u5411\u5806\u6570\u636e\u7684\u6307\u9488 (8\u5b57\u8282)\n    // - len: \u5f53\u524d\u957f\u5ea6 (8\u5b57\u8282)\n    // - capacity: \u5bb9\u91cf (8\u5b57\u8282)\n    \n    // \u5806\u4e0a\u5b58\u50a8\u5b9e\u9645\u5b57\u7b26\u4e32\u6570\u636e: "hello"\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u79fb\u52a8\u7684\u5185\u5b58\u6548\u679c",children:"\u79fb\u52a8\u7684\u5185\u5b58\u6548\u679c"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let s1 = String::from("hello");\n    let s2 = s1;  // \u6d45\u62f7\u8d1d\u6808\u6570\u636e,s1\u5931\u6548\n    \n    // \u5185\u5b58\u5e03\u5c40:\n    // \u6808:\n    //   s1: [\u5931\u6548]\n    //   s2: [ptr | len | cap] -> \u5806\u6570\u636e\n    // \u5806:\n    //   "hello"\n    \n    // \u53ea\u6709\u4e00\u4e2a\u6240\u6709\u8005,\u907f\u514d\u53cc\u91cd\u91ca\u653e!\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u514b\u9686\u7684\u5185\u5b58\u6548\u679c",children:"\u514b\u9686\u7684\u5185\u5b58\u6548\u679c"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let s1 = String::from("hello");\n    let s2 = s1.clone();  // \u6df1\u62f7\u8d1d\n    \n    // \u5185\u5b58\u5e03\u5c40:\n    // \u6808:\n    //   s1: [ptr1 | len | cap] -> \u5806\u6570\u636e1\n    //   s2: [ptr2 | len | cap] -> \u5806\u6570\u636e2\n    // \u5806:\n    //   "hello" (s1\u7684\u6570\u636e)\n    //   "hello" (s2\u7684\u6570\u636e,\u72ec\u7acb\u62f7\u8d1d)\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"copy-\u7c7b\u578b\u7684\u5185\u5b58",children:"Copy \u7c7b\u578b\u7684\u5185\u5b58"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:"fn main() {\n    let x = 5;\n    let y = x;  // \u6309\u4f4d\u590d\u5236,\u90fd\u6709\u6548\n    \n    // \u5185\u5b58\u5e03\u5c40(\u6808):\n    //   x: 5\n    //   y: 5\n    // \u7b80\u5355\u7684\u6309\u4f4d\u590d\u5236,\u65e0\u5806\u5206\u914d\n}\n"})}),"\n",(0,r.jsx)(e.h2,{id:"\u751f\u547d\u5468\u671f\u9884\u89c8",children:"\u751f\u547d\u5468\u671f\u9884\u89c8"}),"\n",(0,r.jsx)(e.h3,{id:"\u7f16\u8bd1\u5668\u5982\u4f55\u8ddf\u8e2a\u751f\u547d\u5468\u671f",children:"\u7f16\u8bd1\u5668\u5982\u4f55\u8ddf\u8e2a\u751f\u547d\u5468\u671f"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:"fn main() {\n    let r;                    // -------+-- 'a\n                              //        |\n    {                         //        |\n        let x = 5;            // -+-- 'b|\n        r = &x;               //  |     |\n    }                         // -+     |\n                              //        |\n    // println!(\"{}\", r);     // \u9519\u8bef   |\n}                            // -------+\n\n// 'b < 'a: x\u7684\u751f\u547d\u5468\u671f\u5c0f\u4e8er\u7684\u671f\u671b\u751f\u547d\u5468\u671f\n"})}),"\n",(0,r.jsx)(e.h3,{id:"\u51fd\u6570\u8fd4\u56de\u5f15\u7528",children:"\u51fd\u6570\u8fd4\u56de\u5f15\u7528"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'// \u9700\u8981\u751f\u547d\u5468\u671f\u6ce8\u89e3\nfn longest<\'a>(x: &\'a str, y: &\'a str) -> &\'a str {\n    if x.len() > y.len() {\n        x\n    } else {\n        y\n    }\n}\n\nfn main() {\n    let string1 = String::from("long string");\n    let string2 = String::from("xyz");\n    \n    let result = longest(string1.as_str(), string2.as_str());\n    println!("{}", result);\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u7ed3\u6784\u4f53\u4e2d\u7684\u5f15\u7528",children:"\u7ed3\u6784\u4f53\u4e2d\u7684\u5f15\u7528"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:"// \u7ed3\u6784\u4f53\u6301\u6709\u5f15\u7528\u9700\u8981\u751f\u547d\u5468\u671f\u6ce8\u89e3\nstruct ImportantExcerpt<'a> {\n    part: &'a str,\n}\n\nfn main() {\n    let novel = String::from(\"Call me Ishmael.\");\n    let first_sentence = novel.split('.').next().unwrap();\n    \n    let excerpt = ImportantExcerpt {\n        part: first_sentence,\n    };\n    \n    println!(\"{}\", excerpt.part);\n}\n"})}),"\n",(0,r.jsx)(e.h2,{id:"\u5b9e\u6218\u573a\u666f",children:"\u5b9e\u6218\u573a\u666f"}),"\n",(0,r.jsx)(e.h3,{id:"\u573a\u666f1\u89e3\u6790\u5668\u72b6\u6001",children:"\u573a\u666f1:\u89e3\u6790\u5668\u72b6\u6001"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:"struct Parser<'a> {\n    input: &'a str,\n    position: usize,\n}\n\nimpl<'a> Parser<'a> {\n    fn new(input: &'a str) -> Self {\n        Parser { input, position: 0 }\n    }\n    \n    fn current_char(&self) -> Option<char> {\n        self.input.chars().nth(self.position)\n    }\n    \n    fn advance(&mut self) {\n        self.position += 1;\n    }\n    \n    fn parse_word(&mut self) -> Option<&'a str> {\n        let start = self.position;\n        \n        while let Some(c) = self.current_char() {\n            if c.is_whitespace() {\n                break;\n            }\n            self.advance();\n        }\n        \n        if start < self.position {\n            Some(&self.input[start..self.position])\n        } else {\n            None\n        }\n    }\n}\n\nfn main() {\n    let text = \"hello world rust\";\n    let mut parser = Parser::new(text);\n    \n    while let Some(word) = parser.parse_word() {\n        println!(\"{}\", word);\n        parser.advance(); // \u8df3\u8fc7\u7a7a\u683c\n    }\n}\n"})}),"\n",(0,r.jsx)(e.h3,{id:"\u573a\u666f2\u7f13\u5b58\u7cfb\u7edf",children:"\u573a\u666f2:\u7f13\u5b58\u7cfb\u7edf"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'use std::collections::HashMap;\n\nstruct Cache {\n    data: HashMap<String, String>,\n}\n\nimpl Cache {\n    fn new() -> Self {\n        Cache {\n            data: HashMap::new(),\n        }\n    }\n    \n    // \u8fd4\u56de\u5f15\u7528\u907f\u514d\u514b\u9686\n    fn get(&self, key: &str) -> Option<&String> {\n        self.data.get(key)\n    }\n    \n    fn insert(&mut self, key: String, value: String) {\n        self.data.insert(key, value);\n    }\n}\n\nfn main() {\n    let mut cache = Cache::new();\n    cache.insert("name".to_string(), "Alice".to_string());\n    \n    // \u501f\u7528\u800c\u975e\u514b\u9686\n    if let Some(value) = cache.get("name") {\n        println!("Found: {}", value);\n    }\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u573a\u666f3\u6570\u636e\u6d41\u5904\u7406",children:"\u573a\u666f3:\u6570\u636e\u6d41\u5904\u7406"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'fn process_data(data: &[i32]) -> Vec<i32> {\n    data.iter()\n        .filter(|&&x| x > 0)\n        .map(|&x| x * 2)\n        .collect()\n}\n\nfn main() {\n    let numbers = vec![1, -2, 3, -4, 5];\n    \n    // \u4f20\u9012\u5f15\u7528,\u907f\u514d\u6240\u6709\u6743\u8f6c\u79fb\n    let result = process_data(&numbers);\n    \n    println!("\u539f\u59cb: {:?}", numbers);\n    println!("\u7ed3\u679c: {:?}", result);\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"\u6027\u80fd\u4f18\u5316\u5efa\u8bae",children:"\u6027\u80fd\u4f18\u5316\u5efa\u8bae"}),"\n",(0,r.jsx)(e.h3,{id:"1-\u907f\u514d\u4e0d\u5fc5\u8981\u7684\u514b\u9686",children:"1. \u907f\u514d\u4e0d\u5fc5\u8981\u7684\u514b\u9686"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:"// \u4e0d\u597d:\u9891\u7e41\u514b\u9686\nfn bad_example(data: Vec<String>) -> Vec<String> {\n    let mut result = Vec::new();\n    for item in data {\n        let cloned = item.clone();\n        result.push(cloned);\n    }\n    result\n}\n\n// \u597d:\u76f4\u63a5\u4f7f\u7528\u6240\u6709\u6743\nfn good_example(data: Vec<String>) -> Vec<String> {\n    data\n}\n\n// \u6216\u8005\u4f7f\u7528\u5f15\u7528\nfn reference_example(data: &[String]) -> Vec<String> {\n    data.to_vec()  // \u53ea\u5728\u9700\u8981\u65f6\u514b\u9686\n}\n"})}),"\n",(0,r.jsx)(e.h3,{id:"2-\u4f7f\u7528-cow-\u4f18\u5316\u5199\u65f6\u590d\u5236",children:"2. \u4f7f\u7528 Cow \u4f18\u5316\u5199\u65f6\u590d\u5236"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'use std::borrow::Cow;\n\nfn process<\'a>(input: &\'a str) -> Cow<\'a, str> {\n    if input.contains("bad") {\n        // \u9700\u8981\u4fee\u6539:\u8fd4\u56de\u62e5\u6709\u7684\n        Cow::Owned(input.replace("bad", "good"))\n    } else {\n        // \u4e0d\u9700\u8981\u4fee\u6539:\u8fd4\u56de\u501f\u7528\n        Cow::Borrowed(input)\n    }\n}\n\nfn main() {\n    let s1 = "hello bad world";\n    let s2 = "hello world";\n    \n    println!("{}", process(s1));  // Owned\n    println!("{}", process(s2));  // Borrowed (\u65e0\u5206\u914d)\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"3-\u4f7f\u7528\u5207\u7247\u800c\u975e\u5b8c\u6574\u96c6\u5408",children:"3. \u4f7f\u7528\u5207\u7247\u800c\u975e\u5b8c\u6574\u96c6\u5408"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'// \u4e0d\u597d:\u4f20\u9012\u6574\u4e2aVec\nfn sum_bad(data: Vec<i32>) -> i32 {\n    data.iter().sum()\n}\n\n// \u597d:\u4f20\u9012\u5207\u7247\nfn sum_good(data: &[i32]) -> i32 {\n    data.iter().sum()\n}\n\nfn main() {\n    let numbers = vec![1, 2, 3, 4, 5];\n    \n    // \u53ef\u4ee5\u4f20\u9012Vec\u3001\u6570\u7ec4\u3001\u5207\u7247\u7b49\n    println!("{}", sum_good(&numbers));\n    println!("{}", sum_good(&[1, 2, 3]));\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"4-\u9884\u5206\u914d\u5bb9\u91cf",children:"4. \u9884\u5206\u914d\u5bb9\u91cf"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:"fn main() {\n    // \u4e0d\u597d:\u591a\u6b21\u91cd\u65b0\u5206\u914d\n    let mut v = Vec::new();\n    for i in 0..1000 {\n        v.push(i);\n    }\n    \n    // \u597d:\u9884\u5206\u914d\u5bb9\u91cf\n    let mut v = Vec::with_capacity(1000);\n    for i in 0..1000 {\n        v.push(i);\n    }\n}\n"})}),"\n",(0,r.jsx)(e.h3,{id:"5-\u4f7f\u7528-str-\u800c\u975e-string",children:"5. \u4f7f\u7528 &str \u800c\u975e String"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'// \u4e0d\u597d:\u4e0d\u5fc5\u8981\u7684\u5206\u914d\nfn greet_bad(name: String) {\n    println!("Hello, {}!", name);\n}\n\n// \u597d:\u4f7f\u7528\u5b57\u7b26\u4e32\u5207\u7247\nfn greet_good(name: &str) {\n    println!("Hello, {}!", name);\n}\n\nfn main() {\n    let name = String::from("Alice");\n    greet_good(&name);  // \u66f4\u7075\u6d3b\n    greet_good("Bob");  // \u4e5f\u53ef\u4ee5\u63a5\u53d7\u5b57\u9762\u91cf\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"6-\u907f\u514d\u8fd0\u884c\u65f6\u501f\u7528\u68c0\u67e5",children:"6. \u907f\u514d\u8fd0\u884c\u65f6\u501f\u7528\u68c0\u67e5"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:"use std::cell::RefCell;\n\n// \u4e0d\u597d:\u8fd0\u884c\u65f6\u68c0\u67e5(\u6709\u5f00\u9500)\nfn bad_pattern() {\n    let x = RefCell::new(5);\n    *x.borrow_mut() += 1;\n}\n\n// \u597d:\u7f16\u8bd1\u65f6\u68c0\u67e5(\u96f6\u5f00\u9500)\nfn good_pattern() {\n    let mut x = 5;\n    x += 1;\n}\n"})}),"\n",(0,r.jsx)(e.h3,{id:"7-\u8fd4\u56de\u8fed\u4ee3\u5668\u800c\u975evec",children:"7. \u8fd4\u56de\u8fed\u4ee3\u5668\u800c\u975eVec"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:"// \u4e0d\u597d:\u7acb\u5373\u5206\u914d\nfn get_evens_bad(data: &[i32]) -> Vec<i32> {\n    data.iter()\n        .filter(|&&x| x % 2 == 0)\n        .copied()\n        .collect()\n}\n\n// \u597d:\u60f0\u6027\u6c42\u503c\nfn get_evens_good(data: &[i32]) -> impl Iterator<Item = i32> + '_ {\n    data.iter()\n        .filter(|&&x| x % 2 == 0)\n        .copied()\n}\n\nfn main() {\n    let numbers = vec![1, 2, 3, 4, 5, 6];\n    \n    // \u53ea\u5728\u9700\u8981\u65f6\u5206\u914d\n    let evens: Vec<_> = get_evens_good(&numbers).collect();\n}\n"})}),"\n",(0,r.jsx)(e.h3,{id:"8-\u4f7f\u7528\u5f15\u7528\u4f18\u5316\u5faa\u73af",children:"8. \u4f7f\u7528\u5f15\u7528\u4f18\u5316\u5faa\u73af"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let strings = vec![\n        String::from("hello"),\n        String::from("world"),\n    ];\n    \n    // \u4e0d\u597d:\u6bcf\u6b21\u8fed\u4ee3\u90fd\u514b\u9686\n    for s in strings.clone() {\n        println!("{}", s);\n    }\n    \n    // \u597d:\u4f7f\u7528\u5f15\u7528\n    for s in &strings {\n        println!("{}", s);\n    }\n    \n    // strings \u4ecd\u7136\u6709\u6548\n    println!("{:?}", strings);\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"\u603b\u7ed3",children:"\u603b\u7ed3"}),"\n",(0,r.jsx)(e.p,{children:"\u672c\u6587\u4ecb\u7ecd\u4e86 Rust \u7684\u6240\u6709\u6743\u7cfb\u7edf\uff1a"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u2705 \u6240\u6709\u6743\u4e09\u5927\u89c4\u5219"}),"\n",(0,r.jsx)(e.li,{children:"\u2705 \u79fb\u52a8\u3001\u514b\u9686\u548c\u590d\u5236"}),"\n",(0,r.jsx)(e.li,{children:"\u2705 \u6240\u6709\u6743\u4e0e\u51fd\u6570"}),"\n",(0,r.jsx)(e.li,{children:"\u2705 \u5f15\u7528\u548c\u501f\u7528"}),"\n",(0,r.jsx)(e.li,{children:"\u2705 \u53ef\u53d8\u5f15\u7528\u548c\u4e0d\u53ef\u53d8\u5f15\u7528"}),"\n",(0,r.jsx)(e.li,{children:"\u2705 \u5207\u7247\u7c7b\u578b"}),"\n",(0,r.jsx)(e.li,{children:"\u2705 \u5185\u5b58\u5e03\u5c40\u8be6\u89e3(\u6808/\u5806\u3001String\u5e03\u5c40)"}),"\n",(0,r.jsx)(e.li,{children:"\u2705 \u751f\u547d\u5468\u671f\u9884\u89c8(\u7f16\u8bd1\u5668\u8ddf\u8e2a\u3001\u51fd\u6570\u8fd4\u56de\u5f15\u7528)"}),"\n",(0,r.jsx)(e.li,{children:"\u2705 \u5b9e\u6218\u573a\u666f(\u89e3\u6790\u5668\u3001\u7f13\u5b58\u7cfb\u7edf\u3001\u6570\u636e\u6d41)"}),"\n",(0,r.jsx)(e.li,{children:"\u2705 \u6027\u80fd\u4f18\u5316\u5efa\u8bae(Cow\u3001\u5207\u7247\u3001\u8fed\u4ee3\u5668\u7b498\u6761\u5efa\u8bae)"}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:["\u638c\u63e1\u6240\u6709\u6743\u540e\uff0c\u7ee7\u7eed\u5b66\u4e60 ",(0,r.jsx)(e.a,{href:"/docs/rust/structs-enums",children:"\u7ed3\u6784\u4f53\u548c\u679a\u4e3e"}),"\u3002"]})]})}function h(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(o,{...n})}):o(n)}},48885:(n,e,l)=>{l.d(e,{R:()=>t,x:()=>a});var s=l(99378);const r={},i=s.createContext(r);function t(n){const e=s.useContext(i);return s.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:t(n.components),s.createElement(i.Provider,{value:e},n.children)}}}]);