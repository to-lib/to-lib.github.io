"use strict";(globalThis.webpackChunkto_lib_github_io=globalThis.webpackChunkto_lib_github_io||[]).push([[8814],{48885:(n,e,s)=>{s.d(e,{R:()=>d,x:()=>t});var r=s(99378);const l={},i=r.createContext(l);function d(n){const e=r.useContext(i);return r.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function t(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:d(n.components),r.createElement(i.Provider,{value:e},n.children)}},60336:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>c,contentTitle:()=>t,default:()=>a,frontMatter:()=>d,metadata:()=>r,toc:()=>u});const r=JSON.parse('{"id":"rust/project-structure","title":"\u9879\u76ee\u7ec4\u7ec7\u4e0e\u4ee3\u7801\u5206\u6587\u4ef6","description":"\u672c\u6587\u8be6\u7ec6\u4ecb\u7ecd\u5982\u4f55\u5728 Rust \u9879\u76ee\u4e2d\u5408\u7406\u7ec4\u7ec7\u4ee3\u7801\u7ed3\u6784\u548c\u5206\u6587\u4ef6\u3002","source":"@site/docs/rust/project-structure.md","sourceDirName":"rust","slug":"/rust/project-structure","permalink":"/docs/rust/project-structure","draft":false,"unlisted":false,"editUrl":"https://github.com/to-lib/to-lib.github.io/tree/main/docs/rust/project-structure.md","tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"sidebar_position":7,"title":"\u9879\u76ee\u7ec4\u7ec7\u4e0e\u4ee3\u7801\u5206\u6587\u4ef6"},"sidebar":"rust","previous":{"title":"\u96c6\u5408\u7c7b\u578b","permalink":"/docs/rust/collections"},"next":{"title":"Cargo \u4f7f\u7528\u6307\u5357","permalink":"/docs/rust/cargo-guide"}}');var l=s(22714),i=s(48885);const d={sidebar_position:7,title:"\u9879\u76ee\u7ec4\u7ec7\u4e0e\u4ee3\u7801\u5206\u6587\u4ef6"},t="\u9879\u76ee\u7ec4\u7ec7\u4e0e\u4ee3\u7801\u5206\u6587\u4ef6",c={},u=[{value:"\u9879\u76ee\u7ed3\u6784\u89c4\u8303",id:"\u9879\u76ee\u7ed3\u6784\u89c4\u8303",level:2},{value:"\u6807\u51c6\u4e8c\u8fdb\u5236\u9879\u76ee",id:"\u6807\u51c6\u4e8c\u8fdb\u5236\u9879\u76ee",level:3},{value:"\u6807\u51c6\u5e93\u9879\u76ee",id:"\u6807\u51c6\u5e93\u9879\u76ee",level:3},{value:"main.rs vs lib.rs",id:"mainrs-vs-librs",level:2},{value:"main.rs - \u4e8c\u8fdb\u5236\u5165\u53e3",id:"mainrs---\u4e8c\u8fdb\u5236\u5165\u53e3",level:3},{value:"lib.rs - \u5e93\u5165\u53e3",id:"librs---\u5e93\u5165\u53e3",level:3},{value:"\u540c\u65f6\u62e5\u6709 main.rs \u548c lib.rs",id:"\u540c\u65f6\u62e5\u6709-mainrs-\u548c-librs",level:3},{value:"\u6a21\u5757\u7cfb\u7edf",id:"\u6a21\u5757\u7cfb\u7edf",level:2},{value:"\u5185\u8054\u6a21\u5757",id:"\u5185\u8054\u6a21\u5757",level:3},{value:"\u6587\u4ef6\u6a21\u5757",id:"\u6587\u4ef6\u6a21\u5757",level:3},{value:"\u76ee\u5f55\u6a21\u5757",id:"\u76ee\u5f55\u6a21\u5757",level:3},{value:"\u65b0\u5f0f\u8def\u5f84\uff08\u63a8\u8350\uff09",id:"\u65b0\u5f0f\u8def\u5f84\u63a8\u8350",level:3},{value:"\u53ef\u89c1\u6027\u63a7\u5236",id:"\u53ef\u89c1\u6027\u63a7\u5236",level:2},{value:"pub - \u516c\u5f00",id:"pub---\u516c\u5f00",level:3},{value:"pub(crate) - crate \u5185\u516c\u5f00",id:"pubcrate---crate-\u5185\u516c\u5f00",level:3},{value:"pub(super) - \u7236\u6a21\u5757\u516c\u5f00",id:"pubsuper---\u7236\u6a21\u5757\u516c\u5f00",level:3},{value:"pub(in path) - \u6307\u5b9a\u8def\u5f84\u516c\u5f00",id:"pubin-path---\u6307\u5b9a\u8def\u5f84\u516c\u5f00",level:3},{value:"use \u8bed\u53e5",id:"use-\u8bed\u53e5",level:2},{value:"\u57fa\u672c\u7528\u6cd5",id:"\u57fa\u672c\u7528\u6cd5",level:3},{value:"\u76f8\u5bf9\u8def\u5f84",id:"\u76f8\u5bf9\u8def\u5f84",level:3},{value:"\u7b80\u5316\u5bfc\u5165",id:"\u7b80\u5316\u5bfc\u5165",level:3},{value:"\u5b9e\u6218\u793a\u4f8b",id:"\u5b9e\u6218\u793a\u4f8b",level:2},{value:"\u793a\u4f8b 1: Web \u5e94\u7528\u7ed3\u6784",id:"\u793a\u4f8b-1-web-\u5e94\u7528\u7ed3\u6784",level:3},{value:"\u793a\u4f8b 2: CLI \u5de5\u5177\u7ed3\u6784",id:"\u793a\u4f8b-2-cli-\u5de5\u5177\u7ed3\u6784",level:3},{value:"\u793a\u4f8b 3: \u5e93\u9879\u76ee\u7ed3\u6784",id:"\u793a\u4f8b-3-\u5e93\u9879\u76ee\u7ed3\u6784",level:3},{value:"\u6700\u4f73\u5b9e\u8df5",id:"\u6700\u4f73\u5b9e\u8df5",level:2},{value:"1. \u4fdd\u6301\u6a21\u5757\u5c0f\u800c\u4e13\u6ce8",id:"1-\u4fdd\u6301\u6a21\u5757\u5c0f\u800c\u4e13\u6ce8",level:3},{value:"2. \u4f7f\u7528 prelude \u6a21\u5f0f",id:"2-\u4f7f\u7528-prelude-\u6a21\u5f0f",level:3},{value:"3. \u91cd\u65b0\u5bfc\u51fa\u516c\u5171 API",id:"3-\u91cd\u65b0\u5bfc\u51fa\u516c\u5171-api",level:3},{value:"4. \u907f\u514d\u5faa\u73af\u4f9d\u8d56",id:"4-\u907f\u514d\u5faa\u73af\u4f9d\u8d56",level:3},{value:"5. \u5408\u7406\u4f7f\u7528\u53ef\u89c1\u6027",id:"5-\u5408\u7406\u4f7f\u7528\u53ef\u89c1\u6027",level:3},{value:"6. \u4f7f\u7528 tests \u76ee\u5f55",id:"6-\u4f7f\u7528-tests-\u76ee\u5f55",level:3},{value:"\u5e38\u89c1\u6a21\u5f0f",id:"\u5e38\u89c1\u6a21\u5f0f",level:2},{value:"\u9519\u8bef\u6a21\u5757\u6a21\u5f0f",id:"\u9519\u8bef\u6a21\u5757\u6a21\u5f0f",level:3},{value:"\u914d\u7f6e\u6a21\u5757\u6a21\u5f0f",id:"\u914d\u7f6e\u6a21\u5757\u6a21\u5f0f",level:3},{value:"Builder \u6a21\u5f0f",id:"builder-\u6a21\u5f0f",level:3},{value:"\u603b\u7ed3",id:"\u603b\u7ed3",level:2}];function o(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.header,{children:(0,l.jsx)(e.h1,{id:"\u9879\u76ee\u7ec4\u7ec7\u4e0e\u4ee3\u7801\u5206\u6587\u4ef6",children:"\u9879\u76ee\u7ec4\u7ec7\u4e0e\u4ee3\u7801\u5206\u6587\u4ef6"})}),"\n",(0,l.jsx)(e.p,{children:"\u672c\u6587\u8be6\u7ec6\u4ecb\u7ecd\u5982\u4f55\u5728 Rust \u9879\u76ee\u4e2d\u5408\u7406\u7ec4\u7ec7\u4ee3\u7801\u7ed3\u6784\u548c\u5206\u6587\u4ef6\u3002"}),"\n",(0,l.jsx)(e.h2,{id:"\u9879\u76ee\u7ed3\u6784\u89c4\u8303",children:"\u9879\u76ee\u7ed3\u6784\u89c4\u8303"}),"\n",(0,l.jsx)(e.h3,{id:"\u6807\u51c6\u4e8c\u8fdb\u5236\u9879\u76ee",children:"\u6807\u51c6\u4e8c\u8fdb\u5236\u9879\u76ee"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"my_app/\n\u251c\u2500\u2500 Cargo.toml          # \u9879\u76ee\u914d\u7f6e\n\u251c\u2500\u2500 Cargo.lock          # \u4f9d\u8d56\u9501\u5b9a\n\u251c\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 main.rs         # \u7a0b\u5e8f\u5165\u53e3\n\u2502   \u251c\u2500\u2500 lib.rs          # \u53ef\u9009\uff1a\u5e93\u4ee3\u7801\n\u2502   \u251c\u2500\u2500 config.rs       # \u914d\u7f6e\u6a21\u5757\n\u2502   \u251c\u2500\u2500 models/         # \u6570\u636e\u6a21\u578b\u76ee\u5f55\n\u2502   \u2502   \u251c\u2500\u2500 mod.rs      # \u6a21\u5757\u58f0\u660e\n\u2502   \u2502   \u251c\u2500\u2500 user.rs\n\u2502   \u2502   \u2514\u2500\u2500 post.rs\n\u2502   \u2514\u2500\u2500 utils/          # \u5de5\u5177\u51fd\u6570\u76ee\u5f55\n\u2502       \u251c\u2500\u2500 mod.rs\n\u2502       \u2514\u2500\u2500 helper.rs\n\u251c\u2500\u2500 tests/              # \u96c6\u6210\u6d4b\u8bd5\n\u2502   \u2514\u2500\u2500 integration_test.rs\n\u251c\u2500\u2500 benches/            # \u6027\u80fd\u6d4b\u8bd5\n\u2502   \u2514\u2500\u2500 benchmark.rs\n\u2514\u2500\u2500 examples/           # \u793a\u4f8b\u4ee3\u7801\n    \u2514\u2500\u2500 demo.rs\n"})}),"\n",(0,l.jsx)(e.h3,{id:"\u6807\u51c6\u5e93\u9879\u76ee",children:"\u6807\u51c6\u5e93\u9879\u76ee"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"my_lib/\n\u251c\u2500\u2500 Cargo.toml\n\u251c\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 lib.rs          # \u5e93\u5165\u53e3\n\u2502   \u251c\u2500\u2500 error.rs        # \u9519\u8bef\u7c7b\u578b\n\u2502   \u251c\u2500\u2500 types.rs        # \u516c\u5171\u7c7b\u578b\n\u2502   \u2514\u2500\u2500 api/            # API \u6a21\u5757\n\u2502       \u251c\u2500\u2500 mod.rs\n\u2502       \u251c\u2500\u2500 client.rs\n\u2502       \u2514\u2500\u2500 server.rs\n\u251c\u2500\u2500 tests/\n\u2502   \u2514\u2500\u2500 lib_test.rs\n\u2514\u2500\u2500 examples/\n    \u2514\u2500\u2500 usage.rs\n"})}),"\n",(0,l.jsx)(e.h2,{id:"mainrs-vs-librs",children:"main.rs vs lib.rs"}),"\n",(0,l.jsx)(e.h3,{id:"mainrs---\u4e8c\u8fdb\u5236\u5165\u53e3",children:"main.rs - \u4e8c\u8fdb\u5236\u5165\u53e3"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.code,{children:"main.rs"})," \u662f\u53ef\u6267\u884c\u7a0b\u5e8f\u7684\u5165\u53e3\u70b9\uff1a"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-rust",children:'// src/main.rs\nfn main() {\n    println!("Hello, world!");\n}\n'})}),"\n",(0,l.jsx)(e.h3,{id:"librs---\u5e93\u5165\u53e3",children:"lib.rs - \u5e93\u5165\u53e3"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.code,{children:"lib.rs"})," \u5b9a\u4e49\u5e93\u7684\u516c\u5171 API\uff1a"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-rust",children:'// src/lib.rs\n\n// \u516c\u5f00\u6a21\u5757\npub mod config;\npub mod models;\npub mod utils;\n\n// \u516c\u5f00\u51fd\u6570\npub fn init() {\n    println!("Library initialized");\n}\n\n// \u79c1\u6709\u51fd\u6570\uff08\u4ec5\u5e93\u5185\u90e8\u4f7f\u7528\uff09\nfn internal_helper() {\n    // ...\n}\n'})}),"\n",(0,l.jsx)(e.h3,{id:"\u540c\u65f6\u62e5\u6709-mainrs-\u548c-librs",children:"\u540c\u65f6\u62e5\u6709 main.rs \u548c lib.rs"}),"\n",(0,l.jsx)(e.p,{children:"\u53ef\u4ee5\u5728\u4e00\u4e2a\u9879\u76ee\u4e2d\u540c\u65f6\u4f7f\u7528\u4e24\u8005\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-rust",children:'// src/lib.rs\npub fn greet(name: &str) -> String {\n    format!("Hello, {}!", name)\n}\n\n// src/main.rs\nuse my_app::greet;  // \u5f15\u7528\u5e93\u4e2d\u7684\u51fd\u6570\n\nfn main() {\n    let message = greet("World");\n    println!("{}", message);\n}\n'})}),"\n",(0,l.jsx)(e.h2,{id:"\u6a21\u5757\u7cfb\u7edf",children:"\u6a21\u5757\u7cfb\u7edf"}),"\n",(0,l.jsx)(e.h3,{id:"\u5185\u8054\u6a21\u5757",children:"\u5185\u8054\u6a21\u5757"}),"\n",(0,l.jsx)(e.p,{children:"\u5728\u540c\u4e00\u6587\u4ef6\u4e2d\u5b9a\u4e49\u6a21\u5757\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-rust",children:'// src/main.rs\nmod utils {\n    pub fn helper() {\n        println!("Helper function");\n    }\n\n    fn private_helper() {\n        println!("Private helper");\n    }\n}\n\nfn main() {\n    utils::helper();\n    // utils::private_helper();  // \u9519\u8bef\uff1a\u79c1\u6709\u51fd\u6570\n}\n'})}),"\n",(0,l.jsx)(e.h3,{id:"\u6587\u4ef6\u6a21\u5757",children:"\u6587\u4ef6\u6a21\u5757"}),"\n",(0,l.jsxs)(e.p,{children:["\u6bcf\u4e2a ",(0,l.jsx)(e.code,{children:".rs"})," \u6587\u4ef6\u90fd\u662f\u4e00\u4e2a\u6a21\u5757\uff1a"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-rust",children:'// src/config.rs\npub struct Config {\n    pub host: String,\n    pub port: u16,\n}\n\nimpl Config {\n    pub fn new(host: String, port: u16) -> Self {\n        Config { host, port }\n    }\n}\n\n// src/main.rs\nmod config;  // \u58f0\u660e\u6a21\u5757\n\nfn main() {\n    let cfg = config::Config::new("localhost".to_string(), 8080);\n    println!("{}:{}", cfg.host, cfg.port);\n}\n'})}),"\n",(0,l.jsx)(e.h3,{id:"\u76ee\u5f55\u6a21\u5757",children:"\u76ee\u5f55\u6a21\u5757"}),"\n",(0,l.jsxs)(e.p,{children:["\u4f7f\u7528 ",(0,l.jsx)(e.code,{children:"mod.rs"})," \u7ec4\u7ec7\u591a\u4e2a\u6587\u4ef6\uff1a"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"src/\n\u251c\u2500\u2500 main.rs\n\u2514\u2500\u2500 models/\n    \u251c\u2500\u2500 mod.rs      # \u6a21\u5757\u5165\u53e3\n    \u251c\u2500\u2500 user.rs\n    \u2514\u2500\u2500 post.rs\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-rust",children:'// src/models/mod.rs\npub mod user;  // \u58f0\u660e\u5b50\u6a21\u5757\npub mod post;\n\n// \u53ef\u4ee5\u5728\u8fd9\u91cc\u6dfb\u52a0\u5171\u4eab\u4ee3\u7801\npub trait Model {\n    fn id(&self) -> u64;\n}\n\n// src/models/user.rs\nuse super::Model;  // \u5f15\u7528\u7236\u6a21\u5757\n\npub struct User {\n    pub id: u64,\n    pub name: String,\n}\n\nimpl Model for User {\n    fn id(&self) -> u64 {\n        self.id\n    }\n}\n\n// src/models/post.rs\npub struct Post {\n    pub id: u64,\n    pub title: String,\n}\n\n// src/main.rs\nmod models;\n\nfn main() {\n    let user = models::user::User {\n        id: 1,\n        name: "Alice".to_string(),\n    };\n\n    let post = models::post::Post {\n        id: 1,\n        title: "Hello".to_string(),\n    };\n}\n'})}),"\n",(0,l.jsx)(e.h3,{id:"\u65b0\u5f0f\u8def\u5f84\u63a8\u8350",children:"\u65b0\u5f0f\u8def\u5f84\uff08\u63a8\u8350\uff09"}),"\n",(0,l.jsx)(e.p,{children:"Rust 2018+ \u652f\u6301\u66f4\u7b80\u6d01\u7684\u8def\u5f84\u65b9\u5f0f\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"src/\n\u251c\u2500\u2500 main.rs\n\u2514\u2500\u2500 models/\n    \u251c\u2500\u2500 user.rs     # \u4e0d\u9700\u8981 mod.rs\n    \u2514\u2500\u2500 post.rs\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u4f46\u9700\u8981\u5728\u7236\u6a21\u5757\u4e2d\u58f0\u660e\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-rust",children:"// src/main.rs \u6216 src/lib.rs\npub mod models {\n    pub mod user;\n    pub mod post;\n}\n\n// \u6216\u8005\u521b\u5efa src/models.rs\n// src/models.rs\npub mod user;\npub mod post;\n"})}),"\n",(0,l.jsx)(e.h2,{id:"\u53ef\u89c1\u6027\u63a7\u5236",children:"\u53ef\u89c1\u6027\u63a7\u5236"}),"\n",(0,l.jsx)(e.h3,{id:"pub---\u516c\u5f00",children:"pub - \u516c\u5f00"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-rust",children:"// src/models/user.rs\npub struct User {      // \u516c\u5f00\u7ed3\u6784\u4f53\n    pub id: u64,       // \u516c\u5f00\u5b57\u6bb5\n    pub name: String,\n    age: u8,           // \u79c1\u6709\u5b57\u6bb5\n}\n\npub fn create_user(name: String) -> User {  // \u516c\u5f00\u51fd\u6570\n    User {\n        id: 1,\n        name,\n        age: 0,\n    }\n}\n\nfn internal_helper() {  // \u79c1\u6709\u51fd\u6570\n    // ...\n}\n"})}),"\n",(0,l.jsx)(e.h3,{id:"pubcrate---crate-\u5185\u516c\u5f00",children:"pub(crate) - crate \u5185\u516c\u5f00"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-rust",children:"// src/utils/mod.rs\npub(crate) fn internal_api() {\n    // \u4ec5\u5728\u5f53\u524d crate \u5185\u53ef\u89c1\n}\n"})}),"\n",(0,l.jsx)(e.h3,{id:"pubsuper---\u7236\u6a21\u5757\u516c\u5f00",children:"pub(super) - \u7236\u6a21\u5757\u516c\u5f00"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-rust",children:"// src/models/user.rs\npub(super) fn helper() {\n    // \u4ec5\u7236\u6a21\u5757\uff08models\uff09\u53ef\u89c1\n}\n"})}),"\n",(0,l.jsx)(e.h3,{id:"pubin-path---\u6307\u5b9a\u8def\u5f84\u516c\u5f00",children:"pub(in path) - \u6307\u5b9a\u8def\u5f84\u516c\u5f00"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-rust",children:"// src/models/user.rs\npub(in crate::models) fn helper() {\n    // \u4ec5 models \u6a21\u5757\u5185\u53ef\u89c1\n}\n"})}),"\n",(0,l.jsx)(e.h2,{id:"use-\u8bed\u53e5",children:"use \u8bed\u53e5"}),"\n",(0,l.jsx)(e.h3,{id:"\u57fa\u672c\u7528\u6cd5",children:"\u57fa\u672c\u7528\u6cd5"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-rust",children:"// \u5f15\u5165\u5355\u4e2a\u9879\nuse std::collections::HashMap;\n\n// \u5f15\u5165\u591a\u4e2a\u9879\nuse std::io::{self, Read, Write};\n\n// \u5f15\u5165\u6240\u6709\u516c\u5f00\u9879\nuse std::collections::*;\n\n// \u91cd\u547d\u540d\nuse std::io::Result as IoResult;\n"})}),"\n",(0,l.jsx)(e.h3,{id:"\u76f8\u5bf9\u8def\u5f84",children:"\u76f8\u5bf9\u8def\u5f84"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-rust",children:"// src/models/user.rs\nuse super::Model;      // \u7236\u6a21\u5757\nuse crate::utils;      // \u6839\u6a21\u5757\nuse self::helper;      // \u5f53\u524d\u6a21\u5757\n"})}),"\n",(0,l.jsx)(e.h3,{id:"\u7b80\u5316\u5bfc\u5165",children:"\u7b80\u5316\u5bfc\u5165"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-rust",children:"// src/lib.rs\npub use models::user::User;  // \u91cd\u65b0\u5bfc\u51fa\npub use models::post::Post;\n\n// \u4f7f\u7528\u8005\u53ef\u4ee5\u76f4\u63a5\uff1a\nuse my_lib::{User, Post};\n// \u800c\u4e0d\u662f\uff1a\n// use my_lib::models::user::User;\n// use my_lib::models::post::Post;\n"})}),"\n",(0,l.jsx)(e.h2,{id:"\u5b9e\u6218\u793a\u4f8b",children:"\u5b9e\u6218\u793a\u4f8b"}),"\n",(0,l.jsx)(e.h3,{id:"\u793a\u4f8b-1-web-\u5e94\u7528\u7ed3\u6784",children:"\u793a\u4f8b 1: Web \u5e94\u7528\u7ed3\u6784"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"web_app/\n\u251c\u2500\u2500 Cargo.toml\n\u251c\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 main.rs\n\u2502   \u251c\u2500\u2500 lib.rs\n\u2502   \u251c\u2500\u2500 config.rs\n\u2502   \u251c\u2500\u2500 routes/\n\u2502   \u2502   \u251c\u2500\u2500 mod.rs\n\u2502   \u2502   \u251c\u2500\u2500 users.rs\n\u2502   \u2502   \u2514\u2500\u2500 posts.rs\n\u2502   \u251c\u2500\u2500 handlers/\n\u2502   \u2502   \u251c\u2500\u2500 mod.rs\n\u2502   \u2502   \u251c\u2500\u2500 user_handler.rs\n\u2502   \u2502   \u2514\u2500\u2500 post_handler.rs\n\u2502   \u251c\u2500\u2500 models/\n\u2502   \u2502   \u251c\u2500\u2500 mod.rs\n\u2502   \u2502   \u251c\u2500\u2500 user.rs\n\u2502   \u2502   \u2514\u2500\u2500 post.rs\n\u2502   \u251c\u2500\u2500 db/\n\u2502   \u2502   \u251c\u2500\u2500 mod.rs\n\u2502   \u2502   \u2514\u2500\u2500 connection.rs\n\u2502   \u2514\u2500\u2500 middleware/\n\u2502       \u251c\u2500\u2500 mod.rs\n\u2502       \u2514\u2500\u2500 auth.rs\n\u2514\u2500\u2500 tests/\n    \u2514\u2500\u2500 api_test.rs\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"src/lib.rs:"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-rust",children:"pub mod config;\npub mod routes;\npub mod handlers;\npub mod models;\npub mod db;\npub mod middleware;\n\n// \u91cd\u65b0\u5bfc\u51fa\u5e38\u7528\u7c7b\u578b\npub use config::Config;\npub use models::{User, Post};\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"src/main.rs:"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-rust",children:"use web_app::{Config, routes};\n\n#[tokio::main]\nasync fn main() {\n    let config = Config::load();\n    let app = routes::create_app(config);\n    // \u542f\u52a8\u670d\u52a1\u5668...\n}\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"src/routes/mod.rs:"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-rust",children:'pub mod users;\npub mod posts;\n\nuse axum::Router;\nuse crate::Config;\n\npub fn create_app(config: Config) -> Router {\n    Router::new()\n        .nest("/users", users::routes())\n        .nest("/posts", posts::routes())\n}\n'})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"src/routes/users.rs:"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-rust",children:'use axum::{Router, routing::get};\nuse crate::handlers::user_handler;\n\npub fn routes() -> Router {\n    Router::new()\n        .route("/", get(user_handler::list))\n        .route("/:id", get(user_handler::get))\n}\n'})}),"\n",(0,l.jsx)(e.h3,{id:"\u793a\u4f8b-2-cli-\u5de5\u5177\u7ed3\u6784",children:"\u793a\u4f8b 2: CLI \u5de5\u5177\u7ed3\u6784"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"cli_tool/\n\u251c\u2500\u2500 Cargo.toml\n\u251c\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 main.rs\n\u2502   \u251c\u2500\u2500 cli.rs          # \u547d\u4ee4\u884c\u89e3\u6790\n\u2502   \u251c\u2500\u2500 commands/\n\u2502   \u2502   \u251c\u2500\u2500 mod.rs\n\u2502   \u2502   \u251c\u2500\u2500 init.rs\n\u2502   \u2502   \u251c\u2500\u2500 build.rs\n\u2502   \u2502   \u2514\u2500\u2500 run.rs\n\u2502   \u251c\u2500\u2500 config.rs\n\u2502   \u2514\u2500\u2500 utils/\n\u2502       \u251c\u2500\u2500 mod.rs\n\u2502       \u2514\u2500\u2500 fs.rs\n\u2514\u2500\u2500 tests/\n    \u2514\u2500\u2500 cli_test.rs\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"src/main.rs:"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-rust",children:"mod cli;\nmod commands;\nmod config;\nmod utils;\n\nuse clap::Parser;\nuse cli::Cli;\n\nfn main() {\n    let cli = Cli::parse();\n\n    match cli.command {\n        cli::Commands::Init => commands::init::run(),\n        cli::Commands::Build => commands::build::run(),\n        cli::Commands::Run => commands::run::run(),\n    }\n}\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"src/cli.rs:"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-rust",children:"use clap::{Parser, Subcommand};\n\n#[derive(Parser)]\npub struct Cli {\n    #[command(subcommand)]\n    pub command: Commands,\n}\n\n#[derive(Subcommand)]\npub enum Commands {\n    Init,\n    Build,\n    Run,\n}\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"src/commands/mod.rs:"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-rust",children:"pub mod init;\npub mod build;\npub mod run;\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"src/commands/init.rs:"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-rust",children:'use crate::config::Config;\nuse crate::utils;\n\npub fn run() {\n    println!("\u521d\u59cb\u5316\u9879\u76ee...");\n    let config = Config::default();\n    utils::fs::create_dirs(&config.paths);\n}\n'})}),"\n",(0,l.jsx)(e.h3,{id:"\u793a\u4f8b-3-\u5e93\u9879\u76ee\u7ed3\u6784",children:"\u793a\u4f8b 3: \u5e93\u9879\u76ee\u7ed3\u6784"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"my_lib/\n\u251c\u2500\u2500 Cargo.toml\n\u251c\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 lib.rs\n\u2502   \u251c\u2500\u2500 error.rs\n\u2502   \u251c\u2500\u2500 prelude.rs      # \u5e38\u7528\u5bfc\u5165\n\u2502   \u251c\u2500\u2500 client/\n\u2502   \u2502   \u251c\u2500\u2500 mod.rs\n\u2502   \u2502   \u251c\u2500\u2500 sync.rs     # \u540c\u6b65\u5ba2\u6237\u7aef\n\u2502   \u2502   \u2514\u2500\u2500 async.rs    # \u5f02\u6b65\u5ba2\u6237\u7aef\n\u2502   \u251c\u2500\u2500 types/\n\u2502   \u2502   \u251c\u2500\u2500 mod.rs\n\u2502   \u2502   \u251c\u2500\u2500 request.rs\n\u2502   \u2502   \u2514\u2500\u2500 response.rs\n\u2502   \u2514\u2500\u2500 internal/       # \u5185\u90e8\u5b9e\u73b0\n\u2502       \u251c\u2500\u2500 mod.rs\n\u2502       \u2514\u2500\u2500 parser.rs\n\u251c\u2500\u2500 examples/\n\u2502   \u2514\u2500\u2500 basic.rs\n\u2514\u2500\u2500 tests/\n    \u2514\u2500\u2500 integration.rs\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"src/lib.rs:"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-rust",children:"// \u9519\u8bef\u7c7b\u578b\nmod error;\npub use error::MyError;\n\n// \u516c\u5f00\u6a21\u5757\npub mod client;\npub mod types;\n\n// \u5185\u90e8\u6a21\u5757\nmod internal;\n\n// Prelude - \u65b9\u4fbf\u7528\u6237\u5bfc\u5165\npub mod prelude {\n    pub use crate::client::Client;\n    pub use crate::types::{Request, Response};\n    pub use crate::error::MyError;\n}\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"src/prelude.rs:"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-rust",children:"// \u7528\u6237\u53ef\u4ee5\u8fd9\u6837\u4f7f\u7528\uff1a\n// use my_lib::prelude::*;\npub use crate::client::Client;\npub use crate::types::{Request, Response};\npub use crate::error::MyError;\n"})}),"\n",(0,l.jsx)(e.h2,{id:"\u6700\u4f73\u5b9e\u8df5",children:"\u6700\u4f73\u5b9e\u8df5"}),"\n",(0,l.jsx)(e.h3,{id:"1-\u4fdd\u6301\u6a21\u5757\u5c0f\u800c\u4e13\u6ce8",children:"1. \u4fdd\u6301\u6a21\u5757\u5c0f\u800c\u4e13\u6ce8"}),"\n",(0,l.jsx)(e.p,{children:"\u6bcf\u4e2a\u6a21\u5757\u5e94\u8be5\u6709\u5355\u4e00\u804c\u8d23\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"\u2705 \u597d\u7684\u7ec4\u7ec7\uff1a\nsrc/\n\u251c\u2500\u2500 auth/           # \u8ba4\u8bc1\u76f8\u5173\n\u251c\u2500\u2500 db/             # \u6570\u636e\u5e93\u76f8\u5173\n\u251c\u2500\u2500 api/            # API \u76f8\u5173\n\n\u274c \u4e0d\u597d\u7684\u7ec4\u7ec7\uff1a\nsrc/\n\u251c\u2500\u2500 stuff.rs        # \u592a\u5bbd\u6cdb\n\u251c\u2500\u2500 helpers.rs      # \u4e0d\u660e\u786e\n"})}),"\n",(0,l.jsx)(e.h3,{id:"2-\u4f7f\u7528-prelude-\u6a21\u5f0f",children:"2. \u4f7f\u7528 prelude \u6a21\u5f0f"}),"\n",(0,l.jsx)(e.p,{children:"\u4e3a\u5e93\u63d0\u4f9b\u4fbf\u6377\u7684\u5bfc\u5165\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-rust",children:"// src/prelude.rs\npub use crate::most::commonly::used::Type1;\npub use crate::most::commonly::used::Type2;\n\n// \u7528\u6237\u4f7f\u7528\nuse my_lib::prelude::*;\n"})}),"\n",(0,l.jsx)(e.h3,{id:"3-\u91cd\u65b0\u5bfc\u51fa\u516c\u5171-api",children:"3. \u91cd\u65b0\u5bfc\u51fa\u516c\u5171 API"}),"\n",(0,l.jsxs)(e.p,{children:["\u5728 ",(0,l.jsx)(e.code,{children:"lib.rs"})," \u4e2d\u91cd\u65b0\u5bfc\u51fa\uff1a"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-rust",children:"// src/lib.rs\nmod internal_module;\n\npub use internal_module::PublicType;  // \u7b80\u5316\u8def\u5f84\n"})}),"\n",(0,l.jsx)(e.h3,{id:"4-\u907f\u514d\u5faa\u73af\u4f9d\u8d56",children:"4. \u907f\u514d\u5faa\u73af\u4f9d\u8d56"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-rust",children:"// \u274c \u4e0d\u597d\n// a.rs \u4f9d\u8d56 b.rs\n// b.rs \u4f9d\u8d56 a.rs\n\n// \u2705 \u597d\uff1a\u63d0\u53d6\u5171\u4eab\u4ee3\u7801\u5230\u7b2c\u4e09\u4e2a\u6a21\u5757\n// a.rs \u4f9d\u8d56 common.rs\n// b.rs \u4f9d\u8d56 common.rs\n"})}),"\n",(0,l.jsx)(e.h3,{id:"5-\u5408\u7406\u4f7f\u7528\u53ef\u89c1\u6027",children:"5. \u5408\u7406\u4f7f\u7528\u53ef\u89c1\u6027"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-rust",children:"// \u9ed8\u8ba4\u79c1\u6709\nstruct InternalConfig { }\n\n// \u9700\u8981\u65f6\u624d\u516c\u5f00\npub struct PublicConfig { }\n\n// crate \u5185\u90e8\u516c\u5f00\npub(crate) struct CrateConfig { }\n"})}),"\n",(0,l.jsx)(e.h3,{id:"6-\u4f7f\u7528-tests-\u76ee\u5f55",children:"6. \u4f7f\u7528 tests \u76ee\u5f55"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"src/              # \u6e90\u4ee3\u7801\ntests/            # \u96c6\u6210\u6d4b\u8bd5\uff08\u9ed1\u76d2\u6d4b\u8bd5\uff09\n  \u2514\u2500\u2500 api.rs\n\n// src/ \u4e2d\u7684\u6d4b\u8bd5\u662f\u5355\u5143\u6d4b\u8bd5\n#[cfg(test)]\nmod tests {\n    #[test]\n    fn test_something() { }\n}\n"})}),"\n",(0,l.jsx)(e.h2,{id:"\u5e38\u89c1\u6a21\u5f0f",children:"\u5e38\u89c1\u6a21\u5f0f"}),"\n",(0,l.jsx)(e.h3,{id:"\u9519\u8bef\u6a21\u5757\u6a21\u5f0f",children:"\u9519\u8bef\u6a21\u5757\u6a21\u5f0f"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-rust",children:'// src/error.rs\nuse std::fmt;\n\n#[derive(Debug)]\npub enum MyError {\n    NotFound,\n    InvalidInput(String),\n    Internal(Box<dyn std::error::Error>),\n}\n\nimpl fmt::Display for MyError {\n    fn fmt(&self, f: &mut fmt::Formatter) -> fmt::Result {\n        match self {\n            MyError::NotFound => write!(f, "Not found"),\n            MyError::InvalidInput(msg) => write!(f, "Invalid input: {}", msg),\n            MyError::Internal(e) => write!(f, "Internal error: {}", e),\n        }\n    }\n}\n\nimpl std::error::Error for MyError {}\n\npub type Result<T> = std::result::Result<T, MyError>;\n\n// src/lib.rs\nmod error;\npub use error::{MyError, Result};\n'})}),"\n",(0,l.jsx)(e.h3,{id:"\u914d\u7f6e\u6a21\u5757\u6a21\u5f0f",children:"\u914d\u7f6e\u6a21\u5757\u6a21\u5f0f"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-rust",children:"// src/config.rs\nuse serde::{Deserialize, Serialize};\n\n#[derive(Debug, Deserialize, Serialize)]\npub struct Config {\n    pub database_url: String,\n    pub port: u16,\n}\n\nimpl Config {\n    pub fn load() -> Result<Self, Box<dyn std::error::Error>> {\n        // \u4ece\u6587\u4ef6\u6216\u73af\u5883\u53d8\u91cf\u52a0\u8f7d\n        todo!()\n    }\n}\n"})}),"\n",(0,l.jsx)(e.h3,{id:"builder-\u6a21\u5f0f",children:"Builder \u6a21\u5f0f"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-rust",children:'// src/builder.rs\npub struct ConfigBuilder {\n    host: Option<String>,\n    port: Option<u16>,\n}\n\nimpl ConfigBuilder {\n    pub fn new() -> Self {\n        ConfigBuilder {\n            host: None,\n            port: None,\n        }\n    }\n\n    pub fn host(mut self, host: String) -> Self {\n        self.host = Some(host);\n        self\n    }\n\n    pub fn port(mut self, port: u16) -> Self {\n        self.port = Some(port);\n        self\n    }\n\n    pub fn build(self) -> Config {\n        Config {\n            host: self.host.unwrap_or_else(|| "localhost".to_string()),\n            port: self.port.unwrap_or(8080),\n        }\n    }\n}\n'})}),"\n",(0,l.jsx)(e.h2,{id:"\u603b\u7ed3",children:"\u603b\u7ed3"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u2705 \u4f7f\u7528\u6e05\u6670\u7684\u76ee\u5f55\u7ed3\u6784\u7ec4\u7ec7\u4ee3\u7801"}),"\n",(0,l.jsxs)(e.li,{children:["\u2705 \u5408\u7406\u4f7f\u7528 ",(0,l.jsx)(e.code,{children:"mod.rs"})," \u6216\u65b0\u5f0f\u8def\u5f84"]}),"\n",(0,l.jsx)(e.li,{children:"\u2705 \u63a7\u5236\u597d\u53ef\u89c1\u6027\uff08pub\u3001pub(crate)\u7b49\uff09"}),"\n",(0,l.jsxs)(e.li,{children:["\u2705 \u4f7f\u7528 ",(0,l.jsx)(e.code,{children:"use"})," \u7b80\u5316\u8def\u5f84"]}),"\n",(0,l.jsx)(e.li,{children:"\u2705 \u91cd\u65b0\u5bfc\u51fa\u7b80\u5316\u516c\u5171 API"}),"\n",(0,l.jsx)(e.li,{children:"\u2705 \u4fdd\u6301\u6a21\u5757\u804c\u8d23\u5355\u4e00"}),"\n",(0,l.jsx)(e.li,{children:"\u2705 \u63d0\u4f9b prelude \u65b9\u4fbf\u7528\u6237"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u826f\u597d\u7684\u9879\u76ee\u7ec4\u7ec7\u80fd\u8ba9\u4ee3\u7801\u66f4\u6613\u7ef4\u62a4\u548c\u6269\u5c55\uff01"})]})}function a(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(o,{...n})}):o(n)}}}]);