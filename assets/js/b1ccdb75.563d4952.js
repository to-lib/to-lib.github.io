"use strict";(globalThis.webpackChunkto_lib_github_io=globalThis.webpackChunkto_lib_github_io||[]).push([[7339],{31378:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>p,frontMatter:()=>s,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"netty/best-practices","title":"\u6700\u4f73\u5b9e\u8df5\u4e0e\u96c6\u6210\u6307\u5357","description":"[!TIP]","source":"@site/docs/netty/best-practices.md","sourceDirName":"netty","slug":"/netty/best-practices","permalink":"/docs/netty/best-practices","draft":false,"unlisted":false,"editUrl":"https://github.com/to-lib/to-lib.github.io/tree/main/docs/netty/best-practices.md","tags":[],"version":"current","sidebarPosition":10,"frontMatter":{"sidebar_position":10},"sidebar":"netty","previous":{"title":"\u6027\u80fd\u4f18\u5316\u4e0e\u8fdb\u9636","permalink":"/docs/netty/advanced"},"next":{"title":"\u5feb\u901f\u53c2\u8003","permalink":"/docs/netty/quick-reference"}}');var i=r(22714),l=r(48885);const s={sidebar_position:10},o="\u6700\u4f73\u5b9e\u8df5\u4e0e\u96c6\u6210\u6307\u5357",a={},c=[{value:"Spring Boot \u96c6\u6210",id:"spring-boot-\u96c6\u6210",level:2},{value:"\u6dfb\u52a0\u4f9d\u8d56",id:"\u6dfb\u52a0\u4f9d\u8d56",level:3},{value:"\u81ea\u5b9a\u4e49\u914d\u7f6e\u7c7b",id:"\u81ea\u5b9a\u4e49\u914d\u7f6e\u7c7b",level:3},{value:"application.yml \u914d\u7f6e",id:"applicationyml-\u914d\u7f6e",level:3},{value:"Spring Boot \u670d\u52a1\u96c6\u6210",id:"spring-boot-\u670d\u52a1\u96c6\u6210",level:3},{value:"\u8bbe\u8ba1\u6a21\u5f0f\u5e94\u7528",id:"\u8bbe\u8ba1\u6a21\u5f0f\u5e94\u7528",level:2},{value:"1. Pipeline \u6a21\u5f0f",id:"1-pipeline-\u6a21\u5f0f",level:3},{value:"2. Observer \u6a21\u5f0f",id:"2-observer-\u6a21\u5f0f",level:3},{value:"3. Strategy \u6a21\u5f0f",id:"3-strategy-\u6a21\u5f0f",level:3},{value:"4. Factory \u6a21\u5f0f",id:"4-factory-\u6a21\u5f0f",level:3},{value:"\u7248\u672c\u5347\u7ea7\u6307\u5357",id:"\u7248\u672c\u5347\u7ea7\u6307\u5357",level:2},{value:"Netty 4.0 -&gt; 4.1 \u5347\u7ea7",id:"netty-40---41-\u5347\u7ea7",level:3},{value:"Netty 4.1.x \u4e3b\u8981\u7248\u672c\u7279\u6027\u5bf9\u6bd4",id:"netty-41x-\u4e3b\u8981\u7248\u672c\u7279\u6027\u5bf9\u6bd4",level:3},{value:"\u5347\u7ea7\u68c0\u67e5\u6e05\u5355",id:"\u5347\u7ea7\u68c0\u67e5\u6e05\u5355",level:3},{value:"\u5e38\u89c1\u95ee\u9898\u6392\u67e5\u5feb\u901f\u6307\u5357",id:"\u5e38\u89c1\u95ee\u9898\u6392\u67e5\u5feb\u901f\u6307\u5357",level:2},{value:"\u5185\u5b58\u6301\u7eed\u589e\u957f",id:"\u5185\u5b58\u6301\u7eed\u589e\u957f",level:3},{value:"\u8fde\u63a5\u65e0\u6cd5\u5efa\u7acb",id:"\u8fde\u63a5\u65e0\u6cd5\u5efa\u7acb",level:3},{value:"\u6d88\u606f\u5904\u7406\u5f88\u6162",id:"\u6d88\u606f\u5904\u7406\u5f88\u6162",level:3},{value:"\u53c2\u8003\u8d44\u6e90",id:"\u53c2\u8003\u8d44\u6e90",level:2}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"\u6700\u4f73\u5b9e\u8df5\u4e0e\u96c6\u6210\u6307\u5357",children:"\u6700\u4f73\u5b9e\u8df5\u4e0e\u96c6\u6210\u6307\u5357"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"[!TIP]\n\u672c\u7ae0\u8282\u603b\u7ed3\u4e86 Netty \u5f00\u53d1\u4e2d\u7684\u6700\u4f73\u5b9e\u8df5\uff0c\u5305\u62ec Spring Boot \u96c6\u6210\u3001\u8bbe\u8ba1\u6a21\u5f0f\u5e94\u7528\u3001\u4ee5\u53ca\u7248\u672c\u5347\u7ea7\u6307\u5357\u3002"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"spring-boot-\u96c6\u6210",children:"Spring Boot \u96c6\u6210"}),"\n",(0,i.jsx)(n.h3,{id:"\u6dfb\u52a0\u4f9d\u8d56",children:"\u6dfb\u52a0\u4f9d\u8d56"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:"\x3c!-- Netty Server Starter --\x3e\n<dependency>\n    <groupId>io.netty</groupId>\n    <artifactId>netty-all</artifactId>\n    <version>4.1.100.Final</version>\n</dependency>\n\n\x3c!-- Spring Boot Web Starter (\u53ef\u9009\uff0c\u5982\u9700\u540c\u65f6\u4f7f\u7528 Spring MVC) --\x3e\n<dependency>\n    <groupId>org.springframework.boot</groupId>\n    <artifactId>spring-boot-starter-web</artifactId>\n</dependency>\n"})}),"\n",(0,i.jsx)(n.h3,{id:"\u81ea\u5b9a\u4e49\u914d\u7f6e\u7c7b",children:"\u81ea\u5b9a\u4e49\u914d\u7f6e\u7c7b"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'import org.springframework.boot.context.properties.ConfigurationProperties;\nimport org.springframework.context.annotation.Configuration;\n\n@Configuration\n@ConfigurationProperties(prefix = "netty")\npublic class NettyServerConfig {\n    private int port = 8080;\n    private int bossGroupSize = 1;\n    private int workerGroupSize = 8;\n    private int maxFrameLength = 1024 * 1024; // 1MB\n    private long idleStateReaderIdleTime = 60; // \u79d2\n    private long idleStateWriterIdleTime = 60;\n    \n    // getters and setters...\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"applicationyml-\u914d\u7f6e",children:"application.yml \u914d\u7f6e"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"netty:\n  port: 8080\n  boss-group-size: 1\n  worker-group-size: 8\n  max-frame-length: 1048576\n  idle-state-reader-idle-time: 60\n  idle-state-writer-idle-time: 60\n"})}),"\n",(0,i.jsx)(n.h3,{id:"spring-boot-\u670d\u52a1\u96c6\u6210",children:"Spring Boot \u670d\u52a1\u96c6\u6210"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'import org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.stereotype.Service;\n\nimport javax.annotation.PostConstruct;\nimport javax.annotation.PreDestroy;\n\n@SpringBootApplication\npublic class NettyServerApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(NettyServerApplication.class, args);\n    }\n}\n\n@Service\npublic class NettyServerService {\n    @Autowired\n    private NettyServerConfig config;\n    \n    @Autowired\n    private YourBusinessService businessService;\n    \n    private EventLoopGroup bossGroup;\n    private EventLoopGroup workerGroup;\n    private Channel serverChannel;\n    \n    @PostConstruct\n    public void start() throws InterruptedException {\n        bossGroup = new NioEventLoopGroup(config.getBossGroupSize());\n        workerGroup = new NioEventLoopGroup(config.getWorkerGroupSize());\n        \n        try {\n            ServerBootstrap bootstrap = new ServerBootstrap();\n            bootstrap.group(bossGroup, workerGroup)\n                .channel(NioServerSocketChannel.class)\n                .childHandler(new ChannelInitializer<SocketChannel>() {\n                    @Override\n                    protected void initChannel(SocketChannel ch) {\n                        ChannelPipeline pipeline = ch.pipeline();\n                        \n                        // \u6dfb\u52a0\u5fc3\u8df3\u68c0\u6d4b\n                        pipeline.addLast(\n                            new IdleStateHandler(\n                                config.getIdleStateReaderIdleTime(),\n                                config.getIdleStateWriterIdleTime(),\n                                0\n                            )\n                        );\n                        \n                        // \u6dfb\u52a0\u89e3\u7801\u5668\n                        pipeline.addLast(new LengthFieldBasedFrameDecoder(\n                            config.getMaxFrameLength(), 0, 4, 0, 4\n                        ));\n                        pipeline.addLast(new StringDecoder(CharsetUtil.UTF_8));\n                        \n                        // \u6dfb\u52a0\u4e1a\u52a1 Handler\n                        pipeline.addLast(new NettyServerHandler(businessService));\n                        \n                        // \u6dfb\u52a0\u7f16\u7801\u5668\n                        pipeline.addLast(new StringEncoder(CharsetUtil.UTF_8));\n                    }\n                });\n            \n            ChannelFuture future = bootstrap.bind(config.getPort()).sync();\n            serverChannel = future.channel();\n            System.out.println("Netty server started on port: " + config.getPort());\n        } catch (InterruptedException e) {\n            Thread.currentThread().interrupt();\n            throw e;\n        }\n    }\n    \n    @PreDestroy\n    public void shutdown() {\n        if (serverChannel != null) {\n            serverChannel.close();\n        }\n        if (bossGroup != null) {\n            bossGroup.shutdownGracefully();\n        }\n        if (workerGroup != null) {\n            workerGroup.shutdownGracefully();\n        }\n    }\n}\n\n// Handler \u5b9e\u73b0\npublic class NettyServerHandler extends SimpleChannelInboundHandler<String> {\n    private static final Logger logger = LoggerFactory.getLogger(NettyServerHandler.class);\n    private final YourBusinessService businessService;\n    \n    public NettyServerHandler(YourBusinessService businessService) {\n        this.businessService = businessService;\n    }\n    \n    @Override\n    public void channelActive(ChannelHandlerContext ctx) {\n        logger.info("Client connected: {}", ctx.channel().remoteAddress());\n    }\n    \n    @Override\n    protected void channelRead0(ChannelHandlerContext ctx, String msg) {\n        logger.info("Received message: {}", msg);\n        \n        // \u8c03\u7528\u4e1a\u52a1\u670d\u52a1\n        String response = businessService.processMessage(msg);\n        ctx.writeAndFlush(response);\n    }\n    \n    @Override\n    public void exceptionCaught(ChannelHandlerContext ctx, Throwable cause) {\n        logger.error("Exception occurred", cause);\n        ctx.close();\n    }\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"\u8bbe\u8ba1\u6a21\u5f0f\u5e94\u7528",children:"\u8bbe\u8ba1\u6a21\u5f0f\u5e94\u7528"}),"\n",(0,i.jsx)(n.h3,{id:"1-pipeline-\u6a21\u5f0f",children:"1. Pipeline \u6a21\u5f0f"}),"\n",(0,i.jsx)(n.p,{children:"Netty \u7684 Pipeline \u5df2\u7ecf\u662f Chain of Responsibility \u6a21\u5f0f\u7684\u5b8c\u7f8e\u5b9e\u73b0\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'// \u6784\u5efa\u5904\u7406\u94fe\nChannelPipeline pipeline = ch.pipeline();\n\n// \u6bcf\u4e2a Handler \u8d1f\u8d23\u5355\u4e00\u804c\u8d23\npipeline.addLast("decoder", new MyDecoder());       // \u89e3\u7801\npipeline.addLast("processor", new MyProcessor());   // \u4e1a\u52a1\u5904\u7406\npipeline.addLast("encoder", new MyEncoder());       // \u7f16\u7801\npipeline.addLast("exception", new ExceptionHandler()); // \u5f02\u5e38\u5904\u7406\n'})}),"\n",(0,i.jsx)(n.h3,{id:"2-observer-\u6a21\u5f0f",children:"2. Observer \u6a21\u5f0f"}),"\n",(0,i.jsx)(n.p,{children:"\u4e8b\u4ef6\u76d1\u542c\u548c\u56de\u8c03\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'ChannelFuture future = bootstrap.bind(port).sync();\n\n// \u6dfb\u52a0\u76d1\u542c\u5668\uff08Observer\uff09\nfuture.addListener((ChannelFutureListener) f -> {\n    if (f.isSuccess()) {\n        System.out.println("Server started");\n    } else {\n        System.out.println("Server startup failed");\n    }\n});\n\n// \u4e5f\u53ef\u4ee5\u6dfb\u52a0\u591a\u4e2a\u76d1\u542c\u5668\nfuture.addListener(new ChannelFutureListener() {\n    @Override\n    public void operationComplete(ChannelFuture future) throws Exception {\n        // \u76d1\u542c\u5b8c\u6210\u4e8b\u4ef6\n    }\n});\n'})}),"\n",(0,i.jsx)(n.h3,{id:"3-strategy-\u6a21\u5f0f",children:"3. Strategy \u6a21\u5f0f"}),"\n",(0,i.jsx)(n.p,{children:"\u4f7f\u7528\u4e0d\u540c\u7684\u7f16\u7801\u89e3\u7801\u7b56\u7565\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"// \u5b9a\u4e49\u7b56\u7565\u63a5\u53e3\ninterface CodecStrategy {\n    void encode(Object obj, ByteBuf buf);\n    Object decode(ByteBuf buf);\n}\n\n// \u5177\u4f53\u7b56\u7565 1\uff1aJSON\nclass JsonCodecStrategy implements CodecStrategy {\n    @Override\n    public void encode(Object obj, ByteBuf buf) {\n        // JSON \u7f16\u7801\n    }\n    \n    @Override\n    public Object decode(ByteBuf buf) {\n        // JSON \u89e3\u7801\n        return null;\n    }\n}\n\n// \u5177\u4f53\u7b56\u7565 2\uff1aProtobuf\nclass ProtobufCodecStrategy implements CodecStrategy {\n    @Override\n    public void encode(Object obj, ByteBuf buf) {\n        // Protobuf \u7f16\u7801\n    }\n    \n    @Override\n    public Object decode(ByteBuf buf) {\n        // Protobuf \u89e3\u7801\n        return null;\n    }\n}\n\n// \u5728 Handler \u4e2d\u4f7f\u7528\u7b56\u7565\npublic class StrategyHandler extends SimpleChannelInboundHandler<ByteBuf> {\n    private CodecStrategy strategy;\n    \n    public StrategyHandler(CodecStrategy strategy) {\n        this.strategy = strategy;\n    }\n    \n    @Override\n    protected void channelRead0(ChannelHandlerContext ctx, ByteBuf msg) {\n        Object decoded = strategy.decode(msg);\n        // \u5904\u7406\u5bf9\u8c61\n    }\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"4-factory-\u6a21\u5f0f",children:"4. Factory \u6a21\u5f0f"}),"\n",(0,i.jsx)(n.p,{children:"\u521b\u5efa Handler \u5de5\u5382\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'// Handler \u5de5\u5382\npublic class HandlerFactory {\n    public static ChannelHandler createDecoder(String type) {\n        switch (type) {\n            case "string":\n                return new StringDecoder(CharsetUtil.UTF_8);\n            case "json":\n                return new JsonDecoder();\n            case "protobuf":\n                return new ProtobufDecoder();\n            default:\n                throw new IllegalArgumentException("Unknown decoder type: " + type);\n        }\n    }\n    \n    public static ChannelHandler createProcessor(String type) {\n        switch (type) {\n            case "echo":\n                return new EchoHandler();\n            case "business":\n                return new BusinessHandler();\n            default:\n                throw new IllegalArgumentException("Unknown processor type: " + type);\n        }\n    }\n}\n\n// \u4f7f\u7528\u5de5\u5382\nChannelPipeline pipeline = ch.pipeline();\npipeline.addLast(HandlerFactory.createDecoder("json"));\npipeline.addLast(HandlerFactory.createProcessor("business"));\n'})}),"\n",(0,i.jsx)(n.h2,{id:"\u7248\u672c\u5347\u7ea7\u6307\u5357",children:"\u7248\u672c\u5347\u7ea7\u6307\u5357"}),"\n",(0,i.jsx)(n.h3,{id:"netty-40---41-\u5347\u7ea7",children:"Netty 4.0 -> 4.1 \u5347\u7ea7"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u4e3b\u8981\u53d8\u5316\uff1a"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"\u7c7b\u540d\u53d8\u66f4"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"// 4.0\nChannelException\n\n// 4.1\n// \u76f8\u540c\u7684\u7c7b\u540d\uff0c\u4f46\u589e\u52a0\u4e86\u66f4\u591a\u65b9\u6cd5\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Bootstrap API \u53d8\u66f4"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"// 4.0 - \u4f7f\u7528 channelFactory\nbootstrap.channelFactory(new ChannelFactory() {\n    @Override\n    public Channel newChannel() {\n        return new NioSocketChannel();\n    }\n});\n\n// 4.1 - \u4f7f\u7528 channel() \u65b9\u6cd5\uff08\u63a8\u8350\uff09\nbootstrap.channel(NioSocketChannel.class);\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"3",children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.strong,{children:"Promise/Future \u6539\u8fdb"})}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'// 4.1 \u65b0\u589e\uff1aCompletionStage \u652f\u6301\nChannelFuture future = bootstrap.bind(port);\nfuture.asStage().thenRun(() -> System.out.println("Bind success"));\n'})}),"\n",(0,i.jsx)(n.h3,{id:"netty-41x-\u4e3b\u8981\u7248\u672c\u7279\u6027\u5bf9\u6bd4",children:"Netty 4.1.x \u4e3b\u8981\u7248\u672c\u7279\u6027\u5bf9\u6bd4"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\u7248\u672c"}),(0,i.jsx)(n.th,{children:"\u4e3b\u8981\u7279\u6027"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"4.1.0-4.1.30"}),(0,i.jsx)(n.td,{children:"\u57fa\u7840\u529f\u80fd\u7a33\u5b9a"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"4.1.31+"}),(0,i.jsx)(n.td,{children:"\u6539\u8fdb HTTP/2 \u652f\u6301"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"4.1.50+"}),(0,i.jsx)(n.td,{children:"\u589e\u5f3a\u5185\u5b58\u6cc4\u6f0f\u68c0\u6d4b"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"4.1.100+"}),(0,i.jsx)(n.td,{children:"\u6539\u8fdb\u5783\u573e\u56de\u6536\u6027\u80fd\uff0c\u4fee\u590d\u5173\u952e bug"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"\u5347\u7ea7\u68c0\u67e5\u6e05\u5355",children:"\u5347\u7ea7\u68c0\u67e5\u6e05\u5355"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-markdown",children:"- [ ] \u66f4\u65b0 pom.xml \u4e2d\u7684 Netty \u7248\u672c\n- [ ] \u68c0\u67e5\u662f\u5426\u4f7f\u7528\u4e86\u5df2\u5f03\u7528\u7684 API\n- [ ] \u8fd0\u884c\u5355\u5143\u6d4b\u8bd5\u786e\u4fdd\u529f\u80fd\u6b63\u5e38\n- [ ] \u8fdb\u884c\u6027\u80fd\u6d4b\u8bd5\u5bf9\u6bd4\n- [ ] \u68c0\u67e5\u5b89\u5168\u66f4\u65b0\u548c\u6f0f\u6d1e\u4fee\u590d\n- [ ] \u66f4\u65b0\u6587\u6863\u548c\u914d\u7f6e\u8bf4\u660e\n- [ ] \u7070\u5ea6\u53d1\u5e03\u6216\u91d1\u4e1d\u96c0\u90e8\u7f72\n- [ ] \u76d1\u63a7\u751f\u4ea7\u73af\u5883\u7684\u8fd0\u884c\u72b6\u6001\n"})}),"\n",(0,i.jsx)(n.h2,{id:"\u5e38\u89c1\u95ee\u9898\u6392\u67e5\u5feb\u901f\u6307\u5357",children:"\u5e38\u89c1\u95ee\u9898\u6392\u67e5\u5feb\u901f\u6307\u5357"}),"\n",(0,i.jsx)(n.h3,{id:"\u5185\u5b58\u6301\u7eed\u589e\u957f",children:"\u5185\u5b58\u6301\u7eed\u589e\u957f"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u6392\u67e5\u6b65\u9aa4\uff1a"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"\u542f\u7528\u5185\u5b58\u6cc4\u6f0f\u68c0\u6d4b"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'System.setProperty("io.netty.leakDetection.level", "PARANOID");\n'})}),"\n",(0,i.jsxs)(n.ol,{start:"2",children:["\n",(0,i.jsx)(n.li,{children:"\u68c0\u67e5 ByteBuf \u662f\u5426\u6b63\u786e\u91ca\u653e"}),"\n",(0,i.jsx)(n.li,{children:"\u4f7f\u7528 JProfiler \u6216 YourKit \u8fdb\u884c\u5185\u5b58\u5206\u6790"}),"\n",(0,i.jsx)(n.li,{children:"\u67e5\u770b Netty \u65e5\u5fd7\u4e2d\u7684 leaked \u76f8\u5173\u4fe1\u606f"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"\u8fde\u63a5\u65e0\u6cd5\u5efa\u7acb",children:"\u8fde\u63a5\u65e0\u6cd5\u5efa\u7acb"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u6392\u67e5\u6b65\u9aa4\uff1a"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"\u68c0\u67e5\u7f51\u7edc\u8fde\u63a5\u662f\u5426\u6b63\u5e38\uff08ping\u3001telnet\uff09"}),"\n",(0,i.jsx)(n.li,{children:"\u67e5\u770b\u9632\u706b\u5899\u548c\u7aef\u53e3\u662f\u5426\u5f00\u653e"}),"\n",(0,i.jsx)(n.li,{children:"\u68c0\u67e5\u7ed1\u5b9a\u5730\u5740\u662f\u5426\u6b63\u786e\uff08localhost vs 0.0.0.0\uff09"}),"\n",(0,i.jsx)(n.li,{children:"\u67e5\u770b\u5f02\u5e38\u65e5\u5fd7\u4e2d\u7684\u8fde\u63a5\u4fe1\u606f"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'// \u8bca\u65ad\u4ee3\u7801\nChannelFuture future = bootstrap.connect("host", 8080);\nfuture.addListener((ChannelFutureListener) f -> {\n    if (f.isSuccess()) {\n        System.out.println("Connected");\n    } else {\n        System.out.println("Failed to connect: " + f.cause());\n        f.cause().printStackTrace();\n    }\n});\n'})}),"\n",(0,i.jsx)(n.h3,{id:"\u6d88\u606f\u5904\u7406\u5f88\u6162",children:"\u6d88\u606f\u5904\u7406\u5f88\u6162"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"\u6392\u67e5\u6b65\u9aa4\uff1a"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"\u68c0\u67e5 Handler \u4e2d\u662f\u5426\u6709\u963b\u585e\u64cd\u4f5c"}),"\n",(0,i.jsx)(n.li,{children:"\u68c0\u67e5\u7ebf\u7a0b\u6c60\u662f\u5426\u8017\u5c3d"}),"\n",(0,i.jsx)(n.li,{children:"\u4f7f\u7528 jstack \u67e5\u770b\u7ebf\u7a0b\u72b6\u6001"}),"\n",(0,i.jsx)(n.li,{children:"\u4f7f\u7528 Flame Graph \u8fdb\u884c CPU \u5206\u6790"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"\u53c2\u8003\u8d44\u6e90",children:"\u53c2\u8003\u8d44\u6e90"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://netty.io/wiki/user-guide.html",children:"Netty \u5b98\u65b9\u6587\u6863"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://github.com/netty/netty",children:"Netty GitHub \u4ed3\u5e93"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://groups.google.com/forum/#!forum/netty",children:"Netty \u793e\u533a\u8bba\u575b"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://github.com/netty/netty/wiki",children:"\u76f8\u5173\u535a\u5ba2\u548c\u6559\u7a0b"})}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"./index",children:"\u8fd4\u56de\u9996\u9875"})})]})}function p(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},48885:(e,n,r)=>{r.d(n,{R:()=>s,x:()=>o});var t=r(99378);const i={},l=t.createContext(i);function s(e){const n=t.useContext(l);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),t.createElement(l.Provider,{value:n},e.children)}}}]);