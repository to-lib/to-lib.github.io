"use strict";(globalThis.webpackChunkto_lib_github_io=globalThis.webpackChunkto_lib_github_io||[]).push([[5350],{48885:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>l});var r=s(99378);const t={},i=r.createContext(t);function a(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),r.createElement(i.Provider,{value:n},e.children)}},90085:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>d,frontMatter:()=>a,metadata:()=>r,toc:()=>p});const r=JSON.parse('{"id":"spring-ai/prompts","title":"Prompt \u5de5\u7a0b","description":"Prompt\uff08\u63d0\u793a\u8bcd\uff09\u662f\u4e0e AI \u6a21\u578b\u4ea4\u4e92\u7684\u6838\u5fc3\u3002\u4f18\u8d28\u7684 Prompt \u80fd\u591f\u663e\u8457\u63d0\u5347 AI \u8f93\u51fa\u7684\u8d28\u91cf\u548c\u51c6\u786e\u6027\u3002","source":"@site/docs/spring-ai/prompts.md","sourceDirName":"spring-ai","slug":"/spring-ai/prompts","permalink":"/docs/spring-ai/prompts","draft":false,"unlisted":false,"editUrl":"https://github.com/to-lib/to-lib.github.io/tree/main/docs/spring-ai/prompts.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6,"title":"Prompt \u5de5\u7a0b"}}');var t=s(22714),i=s(48885);const a={sidebar_position:6,title:"Prompt \u5de5\u7a0b"},l="Prompt \u5de5\u7a0b",o={},p=[{value:"PromptTemplate",id:"prompttemplate",level:2},{value:"\u4ece\u8d44\u6e90\u6587\u4ef6\u52a0\u8f7d\u6a21\u677f",id:"\u4ece\u8d44\u6e90\u6587\u4ef6\u52a0\u8f7d\u6a21\u677f",level:3},{value:"UserMessage",id:"usermessage",level:3},{value:"AssistantMessage",id:"assistantmessage",level:3},{value:"\u7ec4\u5408\u4f7f\u7528",id:"\u7ec4\u5408\u4f7f\u7528",level:3},{value:"Prompt \u6700\u4f73\u5b9e\u8df5",id:"prompt-\u6700\u4f73\u5b9e\u8df5",level:2},{value:"1. \u660e\u786e\u89d2\u8272\u548c\u4e0a\u4e0b\u6587",id:"1-\u660e\u786e\u89d2\u8272\u548c\u4e0a\u4e0b\u6587",level:3},{value:"2. \u4f7f\u7528\u7ed3\u6784\u5316\u8f93\u51fa\u683c\u5f0f",id:"2-\u4f7f\u7528\u7ed3\u6784\u5316\u8f93\u51fa\u683c\u5f0f",level:3},{value:"3. Few-shot Learning",id:"3-few-shot-learning",level:3},{value:"4. Chain of Thought (\u601d\u7ef4\u94fe)",id:"4-chain-of-thought-\u601d\u7ef4\u94fe",level:3},{value:"\u52a8\u6001 Prompt \u6784\u5efa",id:"\u52a8\u6001-prompt-\u6784\u5efa",level:2},{value:"\u4e0b\u4e00\u6b65",id:"\u4e0b\u4e00\u6b65",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"prompt-\u5de5\u7a0b",children:"Prompt \u5de5\u7a0b"})}),"\n",(0,t.jsx)(n.p,{children:"Prompt\uff08\u63d0\u793a\u8bcd\uff09\u662f\u4e0e AI \u6a21\u578b\u4ea4\u4e92\u7684\u6838\u5fc3\u3002\u4f18\u8d28\u7684 Prompt \u80fd\u591f\u663e\u8457\u63d0\u5347 AI \u8f93\u51fa\u7684\u8d28\u91cf\u548c\u51c6\u786e\u6027\u3002"}),"\n",(0,t.jsx)(n.h2,{id:"prompttemplate",children:"PromptTemplate"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"PromptTemplate"})," \u5141\u8bb8\u521b\u5efa\u5e26\u6709\u5360\u4f4d\u7b26\u7684\u53ef\u590d\u7528\u63d0\u793a\u8bcd\u6a21\u677f\uff1a"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'@Service\npublic class PromptService {\n\n    public Prompt createJokePrompt(String topic, String style) {\n        PromptTemplate template = new PromptTemplate(\n            "\u8bf7\u8bb2\u4e00\u4e2a\u5173\u4e8e{topic}\u7684{style}\u7b11\u8bdd"\n        );\n        return template.create(Map.of(\n            "topic", topic,\n            "style", style\n        ));\n    }\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"\u4ece\u8d44\u6e90\u6587\u4ef6\u52a0\u8f7d\u6a21\u677f",children:"\u4ece\u8d44\u6e90\u6587\u4ef6\u52a0\u8f7d\u6a21\u677f"}),"\n",(0,t.jsx)(n.p,{children:"\u5c06 Prompt \u6a21\u677f\u5b58\u50a8\u5728\u5916\u90e8\u6587\u4ef6\u4e2d\u4fbf\u4e8e\u7ba1\u7406\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'// src/main/resources/prompts/analysis.st\n@Component\npublic class AnalysisPromptService {\n\n    @Value("classpath:prompts/analysis.st")\n    private Resource analysisPrompt;\n\n    public Prompt createAnalysisPrompt(String code) {\n        PromptTemplate template = new PromptTemplate(analysisPrompt);\n        return template.create(Map.of("code", code));\n    }\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"prompts/analysis.st:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\u8bf7\u5206\u6790\u4ee5\u4e0b\u4ee3\u7801\u5e76\u63d0\u4f9b\u6539\u8fdb\u5efa\u8bae\uff1a\n\n```java\n{code}\n"})}),"\n",(0,t.jsx)(n.p,{children:"\u8bf7\u4ece\u4ee5\u4e0b\u51e0\u4e2a\u65b9\u9762\u8fdb\u884c\u5206\u6790\uff1a"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"\u4ee3\u7801\u8d28\u91cf"}),"\n",(0,t.jsx)(n.li,{children:"\u6027\u80fd\u95ee\u9898"}),"\n",(0,t.jsx)(n.li,{children:"\u5b89\u5168\u9690\u60a3"}),"\n",(0,t.jsx)(n.li,{children:"\u6700\u4f73\u5b9e\u8df5"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'\n## \u6d88\u606f\u7c7b\u578b\n\nSpring AI \u652f\u6301\u591a\u79cd\u6d88\u606f\u7c7b\u578b\uff0c\u7528\u4e8e\u6784\u5efa\u590d\u6742\u7684\u5bf9\u8bdd\uff1a\n\n### SystemMessage\n\n\u8bbe\u7f6e AI \u7684\u884c\u4e3a\u3001\u89d2\u8272\u548c\u7ea6\u675f\uff1a\n\n```java\nMessage systemMessage = new SystemMessage("""\n    \u4f60\u662f\u4e00\u4e2a\u4e13\u4e1a\u7684\u6280\u672f\u6587\u6863\u64b0\u5199\u52a9\u624b\u3002\n    \u8bf7\u9075\u5faa\u4ee5\u4e0b\u89c4\u5219\uff1a\n    1. \u4f7f\u7528\u6e05\u6670\u3001\u7b80\u6d01\u7684\u8bed\u8a00\n    2. \u63d0\u4f9b\u4ee3\u7801\u793a\u4f8b\u65f6\u4f7f\u7528 Markdown \u683c\u5f0f\n    3. \u5982\u679c\u4e0d\u786e\u5b9a\uff0c\u8bf7\u660e\u786e\u8bf4\u660e\n    """);\n'})}),"\n",(0,t.jsx)(n.h3,{id:"usermessage",children:"UserMessage"}),"\n",(0,t.jsx)(n.p,{children:"\u7528\u6237\u8f93\u5165\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'Message userMessage = new UserMessage("\u89e3\u91ca\u4ec0\u4e48\u662f Spring Boot \u81ea\u52a8\u914d\u7f6e");\n'})}),"\n",(0,t.jsx)(n.h3,{id:"assistantmessage",children:"AssistantMessage"}),"\n",(0,t.jsx)(n.p,{children:"AI \u7684\u5386\u53f2\u56de\u590d\uff08\u7528\u4e8e\u591a\u8f6e\u5bf9\u8bdd\uff09\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'Message assistantMessage = new AssistantMessage("Spring Boot \u81ea\u52a8\u914d\u7f6e\u662f...");\n'})}),"\n",(0,t.jsx)(n.h3,{id:"\u7ec4\u5408\u4f7f\u7528",children:"\u7ec4\u5408\u4f7f\u7528"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'List<Message> messages = List.of(\n    new SystemMessage("\u4f60\u662f\u4e00\u4e2a Java \u4e13\u5bb6"),\n    new UserMessage("\u4ec0\u4e48\u662f\u4f9d\u8d56\u6ce8\u5165\uff1f"),\n    new AssistantMessage("\u4f9d\u8d56\u6ce8\u5165\u662f\u4e00\u79cd\u8bbe\u8ba1\u6a21\u5f0f..."),\n    new UserMessage("\u80fd\u7ed9\u6211\u4e00\u4e2a\u4f8b\u5b50\u5417\uff1f")\n);\n\nChatResponse response = chatClient.prompt()\n        .messages(messages)\n        .call()\n        .chatResponse();\n'})}),"\n",(0,t.jsx)(n.h2,{id:"prompt-\u6700\u4f73\u5b9e\u8df5",children:"Prompt \u6700\u4f73\u5b9e\u8df5"}),"\n",(0,t.jsx)(n.h3,{id:"1-\u660e\u786e\u89d2\u8272\u548c\u4e0a\u4e0b\u6587",children:"1. \u660e\u786e\u89d2\u8272\u548c\u4e0a\u4e0b\u6587"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'String systemPrompt = """\n    \u89d2\u8272\uff1a\u4f60\u662f\u4e00\u4f4d\u8d44\u6df1\u7684 Spring \u6846\u67b6\u4e13\u5bb6\uff0c\u62e5\u6709 10 \u5e74\u4ee5\u4e0a\u7684 Java \u5f00\u53d1\u7ecf\u9a8c\u3002\n    \u4efb\u52a1\uff1a\u56de\u7b54\u7528\u6237\u5173\u4e8e Spring \u751f\u6001\u7cfb\u7edf\u7684\u6280\u672f\u95ee\u9898\u3002\n    \u7ea6\u675f\uff1a\n    - \u4f7f\u7528\u4e2d\u6587\u56de\u7b54\n    - \u63d0\u4f9b\u4ee3\u7801\u793a\u4f8b\u65f6\u4f7f\u7528 Java 17+ \u7684\u8bed\u6cd5\n    - \u5982\u679c\u95ee\u9898\u8d85\u51fa Spring \u8303\u56f4\uff0c\u793c\u8c8c\u5730\u8bf4\u660e\u5e76\u63d0\u4f9b\u76f8\u5173\u8d44\u6e90\n    """;\n'})}),"\n",(0,t.jsx)(n.h3,{id:"2-\u4f7f\u7528\u7ed3\u6784\u5316\u8f93\u51fa\u683c\u5f0f",children:"2. \u4f7f\u7528\u7ed3\u6784\u5316\u8f93\u51fa\u683c\u5f0f"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'String userPrompt = """\n    \u5206\u6790\u4ee5\u4e0b\u5f02\u5e38\u4fe1\u606f\u5e76\u63d0\u4f9b\u89e3\u51b3\u65b9\u6848\uff1a\n\n    {exception}\n\n    \u8bf7\u6309\u4ee5\u4e0b\u683c\u5f0f\u56de\u7b54\uff1a\n    ## \u539f\u56e0\u5206\u6790\n    [\u5f02\u5e38\u53d1\u751f\u7684\u6839\u672c\u539f\u56e0]\n\n    ## \u89e3\u51b3\u65b9\u6848\n    [\u5177\u4f53\u7684\u89e3\u51b3\u6b65\u9aa4]\n\n    ## \u9884\u9632\u63aa\u65bd\n    [\u5982\u4f55\u907f\u514d\u7c7b\u4f3c\u95ee\u9898]\n    """;\n'})}),"\n",(0,t.jsx)(n.h3,{id:"3-few-shot-learning",children:"3. Few-shot Learning"}),"\n",(0,t.jsx)(n.p,{children:"\u63d0\u4f9b\u793a\u4f8b\u5e2e\u52a9 AI \u7406\u89e3\u671f\u671b\u7684\u8f93\u51fa\u683c\u5f0f\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'String prompt = """\n    \u5c06\u4ee5\u4e0b\u82f1\u6587\u6280\u672f\u672f\u8bed\u7ffb\u8bd1\u4e3a\u4e2d\u6587\uff0c\u4fdd\u6301\u4e13\u4e1a\u6027\uff1a\n\n    \u793a\u4f8b\uff1a\n    - Dependency Injection -> \u4f9d\u8d56\u6ce8\u5165\n    - Aspect-Oriented Programming -> \u9762\u5411\u5207\u9762\u7f16\u7a0b\n    - Inversion of Control -> \u63a7\u5236\u53cd\u8f6c\n\n    \u8bf7\u7ffb\u8bd1\uff1a\n    - {term}\n    """;\n'})}),"\n",(0,t.jsx)(n.h3,{id:"4-chain-of-thought-\u601d\u7ef4\u94fe",children:"4. Chain of Thought (\u601d\u7ef4\u94fe)"}),"\n",(0,t.jsx)(n.p,{children:"\u5f15\u5bfc AI \u9010\u6b65\u63a8\u7406\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'String prompt = """\n    \u8bf7\u5206\u6790\u4ee5\u4e0b\u4ee3\u7801\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u3002\n\n    ```java\n    {code}\n    ```\n\n    \u8bf7\u6309\u4ee5\u4e0b\u6b65\u9aa4\u5206\u6790\uff1a\n    1. \u9996\u5148\uff0c\u8bc6\u522b\u4ee3\u7801\u4e2d\u7684\u5faa\u73af\u7ed3\u6784\n    2. \u7136\u540e\uff0c\u5206\u6790\u6bcf\u4e2a\u5faa\u73af\u7684\u8fed\u4ee3\u6b21\u6570\n    3. \u63a5\u7740\uff0c\u8003\u8651\u5d4c\u5957\u5faa\u73af\u7684\u5f71\u54cd\n    4. \u6700\u540e\uff0c\u7ed9\u51fa\u6700\u7ec8\u7684\u65f6\u95f4\u590d\u6742\u5ea6\uff0c\u5e76\u89e3\u91ca\u539f\u56e0\n    """;\n'})}),"\n",(0,t.jsx)(n.h2,{id:"\u52a8\u6001-prompt-\u6784\u5efa",children:"\u52a8\u6001 Prompt \u6784\u5efa"}),"\n",(0,t.jsx)(n.p,{children:"\u4f7f\u7528\u6784\u5efa\u5668\u6a21\u5f0f\u52a8\u6001\u6784\u5efa\u590d\u6742 Prompt\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'@Service\npublic class DynamicPromptService {\n\n    public Prompt buildCodeReviewPrompt(String code, List<String> focusAreas) {\n        StringBuilder sb = new StringBuilder();\n        sb.append("\u8bf7\u5bf9\u4ee5\u4e0b\u4ee3\u7801\u8fdb\u884c\u5ba1\u67e5\uff1a\\n\\n```java\\n");\n        sb.append(code);\n        sb.append("\\n```\\n\\n");\n        sb.append("\u91cd\u70b9\u5173\u6ce8\u4ee5\u4e0b\u65b9\u9762\uff1a\\n");\n\n        for (int i = 0; i < focusAreas.size(); i++) {\n            sb.append(String.format("%d. %s\\n", i + 1, focusAreas.get(i)));\n        }\n\n        return new Prompt(new UserMessage(sb.toString()));\n    }\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"\u4e0b\u4e00\u6b65",children:"\u4e0b\u4e00\u6b65"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"./output-parsing",children:"\u8f93\u51fa\u89e3\u6790"})," - \u5c06 AI \u54cd\u5e94\u8f6c\u6362\u4e3a\u7ed3\u6784\u5316\u6570\u636e"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"./rag",children:"RAG \u5e94\u7528"})," - \u6784\u5efa\u68c0\u7d22\u589e\u5f3a\u751f\u6210\u5e94\u7528"]}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}}}]);