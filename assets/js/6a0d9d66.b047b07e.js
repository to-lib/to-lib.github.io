"use strict";(globalThis.webpackChunkto_lib_github_io=globalThis.webpackChunkto_lib_github_io||[]).push([[35907],{48885:(n,e,i)=>{i.d(e,{R:()=>l,x:()=>o});var r=i(99378);const t={},a=r.createContext(t);function l(n){const e=r.useContext(a);return r.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:l(n.components),r.createElement(a.Provider,{value:e},n.children)}},74159:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>s,contentTitle:()=>o,default:()=>u,frontMatter:()=>l,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"java/performance","title":"\u6027\u80fd\u4f18\u5316","description":"\u6027\u80fd\u4f18\u5316\u662f\u63d0\u5347\u5e94\u7528\u54cd\u5e94\u901f\u5ea6\u548c\u541e\u5410\u91cf\u7684\u5173\u952e\u3002\u672c\u6587\u4ecb\u7ecd Java \u5e94\u7528\u6027\u80fd\u4f18\u5316\u7684\u5e38\u89c1\u6280\u5de7\u548c\u6700\u4f73\u5b9e\u8df5\u3002","source":"@site/docs/java/performance.md","sourceDirName":"java","slug":"/java/performance","permalink":"/docs/java/performance","draft":false,"unlisted":false,"editUrl":"https://github.com/to-lib/to-lib.github.io/tree/main/docs/java/performance.md","tags":[],"version":"current","sidebarPosition":14,"frontMatter":{"sidebar_position":14,"title":"\u6027\u80fd\u4f18\u5316"},"sidebar":"java","previous":{"title":"JVM \u57fa\u7840","permalink":"/docs/java/jvm-basics"},"next":{"title":"JDK 8 \u65b0\u7279\u6027","permalink":"/docs/java/jdk8-features"}}');var t=i(22714),a=i(48885);const l={sidebar_position:14,title:"\u6027\u80fd\u4f18\u5316"},o="Java \u6027\u80fd\u4f18\u5316",s={},c=[{value:"\u4ee3\u7801\u5c42\u9762\u4f18\u5316",id:"\u4ee3\u7801\u5c42\u9762\u4f18\u5316",level:2},{value:"1. \u5b57\u7b26\u4e32\u4f18\u5316",id:"1-\u5b57\u7b26\u4e32\u4f18\u5316",level:3},{value:"2. \u96c6\u5408\u4f18\u5316",id:"2-\u96c6\u5408\u4f18\u5316",level:3},{value:"3. \u5faa\u73af\u4f18\u5316",id:"3-\u5faa\u73af\u4f18\u5316",level:3},{value:"4. \u5bf9\u8c61\u521b\u5efa\u4f18\u5316",id:"4-\u5bf9\u8c61\u521b\u5efa\u4f18\u5316",level:3},{value:"5. \u5f02\u5e38\u5904\u7406\u4f18\u5316",id:"5-\u5f02\u5e38\u5904\u7406\u4f18\u5316",level:3},{value:"\u5e76\u53d1\u4f18\u5316",id:"\u5e76\u53d1\u4f18\u5316",level:2},{value:"1. \u7ebf\u7a0b\u6c60\u4f18\u5316",id:"1-\u7ebf\u7a0b\u6c60\u4f18\u5316",level:3},{value:"2. \u9501\u4f18\u5316",id:"2-\u9501\u4f18\u5316",level:3},{value:"3. \u5e76\u53d1\u96c6\u5408",id:"3-\u5e76\u53d1\u96c6\u5408",level:3},{value:"IO \u4f18\u5316",id:"io-\u4f18\u5316",level:2},{value:"1. \u7f13\u51b2\u6d41",id:"1-\u7f13\u51b2\u6d41",level:3},{value:"2. \u5185\u5b58\u6620\u5c04\u6587\u4ef6",id:"2-\u5185\u5b58\u6620\u5c04\u6587\u4ef6",level:3},{value:"\u6570\u636e\u5e93\u4f18\u5316",id:"\u6570\u636e\u5e93\u4f18\u5316",level:2},{value:"1. \u8fde\u63a5\u6c60",id:"1-\u8fde\u63a5\u6c60",level:3},{value:"2. \u6279\u91cf\u64cd\u4f5c",id:"2-\u6279\u91cf\u64cd\u4f5c",level:3},{value:"\u7f13\u5b58\u4f18\u5316",id:"\u7f13\u5b58\u4f18\u5316",level:2},{value:"1. \u672c\u5730\u7f13\u5b58",id:"1-\u672c\u5730\u7f13\u5b58",level:3},{value:"2. \u7f13\u5b58\u7b56\u7565",id:"2-\u7f13\u5b58\u7b56\u7565",level:3},{value:"\u6027\u80fd\u76d1\u63a7\u548c\u5206\u6790",id:"\u6027\u80fd\u76d1\u63a7\u548c\u5206\u6790",level:2},{value:"1. \u6027\u80fd\u8ba1\u65f6",id:"1-\u6027\u80fd\u8ba1\u65f6",level:3},{value:"2. \u6027\u80fd\u5206\u6790\u5de5\u5177",id:"2-\u6027\u80fd\u5206\u6790\u5de5\u5177",level:3},{value:"\u6700\u4f73\u5b9e\u8df5\u603b\u7ed3",id:"\u6700\u4f73\u5b9e\u8df5\u603b\u7ed3",level:2},{value:"\u4ee3\u7801\u4f18\u5316\u6e05\u5355",id:"\u4ee3\u7801\u4f18\u5316\u6e05\u5355",level:3},{value:"\u5e76\u53d1\u4f18\u5316\u6e05\u5355",id:"\u5e76\u53d1\u4f18\u5316\u6e05\u5355",level:3},{value:"\u8d44\u6e90\u4f18\u5316\u6e05\u5355",id:"\u8d44\u6e90\u4f18\u5316\u6e05\u5355",level:3},{value:"\u603b\u7ed3",id:"\u603b\u7ed3",level:2}];function d(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"java-\u6027\u80fd\u4f18\u5316",children:"Java \u6027\u80fd\u4f18\u5316"})}),"\n",(0,t.jsx)(e.p,{children:"\u6027\u80fd\u4f18\u5316\u662f\u63d0\u5347\u5e94\u7528\u54cd\u5e94\u901f\u5ea6\u548c\u541e\u5410\u91cf\u7684\u5173\u952e\u3002\u672c\u6587\u4ecb\u7ecd Java \u5e94\u7528\u6027\u80fd\u4f18\u5316\u7684\u5e38\u89c1\u6280\u5de7\u548c\u6700\u4f73\u5b9e\u8df5\u3002"}),"\n",(0,t.jsx)(e.h2,{id:"\u4ee3\u7801\u5c42\u9762\u4f18\u5316",children:"\u4ee3\u7801\u5c42\u9762\u4f18\u5316"}),"\n",(0,t.jsx)(e.h3,{id:"1-\u5b57\u7b26\u4e32\u4f18\u5316",children:"1. \u5b57\u7b26\u4e32\u4f18\u5316"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-java",children:'public class StringOptimization {\n    // \u274c \u4e0d\u597d\uff1a\u9891\u7e41\u5b57\u7b26\u4e32\u62fc\u63a5\n    public String badConcat(String[] words) {\n        String result = "";\n        for (String word : words) {\n            result += word;  // \u6bcf\u6b21\u90fd\u521b\u5efa\u65b0\u5bf9\u8c61\n        }\n        return result;\n    }\n    \n    // \u2705 \u597d\uff1a\u4f7f\u7528 StringBuilder\n    public String goodConcat(String[] words) {\n        StringBuilder sb = new StringBuilder();\n        for (String word : words) {\n            sb.append(word);\n        }\n        return sb.toString();\n    }\n    \n    // \u2705 \u66f4\u597d\uff1a\u4f7f\u7528 String.join\uff08Java 8+\uff09\n    public String betterConcat(String[] words) {\n        return String.join("", words);\n    }\n    \n    // \u6027\u80fd\u5bf9\u6bd4\n    public static void main(String[] args) {\n        String[] words = new String[10000];\n        for (int i = 0; i < words.length; i++) {\n            words[i] = "word" + i;\n        }\n        \n        StringOptimization opt = new StringOptimization();\n        \n        long start = System.currentTimeMillis();\n        opt.badConcat(words);\n        System.out.println("String +: " + (System.currentTimeMillis() - start) + "ms");\n        \n        start = System.currentTimeMillis();\n        opt.goodConcat(words);\n        System.out.println("StringBuilder: " + (System.currentTimeMillis() - start) + "ms");\n        \n        start = System.currentTimeMillis();\n        opt.betterConcat(words);\n        System.out.println("String.join: " + (System.currentTimeMillis() - start) + "ms");\n    }\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"2-\u96c6\u5408\u4f18\u5316",children:"2. \u96c6\u5408\u4f18\u5316"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-java",children:'import java.util.*;\n\npublic class CollectionOptimization {\n    // \u274c \u4e0d\u597d\uff1a\u672a\u6307\u5b9a\u521d\u59cb\u5bb9\u91cf\n    public List<String> badList() {\n        List<String> list = new ArrayList<>();  // \u9ed8\u8ba4\u5bb9\u91cf10\n        for (int i = 0; i < 1000; i++) {\n            list.add("item" + i);  // \u591a\u6b21\u6269\u5bb9\n        }\n        return list;\n    }\n    \n    // \u2705 \u597d\uff1a\u6307\u5b9a\u521d\u59cb\u5bb9\u91cf\n    public List<String> goodList() {\n        List<String> list = new ArrayList<>(1000);  // \u9884\u5206\u914d\u5bb9\u91cf\n        for (int i = 0; i < 1000; i++) {\n            list.add("item" + i);\n        }\n        return list;\n    }\n    \n    // \u2705 \u9009\u62e9\u5408\u9002\u7684\u96c6\u5408\u7c7b\u578b\n    public void rightCollection() {\n        // \u9891\u7e41\u67e5\u8be2\uff1aArrayList\n        List<String> queryList = new ArrayList<>();\n        \n        // \u9891\u7e41\u63d2\u5165\u5220\u9664\uff1aLinkedList\n        List<String> modifyList = new LinkedList<>();\n        \n        // \u53bb\u91cd\uff1aHashSet\n        Set<String> uniqueSet = new HashSet<>();\n        \n        // \u6709\u5e8f\u53bb\u91cd\uff1aTreeSet\n        Set<String> sortedSet = new TreeSet<>();\n        \n        // \u952e\u503c\u5bf9\uff1aHashMap\n        Map<String, Integer> map = new HashMap<>();\n    }\n    \n    // \u2705 \u4f7f\u7528 EnumSet \u548c EnumMap\n    enum Color { RED, GREEN, BLUE }\n    \n    public void enumCollections() {\n        // EnumSet \u6bd4 HashSet \u66f4\u9ad8\u6548\n        Set<Color> colors = EnumSet.of(Color.RED, Color.BLUE);\n        \n        // EnumMap \u6bd4 HashMap \u66f4\u9ad8\u6548\n        Map<Color, String> colorNames = new EnumMap<>(Color.class);\n        colorNames.put(Color.RED, "\u7ea2\u8272");\n    }\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"3-\u5faa\u73af\u4f18\u5316",children:"3. \u5faa\u73af\u4f18\u5316"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-java",children:"import java.util.*;\n\npublic class LoopOptimization {\n    private List<String> list = new ArrayList<>();\n    \n    // \u274c \u4e0d\u597d\uff1a\u6bcf\u6b21\u90fd\u8ba1\u7b97 size()\n    public void badLoop() {\n        for (int i = 0; i < list.size(); i++) {\n            process(list.get(i));\n        }\n    }\n    \n    // \u2705 \u597d\uff1a\u7f13\u5b58 size()\n    public void goodLoop() {\n        int size = list.size();\n        for (int i = 0; i < size; i++) {\n            process(list.get(i));\n        }\n    }\n    \n    // \u2705 \u66f4\u597d\uff1a\u4f7f\u7528\u589e\u5f3a for \u5faa\u73af\n    public void betterLoop() {\n        for (String item : list) {\n            process(item);\n        }\n    }\n    \n    // \u2705 \u6700\u597d\uff1a\u4f7f\u7528 forEach\uff08Java 8+\uff09\n    public void bestLoop() {\n        list.forEach(this::process);\n    }\n    \n    private void process(String item) {\n        // \u5904\u7406\u903b\u8f91\n    }\n}\n"})}),"\n",(0,t.jsx)(e.h3,{id:"4-\u5bf9\u8c61\u521b\u5efa\u4f18\u5316",children:"4. \u5bf9\u8c61\u521b\u5efa\u4f18\u5316"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-java",children:'public class ObjectCreationOptimization {\n    // \u274c \u4e0d\u597d\uff1a\u9891\u7e41\u521b\u5efa\u5bf9\u8c61\n    public void badCreation() {\n        for (int i = 0; i < 10000; i++) {\n            String str = new String("hello");  // \u4e0d\u5fc5\u8981\u7684\u5bf9\u8c61\u521b\u5efa\n            Integer num = new Integer(100);    // \u5e94\u8be5\u7528 valueOf\n        }\n    }\n    \n    // \u2705 \u597d\uff1a\u590d\u7528\u5bf9\u8c61\n    public void goodCreation() {\n        String str = "hello";  // \u5b57\u7b26\u4e32\u5e38\u91cf\u6c60\n        for (int i = 0; i < 10000; i++) {\n            Integer num = Integer.valueOf(100);  // \u4f7f\u7528\u7f13\u5b58\n        }\n    }\n    \n    // \u2705 \u5bf9\u8c61\u6c60\u6a21\u5f0f\n    private static final List<StringBuilder> builderPool = new ArrayList<>();\n    \n    public StringBuilder borrowBuilder() {\n        synchronized (builderPool) {\n            if (!builderPool.isEmpty()) {\n                return builderPool.remove(builderPool.size() - 1);\n            }\n        }\n        return new StringBuilder();\n    }\n    \n    public void returnBuilder(StringBuilder builder) {\n        builder.setLength(0);  // \u6e05\u7a7a\n        synchronized (builderPool) {\n            builderPool.add(builder);\n        }\n    }\n    \n    // \u2705 \u4f7f\u7528\u4eab\u5143\u6a21\u5f0f\n    public void flyweightPattern() {\n        // Integer \u7f13\u5b58 -128 \u5230 127\n        Integer a = 100;\n        Integer b = 100;\n        System.out.println(a == b);  // true\uff08\u540c\u4e00\u5bf9\u8c61\uff09\n        \n        Integer c = 1000;\n        Integer d = 1000;\n        System.out.println(c == d);  // false\uff08\u4e0d\u540c\u5bf9\u8c61\uff09\n    }\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"5-\u5f02\u5e38\u5904\u7406\u4f18\u5316",children:"5. \u5f02\u5e38\u5904\u7406\u4f18\u5316"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-java",children:'public class ExceptionOptimization {\n    // \u274c \u4e0d\u597d\uff1a\u7528\u5f02\u5e38\u63a7\u5236\u6d41\u7a0b\n    public int badParse(String str) {\n        try {\n            return Integer.parseInt(str);\n        } catch (NumberFormatException e) {\n            return 0;  // \u5f02\u5e38\u5f00\u9500\u5927\n        }\n    }\n    \n    // \u2705 \u597d\uff1a\u63d0\u524d\u68c0\u67e5\n    public int goodParse(String str) {\n        if (str == null || str.isEmpty()) {\n            return 0;\n        }\n        try {\n            return Integer.parseInt(str);\n        } catch (NumberFormatException e) {\n            return 0;\n        }\n    }\n    \n    // \u2705 \u66f4\u597d\uff1a\u4f7f\u7528\u6b63\u5219\u9884\u68c0\u67e5\n    public int betterParse(String str) {\n        if (str == null || !str.matches("-?\\\\d+")) {\n            return 0;\n        }\n        return Integer.parseInt(str);\n    }\n}\n'})}),"\n",(0,t.jsx)(e.h2,{id:"\u5e76\u53d1\u4f18\u5316",children:"\u5e76\u53d1\u4f18\u5316"}),"\n",(0,t.jsx)(e.h3,{id:"1-\u7ebf\u7a0b\u6c60\u4f18\u5316",children:"1. \u7ebf\u7a0b\u6c60\u4f18\u5316"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-java",children:"import java.util.concurrent.*;\n\npublic class ThreadPoolOptimization {\n    // \u274c \u4e0d\u597d\uff1a\u6bcf\u6b21\u521b\u5efa\u7ebf\u7a0b\n    public void badThreading() {\n        for (int i = 0; i < 100; i++) {\n            new Thread(() -> doWork()).start();\n        }\n    }\n    \n    // \u2705 \u597d\uff1a\u4f7f\u7528\u7ebf\u7a0b\u6c60\n    private final ExecutorService executor = Executors.newFixedThreadPool(10);\n    \n    public void goodThreading() {\n        for (int i = 0; i < 100; i++) {\n            executor.submit(() -> doWork());\n        }\n    }\n    \n    // \u2705 \u66f4\u597d\uff1a\u81ea\u5b9a\u4e49\u7ebf\u7a0b\u6c60\u53c2\u6570\n    private final ExecutorService customExecutor = new ThreadPoolExecutor(\n        10,                      // \u6838\u5fc3\u7ebf\u7a0b\u6570\n        20,                      // \u6700\u5927\u7ebf\u7a0b\u6570\n        60L,                     // \u7a7a\u95f2\u7ebf\u7a0b\u5b58\u6d3b\u65f6\u95f4\n        TimeUnit.SECONDS,\n        new LinkedBlockingQueue<>(100),  // \u4efb\u52a1\u961f\u5217\n        new ThreadPoolExecutor.CallerRunsPolicy()  // \u62d2\u7edd\u7b56\u7565\n    );\n    \n    // \u2705 \u9488\u5bf9\u4e0d\u540c\u573a\u666f\u9009\u62e9\u7ebf\u7a0b\u6c60\n    public void chooseRightPool() {\n        // CPU\u5bc6\u96c6\u578b\uff1a\u7ebf\u7a0b\u6570 = CPU\u6838\u5fc3\u6570 + 1\n        int cpuCount = Runtime.getRuntime().availableProcessors();\n        ExecutorService cpuPool = Executors.newFixedThreadPool(cpuCount + 1);\n        \n        // IO\u5bc6\u96c6\u578b\uff1a\u7ebf\u7a0b\u6570 = CPU\u6838\u5fc3\u6570 * 2\n        ExecutorService ioPool = Executors.newFixedThreadPool(cpuCount * 2);\n        \n        // \u5b9a\u65f6\u4efb\u52a1\n        ScheduledExecutorService scheduledPool = \n            Executors.newScheduledThreadPool(5);\n    }\n    \n    private void doWork() {\n        // \u4e1a\u52a1\u903b\u8f91\n    }\n}\n"})}),"\n",(0,t.jsx)(e.h3,{id:"2-\u9501\u4f18\u5316",children:"2. \u9501\u4f18\u5316"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-java",children:'import java.util.concurrent.locks.*;\n\npublic class LockOptimization {\n    private int count = 0;\n    \n    // \u274c \u4e0d\u597d\uff1a\u7c97\u7c92\u5ea6\u9501\n    public synchronized void badIncrement() {\n        // \u5927\u91cf\u975e\u7ebf\u7a0b\u5b89\u5168\u64cd\u4f5c\n        String temp = "temp";\n        int x = 100;\n        \n        // \u53ea\u6709\u8fd9\u91cc\u9700\u8981\u540c\u6b65\n        count++;\n    }\n    \n    // \u2705 \u597d\uff1a\u7ec6\u7c92\u5ea6\u9501\n    public void goodIncrement() {\n        // \u975e\u7ebf\u7a0b\u5b89\u5168\u64cd\u4f5c\n        String temp = "temp";\n        int x = 100;\n        \n        // \u53ea\u9501\u5fc5\u8981\u90e8\u5206\n        synchronized (this) {\n            count++;\n        }\n    }\n    \n    // \u2705 \u4f7f\u7528\u8bfb\u5199\u9501\n    private final ReadWriteLock rwLock = new ReentrantReadWriteLock();\n    private Map<String, String> cache = new HashMap<>();\n    \n    public String read(String key) {\n        rwLock.readLock().lock();  // \u8bfb\u9501\n        try {\n            return cache.get(key);\n        } finally {\n            rwLock.readLock().unlock();\n        }\n    }\n    \n    public void write(String key, String value) {\n        rwLock.writeLock().lock();  // \u5199\u9501\n        try {\n            cache.put(key, value);\n        } finally {\n            rwLock.writeLock().unlock();\n        }\n    }\n    \n    // \u2705 \u4f7f\u7528\u539f\u5b50\u7c7b\n    private final AtomicInteger atomicCount = new AtomicInteger(0);\n    \n    public void atomicIncrement() {\n        atomicCount.incrementAndGet();  // \u65e0\u9501\uff0cCAS\u64cd\u4f5c\n    }\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"3-\u5e76\u53d1\u96c6\u5408",children:"3. \u5e76\u53d1\u96c6\u5408"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-java",children:"import java.util.concurrent.*;\n\npublic class ConcurrentCollectionOptimization {\n    // \u274c \u4e0d\u597d\uff1a\u540c\u6b65\u96c6\u5408\n    private final Map<String, String> syncMap = \n        Collections.synchronizedMap(new HashMap<>());\n    \n    // \u2705 \u597d\uff1a\u5e76\u53d1\u96c6\u5408\n    private final ConcurrentHashMap<String, String> concurrentMap = \n        new ConcurrentHashMap<>();\n    \n    // \u2705 \u9009\u62e9\u5408\u9002\u7684\u5e76\u53d1\u96c6\u5408\n    public void rightConcurrentCollection() {\n        // \u5e76\u53d1HashMap\n        ConcurrentMap<String, Integer> map = new ConcurrentHashMap<>();\n        \n        // \u5e76\u53d1\u961f\u5217\n        Queue<String> queue = new ConcurrentLinkedQueue<>();\n        \n        // \u963b\u585e\u961f\u5217\n        BlockingQueue<String> blockingQueue = new LinkedBlockingQueue<>();\n        \n        // \u8df3\u8868\u5b9e\u73b0\u7684\u6709\u5e8fMap\n        ConcurrentNavigableMap<String, Integer> skipListMap = \n            new ConcurrentSkipListMap<>();\n    }\n}\n"})}),"\n",(0,t.jsx)(e.h2,{id:"io-\u4f18\u5316",children:"IO \u4f18\u5316"}),"\n",(0,t.jsx)(e.h3,{id:"1-\u7f13\u51b2\u6d41",children:"1. \u7f13\u51b2\u6d41"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-java",children:"import java.io.*;\n\npublic class IOOptimization {\n    // \u274c \u4e0d\u597d\uff1a\u65e0\u7f13\u51b2\n    public void badIO(String filename) throws IOException {\n        try (FileInputStream fis = new FileInputStream(filename)) {\n            int data;\n            while ((data = fis.read()) != -1) {  // \u6bcf\u6b21\u8bfb\u4e00\u4e2a\u5b57\u8282\n                process(data);\n            }\n        }\n    }\n    \n    // \u2705 \u597d\uff1a\u4f7f\u7528\u7f13\u51b2\u6d41\n    public void goodIO(String filename) throws IOException {\n        try (BufferedInputStream bis = new BufferedInputStream(\n                new FileInputStream(filename))) {\n            byte[] buffer = new byte[8192];\n            int length;\n            while ((length = bis.read(buffer)) != -1) {\n                processBuffer(buffer, length);\n            }\n        }\n    }\n    \n    // \u2705 \u66f4\u597d\uff1a\u4f7f\u7528 NIO\n    public void nioIO(String filename) throws IOException {\n        try (FileChannel channel = FileChannel.open(\n                java.nio.file.Paths.get(filename))) {\n            java.nio.ByteBuffer buffer = java.nio.ByteBuffer.allocate(8192);\n            while (channel.read(buffer) != -1) {\n                buffer.flip();\n                processBuffer(buffer);\n                buffer.clear();\n            }\n        }\n    }\n    \n    private void process(int data) {}\n    private void processBuffer(byte[] buffer, int length) {}\n    private void processBuffer(java.nio.ByteBuffer buffer) {}\n}\n"})}),"\n",(0,t.jsx)(e.h3,{id:"2-\u5185\u5b58\u6620\u5c04\u6587\u4ef6",children:"2. \u5185\u5b58\u6620\u5c04\u6587\u4ef6"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-java",children:'import java.io.*;\nimport java.nio.*;\nimport java.nio.channels.*;\n\npublic class MemoryMappedFileOptimization {\n    public void processLargeFile(String filename) throws IOException {\n        try (RandomAccessFile file = new RandomAccessFile(filename, "r");\n             FileChannel channel = file.getChannel()) {\n            \n            // \u5185\u5b58\u6620\u5c04\u6587\u4ef6\n            MappedByteBuffer buffer = channel.map(\n                FileChannel.MapMode.READ_ONLY,\n                0,\n                channel.size()\n            );\n            \n            // \u76f4\u63a5\u5728\u5185\u5b58\u4e2d\u64cd\u4f5c\n            while (buffer.hasRemaining()) {\n                byte b = buffer.get();\n                // \u5904\u7406\u6570\u636e\n            }\n        }\n    }\n}\n'})}),"\n",(0,t.jsx)(e.h2,{id:"\u6570\u636e\u5e93\u4f18\u5316",children:"\u6570\u636e\u5e93\u4f18\u5316"}),"\n",(0,t.jsx)(e.h3,{id:"1-\u8fde\u63a5\u6c60",children:"1. \u8fde\u63a5\u6c60"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-java",children:'import javax.sql.DataSource;\nimport com.zaxxer.hikari.HikariConfig;\nimport com.zaxxer.hikari.HikariDataSource;\n\npublic class DatabaseOptimization {\n    // \u2705 \u4f7f\u7528\u8fde\u63a5\u6c60\n    public DataSource createDataSource() {\n        HikariConfig config = new HikariConfig();\n        config.setJdbcUrl("jdbc:mysql://localhost:3306/mydb");\n        config.setUsername("user");\n        config.setPassword("password");\n        \n        // \u8fde\u63a5\u6c60\u914d\u7f6e\n        config.setMaximumPoolSize(20);\n        config.setMinimumIdle(5);\n        config.setConnectionTimeout(30000);\n        config.setIdleTimeout(600000);\n        \n        return new HikariDataSource(config);\n    }\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"2-\u6279\u91cf\u64cd\u4f5c",children:"2. \u6279\u91cf\u64cd\u4f5c"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-java",children:'import java.sql.*;\n\npublic class BatchOperationOptimization {\n    // \u274c \u4e0d\u597d\uff1a\u9010\u6761\u63d2\u5165\n    public void badBatchInsert(Connection conn, List<User> users) \n            throws SQLException {\n        String sql = "INSERT INTO users (name, age) VALUES (?, ?)";\n        try (PreparedStatement stmt = conn.prepareStatement(sql)) {\n            for (User user : users) {\n                stmt.setString(1, user.getName());\n                stmt.setInt(2, user.getAge());\n                stmt.executeUpdate();  // \u6bcf\u6b21\u90fd\u6267\u884c\n            }\n        }\n    }\n    \n    // \u2705 \u597d\uff1a\u6279\u91cf\u63d2\u5165\n    public void goodBatchInsert(Connection conn, List<User> users) \n            throws SQLException {\n        String sql = "INSERT INTO users (name, age) VALUES (?, ?)";\n        try (PreparedStatement stmt = conn.prepareStatement(sql)) {\n            for (User user : users) {\n                stmt.setString(1, user.getName());\n                stmt.setInt(2, user.getAge());\n                stmt.addBatch();  // \u6dfb\u52a0\u5230\u6279\u5904\u7406\n            }\n            stmt.executeBatch();  // \u4e00\u6b21\u6027\u6267\u884c\n        }\n    }\n    \n    static class User {\n        private String name;\n        private int age;\n        public String getName() { return name; }\n        public int getAge() { return age; }\n    }\n}\n'})}),"\n",(0,t.jsx)(e.h2,{id:"\u7f13\u5b58\u4f18\u5316",children:"\u7f13\u5b58\u4f18\u5316"}),"\n",(0,t.jsx)(e.h3,{id:"1-\u672c\u5730\u7f13\u5b58",children:"1. \u672c\u5730\u7f13\u5b58"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-java",children:"import java.util.concurrent.*;\n\npublic class LocalCacheOptimization {\n    // \u2705 \u4f7f\u7528 Caffeine \u7f13\u5b58\n    private final Cache<String, Object> cache = Caffeine.newBuilder()\n        .maximumSize(10000)\n        .expireAfterWrite(10, TimeUnit.MINUTES)\n        .build();\n    \n    public Object getData(String key) {\n        return cache.get(key, k -> loadFromDatabase(k));\n    }\n    \n    private Object loadFromDatabase(String key) {\n        // \u4ece\u6570\u636e\u5e93\u52a0\u8f7d\u6570\u636e\n        return new Object();\n    }\n}\n"})}),"\n",(0,t.jsx)(e.h3,{id:"2-\u7f13\u5b58\u7b56\u7565",children:"2. \u7f13\u5b58\u7b56\u7565"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-java",children:"public class CacheStrategy {\n    // \u2705 LRU \u7f13\u5b58\n    private final Map<String, Object> lruCache = \n        new LinkedHashMap<String, Object>(100, 0.75f, true) {\n            @Override\n            protected boolean removeEldestEntry(Map.Entry eldest) {\n                return size() > 100;\n            }\n        };\n    \n    // \u2705 \u591a\u7ea7\u7f13\u5b58\n    public Object getWithMultiLevelCache(String key) {\n        // 1. \u672c\u5730\u7f13\u5b58\n        Object value = localCache.get(key);\n        if (value != null) return value;\n        \n        // 2. Redis \u7f13\u5b58\n        value = redisCache.get(key);\n        if (value != null) {\n            localCache.put(key, value);\n            return value;\n        }\n        \n        // 3. \u6570\u636e\u5e93\n        value = database.get(key);\n        redisCache.put(key, value);\n        localCache.put(key, value);\n        return value;\n    }\n}\n"})}),"\n",(0,t.jsx)(e.h2,{id:"\u6027\u80fd\u76d1\u63a7\u548c\u5206\u6790",children:"\u6027\u80fd\u76d1\u63a7\u548c\u5206\u6790"}),"\n",(0,t.jsx)(e.h3,{id:"1-\u6027\u80fd\u8ba1\u65f6",children:"1. \u6027\u80fd\u8ba1\u65f6"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-java",children:'public class PerformanceTiming {\n    public void measurePerformance() {\n        // \u7b80\u5355\u8ba1\u65f6\n        long start = System.currentTimeMillis();\n        doWork();\n        long end = System.currentTimeMillis();\n        System.out.println("\u8017\u65f6: " + (end - start) + "ms");\n        \n        // \u7eb3\u79d2\u7ea7\u8ba1\u65f6\n        long nanoStart = System.nanoTime();\n        doWork();\n        long nanoEnd = System.nanoTime();\n        System.out.println("\u8017\u65f6: " + (nanoEnd - nanoStart) + "ns");\n    }\n    \n    // \u4f7f\u7528 StopWatch\n    public void stopWatchTiming() {\n        org.springframework.util.StopWatch sw = \n            new org.springframework.util.StopWatch();\n        \n        sw.start("\u4efb\u52a11");\n        doWork();\n        sw.stop();\n        \n        sw.start("\u4efb\u52a12");\n        doWork();\n        sw.stop();\n        \n        System.out.println(sw.prettyPrint());\n    }\n    \n    private void doWork() {\n        // \u4e1a\u52a1\u903b\u8f91\n    }\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"2-\u6027\u80fd\u5206\u6790\u5de5\u5177",children:"2. \u6027\u80fd\u5206\u6790\u5de5\u5177"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-java",children:"/**\n * \u5e38\u7528\u6027\u80fd\u5206\u6790\u5de5\u5177\uff1a\n * \n * 1. JProfiler - \u5546\u4e1a\u5de5\u5177\uff0c\u529f\u80fd\u5f3a\u5927\n * 2. YourKit - \u5546\u4e1a\u5de5\u5177\uff0c\u6613\u7528\n * 3. VisualVM - \u514d\u8d39\uff0cJDK\u81ea\u5e26\n * 4. JMC (Java Mission Control) - Oracle\u63d0\u4f9b\n * 5. Arthas - \u963f\u91cc\u5f00\u6e90\u7684\u8bca\u65ad\u5de5\u5177\n * \n * \u4f7f\u7528\u793a\u4f8b\uff1a\n * // VisualVM\n * jvisualvm\n * \n * // Arthas\n * java -jar arthas-boot.jar\n * \n * // JMC\n * jmc\n */\n"})}),"\n",(0,t.jsx)(e.h2,{id:"\u6700\u4f73\u5b9e\u8df5\u603b\u7ed3",children:"\u6700\u4f73\u5b9e\u8df5\u603b\u7ed3"}),"\n",(0,t.jsx)(e.h3,{id:"\u4ee3\u7801\u4f18\u5316\u6e05\u5355",children:"\u4ee3\u7801\u4f18\u5316\u6e05\u5355"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"\u2705 \u907f\u514d\u4e0d\u5fc5\u8981\u7684\u5bf9\u8c61\u521b\u5efa"}),"\n",(0,t.jsx)(e.li,{children:"\u2705 \u4f7f\u7528 StringBuilder \u62fc\u63a5\u5b57\u7b26\u4e32"}),"\n",(0,t.jsx)(e.li,{children:"\u2705 \u4e3a\u96c6\u5408\u6307\u5b9a\u521d\u59cb\u5bb9\u91cf"}),"\n",(0,t.jsx)(e.li,{children:"\u2705 \u9009\u62e9\u5408\u9002\u7684\u6570\u636e\u7ed3\u6784"}),"\n",(0,t.jsx)(e.li,{children:"\u2705 \u4f7f\u7528\u57fa\u672c\u7c7b\u578b\u800c\u975e\u5305\u88c5\u7c7b"}),"\n",(0,t.jsx)(e.li,{children:"\u2705 \u907f\u514d\u5728\u5faa\u73af\u4e2d\u521b\u5efa\u5bf9\u8c61"}),"\n",(0,t.jsx)(e.li,{children:"\u2705 \u53ca\u65f6\u91ca\u653e\u8d44\u6e90\uff08\u4f7f\u7528 try-with-resources\uff09"}),"\n",(0,t.jsx)(e.li,{children:"\u2705 \u4f7f\u7528\u5c40\u90e8\u53d8\u91cf\u800c\u975e\u6210\u5458\u53d8\u91cf"}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"\u5e76\u53d1\u4f18\u5316\u6e05\u5355",children:"\u5e76\u53d1\u4f18\u5316\u6e05\u5355"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"\u2705 \u4f7f\u7528\u7ebf\u7a0b\u6c60\u800c\u975e\u76f4\u63a5\u521b\u5efa\u7ebf\u7a0b"}),"\n",(0,t.jsx)(e.li,{children:"\u2705 \u9009\u62e9\u5408\u9002\u7684\u9501\u7c92\u5ea6"}),"\n",(0,t.jsx)(e.li,{children:"\u2705 \u4f7f\u7528\u5e76\u53d1\u96c6\u5408"}),"\n",(0,t.jsx)(e.li,{children:"\u2705 \u8003\u8651\u4f7f\u7528\u65e0\u9501\u7b97\u6cd5\uff08CAS\uff09"}),"\n",(0,t.jsx)(e.li,{children:"\u2705 \u907f\u514d\u9501\u7ade\u4e89"}),"\n",(0,t.jsx)(e.li,{children:"\u2705 \u51cf\u5c11\u9501\u6301\u6709\u65f6\u95f4"}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"\u8d44\u6e90\u4f18\u5316\u6e05\u5355",children:"\u8d44\u6e90\u4f18\u5316\u6e05\u5355"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"\u2705 \u4f7f\u7528\u8fde\u63a5\u6c60"}),"\n",(0,t.jsx)(e.li,{children:"\u2705 \u4f7f\u7528\u7f13\u51b2\u6d41"}),"\n",(0,t.jsx)(e.li,{children:"\u2705 \u6279\u91cf\u64cd\u4f5c\u6570\u636e\u5e93"}),"\n",(0,t.jsx)(e.li,{children:"\u2705 \u5408\u7406\u4f7f\u7528\u7f13\u5b58"}),"\n",(0,t.jsx)(e.li,{children:"\u2705 \u907f\u514d\u5185\u5b58\u6cc4\u6f0f"}),"\n",(0,t.jsx)(e.li,{children:"\u2705 \u53ca\u65f6\u5173\u95ed\u6d41\u548c\u8fde\u63a5"}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"\u603b\u7ed3",children:"\u603b\u7ed3"}),"\n",(0,t.jsx)(e.p,{children:"\u6027\u80fd\u4f18\u5316\u9700\u8981\uff1a"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"\u2705 \u5148\u6d4b\u91cf\u540e\u4f18\u5316\uff08\u4e0d\u8981\u8fc7\u65e9\u4f18\u5316\uff09"}),"\n",(0,t.jsx)(e.li,{children:"\u2705 \u627e\u5230\u6027\u80fd\u74f6\u9888"}),"\n",(0,t.jsx)(e.li,{children:"\u2705 \u4f7f\u7528\u5408\u9002\u7684\u5de5\u5177"}),"\n",(0,t.jsx)(e.li,{children:"\u2705 \u6743\u8861\u53ef\u8bfb\u6027\u548c\u6027\u80fd"}),"\n",(0,t.jsx)(e.li,{children:"\u2705 \u6301\u7eed\u76d1\u63a7\u548c\u6539\u8fdb"}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:["\u638c\u63e1\u8fd9\u4e9b\u4f18\u5316\u6280\u5de7\u53ef\u4ee5\u663e\u8457\u63d0\u5347 Java \u5e94\u7528\u7684\u6027\u80fd\u3002\u5efa\u8bae\u7ed3\u5408 ",(0,t.jsx)(e.a,{href:"/docs/java/jvm-basics",children:"JVM \u57fa\u7840"})," \u548c\u5b9e\u9645\u4e1a\u52a1\u573a\u666f\u8fdb\u884c\u4f18\u5316\u3002"]})]})}function u(n={}){const{wrapper:e}={...(0,a.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(d,{...n})}):d(n)}}}]);