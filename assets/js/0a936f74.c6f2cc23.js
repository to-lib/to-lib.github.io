"use strict";(globalThis.webpackChunkto_lib_github_io=globalThis.webpackChunkto_lib_github_io||[]).push([[89595],{48885:(n,e,s)=>{s.d(e,{R:()=>i,x:()=>c});var l=s(99378);const r={},d=l.createContext(r);function i(n){const e=l.useContext(d);return l.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:i(n.components),l.createElement(d.Provider,{value:e},n.children)}},79642:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>i,metadata:()=>l,toc:()=>t});const l=JSON.parse('{"id":"mysql/faq","title":"\u5e38\u89c1\u95ee\u9898 FAQ","description":"[!TIP] > \u95ee\u9898\u89e3\u7b54: \u672c\u6587\u6863\u6574\u7406\u4e86 MySQL \u4f7f\u7528\u8fc7\u7a0b\u4e2d\u7684\u5e38\u89c1\u95ee\u9898\u548c\u89e3\u51b3\u65b9\u6848\uff0c\u5e2e\u52a9\u4f60\u5feb\u901f\u5b9a\u4f4d\u548c\u89e3\u51b3\u95ee\u9898\u3002","source":"@site/docs/mysql/faq.md","sourceDirName":"mysql","slug":"/mysql/faq","permalink":"/docs/mysql/faq","draft":false,"unlisted":false,"editUrl":"https://github.com/to-lib/to-lib.github.io/tree/main/docs/mysql/faq.md","tags":[],"version":"current","sidebarPosition":11,"frontMatter":{"sidebar_position":11,"title":"\u5e38\u89c1\u95ee\u9898 FAQ"},"sidebar":"mysql","previous":{"title":"\u5feb\u901f\u53c2\u8003","permalink":"/docs/mysql/quick-reference"},"next":{"title":"MySQL \u9762\u8bd5\u9898\u96c6","permalink":"/docs/interview/mysql-interview-questions"}}');var r=s(22714),d=s(48885);const i={sidebar_position:11,title:"\u5e38\u89c1\u95ee\u9898 FAQ"},c="MySQL \u5e38\u89c1\u95ee\u9898 FAQ",a={},t=[{value:"\u5b89\u88c5\u914d\u7f6e\u95ee\u9898",id:"\u5b89\u88c5\u914d\u7f6e\u95ee\u9898",level:2},{value:"Q1: \u5982\u4f55\u5b89\u88c5 MySQL\uff1f",id:"q1-\u5982\u4f55\u5b89\u88c5-mysql",level:3},{value:"Q2: \u5fd8\u8bb0 root \u5bc6\u7801\u600e\u4e48\u529e\uff1f",id:"q2-\u5fd8\u8bb0-root-\u5bc6\u7801\u600e\u4e48\u529e",level:3},{value:"Q3: \u5982\u4f55\u914d\u7f6e\u8fdc\u7a0b\u8bbf\u95ee\uff1f",id:"q3-\u5982\u4f55\u914d\u7f6e\u8fdc\u7a0b\u8bbf\u95ee",level:3},{value:"Q4: \u5982\u4f55\u67e5\u770b MySQL \u914d\u7f6e\u6587\u4ef6\u4f4d\u7f6e\uff1f",id:"q4-\u5982\u4f55\u67e5\u770b-mysql-\u914d\u7f6e\u6587\u4ef6\u4f4d\u7f6e",level:3},{value:"\u8fde\u63a5\u95ee\u9898",id:"\u8fde\u63a5\u95ee\u9898",level:2},{value:"Q5: ERROR 1045: Access denied for user &#39;root&#39;@&#39;localhost&#39;",id:"q5-error-1045-access-denied-for-user-rootlocalhost",level:3},{value:"Q6: ERROR 2002: Can&#39;t connect to local MySQL server",id:"q6-error-2002-cant-connect-to-local-mysql-server",level:3},{value:"Q7: ERROR 1040: Too many connections",id:"q7-error-1040-too-many-connections",level:3},{value:"\u5b57\u7b26\u96c6\u95ee\u9898",id:"\u5b57\u7b26\u96c6\u95ee\u9898",level:2},{value:"Q8: \u4e2d\u6587\u663e\u793a\u4e71\u7801\u600e\u4e48\u529e\uff1f",id:"q8-\u4e2d\u6587\u663e\u793a\u4e71\u7801\u600e\u4e48\u529e",level:3},{value:"Q9: \u5982\u4f55\u5b58\u50a8 emoji \u8868\u60c5\uff1f",id:"q9-\u5982\u4f55\u5b58\u50a8-emoji-\u8868\u60c5",level:3},{value:"\u6027\u80fd\u95ee\u9898",id:"\u6027\u80fd\u95ee\u9898",level:2},{value:"Q10: \u67e5\u8be2\u5f88\u6162\uff0c\u5982\u4f55\u4f18\u5316\uff1f",id:"q10-\u67e5\u8be2\u5f88\u6162\u5982\u4f55\u4f18\u5316",level:3},{value:"Q11: \u5982\u4f55\u627e\u51fa\u5360\u7528\u7a7a\u95f4\u6700\u5927\u7684\u8868\uff1f",id:"q11-\u5982\u4f55\u627e\u51fa\u5360\u7528\u7a7a\u95f4\u6700\u5927\u7684\u8868",level:3},{value:"Q12: InnoDB \u7f13\u51b2\u6c60\u547d\u4e2d\u7387\u4f4e\u600e\u4e48\u529e\uff1f",id:"q12-innodb-\u7f13\u51b2\u6c60\u547d\u4e2d\u7387\u4f4e\u600e\u4e48\u529e",level:3},{value:"\u7d22\u5f15\u95ee\u9898",id:"\u7d22\u5f15\u95ee\u9898",level:2},{value:"Q13: \u4e3a\u4ec0\u4e48\u521b\u5efa\u4e86\u7d22\u5f15\u8fd8\u662f\u5f88\u6162\uff1f",id:"q13-\u4e3a\u4ec0\u4e48\u521b\u5efa\u4e86\u7d22\u5f15\u8fd8\u662f\u5f88\u6162",level:3},{value:"Q14: \u5982\u4f55\u67e5\u770b\u672a\u4f7f\u7528\u7684\u7d22\u5f15\uff1f",id:"q14-\u5982\u4f55\u67e5\u770b\u672a\u4f7f\u7528\u7684\u7d22\u5f15",level:3},{value:"\u4e8b\u52a1\u548c\u9501\u95ee\u9898",id:"\u4e8b\u52a1\u548c\u9501\u95ee\u9898",level:2},{value:"Q15: \u5982\u4f55\u5904\u7406\u6b7b\u9501\uff1f",id:"q15-\u5982\u4f55\u5904\u7406\u6b7b\u9501",level:3},{value:"Q16: ERROR 1213: Deadlock found when trying to get lock",id:"q16-error-1213-deadlock-found-when-trying-to-get-lock",level:3},{value:"\u5907\u4efd\u6062\u590d\u95ee\u9898",id:"\u5907\u4efd\u6062\u590d\u95ee\u9898",level:2},{value:"Q17: \u5982\u4f55\u8fdb\u884c\u6570\u636e\u5e93\u5907\u4efd\uff1f",id:"q17-\u5982\u4f55\u8fdb\u884c\u6570\u636e\u5e93\u5907\u4efd",level:3},{value:"Q18: \u5982\u4f55\u6062\u590d\u6570\u636e\u5e93\uff1f",id:"q18-\u5982\u4f55\u6062\u590d\u6570\u636e\u5e93",level:3},{value:"Q19: \u8bef\u5220\u6570\u636e\u5982\u4f55\u6062\u590d\uff1f",id:"q19-\u8bef\u5220\u6570\u636e\u5982\u4f55\u6062\u590d",level:3},{value:"\u4e3b\u4ece\u590d\u5236\u95ee\u9898",id:"\u4e3b\u4ece\u590d\u5236\u95ee\u9898",level:2},{value:"Q20: \u4e3b\u4ece\u590d\u5236\u5ef6\u8fdf\u600e\u4e48\u529e\uff1f",id:"q20-\u4e3b\u4ece\u590d\u5236\u5ef6\u8fdf\u600e\u4e48\u529e",level:3},{value:"Q21: \u4ece\u5e93\u590d\u5236\u4e2d\u65ad\u600e\u4e48\u529e\uff1f",id:"q21-\u4ece\u5e93\u590d\u5236\u4e2d\u65ad\u600e\u4e48\u529e",level:3},{value:"\u5176\u4ed6\u5e38\u89c1\u95ee\u9898",id:"\u5176\u4ed6\u5e38\u89c1\u95ee\u9898",level:2},{value:"Q22: ERROR 1146: Table doesn&#39;t exist",id:"q22-error-1146-table-doesnt-exist",level:3},{value:"Q23: MySQL \u5360\u7528\u5185\u5b58\u592a\u9ad8\u600e\u4e48\u529e\uff1f",id:"q23-mysql-\u5360\u7528\u5185\u5b58\u592a\u9ad8\u600e\u4e48\u529e",level:3},{value:"Q24: \u5982\u4f55\u5bfc\u51fa\u67e5\u8be2\u7ed3\u679c\u5230 CSV \u6587\u4ef6\uff1f",id:"q24-\u5982\u4f55\u5bfc\u51fa\u67e5\u8be2\u7ed3\u679c\u5230-csv-\u6587\u4ef6",level:3},{value:"Q25: ERROR 1366: Incorrect string value",id:"q25-error-1366-incorrect-string-value",level:3},{value:"MySQL 8.0 \u5347\u7ea7\u95ee\u9898",id:"mysql-80-\u5347\u7ea7\u95ee\u9898",level:2},{value:"Q26: \u4ece MySQL 5.7 \u5347\u7ea7\u5230 8.0 \u9700\u8981\u6ce8\u610f\u4ec0\u4e48\uff1f",id:"q26-\u4ece-mysql-57-\u5347\u7ea7\u5230-80-\u9700\u8981\u6ce8\u610f\u4ec0\u4e48",level:3},{value:"Q27: \u5347\u7ea7\u540e\u8fde\u63a5\u62a5\u9519 &quot;caching_sha2_password&quot; \u600e\u4e48\u529e\uff1f",id:"q27-\u5347\u7ea7\u540e\u8fde\u63a5\u62a5\u9519-caching_sha2_password-\u600e\u4e48\u529e",level:3},{value:"\u5927\u8868\u64cd\u4f5c\u95ee\u9898",id:"\u5927\u8868\u64cd\u4f5c\u95ee\u9898",level:2},{value:"Q28: \u5982\u4f55\u5b89\u5168\u5730\u5bf9\u5927\u8868\u6267\u884c DDL\uff1f",id:"q28-\u5982\u4f55\u5b89\u5168\u5730\u5bf9\u5927\u8868\u6267\u884c-ddl",level:3},{value:"Q29: \u5927\u8868\u52a0\u7d22\u5f15\u5bfc\u81f4\u4e3b\u4ece\u5ef6\u8fdf\u600e\u4e48\u529e\uff1f",id:"q29-\u5927\u8868\u52a0\u7d22\u5f15\u5bfc\u81f4\u4e3b\u4ece\u5ef6\u8fdf\u600e\u4e48\u529e",level:3},{value:"\u6570\u636e\u8fc1\u79fb\u95ee\u9898",id:"\u6570\u636e\u8fc1\u79fb\u95ee\u9898",level:2},{value:"Q30: \u5982\u4f55\u8fc1\u79fb\u5927\u91cf\u6570\u636e\u5230\u65b0\u8868\uff1f",id:"q30-\u5982\u4f55\u8fc1\u79fb\u5927\u91cf\u6570\u636e\u5230\u65b0\u8868",level:3},{value:"Q31: \u8de8\u5e93\u8fc1\u79fb\u6570\u636e\u6709\u54ea\u4e9b\u65b9\u6cd5\uff1f",id:"q31-\u8de8\u5e93\u8fc1\u79fb\u6570\u636e\u6709\u54ea\u4e9b\u65b9\u6cd5",level:3},{value:"\u5bb9\u91cf\u89c4\u5212\u95ee\u9898",id:"\u5bb9\u91cf\u89c4\u5212\u95ee\u9898",level:2},{value:"Q32: \u5355\u8868\u591a\u5927\u9700\u8981\u5206\u8868\uff1f",id:"q32-\u5355\u8868\u591a\u5927\u9700\u8981\u5206\u8868",level:3},{value:"Q33: \u5982\u4f55\u4f30\u7b97\u8868\u7684\u5927\u5c0f\uff1f",id:"q33-\u5982\u4f55\u4f30\u7b97\u8868\u7684\u5927\u5c0f",level:3},{value:"Q34: \u5982\u4f55\u89c4\u5212\u78c1\u76d8\u7a7a\u95f4\uff1f",id:"q34-\u5982\u4f55\u89c4\u5212\u78c1\u76d8\u7a7a\u95f4",level:3},{value:"\u9519\u8bef\u4ee3\u7801\u901f\u67e5",id:"\u9519\u8bef\u4ee3\u7801\u901f\u67e5",level:2},{value:"\u603b\u7ed3",id:"\u603b\u7ed3",level:2}];function o(n){const e={a:"a",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"mysql-\u5e38\u89c1\u95ee\u9898-faq",children:"MySQL \u5e38\u89c1\u95ee\u9898 FAQ"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsxs)(e.p,{children:["[!TIP] > ",(0,r.jsx)(e.strong,{children:"\u95ee\u9898\u89e3\u7b54"}),": \u672c\u6587\u6863\u6574\u7406\u4e86 MySQL \u4f7f\u7528\u8fc7\u7a0b\u4e2d\u7684\u5e38\u89c1\u95ee\u9898\u548c\u89e3\u51b3\u65b9\u6848\uff0c\u5e2e\u52a9\u4f60\u5feb\u901f\u5b9a\u4f4d\u548c\u89e3\u51b3\u95ee\u9898\u3002"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"\u5b89\u88c5\u914d\u7f6e\u95ee\u9898",children:"\u5b89\u88c5\u914d\u7f6e\u95ee\u9898"}),"\n",(0,r.jsx)(e.h3,{id:"q1-\u5982\u4f55\u5b89\u88c5-mysql",children:"Q1: \u5982\u4f55\u5b89\u88c5 MySQL\uff1f"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Linux (Ubuntu/Debian)"}),":"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# \u66f4\u65b0\u5305\u5217\u8868\nsudo apt update\n\n# \u5b89\u88c5 MySQL\nsudo apt install mysql-server\n\n# \u542f\u52a8 MySQL\nsudo systemctl start mysql\n\n# \u8bbe\u7f6e\u5f00\u673a\u81ea\u542f\nsudo systemctl enable mysql\n\n# \u5b89\u5168\u914d\u7f6e\nsudo mysql_secure_installation\n"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"macOS"}),":"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# \u4f7f\u7528 Homebrew\nbrew install mysql\n\n# \u542f\u52a8 MySQL\nbrew services start mysql\n\n# \u8fde\u63a5\nmysql -u root\n"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"Windows"}),":"]}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsx)(e.li,{children:"\u4e0b\u8f7d MySQL Installer"}),"\n",(0,r.jsx)(e.li,{children:"\u8fd0\u884c\u5b89\u88c5\u7a0b\u5e8f"}),"\n",(0,r.jsx)(e.li,{children:"\u9009\u62e9 Developer Default"}),"\n",(0,r.jsx)(e.li,{children:"\u5b8c\u6210\u5b89\u88c5\u5411\u5bfc"}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"q2-\u5fd8\u8bb0-root-\u5bc6\u7801\u600e\u4e48\u529e",children:"Q2: \u5fd8\u8bb0 root \u5bc6\u7801\u600e\u4e48\u529e\uff1f"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# 1. \u505c\u6b62 MySQL \u670d\u52a1\nsudo systemctl stop mysql\n\n# 2. \u8df3\u8fc7\u6743\u9650\u9a8c\u8bc1\u542f\u52a8\nsudo mysqld_safe --skip-grant-tables &\n\n# 3. \u8fde\u63a5 MySQL\uff08\u65e0\u9700\u5bc6\u7801\uff09\nmysql -u root\n\n# 4. \u91cd\u7f6e\u5bc6\u7801\nUSE mysql;\nUPDATE user SET authentication_string=PASSWORD('new_password') WHERE User='root';\nFLUSH PRIVILEGES;\nEXIT;\n\n# 5. \u6b63\u5e38\u91cd\u542f MySQL\nsudo systemctl restart mysql\n\n# MySQL 8.0+ \u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\nALTER USER 'root'@'localhost' IDENTIFIED BY 'new_password';\n"})}),"\n",(0,r.jsx)(e.h3,{id:"q3-\u5982\u4f55\u914d\u7f6e\u8fdc\u7a0b\u8bbf\u95ee",children:"Q3: \u5982\u4f55\u914d\u7f6e\u8fdc\u7a0b\u8bbf\u95ee\uff1f"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-sql",children:"-- 1. \u521b\u5efa\u5141\u8bb8\u8fdc\u7a0b\u8bbf\u95ee\u7684\u7528\u6237\nCREATE USER 'username'@'%' IDENTIFIED BY 'password';\nGRANT ALL PRIVILEGES ON *.* TO 'username'@'%';\nFLUSH PRIVILEGES;\n\n-- 2. \u4fee\u6539\u914d\u7f6e\u6587\u4ef6 my.cnf\n# \u6ce8\u91ca\u6389 bind-address\n# bind-address = 127.0.0.1\n\n-- 3. \u91cd\u542f MySQL\nsudo systemctl restart mysql\n\n-- 4. \u68c0\u67e5\u9632\u706b\u5899\nsudo ufw allow 3306\n"})}),"\n",(0,r.jsx)(e.h3,{id:"q4-\u5982\u4f55\u67e5\u770b-mysql-\u914d\u7f6e\u6587\u4ef6\u4f4d\u7f6e",children:"Q4: \u5982\u4f55\u67e5\u770b MySQL \u914d\u7f6e\u6587\u4ef6\u4f4d\u7f6e\uff1f"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# \u67e5\u770b\u914d\u7f6e\u6587\u4ef6\u4f4d\u7f6e\nmysql --help | grep 'Default options' -A 1\n\n# \u5e38\u89c1\u4f4d\u7f6e\n# Linux: /etc/mysql/my.cnf \u6216 /etc/my.cnf\n# macOS: /usr/local/etc/my.cnf\n# Windows: C:\\ProgramData\\MySQL\\MySQL Server 8.0\\my.ini\n"})}),"\n",(0,r.jsx)(e.h2,{id:"\u8fde\u63a5\u95ee\u9898",children:"\u8fde\u63a5\u95ee\u9898"}),"\n",(0,r.jsx)(e.h3,{id:"q5-error-1045-access-denied-for-user-rootlocalhost",children:"Q5: ERROR 1045: Access denied for user 'root'@'localhost'"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u539f\u56e0"}),": \u5bc6\u7801\u9519\u8bef\u6216\u7528\u6237\u6743\u9650\u95ee\u9898"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u89e3\u51b3\u65b9\u6848"}),":"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# \u65b9\u6cd51: \u4f7f\u7528\u6b63\u786e\u7684\u5bc6\u7801\nmysql -u root -p\n\n# \u65b9\u6cd52: \u68c0\u67e5\u7528\u6237\u6743\u9650\nSELECT user, host FROM mysql.user;\n\n# \u65b9\u6cd53: \u91cd\u7f6e\u5bc6\u7801\uff08\u89c1 Q2\uff09\n"})}),"\n",(0,r.jsx)(e.h3,{id:"q6-error-2002-cant-connect-to-local-mysql-server",children:"Q6: ERROR 2002: Can't connect to local MySQL server"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u539f\u56e0"}),": MySQL \u670d\u52a1\u672a\u542f\u52a8"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u89e3\u51b3\u65b9\u6848"}),":"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# \u68c0\u67e5\u670d\u52a1\u72b6\u6001\nsudo systemctl status mysql\n\n# \u542f\u52a8\u670d\u52a1\nsudo systemctl start mysql\n\n# \u67e5\u770b\u9519\u8bef\u65e5\u5fd7\nsudo tail -f /var/log/mysql/error.log\n"})}),"\n",(0,r.jsx)(e.h3,{id:"q7-error-1040-too-many-connections",children:"Q7: ERROR 1040: Too many connections"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u539f\u56e0"}),": \u8fde\u63a5\u6570\u8d85\u8fc7 max_connections"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u89e3\u51b3\u65b9\u6848"}),":"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-sql",children:"-- \u67e5\u770b\u5f53\u524d\u8fde\u63a5\u6570\nSHOW STATUS LIKE 'Threads_connected';\nSHOW VARIABLES LIKE 'max_connections';\n\n-- \u4e34\u65f6\u589e\u52a0\u6700\u5927\u8fde\u63a5\u6570\nSET GLOBAL max_connections = 1000;\n\n-- \u6c38\u4e45\u4fee\u6539\uff1a\u7f16\u8f91 my.cnf\n[mysqld]\nmax_connections = 1000\n\n-- \u91cd\u542f MySQL\nsudo systemctl restart mysql\n"})}),"\n",(0,r.jsx)(e.h2,{id:"\u5b57\u7b26\u96c6\u95ee\u9898",children:"\u5b57\u7b26\u96c6\u95ee\u9898"}),"\n",(0,r.jsx)(e.h3,{id:"q8-\u4e2d\u6587\u663e\u793a\u4e71\u7801\u600e\u4e48\u529e",children:"Q8: \u4e2d\u6587\u663e\u793a\u4e71\u7801\u600e\u4e48\u529e\uff1f"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u89e3\u51b3\u65b9\u6848"}),":"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-sql",children:"-- 1. \u67e5\u770b\u5f53\u524d\u5b57\u7b26\u96c6\nSHOW VARIABLES LIKE 'character%';\n\n-- 2. \u4fee\u6539\u6570\u636e\u5e93\u5b57\u7b26\u96c6\nALTER DATABASE dbname CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;\n\n-- 3. \u4fee\u6539\u8868\u5b57\u7b26\u96c6\nALTER TABLE table_name CONVERT TO CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;\n\n-- 4. \u4fee\u6539\u914d\u7f6e\u6587\u4ef6 my.cnf\n[client]\ndefault-character-set=utf8mb4\n\n[mysql]\ndefault-character-set=utf8mb4\n\n[mysqld]\ncharacter-set-server=utf8mb4\ncollation-server=utf8mb4_unicode_ci\n"})}),"\n",(0,r.jsx)(e.h3,{id:"q9-\u5982\u4f55\u5b58\u50a8-emoji-\u8868\u60c5",children:"Q9: \u5982\u4f55\u5b58\u50a8 emoji \u8868\u60c5\uff1f"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u89e3\u51b3\u65b9\u6848"}),":"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-sql",children:"-- \u5fc5\u987b\u4f7f\u7528 utf8mb4 \u5b57\u7b26\u96c6\nCREATE DATABASE mydb CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;\n\nCREATE TABLE posts (\n    id INT PRIMARY KEY AUTO_INCREMENT,\n    content TEXT CHARACTER SET utf8mb4\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;\n\n-- \u6ce8\u610f\uff1a\u65e7\u7684 utf8 \u5b57\u7b26\u96c6\u6700\u591a\u652f\u6301 3 \u5b57\u8282\uff0c\u65e0\u6cd5\u5b58\u50a8 emoji\uff08\u9700\u8981 4 \u5b57\u8282\uff09\n"})}),"\n",(0,r.jsx)(e.h2,{id:"\u6027\u80fd\u95ee\u9898",children:"\u6027\u80fd\u95ee\u9898"}),"\n",(0,r.jsx)(e.h3,{id:"q10-\u67e5\u8be2\u5f88\u6162\u5982\u4f55\u4f18\u5316",children:"Q10: \u67e5\u8be2\u5f88\u6162\uff0c\u5982\u4f55\u4f18\u5316\uff1f"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u8bca\u65ad\u6b65\u9aa4"}),":"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-sql",children:"-- 1. \u4f7f\u7528 EXPLAIN \u5206\u6790\nEXPLAIN SELECT * FROM users WHERE username = '\u5f20\u4e09';\n\n-- 2. \u68c0\u67e5\u662f\u5426\u4f7f\u7528\u4e86\u7d22\u5f15\n-- type \u5e94\u8be5\u662f ref\u3001range \u6216\u66f4\u597d\uff0c\u800c\u4e0d\u662f ALL\uff08\u5168\u8868\u626b\u63cf\uff09\n\n-- 3. \u67e5\u770b\u6162\u67e5\u8be2\u65e5\u5fd7\nSHOW VARIABLES LIKE 'slow_query_log';\nSET GLOBAL slow_query_log = ON;\n\n-- 4. \u5e38\u89c1\u4f18\u5316\u65b9\u6cd5\n-- - \u6dfb\u52a0\u7d22\u5f15\nCREATE INDEX idx_username ON users(username);\n\n-- - \u907f\u514d SELECT *\nSELECT id, username FROM users WHERE username = '\u5f20\u4e09';\n\n-- - \u4f7f\u7528 LIMIT\nSELECT * FROM users LIMIT 100;\n"})}),"\n",(0,r.jsx)(e.h3,{id:"q11-\u5982\u4f55\u627e\u51fa\u5360\u7528\u7a7a\u95f4\u6700\u5927\u7684\u8868",children:"Q11: \u5982\u4f55\u627e\u51fa\u5360\u7528\u7a7a\u95f4\u6700\u5927\u7684\u8868\uff1f"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-sql",children:"SELECT\n    table_schema AS '\u6570\u636e\u5e93',\n    table_name AS '\u8868\u540d',\n    ROUND((data_length + index_length) / 1024 / 1024, 2) AS '\u5927\u5c0f(MB)'\nFROM information_schema.tables\nORDER BY (data_length + index_length) DESC\nLIMIT 10;\n"})}),"\n",(0,r.jsx)(e.h3,{id:"q12-innodb-\u7f13\u51b2\u6c60\u547d\u4e2d\u7387\u4f4e\u600e\u4e48\u529e",children:"Q12: InnoDB \u7f13\u51b2\u6c60\u547d\u4e2d\u7387\u4f4e\u600e\u4e48\u529e\uff1f"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-sql",children:"-- \u67e5\u770b\u7f13\u51b2\u6c60\u547d\u4e2d\u7387\nSHOW GLOBAL STATUS LIKE 'Innodb_buffer_pool_read%';\n\n-- \u8ba1\u7b97\u547d\u4e2d\u7387\n-- \u547d\u4e2d\u7387 = (Innodb_buffer_pool_read_requests - Innodb_buffer_pool_reads) / Innodb_buffer_pool_read_requests * 100%\n\n-- \u5982\u679c\u547d\u4e2d\u7387\u4f4e\u4e8e 99%\uff0c\u589e\u52a0\u7f13\u51b2\u6c60\u5927\u5c0f\n-- \u7f16\u8f91 my.cnf\n[mysqld]\ninnodb_buffer_pool_size = 8G  # \u8bbe\u7f6e\u4e3a\u7269\u7406\u5185\u5b58\u7684 50-80%\n"})}),"\n",(0,r.jsx)(e.h2,{id:"\u7d22\u5f15\u95ee\u9898",children:"\u7d22\u5f15\u95ee\u9898"}),"\n",(0,r.jsx)(e.h3,{id:"q13-\u4e3a\u4ec0\u4e48\u521b\u5efa\u4e86\u7d22\u5f15\u8fd8\u662f\u5f88\u6162",children:"Q13: \u4e3a\u4ec0\u4e48\u521b\u5efa\u4e86\u7d22\u5f15\u8fd8\u662f\u5f88\u6162\uff1f"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u53ef\u80fd\u539f\u56e0"}),":"]}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.strong,{children:"\u7d22\u5f15\u5931\u6548"})}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-sql",children:"-- \u274c \u5728\u7d22\u5f15\u5217\u4e0a\u4f7f\u7528\u51fd\u6570\nSELECT * FROM users WHERE YEAR(created_at) = 2025;\n\n-- \u2705 \u6539\u5199\u4e3a\u8303\u56f4\u67e5\u8be2\nSELECT * FROM users\nWHERE created_at >= '2025-01-01' AND created_at < '2026-01-01';\n"})}),"\n",(0,r.jsxs)(e.ol,{start:"2",children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.strong,{children:"\u6570\u636e\u7c7b\u578b\u4e0d\u5339\u914d"})}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-sql",children:"-- \u274c \u7c7b\u578b\u8f6c\u6362\u5bfc\u81f4\u7d22\u5f15\u5931\u6548\nSELECT * FROM users WHERE id = '123';  -- id \u662f\u6574\u6570\n\n-- \u2705 \u4f7f\u7528\u6b63\u786e\u7684\u7c7b\u578b\nSELECT * FROM users WHERE id = 123;\n"})}),"\n",(0,r.jsxs)(e.ol,{start:"3",children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.strong,{children:"LIKE \u67e5\u8be2\u4ee5 % \u5f00\u5934"})}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-sql",children:"-- \u274c \u7d22\u5f15\u5931\u6548\nSELECT * FROM users WHERE username LIKE '%\u5f20\u4e09';\n\n-- \u2705 \u524d\u7f00\u5339\u914d\u53ef\u4ee5\u4f7f\u7528\u7d22\u5f15\nSELECT * FROM users WHERE username LIKE '\u5f20\u4e09%';\n"})}),"\n",(0,r.jsx)(e.h3,{id:"q14-\u5982\u4f55\u67e5\u770b\u672a\u4f7f\u7528\u7684\u7d22\u5f15",children:"Q14: \u5982\u4f55\u67e5\u770b\u672a\u4f7f\u7528\u7684\u7d22\u5f15\uff1f"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-sql",children:"-- MySQL 5.7+\nSELECT * FROM sys.schema_unused_indexes;\n\n-- \u6216\u8005\u67e5\u770b\u7d22\u5f15\u7edf\u8ba1\nSELECT\n    table_schema,\n    table_name,\n    index_name\nFROM information_schema.statistics\nWHERE table_schema NOT IN ('mysql', 'information_schema', 'performance_schema')\nGROUP BY table_schema, table_name, index_name;\n"})}),"\n",(0,r.jsx)(e.h2,{id:"\u4e8b\u52a1\u548c\u9501\u95ee\u9898",children:"\u4e8b\u52a1\u548c\u9501\u95ee\u9898"}),"\n",(0,r.jsx)(e.h3,{id:"q15-\u5982\u4f55\u5904\u7406\u6b7b\u9501",children:"Q15: \u5982\u4f55\u5904\u7406\u6b7b\u9501\uff1f"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-sql",children:"-- 1. \u67e5\u770b\u6700\u8fd1\u7684\u6b7b\u9501\u4fe1\u606f\nSHOW ENGINE INNODB STATUS\\G\n\n-- 2. \u67e5\u770b\u5f53\u524d\u9501\u7b49\u5f85\nSELECT * FROM information_schema.INNODB_LOCKS;\nSELECT * FROM information_schema.INNODB_LOCK_WAITS;\n\n-- 3. \u907f\u514d\u6b7b\u9501\u7684\u65b9\u6cd5\n-- - \u6309\u76f8\u540c\u987a\u5e8f\u8bbf\u95ee\u8d44\u6e90\n-- - \u4fdd\u6301\u4e8b\u52a1\u7b80\u77ed\n-- - \u4f7f\u7528\u5408\u9002\u7684\u7d22\u5f15\u51cf\u5c11\u9501\u8303\u56f4\n-- - \u964d\u4f4e\u9694\u79bb\u7ea7\u522b\uff08\u5982\u679c\u53ef\u4ee5\uff09\n\n-- 4. \u8bbe\u7f6e\u9501\u7b49\u5f85\u8d85\u65f6\nSET innodb_lock_wait_timeout = 50;\n"})}),"\n",(0,r.jsx)(e.h3,{id:"q16-error-1213-deadlock-found-when-trying-to-get-lock",children:"Q16: ERROR 1213: Deadlock found when trying to get lock"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u89e3\u51b3\u65b9\u6848"}),":"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-sql",children:"-- 1. \u5e94\u7528\u5c42\u91cd\u8bd5\u673a\u5236\n-- Java \u793a\u4f8b\ntry {\n    // \u6267\u884c\u4e8b\u52a1\n    executeTransaction();\n} catch (DeadlockException e) {\n    // \u91cd\u8bd5\n    Thread.sleep(100);\n    executeTransaction();\n}\n\n-- 2. \u4f18\u5316 SQL\uff0c\u6309\u76f8\u540c\u987a\u5e8f\u8bbf\u95ee\u8868\n-- 3. \u7f29\u77ed\u4e8b\u52a1\u65f6\u95f4\n-- 4. \u6dfb\u52a0\u5408\u9002\u7684\u7d22\u5f15\n"})}),"\n",(0,r.jsx)(e.h2,{id:"\u5907\u4efd\u6062\u590d\u95ee\u9898",children:"\u5907\u4efd\u6062\u590d\u95ee\u9898"}),"\n",(0,r.jsx)(e.h3,{id:"q17-\u5982\u4f55\u8fdb\u884c\u6570\u636e\u5e93\u5907\u4efd",children:"Q17: \u5982\u4f55\u8fdb\u884c\u6570\u636e\u5e93\u5907\u4efd\uff1f"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# \u5b8c\u6574\u5907\u4efd\nmysqldump -u root -p --all-databases > full_backup.sql\n\n# \u5907\u4efd\u5355\u4e2a\u6570\u636e\u5e93\nmysqldump -u root -p dbname > dbname_backup.sql\n\n# \u53ea\u5907\u4efd\u8868\u7ed3\u6784\nmysqldump -u root -p --no-data dbname > schema.sql\n\n# \u53ea\u5907\u4efd\u6570\u636e\nmysqldump -u root -p --no-create-info dbname > data.sql\n\n# \u5907\u4efd\u65f6\u4e0d\u9501\u8868\uff08\u5bf9\u4e8e InnoDB\uff09\nmysqldump -u root -p --single-transaction dbname > backup.sql\n"})}),"\n",(0,r.jsx)(e.h3,{id:"q18-\u5982\u4f55\u6062\u590d\u6570\u636e\u5e93",children:"Q18: \u5982\u4f55\u6062\u590d\u6570\u636e\u5e93\uff1f"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# \u6062\u590d\u6574\u4e2a\u6570\u636e\u5e93\nmysql -u root -p < full_backup.sql\n\n# \u6062\u590d\u5355\u4e2a\u6570\u636e\u5e93\nmysql -u root -p dbname < dbname_backup.sql\n\n# \u6062\u590d\u5355\u4e2a\u8868\nmysql -u root -p dbname < table_backup.sql\n"})}),"\n",(0,r.jsx)(e.h3,{id:"q19-\u8bef\u5220\u6570\u636e\u5982\u4f55\u6062\u590d",children:"Q19: \u8bef\u5220\u6570\u636e\u5982\u4f55\u6062\u590d\uff1f"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u5982\u679c\u6709\u5907\u4efd"}),":"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# \u4ece\u6700\u8fd1\u7684\u5907\u4efd\u6062\u590d\nmysql -u root -p dbname < latest_backup.sql\n"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u5982\u679c\u5f00\u542f\u4e86 binlog"}),":"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:'# 1. \u67e5\u770b binlog \u5217\u8868\nSHOW BINARY LOGS;\n\n# 2. \u627e\u5230\u8bef\u5220\u9664\u7684\u4f4d\u7f6e\nmysqlbinlog mysql-bin.000001 | grep "DELETE"\n\n# 3. \u6062\u590d\u5230\u8bef\u5220\u9664\u4e4b\u524d\nmysqlbinlog --stop-position=1234 mysql-bin.000001 | mysql -u root -p\n\n# 4. \u8df3\u8fc7\u8bef\u5220\u9664\u8bed\u53e5\uff0c\u7ee7\u7eed\u6062\u590d\nmysqlbinlog --start-position=5678 mysql-bin.000001 | mysql -u root -p\n'})}),"\n",(0,r.jsx)(e.h2,{id:"\u4e3b\u4ece\u590d\u5236\u95ee\u9898",children:"\u4e3b\u4ece\u590d\u5236\u95ee\u9898"}),"\n",(0,r.jsx)(e.h3,{id:"q20-\u4e3b\u4ece\u590d\u5236\u5ef6\u8fdf\u600e\u4e48\u529e",children:"Q20: \u4e3b\u4ece\u590d\u5236\u5ef6\u8fdf\u600e\u4e48\u529e\uff1f"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-sql",children:"-- 1. \u67e5\u770b\u4ece\u5e93\u72b6\u6001\nSHOW SLAVE STATUS\\G\n\n-- \u5173\u6ce8 Seconds_Behind_Master \u5b57\u6bb5\n\n-- 2. \u5e38\u89c1\u539f\u56e0\u548c\u89e3\u51b3\u65b9\u6848\n-- - \u4e3b\u5e93\u5199\u5165\u538b\u529b\u5927\uff1a\u8bfb\u5199\u5206\u79bb\uff0c\u4f7f\u7528\u591a\u4e2a\u4ece\u5e93\n-- - \u4ece\u5e93\u914d\u7f6e\u4f4e\uff1a\u5347\u7ea7\u4ece\u5e93\u786c\u4ef6\n-- - \u7f51\u7edc\u5ef6\u8fdf\uff1a\u68c0\u67e5\u7f51\u7edc\u8fde\u63a5\n-- - \u5927\u4e8b\u52a1\uff1a\u62c6\u5206\u5927\u4e8b\u52a1\n\n-- 3. \u4f7f\u7528\u5e76\u884c\u590d\u5236\uff08MySQL 5.7+\uff09\nSET GLOBAL slave_parallel_workers = 4;\nSET GLOBAL slave_parallel_type = 'LOGICAL_CLOCK';\n"})}),"\n",(0,r.jsx)(e.h3,{id:"q21-\u4ece\u5e93\u590d\u5236\u4e2d\u65ad\u600e\u4e48\u529e",children:"Q21: \u4ece\u5e93\u590d\u5236\u4e2d\u65ad\u600e\u4e48\u529e\uff1f"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-sql",children:"-- 1. \u67e5\u770b\u9519\u8bef\u4fe1\u606f\nSHOW SLAVE STATUS\\G\n-- \u67e5\u770b Last_Error \u5b57\u6bb5\n\n-- 2. \u8df3\u8fc7\u9519\u8bef\uff08\u4ec5\u7528\u4e8e\u6d4b\u8bd5\u73af\u5883\uff09\nSET GLOBAL sql_slave_skip_counter = 1;\nSTART SLAVE;\n\n-- 3. \u91cd\u65b0\u914d\u7f6e\u4e3b\u4ece\uff08\u5982\u679c\u6570\u636e\u4e0d\u4e00\u81f4\uff09\nSTOP SLAVE;\nRESET SLAVE;\nCHANGE MASTER TO ...;\nSTART SLAVE;\n"})}),"\n",(0,r.jsx)(e.h2,{id:"\u5176\u4ed6\u5e38\u89c1\u95ee\u9898",children:"\u5176\u4ed6\u5e38\u89c1\u95ee\u9898"}),"\n",(0,r.jsx)(e.h3,{id:"q22-error-1146-table-doesnt-exist",children:"Q22: ERROR 1146: Table doesn't exist"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u89e3\u51b3\u65b9\u6848"}),":"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-sql",children:"-- 1. \u68c0\u67e5\u8868\u540d\u662f\u5426\u6b63\u786e\uff08\u533a\u5206\u5927\u5c0f\u5199\uff09\nSHOW TABLES;\n\n-- 2. \u68c0\u67e5\u662f\u5426\u5728\u6b63\u786e\u7684\u6570\u636e\u5e93\nSELECT DATABASE();\nUSE correct_database;\n\n-- 3. \u68c0\u67e5\u8868\u662f\u5426\u771f\u7684\u5b58\u5728\nSHOW TABLES LIKE 'table_name';\n"})}),"\n",(0,r.jsx)(e.h3,{id:"q23-mysql-\u5360\u7528\u5185\u5b58\u592a\u9ad8\u600e\u4e48\u529e",children:"Q23: MySQL \u5360\u7528\u5185\u5b58\u592a\u9ad8\u600e\u4e48\u529e\uff1f"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-sql",children:"-- 1. \u67e5\u770b\u5185\u5b58\u4f7f\u7528\nSHOW VARIABLES LIKE 'innodb_buffer_pool_size';\n\n-- 2. \u8c03\u6574\u7f13\u51b2\u6c60\u5927\u5c0f\nSET GLOBAL innodb_buffer_pool_size = 4G;\n\n-- \u6216\u4fee\u6539 my.cnf\n[mysqld]\ninnodb_buffer_pool_size = 4G\n\n-- 3. \u5176\u4ed6\u5185\u5b58\u76f8\u5173\u53c2\u6570\nkey_buffer_size = 256M\nquery_cache_size = 128M\ntmp_table_size = 64M\nmax_heap_table_size = 64M\n"})}),"\n",(0,r.jsx)(e.h3,{id:"q24-\u5982\u4f55\u5bfc\u51fa\u67e5\u8be2\u7ed3\u679c\u5230-csv-\u6587\u4ef6",children:"Q24: \u5982\u4f55\u5bfc\u51fa\u67e5\u8be2\u7ed3\u679c\u5230 CSV \u6587\u4ef6\uff1f"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-sql",children:"-- \u65b9\u6cd51: \u4f7f\u7528 SELECT ... INTO OUTFILE\nSELECT * FROM users\nINTO OUTFILE '/tmp/users.csv'\nFIELDS TERMINATED BY ','\nENCLOSED BY '\"'\nLINES TERMINATED BY '\\n';\n\n-- \u65b9\u6cd52: \u4f7f\u7528 mysqldump\nmysqldump -u root -p --tab=/tmp dbname table_name\n\n-- \u65b9\u6cd53: \u4f7f\u7528\u547d\u4ee4\u884c\nmysql -u root -p -e \"SELECT * FROM users\" dbname > users.txt\n"})}),"\n",(0,r.jsx)(e.h3,{id:"q25-error-1366-incorrect-string-value",children:"Q25: ERROR 1366: Incorrect string value"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u539f\u56e0"}),": \u5b57\u7b26\u96c6\u95ee\u9898\uff0c\u901a\u5e38\u662f\u8bd5\u56fe\u63d2\u5165 emoji \u5230 utf8 \u5b57\u6bb5"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u89e3\u51b3\u65b9\u6848"}),":"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-sql",children:"-- \u5c06\u5b57\u6bb5\u6539\u4e3a utf8mb4\nALTER TABLE table_name\nMODIFY COLUMN column_name VARCHAR(255)\nCHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;\n\n-- \u521b\u5efa\u65b0\u8868\u65f6\u4f7f\u7528 utf8mb4\nCREATE TABLE new_table (\n    id INT PRIMARY KEY,\n    content TEXT\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;\n"})}),"\n",(0,r.jsx)(e.h2,{id:"mysql-80-\u5347\u7ea7\u95ee\u9898",children:"MySQL 8.0 \u5347\u7ea7\u95ee\u9898"}),"\n",(0,r.jsx)(e.h3,{id:"q26-\u4ece-mysql-57-\u5347\u7ea7\u5230-80-\u9700\u8981\u6ce8\u610f\u4ec0\u4e48",children:"Q26: \u4ece MySQL 5.7 \u5347\u7ea7\u5230 8.0 \u9700\u8981\u6ce8\u610f\u4ec0\u4e48\uff1f"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u5347\u7ea7\u524d\u68c0\u67e5"}),":"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# 1. \u4f7f\u7528\u5347\u7ea7\u68c0\u67e5\u5668\nmysqlsh -- util check-for-server-upgrade root@localhost:3306\n\n# 2. \u5907\u4efd\u6570\u636e\nmysqldump -u root -p --all-databases --routines --events > full_backup.sql\n"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u4e3b\u8981\u517c\u5bb9\u6027\u95ee\u9898"}),":"]}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u4fdd\u7559\u5b57\u53d8\u5316"})," - GROUP\u3001RANK \u6210\u4e3a\u4fdd\u7559\u5b57"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"caching_sha2_password"})," - \u9ed8\u8ba4\u8ba4\u8bc1\u63d2\u4ef6\u53d8\u66f4"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"utf8"})," - utf8mb3 \u7684\u522b\u540d\uff0c\u5efa\u8bae\u4f7f\u7528 utf8mb4"]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u67e5\u8be2\u7f13\u5b58\u79fb\u9664"})," - query",(0,r.jsx)(e.em,{children:"cache"}),"* \u53c2\u6570\u4e0d\u518d\u6709\u6548"]}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u5347\u7ea7\u6b65\u9aa4"}),":"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# 1. \u505c\u6b62 MySQL 5.7\nsystemctl stop mysql\n\n# 2. \u5b89\u88c5 MySQL 8.0\napt install mysql-server-8.0\n\n# 3. \u8fd0\u884c\u5347\u7ea7\nmysql_upgrade -u root -p\n\n# 4. \u91cd\u542f\u670d\u52a1\nsystemctl restart mysql\n"})}),"\n",(0,r.jsx)(e.h3,{id:"q27-\u5347\u7ea7\u540e\u8fde\u63a5\u62a5\u9519-caching_sha2_password-\u600e\u4e48\u529e",children:'Q27: \u5347\u7ea7\u540e\u8fde\u63a5\u62a5\u9519 "caching_sha2_password" \u600e\u4e48\u529e\uff1f'}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u89e3\u51b3\u65b9\u6848"}),":"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-sql",children:"-- \u65b9\u6cd51: \u4fee\u6539\u7528\u6237\u8ba4\u8bc1\u65b9\u5f0f\nALTER USER 'username'@'%' IDENTIFIED WITH mysql_native_password BY 'password';\n\n-- \u65b9\u6cd52: \u914d\u7f6e\u6587\u4ef6\u4e2d\u8bbe\u7f6e\u9ed8\u8ba4\u8ba4\u8bc1\u63d2\u4ef6\n[mysqld]\ndefault-authentication-plugin = mysql_native_password\n\n-- \u65b9\u6cd53: \u5347\u7ea7\u5ba2\u6237\u7aef\u9a71\u52a8\n-- \u4f7f\u7528\u652f\u6301 caching_sha2_password \u7684\u9a71\u52a8\u7248\u672c\n"})}),"\n",(0,r.jsx)(e.h2,{id:"\u5927\u8868\u64cd\u4f5c\u95ee\u9898",children:"\u5927\u8868\u64cd\u4f5c\u95ee\u9898"}),"\n",(0,r.jsx)(e.h3,{id:"q28-\u5982\u4f55\u5b89\u5168\u5730\u5bf9\u5927\u8868\u6267\u884c-ddl",children:"Q28: \u5982\u4f55\u5b89\u5168\u5730\u5bf9\u5927\u8868\u6267\u884c DDL\uff1f"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u95ee\u9898"}),": \u76f4\u63a5 ALTER TABLE \u53ef\u80fd\u9501\u8868\u6570\u5c0f\u65f6"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u89e3\u51b3\u65b9\u6848"}),":"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:'# \u65b9\u6cd51: \u4f7f\u7528 pt-online-schema-change\npt-online-schema-change \\\n    --alter "ADD COLUMN new_column INT" \\\n    D=database,t=large_table \\\n    --execute\n\n# \u65b9\u6cd52: \u4f7f\u7528 gh-ost\ngh-ost \\\n    --alter="ADD COLUMN new_column INT" \\\n    --database=database \\\n    --table=large_table \\\n    --execute\n'})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-sql",children:"-- \u65b9\u6cd53: Online DDL\uff08MySQL 5.6+\uff09\nALTER TABLE large_table ADD COLUMN new_column INT\nALGORITHM=INPLACE, LOCK=NONE;\n\n-- \u67e5\u770b DDL \u8fdb\u5ea6\nSELECT * FROM performance_schema.events_stages_current;\n"})}),"\n",(0,r.jsx)(e.h3,{id:"q29-\u5927\u8868\u52a0\u7d22\u5f15\u5bfc\u81f4\u4e3b\u4ece\u5ef6\u8fdf\u600e\u4e48\u529e",children:"Q29: \u5927\u8868\u52a0\u7d22\u5f15\u5bfc\u81f4\u4e3b\u4ece\u5ef6\u8fdf\u600e\u4e48\u529e\uff1f"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u89e3\u51b3\u65b9\u6848"}),":"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-sql",children:"-- 1. \u4ece\u5e93\u5148\u52a0\u7d22\u5f15\n-- \u5728\u6bcf\u4e2a\u4ece\u5e93\u4e0a\u6267\u884c\nALTER TABLE users ADD INDEX idx_email (email);\n\n-- 2. \u4e3b\u5e93\u6700\u540e\u52a0\u7d22\u5f15\uff08\u4f4e\u5cf0\u671f\uff09\nALTER TABLE users ADD INDEX idx_email (email)\nALGORITHM=INPLACE, LOCK=NONE;\n\n-- 3. \u76d1\u63a7\u8fdb\u5ea6\nSHOW PROCESSLIST;\n"})}),"\n",(0,r.jsx)(e.h2,{id:"\u6570\u636e\u8fc1\u79fb\u95ee\u9898",children:"\u6570\u636e\u8fc1\u79fb\u95ee\u9898"}),"\n",(0,r.jsx)(e.h3,{id:"q30-\u5982\u4f55\u8fc1\u79fb\u5927\u91cf\u6570\u636e\u5230\u65b0\u8868",children:"Q30: \u5982\u4f55\u8fc1\u79fb\u5927\u91cf\u6570\u636e\u5230\u65b0\u8868\uff1f"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u65b9\u6cd5 1: INSERT ... SELECT\uff08\u5c0f\u6570\u636e\u91cf\uff09"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-sql",children:"INSERT INTO new_table SELECT * FROM old_table;\n"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u65b9\u6cd5 2: \u5206\u6279\u8fc1\u79fb\uff08\u5927\u6570\u636e\u91cf\uff09"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-sql",children:"-- \u4f7f\u7528\u5b58\u50a8\u8fc7\u7a0b\u5206\u6279\u8fc1\u79fb\nDELIMITER //\nCREATE PROCEDURE batch_migrate()\nBEGIN\n    DECLARE batch_size INT DEFAULT 10000;\n    DECLARE last_id BIGINT DEFAULT 0;\n    DECLARE done INT DEFAULT 0;\n\n    REPEAT\n        INSERT INTO new_table\n        SELECT * FROM old_table\n        WHERE id > last_id\n        ORDER BY id\n        LIMIT batch_size;\n\n        SET done = ROW_COUNT();\n        SELECT MAX(id) INTO last_id FROM new_table;\n\n        -- \u63a7\u5236\u8fc1\u79fb\u901f\u5ea6\n        DO SLEEP(0.1);\n    UNTIL done < batch_size\n    END REPEAT;\nEND//\nDELIMITER ;\n"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u65b9\u6cd5 3: mysqldump + mysqlimport"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# \u5bfc\u51fa\nmysqldump -u root -p --single-transaction db table > table.sql\n\n# \u5bfc\u5165\nmysql -u root -p db < table.sql\n"})}),"\n",(0,r.jsx)(e.h3,{id:"q31-\u8de8\u5e93\u8fc1\u79fb\u6570\u636e\u6709\u54ea\u4e9b\u65b9\u6cd5",children:"Q31: \u8de8\u5e93\u8fc1\u79fb\u6570\u636e\u6709\u54ea\u4e9b\u65b9\u6cd5\uff1f"}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u65b9\u6cd5 1: mysqldump"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# \u4ece\u6e90\u5e93\u5bfc\u51fa\nmysqldump -h source_host -u root -p db > backup.sql\n\n# \u5bfc\u5165\u76ee\u6807\u5e93\nmysql -h target_host -u root -p db < backup.sql\n"})}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u65b9\u6cd5 2: MySQL Workbench \u8fc1\u79fb\u5411\u5bfc"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u65b9\u6cd5 3: AWS DMS / \u963f\u91cc\u4e91 DTS"}),"\uff08\u4e91\u73af\u5883\uff09"]}),"\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u65b9\u6cd5 4: \u81ea\u5b9a\u4e49 ETL \u811a\u672c"})}),"\n",(0,r.jsx)(e.h2,{id:"\u5bb9\u91cf\u89c4\u5212\u95ee\u9898",children:"\u5bb9\u91cf\u89c4\u5212\u95ee\u9898"}),"\n",(0,r.jsx)(e.h3,{id:"q32-\u5355\u8868\u591a\u5927\u9700\u8981\u5206\u8868",children:"Q32: \u5355\u8868\u591a\u5927\u9700\u8981\u5206\u8868\uff1f"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u7ecf\u9a8c\u53c2\u8003"}),":"]}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"\u6570\u636e\u91cf"}),(0,r.jsx)(e.th,{children:"\u5efa\u8bae\u65b9\u6848"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"< 500 \u4e07"}),(0,r.jsx)(e.td,{children:"\u65e0\u9700\u7279\u6b8a\u5904\u7406"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"500 \u4e07 - 5000 \u4e07"}),(0,r.jsx)(e.td,{children:"\u6dfb\u52a0\u7d22\u5f15\u3001\u4f18\u5316\u67e5\u8be2"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"5000 \u4e07 - 5 \u4ebf"}),(0,r.jsx)(e.td,{children:"\u5206\u533a\u8868\u6216\u5f52\u6863"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"> 5 \u4ebf"}),(0,r.jsx)(e.td,{children:"\u8003\u8651\u5206\u5e93\u5206\u8868"})]})]})]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u5b9e\u9645\u51b3\u7b56\u56e0\u7d20"}),":"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u67e5\u8be2 QPS"}),"\n",(0,r.jsx)(e.li,{children:"\u5199\u5165 TPS"}),"\n",(0,r.jsx)(e.li,{children:"\u6570\u636e\u589e\u957f\u901f\u5ea6"}),"\n",(0,r.jsx)(e.li,{children:"\u67e5\u8be2\u590d\u6742\u5ea6"}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"q33-\u5982\u4f55\u4f30\u7b97\u8868\u7684\u5927\u5c0f",children:"Q33: \u5982\u4f55\u4f30\u7b97\u8868\u7684\u5927\u5c0f\uff1f"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-sql",children:"-- \u67e5\u770b\u8868\u5927\u5c0f\nSELECT\n    table_name,\n    ROUND(data_length / 1024 / 1024, 2) AS data_mb,\n    ROUND(index_length / 1024 / 1024, 2) AS index_mb,\n    ROUND((data_length + index_length) / 1024 / 1024, 2) AS total_mb,\n    table_rows\nFROM information_schema.tables\nWHERE table_schema = 'your_database'\nORDER BY total_mb DESC;\n\n-- \u4f30\u7b97\u5355\u884c\u5927\u5c0f\nSELECT\n    SUM(\n        CASE data_type\n            WHEN 'int' THEN 4\n            WHEN 'bigint' THEN 8\n            WHEN 'varchar' THEN character_maximum_length\n            WHEN 'text' THEN 768\n            ELSE 8\n        END\n    ) AS estimated_row_size\nFROM information_schema.columns\nWHERE table_schema = 'your_database' AND table_name = 'your_table';\n"})}),"\n",(0,r.jsx)(e.h3,{id:"q34-\u5982\u4f55\u89c4\u5212\u78c1\u76d8\u7a7a\u95f4",children:"Q34: \u5982\u4f55\u89c4\u5212\u78c1\u76d8\u7a7a\u95f4\uff1f"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u8ba1\u7b97\u516c\u5f0f"}),":"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{children:"\u6240\u9700\u7a7a\u95f4 = \u6570\u636e\u5927\u5c0f + \u7d22\u5f15\u5927\u5c0f + binlog + \u4e34\u65f6\u7a7a\u95f4 + \u5197\u4f59\n\n\u5176\u4e2d\uff1a\n- binlog: \u901a\u5e38\u4fdd\u7559 7 \u5929\uff0c\u6bcf\u5929\u7ea6 10-50GB\n- \u4e34\u65f6\u7a7a\u95f4: \u9884\u7559 20%\n- \u5197\u4f59: \u9884\u7559 30%\n"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u76d1\u63a7\u811a\u672c"}),":"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-sql",children:"-- \u6570\u636e\u5e93\u603b\u5927\u5c0f\nSELECT\n    table_schema AS db,\n    ROUND(SUM(data_length + index_length) / 1024 / 1024 / 1024, 2) AS total_gb\nFROM information_schema.tables\nGROUP BY table_schema;\n\n-- \u78c1\u76d8\u4f7f\u7528\u8d8b\u52bf\nSELECT * FROM sys.statement_analysis;\n"})}),"\n",(0,r.jsx)(e.h2,{id:"\u9519\u8bef\u4ee3\u7801\u901f\u67e5",children:"\u9519\u8bef\u4ee3\u7801\u901f\u67e5"}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"\u9519\u8bef\u4ee3\u7801"}),(0,r.jsx)(e.th,{children:"\u8bf4\u660e"}),(0,r.jsx)(e.th,{children:"\u89e3\u51b3\u65b9\u6848"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"1040"}),(0,r.jsx)(e.td,{children:"Too many connections"}),(0,r.jsx)(e.td,{children:"\u589e\u52a0 max_connections"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"1045"}),(0,r.jsx)(e.td,{children:"Access denied"}),(0,r.jsx)(e.td,{children:"\u68c0\u67e5\u7528\u6237\u540d\u5bc6\u7801\u548c\u6743\u9650"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"1046"}),(0,r.jsx)(e.td,{children:"No database selected"}),(0,r.jsx)(e.td,{children:"USE database_name"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"1062"}),(0,r.jsx)(e.td,{children:"Duplicate entry"}),(0,r.jsx)(e.td,{children:"\u68c0\u67e5\u552f\u4e00\u7ea6\u675f\u51b2\u7a81"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"1064"}),(0,r.jsx)(e.td,{children:"SQL syntax error"}),(0,r.jsx)(e.td,{children:"\u68c0\u67e5 SQL \u8bed\u6cd5"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"1146"}),(0,r.jsx)(e.td,{children:"Table doesn't exist"}),(0,r.jsx)(e.td,{children:"\u68c0\u67e5\u8868\u540d\u548c\u6570\u636e\u5e93"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"1213"}),(0,r.jsx)(e.td,{children:"Deadlock"}),(0,r.jsx)(e.td,{children:"\u4f18\u5316\u4e8b\u52a1\uff0c\u91cd\u8bd5"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"1366"}),(0,r.jsx)(e.td,{children:"Incorrect string value"}),(0,r.jsx)(e.td,{children:"\u5b57\u7b26\u96c6\u95ee\u9898\uff0c\u4f7f\u7528 utf8mb4"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"2002"}),(0,r.jsx)(e.td,{children:"Can't connect"}),(0,r.jsx)(e.td,{children:"\u68c0\u67e5 MySQL \u670d\u52a1\u662f\u5426\u542f\u52a8"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"2003"}),(0,r.jsx)(e.td,{children:"Can't connect to MySQL server"}),(0,r.jsx)(e.td,{children:"\u68c0\u67e5\u4e3b\u673a\u548c\u7aef\u53e3"})]})]})]}),"\n",(0,r.jsx)(e.h2,{id:"\u603b\u7ed3",children:"\u603b\u7ed3"}),"\n",(0,r.jsx)(e.p,{children:"\u672c\u6587\u6863\u89e3\u7b54\u4e86 MySQL \u4f7f\u7528\u4e2d\u7684\u5e38\u89c1\u95ee\u9898\uff1a"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u2705 \u5b89\u88c5\u914d\u7f6e\uff1a\u5b89\u88c5\u3001\u5bc6\u7801\u3001\u8fdc\u7a0b\u8bbf\u95ee"}),"\n",(0,r.jsx)(e.li,{children:"\u2705 \u8fde\u63a5\u95ee\u9898\uff1a\u6743\u9650\u3001\u8fde\u63a5\u6570\u3001\u670d\u52a1\u72b6\u6001"}),"\n",(0,r.jsx)(e.li,{children:"\u2705 \u5b57\u7b26\u96c6\uff1a\u4e2d\u6587\u4e71\u7801\u3001emoji \u5b58\u50a8"}),"\n",(0,r.jsx)(e.li,{children:"\u2705 \u6027\u80fd\u4f18\u5316\uff1a\u6162\u67e5\u8be2\u3001\u7d22\u5f15\u3001\u7f13\u51b2\u6c60"}),"\n",(0,r.jsx)(e.li,{children:"\u2705 \u4e8b\u52a1\u548c\u9501\uff1a\u6b7b\u9501\u5904\u7406\u3001\u9501\u7b49\u5f85"}),"\n",(0,r.jsx)(e.li,{children:"\u2705 \u5907\u4efd\u6062\u590d\uff1a\u5907\u4efd\u65b9\u6cd5\u3001\u6570\u636e\u6062\u590d"}),"\n",(0,r.jsx)(e.li,{children:"\u2705 \u4e3b\u4ece\u590d\u5236\uff1a\u5ef6\u8fdf\u3001\u4e2d\u65ad\u5904\u7406"}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:["\u7ee7\u7eed\u5b66\u4e60 ",(0,r.jsx)(e.a,{href:"/docs/mysql/quick-reference",children:"\u5feb\u901f\u53c2\u8003"})," \u548c ",(0,r.jsx)(e.a,{href:"/docs/mysql/practical-examples",children:"\u5b9e\u6218\u6848\u4f8b"}),"\uff01"]})]})}function h(n={}){const{wrapper:e}={...(0,d.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(o,{...n})}):o(n)}}}]);