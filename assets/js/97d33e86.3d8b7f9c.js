"use strict";(globalThis.webpackChunkto_lib_github_io=globalThis.webpackChunkto_lib_github_io||[]).push([[17446],{6419:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>r,contentTitle:()=>c,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"rabbitmq/best-practices","title":"\u6700\u4f73\u5b9e\u8df5","description":"RabbitMQ \u751f\u4ea7\u73af\u5883\u6700\u4f73\u5b9e\u8df5","source":"@site/docs/rabbitmq/best-practices.md","sourceDirName":"rabbitmq","slug":"/rabbitmq/best-practices","permalink":"/docs/rabbitmq/best-practices","draft":false,"unlisted":false,"editUrl":"https://github.com/to-lib/to-lib.github.io/tree/main/docs/rabbitmq/best-practices.md","tags":[],"version":"current","sidebarPosition":9,"frontMatter":{"sidebar_position":9,"title":"\u6700\u4f73\u5b9e\u8df5","description":"RabbitMQ \u751f\u4ea7\u73af\u5883\u6700\u4f73\u5b9e\u8df5"},"sidebar":"rabbitmq","previous":{"title":"Spring \u96c6\u6210","permalink":"/docs/rabbitmq/spring-integration"},"next":{"title":"\u5feb\u901f\u53c2\u8003","permalink":"/docs/rabbitmq/quick-reference"}}');var a=s(22714),l=s(48885);const t={sidebar_position:9,title:"\u6700\u4f73\u5b9e\u8df5",description:"RabbitMQ \u751f\u4ea7\u73af\u5883\u6700\u4f73\u5b9e\u8df5"},c="RabbitMQ \u6700\u4f73\u5b9e\u8df5",r={},d=[{value:"\u8fde\u63a5\u7ba1\u7406",id:"\u8fde\u63a5\u7ba1\u7406",level:2},{value:"\u2705 \u590d\u7528\u8fde\u63a5",id:"-\u590d\u7528\u8fde\u63a5",level:3},{value:"\u274c \u907f\u514d\u9891\u7e41\u521b\u5efa",id:"-\u907f\u514d\u9891\u7e41\u521b\u5efa",level:3},{value:"\u901a\u9053\u7ba1\u7406",id:"\u901a\u9053\u7ba1\u7406",level:2},{value:"\u7ebf\u7a0b\u5b89\u5168",id:"\u7ebf\u7a0b\u5b89\u5168",level:3},{value:"\u6d88\u606f\u53ef\u9760\u6027",id:"\u6d88\u606f\u53ef\u9760\u6027",level:2},{value:"\u751f\u4ea7\u8005\u7aef",id:"\u751f\u4ea7\u8005\u7aef",level:3},{value:"\u6d88\u8d39\u8005\u7aef",id:"\u6d88\u8d39\u8005\u7aef",level:3},{value:"\u5e42\u7b49\u6027\u5904\u7406",id:"\u5e42\u7b49\u6027\u5904\u7406",level:2},{value:"\u6b7b\u4fe1\u961f\u5217",id:"\u6b7b\u4fe1\u961f\u5217",level:2},{value:"\u914d\u7f6e",id:"\u914d\u7f6e",level:3},{value:"\u6b7b\u4fe1\u6d88\u8d39\u8005",id:"\u6b7b\u4fe1\u6d88\u8d39\u8005",level:3},{value:"\u5ef6\u8fdf\u6d88\u606f",id:"\u5ef6\u8fdf\u6d88\u606f",level:2},{value:"\u4f7f\u7528\u63d2\u4ef6",id:"\u4f7f\u7528\u63d2\u4ef6",level:3},{value:"\u4f7f\u7528 TTL + \u6b7b\u4fe1",id:"\u4f7f\u7528-ttl--\u6b7b\u4fe1",level:3},{value:"\u76d1\u63a7\u544a\u8b66",id:"\u76d1\u63a7\u544a\u8b66",level:2},{value:"\u5173\u952e\u6307\u6807",id:"\u5173\u952e\u6307\u6807",level:3},{value:"Prometheus \u6307\u6807",id:"prometheus-\u6307\u6807",level:3},{value:"\u5b89\u5168\u914d\u7f6e",id:"\u5b89\u5168\u914d\u7f6e",level:2},{value:"\u7528\u6237\u6743\u9650",id:"\u7528\u6237\u6743\u9650",level:3},{value:"SSL/TLS",id:"ssltls",level:3},{value:"\u751f\u4ea7\u68c0\u67e5\u6e05\u5355",id:"\u751f\u4ea7\u68c0\u67e5\u6e05\u5355",level:2},{value:"\u90e8\u7f72\u524d",id:"\u90e8\u7f72\u524d",level:3},{value:"\u5e94\u7528\u5c42",id:"\u5e94\u7528\u5c42",level:3},{value:"\u8fd0\u7ef4",id:"\u8fd0\u7ef4",level:3},{value:"\u5e38\u89c1\u9519\u8bef",id:"\u5e38\u89c1\u9519\u8bef",level:2},{value:"1. \u5185\u5b58\u8017\u5c3d",id:"1-\u5185\u5b58\u8017\u5c3d",level:3},{value:"2. \u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3",id:"2-\u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3",level:3},{value:"3. \u8fde\u63a5\u6570\u8fc7\u591a",id:"3-\u8fde\u63a5\u6570\u8fc7\u591a",level:3},{value:"\u4e0b\u4e00\u6b65",id:"\u4e0b\u4e00\u6b65",level:2},{value:"\u53c2\u8003\u8d44\u6599",id:"\u53c2\u8003\u8d44\u6599",level:2}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",input:"input",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"rabbitmq-\u6700\u4f73\u5b9e\u8df5",children:"RabbitMQ \u6700\u4f73\u5b9e\u8df5"})}),"\n",(0,a.jsx)(n.p,{children:"\u672c\u6307\u5357\u603b\u7ed3 RabbitMQ \u5728\u751f\u4ea7\u73af\u5883\u4e2d\u7684\u6700\u4f73\u5b9e\u8df5\u3002"}),"\n",(0,a.jsx)(n.h2,{id:"\u8fde\u63a5\u7ba1\u7406",children:"\u8fde\u63a5\u7ba1\u7406"}),"\n",(0,a.jsx)(n.h3,{id:"-\u590d\u7528\u8fde\u63a5",children:"\u2705 \u590d\u7528\u8fde\u63a5"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'// \u597d\uff1a\u590d\u7528\u8fde\u63a5\npublic class ConnectionManager {\n    private static Connection connection;\n\n    public static synchronized Connection getConnection() throws Exception {\n        if (connection == null || !connection.isOpen()) {\n            ConnectionFactory factory = new ConnectionFactory();\n            factory.setHost("localhost");\n            factory.setAutomaticRecoveryEnabled(true);\n            connection = factory.newConnection();\n        }\n        return connection;\n    }\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"-\u907f\u514d\u9891\u7e41\u521b\u5efa",children:"\u274c \u907f\u514d\u9891\u7e41\u521b\u5efa"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'// \u5dee\uff1a\u6bcf\u6b21\u53d1\u9001\u90fd\u521b\u5efa\u65b0\u8fde\u63a5\npublic void send(String message) {\n    Connection connection = factory.newConnection(); // \u907f\u514d\uff01\n    Channel channel = connection.createChannel();\n    channel.basicPublish("", "queue", null, message.getBytes());\n    connection.close();\n}\n'})}),"\n",(0,a.jsx)(n.h2,{id:"\u901a\u9053\u7ba1\u7406",children:"\u901a\u9053\u7ba1\u7406"}),"\n",(0,a.jsx)(n.h3,{id:"\u7ebf\u7a0b\u5b89\u5168",children:"\u7ebf\u7a0b\u5b89\u5168"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:"// \u4f7f\u7528 ThreadLocal \u7ba1\u7406\u901a\u9053\nprivate static final ThreadLocal<Channel> channelHolder = ThreadLocal.withInitial(() -> {\n    try {\n        return ConnectionManager.getConnection().createChannel();\n    } catch (Exception e) {\n        throw new RuntimeException(e);\n    }\n});\n\npublic static Channel getChannel() {\n    return channelHolder.get();\n}\n"})}),"\n",(0,a.jsx)(n.h2,{id:"\u6d88\u606f\u53ef\u9760\u6027",children:"\u6d88\u606f\u53ef\u9760\u6027"}),"\n",(0,a.jsx)(n.h3,{id:"\u751f\u4ea7\u8005\u7aef",children:"\u751f\u4ea7\u8005\u7aef"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'public class ReliableProducer {\n    private final Channel channel;\n\n    public void send(String message) throws Exception {\n        // 1. \u542f\u7528\u53d1\u5e03\u786e\u8ba4\n        channel.confirmSelect();\n\n        // 2. \u6301\u4e45\u5316\u6d88\u606f\n        AMQP.BasicProperties props = MessageProperties.PERSISTENT_TEXT_PLAIN;\n\n        // 3. \u8bbe\u7f6e mandatory\n        channel.basicPublish("exchange", "key", true, props, message.getBytes());\n\n        // 4. \u7b49\u5f85\u786e\u8ba4\n        if (!channel.waitForConfirms(5000)) {\n            throw new RuntimeException("\u6d88\u606f\u672a\u88ab\u786e\u8ba4");\n        }\n    }\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"\u6d88\u8d39\u8005\u7aef",children:"\u6d88\u8d39\u8005\u7aef"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'public class ReliableConsumer {\n\n    public void consume(Channel channel) throws Exception {\n        // 1. \u8bbe\u7f6e QoS\n        channel.basicQos(10);\n\n        // 2. \u624b\u52a8\u786e\u8ba4\n        boolean autoAck = false;\n\n        DeliverCallback callback = (consumerTag, delivery) -> {\n            try {\n                processMessage(delivery.getBody());\n                // 3. \u6210\u529f\u540e\u786e\u8ba4\n                channel.basicAck(delivery.getEnvelope().getDeliveryTag(), false);\n            } catch (Exception e) {\n                // 4. \u5931\u8d25\u91cd\u65b0\u5165\u961f\u6216\u8fdb\u5165\u6b7b\u4fe1\n                channel.basicNack(delivery.getEnvelope().getDeliveryTag(), false, !isRetryExhausted());\n            }\n        };\n\n        channel.basicConsume("queue", autoAck, callback, consumerTag -> {});\n    }\n}\n'})}),"\n",(0,a.jsx)(n.h2,{id:"\u5e42\u7b49\u6027\u5904\u7406",children:"\u5e42\u7b49\u6027\u5904\u7406"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'@Service\npublic class IdempotentHandler {\n\n    @Autowired\n    private RedisTemplate<String, String> redis;\n\n    public boolean processIfNew(String messageId, Runnable task) {\n        String key = "msg:processed:" + messageId;\n\n        // \u4f7f\u7528 Redis SETNX \u5b9e\u73b0\u5e42\u7b49\n        Boolean isNew = redis.opsForValue().setIfAbsent(key, "1", 24, TimeUnit.HOURS);\n\n        if (Boolean.TRUE.equals(isNew)) {\n            try {\n                task.run();\n                return true;\n            } catch (Exception e) {\n                redis.delete(key); // \u5931\u8d25\u65f6\u5220\u9664\uff0c\u5141\u8bb8\u91cd\u8bd5\n                throw e;\n            }\n        }\n        return false;\n    }\n}\n'})}),"\n",(0,a.jsx)(n.h2,{id:"\u6b7b\u4fe1\u961f\u5217",children:"\u6b7b\u4fe1\u961f\u5217"}),"\n",(0,a.jsx)(n.h3,{id:"\u914d\u7f6e",children:"\u914d\u7f6e"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'public void setupDeadLetterQueue(Channel channel) throws Exception {\n    // \u6b7b\u4fe1\u4ea4\u6362\u673a\u548c\u961f\u5217\n    channel.exchangeDeclare("dlx", "direct", true);\n    channel.queueDeclare("dead-letter-queue", true, false, false, null);\n    channel.queueBind("dead-letter-queue", "dlx", "dead");\n\n    // \u4e1a\u52a1\u961f\u5217\u914d\u7f6e\u6b7b\u4fe1\n    Map<String, Object> args = new HashMap<>();\n    args.put("x-dead-letter-exchange", "dlx");\n    args.put("x-dead-letter-routing-key", "dead");\n\n    channel.queueDeclare("business-queue", true, false, false, args);\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"\u6b7b\u4fe1\u6d88\u8d39\u8005",children:"\u6b7b\u4fe1\u6d88\u8d39\u8005"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'@RabbitListener(queues = "dead-letter-queue")\npublic void handleDeadLetter(Message message) {\n    // \u8bb0\u5f55\u65e5\u5fd7\n    log.error("\u6b7b\u4fe1\u6d88\u606f: {}", new String(message.getBody()));\n\n    // \u544a\u8b66\u901a\u77e5\n    alertService.send("\u6536\u5230\u6b7b\u4fe1\u6d88\u606f: " + message.getMessageProperties().getMessageId());\n\n    // \u4fdd\u5b58\u5230\u6570\u636e\u5e93\u5f85\u4eba\u5de5\u5904\u7406\n    deadLetterRepository.save(message);\n}\n'})}),"\n",(0,a.jsx)(n.h2,{id:"\u5ef6\u8fdf\u6d88\u606f",children:"\u5ef6\u8fdf\u6d88\u606f"}),"\n",(0,a.jsx)(n.h3,{id:"\u4f7f\u7528\u63d2\u4ef6",children:"\u4f7f\u7528\u63d2\u4ef6"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# \u542f\u7528\u5ef6\u8fdf\u6d88\u606f\u63d2\u4ef6\nrabbitmq-plugins enable rabbitmq_delayed_message_exchange\n"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'// \u58f0\u660e\u5ef6\u8fdf\u4ea4\u6362\u673a\nMap<String, Object> args = new HashMap<>();\nargs.put("x-delayed-type", "direct");\n\nchannel.exchangeDeclare("delayed-exchange", "x-delayed-message", true, false, args);\n\n// \u53d1\u9001\u5ef6\u8fdf\u6d88\u606f\nAMQP.BasicProperties props = new AMQP.BasicProperties.Builder()\n    .headers(Map.of("x-delay", 60000)) // \u5ef6\u8fdf 60 \u79d2\n    .build();\n\nchannel.basicPublish("delayed-exchange", "key", props, message.getBytes());\n'})}),"\n",(0,a.jsx)(n.h3,{id:"\u4f7f\u7528-ttl--\u6b7b\u4fe1",children:"\u4f7f\u7528 TTL + \u6b7b\u4fe1"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'// \u5ef6\u8fdf\u961f\u5217\nMap<String, Object> args = new HashMap<>();\nargs.put("x-message-ttl", 60000);\nargs.put("x-dead-letter-exchange", "target-exchange");\nargs.put("x-dead-letter-routing-key", "target-key");\n\nchannel.queueDeclare("delay-60s", true, false, false, args);\n'})}),"\n",(0,a.jsx)(n.h2,{id:"\u76d1\u63a7\u544a\u8b66",children:"\u76d1\u63a7\u544a\u8b66"}),"\n",(0,a.jsx)(n.h3,{id:"\u5173\u952e\u6307\u6807",children:"\u5173\u952e\u6307\u6807"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-java",children:'@Scheduled(fixedRate = 60000)\npublic void monitorQueues() {\n    // \u68c0\u67e5\u961f\u5217\u6df1\u5ea6\n    int depth = getQueueDepth("important-queue");\n    if (depth > 10000) {\n        alert("\u961f\u5217\u79ef\u538b\u544a\u8b66", "important-queue \u6df1\u5ea6: " + depth);\n    }\n\n    // \u68c0\u67e5\u6d88\u8d39\u8005\u6570\u91cf\n    int consumers = getConsumerCount("important-queue");\n    if (consumers == 0) {\n        alert("\u6d88\u8d39\u8005\u79bb\u7ebf", "important-queue \u6ca1\u6709\u6d88\u8d39\u8005");\n    }\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"prometheus-\u6307\u6807",children:"Prometheus \u6307\u6807"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'# prometheus.yml\nscrape_configs:\n  - job_name: "rabbitmq"\n    static_configs:\n      - targets: ["localhost:15692"]\n'})}),"\n",(0,a.jsx)(n.h2,{id:"\u5b89\u5168\u914d\u7f6e",children:"\u5b89\u5168\u914d\u7f6e"}),"\n",(0,a.jsx)(n.h3,{id:"\u7528\u6237\u6743\u9650",children:"\u7528\u6237\u6743\u9650"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'# \u521b\u5efa\u7528\u6237\nrabbitmqctl add_user app_user strong_password\n\n# \u8bbe\u7f6e\u6743\u9650\uff08\u914d\u7f6e/\u5199/\u8bfb\uff09\nrabbitmqctl set_permissions -p /app app_user "^app\\." "^app\\." "^app\\."\n\n# \u8bbe\u7f6e\u7528\u6237\u6807\u7b7e\nrabbitmqctl set_user_tags app_user monitoring\n'})}),"\n",(0,a.jsx)(n.h3,{id:"ssltls",children:"SSL/TLS"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ini",children:"# rabbitmq.conf\nlisteners.ssl.default = 5671\nssl_options.cacertfile = /path/to/ca_certificate.pem\nssl_options.certfile = /path/to/server_certificate.pem\nssl_options.keyfile = /path/to/server_key.pem\nssl_options.verify = verify_peer\nssl_options.fail_if_no_peer_cert = true\n"})}),"\n",(0,a.jsx)(n.h2,{id:"\u751f\u4ea7\u68c0\u67e5\u6e05\u5355",children:"\u751f\u4ea7\u68c0\u67e5\u6e05\u5355"}),"\n",(0,a.jsx)(n.h3,{id:"\u90e8\u7f72\u524d",children:"\u90e8\u7f72\u524d"}),"\n",(0,a.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,a.jsxs)(n.li,{className:"task-list-item",children:[(0,a.jsx)(n.input,{type:"checkbox",disabled:!0})," ","\u81f3\u5c11 3 \u4e2a\u8282\u70b9\u7684\u96c6\u7fa4"]}),"\n",(0,a.jsxs)(n.li,{className:"task-list-item",children:[(0,a.jsx)(n.input,{type:"checkbox",disabled:!0})," ","\u542f\u7528\u6301\u4e45\u5316"]}),"\n",(0,a.jsxs)(n.li,{className:"task-list-item",children:[(0,a.jsx)(n.input,{type:"checkbox",disabled:!0})," ","\u914d\u7f6e\u955c\u50cf\u961f\u5217\u6216 Quorum \u961f\u5217"]}),"\n",(0,a.jsxs)(n.li,{className:"task-list-item",children:[(0,a.jsx)(n.input,{type:"checkbox",disabled:!0})," ","\u8bbe\u7f6e\u5185\u5b58\u548c\u78c1\u76d8\u544a\u8b66\u9608\u503c"]}),"\n",(0,a.jsxs)(n.li,{className:"task-list-item",children:[(0,a.jsx)(n.input,{type:"checkbox",disabled:!0})," ","\u914d\u7f6e\u76d1\u63a7\u548c\u544a\u8b66"]}),"\n",(0,a.jsxs)(n.li,{className:"task-list-item",children:[(0,a.jsx)(n.input,{type:"checkbox",disabled:!0})," ","\u5907\u4efd\u7b56\u7565"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"\u5e94\u7528\u5c42",children:"\u5e94\u7528\u5c42"}),"\n",(0,a.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,a.jsxs)(n.li,{className:"task-list-item",children:[(0,a.jsx)(n.input,{type:"checkbox",disabled:!0})," ","\u8fde\u63a5\u81ea\u52a8\u6062\u590d"]}),"\n",(0,a.jsxs)(n.li,{className:"task-list-item",children:[(0,a.jsx)(n.input,{type:"checkbox",disabled:!0})," ","\u53d1\u5e03\u786e\u8ba4"]}),"\n",(0,a.jsxs)(n.li,{className:"task-list-item",children:[(0,a.jsx)(n.input,{type:"checkbox",disabled:!0})," ","\u6d88\u8d39\u8005\u624b\u52a8\u786e\u8ba4"]}),"\n",(0,a.jsxs)(n.li,{className:"task-list-item",children:[(0,a.jsx)(n.input,{type:"checkbox",disabled:!0})," ","\u5e42\u7b49\u5904\u7406"]}),"\n",(0,a.jsxs)(n.li,{className:"task-list-item",children:[(0,a.jsx)(n.input,{type:"checkbox",disabled:!0})," ","\u6b7b\u4fe1\u961f\u5217"]}),"\n",(0,a.jsxs)(n.li,{className:"task-list-item",children:[(0,a.jsx)(n.input,{type:"checkbox",disabled:!0})," ","\u91cd\u8bd5\u673a\u5236"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"\u8fd0\u7ef4",children:"\u8fd0\u7ef4"}),"\n",(0,a.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,a.jsxs)(n.li,{className:"task-list-item",children:[(0,a.jsx)(n.input,{type:"checkbox",disabled:!0})," ","\u65e5\u5fd7\u6536\u96c6"]}),"\n",(0,a.jsxs)(n.li,{className:"task-list-item",children:[(0,a.jsx)(n.input,{type:"checkbox",disabled:!0})," ","\u6307\u6807\u76d1\u63a7"]}),"\n",(0,a.jsxs)(n.li,{className:"task-list-item",children:[(0,a.jsx)(n.input,{type:"checkbox",disabled:!0})," ","\u544a\u8b66\u914d\u7f6e"]}),"\n",(0,a.jsxs)(n.li,{className:"task-list-item",children:[(0,a.jsx)(n.input,{type:"checkbox",disabled:!0})," ","\u5b9a\u671f\u5907\u4efd"]}),"\n",(0,a.jsxs)(n.li,{className:"task-list-item",children:[(0,a.jsx)(n.input,{type:"checkbox",disabled:!0})," ","\u5bb9\u91cf\u89c4\u5212"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"\u5e38\u89c1\u9519\u8bef",children:"\u5e38\u89c1\u9519\u8bef"}),"\n",(0,a.jsx)(n.h3,{id:"1-\u5185\u5b58\u8017\u5c3d",children:"1. \u5185\u5b58\u8017\u5c3d"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# \u68c0\u67e5\u5185\u5b58\u4f7f\u7528\nrabbitmqctl status | grep memory\n\n# \u8bbe\u7f6e\u5185\u5b58\u9650\u5236\n# rabbitmq.conf\nvm_memory_high_watermark.relative = 0.4\n"})}),"\n",(0,a.jsx)(n.h3,{id:"2-\u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3",children:"2. \u78c1\u76d8\u7a7a\u95f4\u4e0d\u8db3"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# \u8bbe\u7f6e\u78c1\u76d8\u9650\u5236\n# rabbitmq.conf\ndisk_free_limit.absolute = 5GB\n"})}),"\n",(0,a.jsx)(n.h3,{id:"3-\u8fde\u63a5\u6570\u8fc7\u591a",children:"3. \u8fde\u63a5\u6570\u8fc7\u591a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# \u68c0\u67e5\u8fde\u63a5\nrabbitmqctl list_connections\n\n# \u8bbe\u7f6e\u8fde\u63a5\u9650\u5236\n# rabbitmq.conf\nchannel_max = 2047\n"})}),"\n",(0,a.jsx)(n.h2,{id:"\u4e0b\u4e00\u6b65",children:"\u4e0b\u4e00\u6b65"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\ud83d\udcca ",(0,a.jsx)(n.a,{href:"/docs/rabbitmq/monitoring",children:"\u76d1\u63a7\u8fd0\u7ef4"})," - \u76d1\u63a7 RabbitMQ"]}),"\n",(0,a.jsxs)(n.li,{children:["\u2753 ",(0,a.jsx)(n.a,{href:"/docs/rabbitmq/faq",children:"\u5e38\u89c1\u95ee\u9898"})," - FAQ"]}),"\n",(0,a.jsxs)(n.li,{children:["\ud83d\udcbc ",(0,a.jsx)(n.a,{href:"/docs/interview/rabbitmq-interview-questions",children:"\u9762\u8bd5\u9898\u96c6"})," - \u9762\u8bd5\u5e38\u89c1\u95ee\u9898"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"\u53c2\u8003\u8d44\u6599",children:"\u53c2\u8003\u8d44\u6599"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://www.rabbitmq.com/production-checklist.html",children:"RabbitMQ \u751f\u4ea7\u68c0\u67e5\u6e05\u5355"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://www.rabbitmq.com/reliability.html",children:"\u53ef\u9760\u6027\u6307\u5357"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(o,{...e})}):o(e)}},48885:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>c});var i=s(99378);const a={},l=i.createContext(a);function t(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:t(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);