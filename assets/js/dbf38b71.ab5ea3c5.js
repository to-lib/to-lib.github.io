"use strict";(globalThis.webpackChunkto_lib_github_io=globalThis.webpackChunkto_lib_github_io||[]).push([[89310],{48885:(e,n,r)=>{r.d(n,{R:()=>c,x:()=>o});var s=r(99378);const t={},i=s.createContext(t);function c(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:c(e.components),s.createElement(i.Provider,{value:n},e.children)}},60799:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>c,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"spring/resource-management","title":"Spring \u8d44\u6e90\u7ba1\u7406","description":"[!TIP]","source":"@site/docs/spring/resource-management.md","sourceDirName":"spring","slug":"/spring/resource-management","permalink":"/docs/spring/resource-management","draft":false,"unlisted":false,"editUrl":"https://github.com/to-lib/to-lib.github.io/tree/main/docs/spring/resource-management.md","tags":[],"version":"current","sidebarPosition":11,"frontMatter":{"id":"resource-management","title":"Spring \u8d44\u6e90\u7ba1\u7406","sidebar_label":"\u8d44\u6e90\u7ba1\u7406","sidebar_position":11},"sidebar":"spring","previous":{"title":"\u4e8b\u4ef6\u673a\u5236","permalink":"/docs/spring/spring-events"},"next":{"title":"SpEL","permalink":"/docs/spring/spel"}}');var t=r(22714),i=r(48885);const c={id:"resource-management",title:"Spring \u8d44\u6e90\u7ba1\u7406",sidebar_label:"\u8d44\u6e90\u7ba1\u7406",sidebar_position:11},o="Spring \u8d44\u6e90\u7ba1\u7406",l={},a=[{value:"1. Resource \u63a5\u53e3\u6982\u8ff0",id:"1-resource-\u63a5\u53e3\u6982\u8ff0",level:2},{value:"1.1 Resource \u5c42\u6b21\u7ed3\u6784",id:"11-resource-\u5c42\u6b21\u7ed3\u6784",level:3},{value:"1.2 \u6838\u5fc3\u65b9\u6cd5",id:"12-\u6838\u5fc3\u65b9\u6cd5",level:3},{value:"2. \u8d44\u6e90\u7c7b\u578b",id:"2-\u8d44\u6e90\u7c7b\u578b",level:2},{value:"2.1 ClassPathResource",id:"21-classpathresource",level:3},{value:"2.2 FileSystemResource",id:"22-filesystemresource",level:3},{value:"2.3 UrlResource",id:"23-urlresource",level:3},{value:"2.4 ByteArrayResource",id:"24-bytearrayresource",level:3},{value:"3. ResourceLoader",id:"3-resourceloader",level:2},{value:"3.1 \u4f7f\u7528 ResourceLoader",id:"31-\u4f7f\u7528-resourceloader",level:3},{value:"3.2 \u8d44\u6e90\u524d\u7f00",id:"32-\u8d44\u6e90\u524d\u7f00",level:3},{value:"4. @Value \u6ce8\u5165\u8d44\u6e90",id:"4-value-\u6ce8\u5165\u8d44\u6e90",level:2},{value:"4.1 \u6ce8\u5165\u8d44\u6e90\u5bf9\u8c61",id:"41-\u6ce8\u5165\u8d44\u6e90\u5bf9\u8c61",level:3},{value:"4.2 \u6ce8\u5165\u8d44\u6e90\u5185\u5bb9",id:"42-\u6ce8\u5165\u8d44\u6e90\u5185\u5bb9",level:3},{value:"5. ApplicationContext \u548c\u8d44\u6e90",id:"5-applicationcontext-\u548c\u8d44\u6e90",level:2},{value:"5.1 ApplicationContext \u4f5c\u4e3a ResourceLoader",id:"51-applicationcontext-\u4f5c\u4e3a-resourceloader",level:3},{value:"5.2 \u901a\u914d\u7b26\u652f\u6301",id:"52-\u901a\u914d\u7b26\u652f\u6301",level:3},{value:"6. \u8bfb\u53d6\u914d\u7f6e\u6587\u4ef6",id:"6-\u8bfb\u53d6\u914d\u7f6e\u6587\u4ef6",level:2},{value:"6.1 Properties \u6587\u4ef6",id:"61-properties-\u6587\u4ef6",level:3},{value:"6.2 YAML \u6587\u4ef6",id:"62-yaml-\u6587\u4ef6",level:3},{value:"6.3 JSON \u6587\u4ef6",id:"63-json-\u6587\u4ef6",level:3},{value:"7. \u5199\u5165\u8d44\u6e90",id:"7-\u5199\u5165\u8d44\u6e90",level:2},{value:"7.1 \u5199\u5165\u6587\u4ef6",id:"71-\u5199\u5165\u6587\u4ef6",level:3},{value:"8. \u5b9e\u9645\u5e94\u7528",id:"8-\u5b9e\u9645\u5e94\u7528",level:2},{value:"8.1 \u6a21\u677f\u52a0\u8f7d",id:"81-\u6a21\u677f\u52a0\u8f7d",level:3},{value:"8.2 \u9759\u6001\u8d44\u6e90\u670d\u52a1",id:"82-\u9759\u6001\u8d44\u6e90\u670d\u52a1",level:3},{value:"8.3 \u591a\u73af\u5883\u914d\u7f6e",id:"83-\u591a\u73af\u5883\u914d\u7f6e",level:3},{value:"9. \u6700\u4f73\u5b9e\u8df5",id:"9-\u6700\u4f73\u5b9e\u8df5",level:2},{value:"9.1 \u4f7f\u7528 ResourceLoader",id:"91-\u4f7f\u7528-resourceloader",level:3},{value:"9.2 \u6b63\u786e\u5904\u7406\u5f02\u5e38",id:"92-\u6b63\u786e\u5904\u7406\u5f02\u5e38",level:3},{value:"9.3 \u5173\u95ed\u8d44\u6e90",id:"93-\u5173\u95ed\u8d44\u6e90",level:3},{value:"10. \u603b\u7ed3",id:"10-\u603b\u7ed3",level:2}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"spring-\u8d44\u6e90\u7ba1\u7406",children:"Spring \u8d44\u6e90\u7ba1\u7406"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["[!TIP]\n",(0,t.jsx)(n.strong,{children:"\u7edf\u4e00\u8d44\u6e90\u8bbf\u95ee"}),": Spring \u7684 Resource \u63a5\u53e3\u63d0\u4f9b\u4e86\u7edf\u4e00\u7684\u65b9\u5f0f\u8bbf\u95ee\u5404\u79cd\u8d44\u6e90\u3002\u65e0\u8bba\u662f\u6587\u4ef6\u7cfb\u7edf\u3001\u7c7b\u8def\u5f84\u8fd8\u662f URL\uff0c\u90fd\u53ef\u4ee5\u4f7f\u7528\u76f8\u540c\u7684 API\u3002"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"1-resource-\u63a5\u53e3\u6982\u8ff0",children:"1. Resource \u63a5\u53e3\u6982\u8ff0"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Resource"})," \u63a5\u53e3\u662f Spring \u5bf9\u5e95\u5c42\u8d44\u6e90\u7684\u62bd\u8c61\uff0c\u63d0\u4f9b\u7edf\u4e00\u7684\u8d44\u6e90\u8bbf\u95ee\u65b9\u5f0f\u3002"]}),"\n",(0,t.jsx)(n.h3,{id:"11-resource-\u5c42\u6b21\u7ed3\u6784",children:"1.1 Resource \u5c42\u6b21\u7ed3\u6784"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Resource (\u63a5\u53e3)\n    \u251c\u2500\u2500 UrlResource          - URL \u8d44\u6e90\n    \u251c\u2500\u2500 ClassPathResource    - \u7c7b\u8def\u5f84\u8d44\u6e90\n    \u251c\u2500\u2500 FileSystemResource   - \u6587\u4ef6\u7cfb\u7edf\u8d44\u6e90\n    \u251c\u2500\u2500 ServletContextResource - Web \u5e94\u7528\u8d44\u6e90\n    \u251c\u2500\u2500 InputStreamResource  - \u8f93\u5165\u6d41\u8d44\u6e90\n    \u2514\u2500\u2500 ByteArrayResource    - \u5b57\u8282\u6570\u7ec4\u8d44\u6e90\n"})}),"\n",(0,t.jsx)(n.h3,{id:"12-\u6838\u5fc3\u65b9\u6cd5",children:"1.2 \u6838\u5fc3\u65b9\u6cd5"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"public interface Resource extends InputStreamSource {\n    boolean exists();                  // \u8d44\u6e90\u662f\u5426\u5b58\u5728\n    boolean isReadable();             // \u8d44\u6e90\u662f\u5426\u53ef\u8bfb\n    boolean isOpen();                 // \u8d44\u6e90\u662f\u5426\u5df2\u6253\u5f00\n    URL getURL() throws IOException;  // \u83b7\u53d6 URL\n    URI getURI() throws IOException;  // \u83b7\u53d6 URI\n    File getFile() throws IOException; // \u83b7\u53d6 File \u5bf9\u8c61\n    long contentLength() throws IOException; // \u5185\u5bb9\u957f\u5ea6\n    long lastModified() throws IOException;  // \u6700\u540e\u4fee\u6539\u65f6\u95f4\n    Resource createRelative(String relativePath); // \u521b\u5efa\u76f8\u5bf9\u8d44\u6e90\n    String getFilename();             // \u83b7\u53d6\u6587\u4ef6\u540d\n    String getDescription();          // \u83b7\u53d6\u63cf\u8ff0\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"2-\u8d44\u6e90\u7c7b\u578b",children:"2. \u8d44\u6e90\u7c7b\u578b"}),"\n",(0,t.jsx)(n.h3,{id:"21-classpathresource",children:"2.1 ClassPathResource"}),"\n",(0,t.jsx)(n.p,{children:"\u4ece\u7c7b\u8def\u5f84\u52a0\u8f7d\u8d44\u6e90\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'@Service\npublic class ResourceService {\n    \n    public void loadClassPathResource() throws IOException {\n        // \u4ece\u7c7b\u8def\u5f84\u52a0\u8f7d\n        Resource resource = new ClassPathResource("config/application.properties");\n        \n        if (resource.exists()) {\n            InputStream inputStream = resource.getInputStream();\n            // \u8bfb\u53d6\u8d44\u6e90\u5185\u5bb9\n            String content = new String(inputStream.readAllBytes());\n            System.out.println(content);\n        }\n    }\n    \n    public void loadFromPackage() throws IOException {\n        // \u4ece\u7279\u5b9a\u5305\u52a0\u8f7d\n        Resource resource = new ClassPathResource("templates/email.html");\n        \n        // \u6216\u8005\u4f7f\u7528\u7c7b\u52a0\u8f7d\u5668\n        ClassLoader classLoader = getClass().getClassLoader();\n        InputStream inputStream = classLoader.getResourceAsStream("config/app.yml");\n    }\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"22-filesystemresource",children:"2.2 FileSystemResource"}),"\n",(0,t.jsx)(n.p,{children:"\u4ece\u6587\u4ef6\u7cfb\u7edf\u52a0\u8f7d\u8d44\u6e90\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'@Service\npublic class FileResourceService {\n    \n    public void loadFileResource() throws IOException {\n        // \u7edd\u5bf9\u8def\u5f84\n        Resource resource = new FileSystemResource("/var/data/config.txt");\n        \n        // \u76f8\u5bf9\u8def\u5f84\n        Resource relativeResource = new FileSystemResource("data/config.txt");\n        \n        if (resource.exists()) {\n            File file = resource.getFile();\n            String content = Files.readString(file.toPath());\n            System.out.println(content);\n        }\n    }\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"23-urlresource",children:"2.3 UrlResource"}),"\n",(0,t.jsx)(n.p,{children:"\u4ece URL \u52a0\u8f7d\u8d44\u6e90\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'@Service\npublic class UrlResourceService {\n    \n    public void loadUrlResource() throws IOException {\n        // HTTP URL\n        Resource resource = new UrlResource("https://example.com/config.json");\n        \n        // FTP URL\n        Resource ftpResource = new UrlResource("ftp://ftp.example.com/file.txt");\n        \n        // File URL\n        Resource fileResource = new UrlResource("file:///var/data/file.txt");\n        \n        if (resource.exists() && resource.isReadable()) {\n            InputStream inputStream = resource.getInputStream();\n            // \u5904\u7406\u5185\u5bb9\n        }\n    }\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"24-bytearrayresource",children:"2.4 ByteArrayResource"}),"\n",(0,t.jsx)(n.p,{children:"\u4ece\u5b57\u8282\u6570\u7ec4\u521b\u5efa\u8d44\u6e90\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'@Service\npublic class ByteResourceService {\n    \n    public void createByteResource() throws IOException {\n        byte[] data = "Hello, Spring!".getBytes();\n        Resource resource = new ByteArrayResource(data);\n        \n        InputStream inputStream = resource.getInputStream();\n        String content = new String(inputStream.readAllBytes());\n        System.out.println(content);\n    }\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"3-resourceloader",children:"3. ResourceLoader"}),"\n",(0,t.jsx)(n.h3,{id:"31-\u4f7f\u7528-resourceloader",children:"3.1 \u4f7f\u7528 ResourceLoader"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'@Service\npublic class ResourceLoaderService {\n    \n    @Autowired\n    private ResourceLoader resourceLoader;\n    \n    public void loadResource() throws IOException {\n        // \u4ece\u7c7b\u8def\u5f84\u52a0\u8f7d\n        Resource resource = resourceLoader.getResource("classpath:config/app.yml");\n        \n        // \u4ece\u6587\u4ef6\u7cfb\u7edf\u52a0\u8f7d\n        Resource fileResource = resourceLoader.getResource("file:/var/data/config.txt");\n        \n        // \u4ece URL \u52a0\u8f7d\n        Resource urlResource = resourceLoader.getResource("https://example.com/data.json");\n        \n        if (resource.exists()) {\n            String content = new String(resource.getInputStream().readAllBytes());\n            System.out.println(content);\n        }\n    }\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"32-\u8d44\u6e90\u524d\u7f00",children:"3.2 \u8d44\u6e90\u524d\u7f00"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"\u524d\u7f00"}),(0,t.jsx)(n.th,{children:"\u8bf4\u660e"}),(0,t.jsx)(n.th,{children:"\u793a\u4f8b"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"classpath:"})}),(0,t.jsx)(n.td,{children:"\u7c7b\u8def\u5f84\u8d44\u6e90"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"classpath:config/app.yml"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"file:"})}),(0,t.jsx)(n.td,{children:"\u6587\u4ef6\u7cfb\u7edf\u8d44\u6e90"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"file:/var/data/config.txt"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"http:"})}),(0,t.jsx)(n.td,{children:"HTTP URL"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"http://example.com/data.json"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"https:"})}),(0,t.jsx)(n.td,{children:"HTTPS URL"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"https://example.com/data.json"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"ftp:"})}),(0,t.jsx)(n.td,{children:"FTP URL"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"ftp://ftp.example.com/file.txt"})})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"4-value-\u6ce8\u5165\u8d44\u6e90",children:"4. @Value \u6ce8\u5165\u8d44\u6e90"}),"\n",(0,t.jsx)(n.h3,{id:"41-\u6ce8\u5165\u8d44\u6e90\u5bf9\u8c61",children:"4.1 \u6ce8\u5165\u8d44\u6e90\u5bf9\u8c61"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'@Component\npublic class ConfigReader {\n    \n    @Value("classpath:config/application.properties")\n    private Resource configResource;\n    \n    @Value("${app.data.file}")  // \u4ece\u914d\u7f6e\u6587\u4ef6\u8bfb\u53d6\u8def\u5f84\n    private Resource dataFile;\n    \n    public void readConfig() throws IOException {\n        if (configResource.exists()) {\n            Properties properties = new Properties();\n            properties.load(configResource.getInputStream());\n            System.out.println(properties);\n        }\n    }\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"42-\u6ce8\u5165\u8d44\u6e90\u5185\u5bb9",children:"4.2 \u6ce8\u5165\u8d44\u6e90\u5185\u5bb9"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'@Component\npublic class ContentReader {\n    \n    // \u76f4\u63a5\u6ce8\u5165\u6587\u4ef6\u5185\u5bb9\uff08\u5c0f\u6587\u4ef6\uff09\n    @Value("${spring.application.name}")\n    private String appName;\n    \n    // \u6ce8\u5165\u8d44\u6e90\n    @Value("classpath:banner.txt")\n    private Resource banner;\n    \n    public void printBanner() throws IOException {\n        String content = new String(banner.getInputStream().readAllBytes());\n        System.out.println(content);\n    }\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"5-applicationcontext-\u548c\u8d44\u6e90",children:"5. ApplicationContext \u548c\u8d44\u6e90"}),"\n",(0,t.jsx)(n.h3,{id:"51-applicationcontext-\u4f5c\u4e3a-resourceloader",children:"5.1 ApplicationContext \u4f5c\u4e3a ResourceLoader"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'@Component\npublic class ContextResourceService {\n    \n    @Autowired\n    private ApplicationContext context;\n    \n    public void loadResources() throws IOException {\n        // ApplicationContext \u5b9e\u73b0\u4e86 ResourceLoader\n        Resource resource = context.getResource("classpath:data/users.json");\n        \n        // \u52a0\u8f7d\u591a\u4e2a\u8d44\u6e90\n        Resource[] resources = context.getResources("classpath*:config/*.yml");\n        \n        for (Resource r : resources) {\n            System.out.println("Found: " + r.getFilename());\n        }\n    }\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"52-\u901a\u914d\u7b26\u652f\u6301",children:"5.2 \u901a\u914d\u7b26\u652f\u6301"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'@Service\npublic class WildcardResourceService {\n    \n    @Autowired\n    private ResourcePatternResolver resourcePatternResolver;\n    \n    public void loadMultipleResources() throws IOException {\n        // \u52a0\u8f7d\u6240\u6709 .properties \u6587\u4ef6\n        Resource[] resources = resourcePatternResolver.getResources(\n            "classpath*:config/*.properties"\n        );\n        \n        for (Resource resource : resources) {\n            System.out.println("File: " + resource.getFilename());\n            \n            // \u8bfb\u53d6\u5185\u5bb9\n            Properties props = new Properties();\n            props.load(resource.getInputStream());\n            System.out.println(props);\n        }\n    }\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"6-\u8bfb\u53d6\u914d\u7f6e\u6587\u4ef6",children:"6. \u8bfb\u53d6\u914d\u7f6e\u6587\u4ef6"}),"\n",(0,t.jsx)(n.h3,{id:"61-properties-\u6587\u4ef6",children:"6.1 Properties \u6587\u4ef6"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'@Service\npublic class PropertiesReader {\n    \n    @Value("classpath:app.properties")\n    private Resource propertiesResource;\n    \n    public Properties loadProperties() throws IOException {\n        Properties properties = new Properties();\n        properties.load(propertiesResource.getInputStream());\n        return properties;\n    }\n    \n    public String getProperty(String key) throws IOException {\n        Properties props = loadProperties();\n        return props.getProperty(key);\n    }\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"62-yaml-\u6587\u4ef6",children:"6.2 YAML \u6587\u4ef6"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'@Service\npublic class YamlReader {\n    \n    @Autowired\n    private ResourceLoader resourceLoader;\n    \n    public Map<String, Object> loadYaml() throws IOException {\n        Resource resource = resourceLoader.getResource("classpath:config/app.yml");\n        \n        Yaml yaml = new Yaml();\n        InputStream inputStream = resource.getInputStream();\n        \n        Map<String, Object> data = yaml.load(inputStream);\n        return data;\n    }\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"63-json-\u6587\u4ef6",children:"6.3 JSON \u6587\u4ef6"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'@Service\npublic class JsonReader {\n    \n    @Autowired\n    private ObjectMapper objectMapper;\n    \n    @Value("classpath:data/users.json")\n    private Resource jsonResource;\n    \n    public List<User> loadUsers() throws IOException {\n        InputStream inputStream = jsonResource.getInputStream();\n        \n        return objectMapper.readValue(\n            inputStream,\n            new TypeReference<List<User>>() {}\n        );\n    }\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"7-\u5199\u5165\u8d44\u6e90",children:"7. \u5199\u5165\u8d44\u6e90"}),"\n",(0,t.jsx)(n.h3,{id:"71-\u5199\u5165\u6587\u4ef6",children:"7.1 \u5199\u5165\u6587\u4ef6"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:"@Service\npublic class ResourceWriter {\n    \n    public void writeToFile(String content, String filename) throws IOException {\n        // \u521b\u5efa\u6587\u4ef6\u8d44\u6e90\n        Resource resource = new FileSystemResource(filename);\n        \n        // \u83b7\u53d6\u6587\u4ef6\n        File file = resource.getFile();\n        \n        // \u5199\u5165\u5185\u5bb9\n        Files.writeString(file.toPath(), content);\n    }\n    \n    public void appendToFile(String content, String filename) throws IOException {\n        Resource resource = new FileSystemResource(filename);\n        File file = resource.getFile();\n        \n        Files.writeString(\n            file.toPath(),\n            content,\n            StandardOpenOption.CREATE,\n            StandardOpenOption.APPEND\n        );\n    }\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"8-\u5b9e\u9645\u5e94\u7528",children:"8. \u5b9e\u9645\u5e94\u7528"}),"\n",(0,t.jsx)(n.h3,{id:"81-\u6a21\u677f\u52a0\u8f7d",children:"8.1 \u6a21\u677f\u52a0\u8f7d"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'@Service\npublic class TemplateService {\n    \n    @Value("classpath:templates/email-welcome.html")\n    private Resource emailTemplate;\n    \n    public String loadEmailTemplate(Map<String, String> variables) throws IOException {\n        // \u8bfb\u53d6\u6a21\u677f\n        String template = new String(emailTemplate.getInputStream().readAllBytes());\n        \n        // \u66ff\u6362\u53d8\u91cf\n        for (Map.Entry<String, String> entry : variables.entrySet()) {\n            template = template.replace("${" + entry.getKey() + "}", entry.getValue());\n        }\n        \n        return template;\n    }\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"82-\u9759\u6001\u8d44\u6e90\u670d\u52a1",children:"8.2 \u9759\u6001\u8d44\u6e90\u670d\u52a1"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'@RestController\n@RequestMapping("/files")\npublic class FileController {\n    \n    @Autowired\n    private ResourceLoader resourceLoader;\n    \n    @GetMapping("/{filename}")\n    public ResponseEntity<Resource> downloadFile(@PathVariable String filename) {\n        Resource resource = resourceLoader.getResource("classpath:static/downloads/" + filename);\n        \n        if (!resource.exists()) {\n            return ResponseEntity.notFound().build();\n        }\n        \n        return ResponseEntity.ok()\n            .header(HttpHeaders.CONTENT_DISPOSITION, "attachment; filename=\\"" + filename + "\\"")\n            .body(resource);\n    }\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"83-\u591a\u73af\u5883\u914d\u7f6e",children:"8.3 \u591a\u73af\u5883\u914d\u7f6e"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'@Configuration\npublic class MultiEnvConfig {\n    \n    @Autowired\n    private Environment environment;\n    \n    @Autowired\n    private ResourceLoader resourceLoader;\n    \n    @Bean\n    public Properties appProperties() throws IOException {\n        String profile = environment.getActiveProfiles()[0];\n        String filename = "classpath:config/app-" + profile + ".properties";\n        \n        Resource resource = resourceLoader.getResource(filename);\n        Properties properties = new Properties();\n        properties.load(resource.getInputStream());\n        \n        return properties;\n    }\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"9-\u6700\u4f73\u5b9e\u8df5",children:"9. \u6700\u4f73\u5b9e\u8df5"}),"\n",(0,t.jsx)(n.h3,{id:"91-\u4f7f\u7528-resourceloader",children:"9.1 \u4f7f\u7528 ResourceLoader"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'// \u2705 \u63a8\u8350\uff1a\u6ce8\u5165 ResourceLoader\n@Service\npublic class GoodService {\n    @Autowired\n    private ResourceLoader resourceLoader;\n    \n    public void loadResource() {\n        Resource resource = resourceLoader.getResource("classpath:data.json");\n    }\n}\n\n// \u274c \u907f\u514d\uff1a\u76f4\u63a5\u521b\u5efa Resource\n@Service\npublic class BadService {\n    public void loadResource() {\n        Resource resource = new ClassPathResource("data.json");\n    }\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"92-\u6b63\u786e\u5904\u7406\u5f02\u5e38",children:"9.2 \u6b63\u786e\u5904\u7406\u5f02\u5e38"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'@Service\npublic class SafeResourceService {\n    \n    @Autowired\n    private ResourceLoader resourceLoader;\n    \n    public Optional<String> loadResourceSafely(String path) {\n        try {\n            Resource resource = resourceLoader.getResource(path);\n            \n            if (!resource.exists()) {\n                return Optional.empty();\n            }\n            \n            String content = new String(resource.getInputStream().readAllBytes());\n            return Optional.of(content);\n            \n        } catch (IOException e) {\n            log.error("Failed to load resource: " + path, e);\n            return Optional.empty();\n        }\n    }\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"93-\u5173\u95ed\u8d44\u6e90",children:"9.3 \u5173\u95ed\u8d44\u6e90"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-java",children:'@Service\npublic class ResourceCleanupService {\n    \n    public void processResource(Resource resource) {\n        try (InputStream inputStream = resource.getInputStream()) {\n            // \u5904\u7406\u8d44\u6e90\n            byte[] data = inputStream.readAllBytes();\n            // try-with-resources \u81ea\u52a8\u5173\u95ed\u6d41\n        } catch (IOException e) {\n            log.error("Error processing resource", e);\n        }\n    }\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"10-\u603b\u7ed3",children:"10. \u603b\u7ed3"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"\u7c7b\u578b"}),(0,t.jsx)(n.th,{children:"\u7528\u9014"}),(0,t.jsx)(n.th,{children:"\u793a\u4f8b"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"ClassPathResource"}),(0,t.jsx)(n.td,{children:"\u7c7b\u8def\u5f84\u8d44\u6e90"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"classpath:config/app.yml"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"FileSystemResource"}),(0,t.jsx)(n.td,{children:"\u6587\u4ef6\u7cfb\u7edf\u8d44\u6e90"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"file:/var/data/file.txt"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"UrlResource"}),(0,t.jsx)(n.td,{children:"URL \u8d44\u6e90"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"https://example.com/data.json"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"ResourceLoader"}),(0,t.jsx)(n.td,{children:"\u7edf\u4e00\u8d44\u6e90\u52a0\u8f7d"}),(0,t.jsx)(n.td,{children:"\u81ea\u52a8\u6ce8\u5165\u4f7f\u7528"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"@Value"}),(0,t.jsx)(n.td,{children:"\u6ce8\u5165\u8d44\u6e90"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:'@Value("classpath:...")'})})]})]})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u5173\u952e\u8981\u70b9"}),"\uff1a"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u4f7f\u7528 Resource \u63a5\u53e3\u7edf\u4e00\u8d44\u6e90\u8bbf\u95ee"}),"\n",(0,t.jsx)(n.li,{children:"ResourceLoader \u63d0\u4f9b\u7075\u6d3b\u7684\u8d44\u6e90\u52a0\u8f7d"}),"\n",(0,t.jsx)(n.li,{children:"\u652f\u6301\u7c7b\u8def\u5f84\u3001\u6587\u4ef6\u7cfb\u7edf\u3001URL \u7b49\u591a\u79cd\u8d44\u6e90\u7c7b\u578b"}),"\n",(0,t.jsx)(n.li,{children:"\u4f7f\u7528 try-with-resources \u81ea\u52a8\u5173\u95ed\u6d41"}),"\n",(0,t.jsx)(n.li,{children:"@Value \u53ef\u4ee5\u76f4\u63a5\u6ce8\u5165\u8d44\u6e90\u5bf9\u8c61"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u4e0b\u4e00\u6b65"}),"\uff1a\u5b66\u4e60 ",(0,t.jsx)(n.a,{href:"/docs/spring/best-practices",children:"Spring \u6700\u4f73\u5b9e\u8df5"})]})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}}}]);