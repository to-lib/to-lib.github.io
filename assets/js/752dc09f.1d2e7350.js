"use strict";(globalThis.webpackChunkto_lib_github_io=globalThis.webpackChunkto_lib_github_io||[]).push([[9569],{48885:(n,e,s)=>{s.d(e,{R:()=>u,x:()=>r});var d=s(99378);const l={},a=d.createContext(l);function u(n){const e=d.useContext(a);return d.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function r(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:u(n.components),d.createElement(a.Provider,{value:e},n.children)}},62102:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>o,contentTitle:()=>r,default:()=>h,frontMatter:()=>u,metadata:()=>d,toc:()=>i});const d=JSON.parse('{"id":"linux/users-groups","title":"\u7528\u6237\u548c\u7ec4\u7ba1\u7406","description":"Linux \u662f\u4e00\u4e2a\u591a\u7528\u6237\u64cd\u4f5c\u7cfb\u7edf\uff0c\u7406\u89e3\u7528\u6237\u548c\u7ec4\u7ba1\u7406\u5bf9\u7cfb\u7edf\u5b89\u5168\u548c\u6743\u9650\u63a7\u5236\u81f3\u5173\u91cd\u8981\u3002","source":"@site/docs/linux/users-groups.md","sourceDirName":"linux","slug":"/linux/users-groups","permalink":"/docs/linux/users-groups","draft":false,"unlisted":false,"editUrl":"https://github.com/to-lib/to-lib.github.io/tree/main/docs/linux/users-groups.md","tags":[],"version":"current","sidebarPosition":8,"frontMatter":{"sidebar_position":8,"title":"\u7528\u6237\u548c\u7ec4\u7ba1\u7406"},"sidebar":"linux","previous":{"title":"Shell \u811a\u672c","permalink":"/docs/linux/shell-scripting"},"next":{"title":"\u8f6f\u4ef6\u5305\u7ba1\u7406","permalink":"/docs/linux/package-management"}}');var l=s(22714),a=s(48885);const u={sidebar_position:8,title:"\u7528\u6237\u548c\u7ec4\u7ba1\u7406"},r="Linux \u7528\u6237\u548c\u7ec4\u7ba1\u7406",o={},i=[{value:"\u7528\u6237\u57fa\u7840",id:"\u7528\u6237\u57fa\u7840",level:2},{value:"\u7528\u6237\u7c7b\u578b",id:"\u7528\u6237\u7c7b\u578b",level:3},{value:"\u7528\u6237\u4fe1\u606f\u6587\u4ef6",id:"\u7528\u6237\u4fe1\u606f\u6587\u4ef6",level:3},{value:"\u7528\u6237\u7ba1\u7406",id:"\u7528\u6237\u7ba1\u7406",level:2},{value:"\u521b\u5efa\u7528\u6237",id:"\u521b\u5efa\u7528\u6237",level:3},{value:"\u4fee\u6539\u7528\u6237",id:"\u4fee\u6539\u7528\u6237",level:3},{value:"\u5220\u9664\u7528\u6237",id:"\u5220\u9664\u7528\u6237",level:3},{value:"\u67e5\u770b\u7528\u6237\u4fe1\u606f",id:"\u67e5\u770b\u7528\u6237\u4fe1\u606f",level:3},{value:"\u7ec4\u7ba1\u7406",id:"\u7ec4\u7ba1\u7406",level:2},{value:"\u521b\u5efa\u7ec4",id:"\u521b\u5efa\u7ec4",level:3},{value:"\u4fee\u6539\u7ec4",id:"\u4fee\u6539\u7ec4",level:3},{value:"\u5220\u9664\u7ec4",id:"\u5220\u9664\u7ec4",level:3},{value:"\u7ec4\u6210\u5458\u7ba1\u7406",id:"\u7ec4\u6210\u5458\u7ba1\u7406",level:3},{value:"sudo \u914d\u7f6e",id:"sudo-\u914d\u7f6e",level:2},{value:"sudo \u57fa\u7840",id:"sudo-\u57fa\u7840",level:3},{value:"\u914d\u7f6e sudoers",id:"\u914d\u7f6e-sudoers",level:3},{value:"sudoers \u914d\u7f6e\u793a\u4f8b",id:"sudoers-\u914d\u7f6e\u793a\u4f8b",level:3},{value:"sudo \u6700\u4f73\u5b9e\u8df5",id:"sudo-\u6700\u4f73\u5b9e\u8df5",level:3},{value:"\u7528\u6237\u73af\u5883",id:"\u7528\u6237\u73af\u5883",level:2},{value:"\u914d\u7f6e\u6587\u4ef6",id:"\u914d\u7f6e\u6587\u4ef6",level:3},{value:"\u73af\u5883\u53d8\u91cf",id:"\u73af\u5883\u53d8\u91cf",level:3},{value:"\u5bc6\u7801\u7b56\u7565",id:"\u5bc6\u7801\u7b56\u7565",level:2},{value:"\u5bc6\u7801\u8bbe\u7f6e",id:"\u5bc6\u7801\u8bbe\u7f6e",level:3},{value:"\u5bc6\u7801\u7b56\u7565\u914d\u7f6e",id:"\u5bc6\u7801\u7b56\u7565\u914d\u7f6e",level:3},{value:"\u5bc6\u7801\u6709\u6548\u671f",id:"\u5bc6\u7801\u6709\u6548\u671f",level:3},{value:"\u7528\u6237\u914d\u989d",id:"\u7528\u6237\u914d\u989d",level:2},{value:"\u78c1\u76d8\u914d\u989d",id:"\u78c1\u76d8\u914d\u989d",level:3},{value:"\u5207\u6362\u7528\u6237",id:"\u5207\u6362\u7528\u6237",level:2},{value:"su \u547d\u4ee4",id:"su-\u547d\u4ee4",level:3},{value:"\u6279\u91cf\u7ba1\u7406",id:"\u6279\u91cf\u7ba1\u7406",level:2},{value:"\u6279\u91cf\u521b\u5efa\u7528\u6237",id:"\u6279\u91cf\u521b\u5efa\u7528\u6237",level:3},{value:"\u6279\u91cf\u4fee\u6539",id:"\u6279\u91cf\u4fee\u6539",level:3},{value:"\u7528\u6237\u5ba1\u8ba1",id:"\u7528\u6237\u5ba1\u8ba1",level:2},{value:"\u67e5\u770b\u7528\u6237\u6d3b\u52a8",id:"\u67e5\u770b\u7528\u6237\u6d3b\u52a8",level:3},{value:"\u8d26\u6237\u5b89\u5168\u5ba1\u8ba1",id:"\u8d26\u6237\u5b89\u5168\u5ba1\u8ba1",level:3},{value:"\u6700\u4f73\u5b9e\u8df5",id:"\u6700\u4f73\u5b9e\u8df5",level:2},{value:"1. \u7528\u6237\u7ba1\u7406",id:"1-\u7528\u6237\u7ba1\u7406",level:3},{value:"2. \u7ec4\u7ba1\u7406",id:"2-\u7ec4\u7ba1\u7406",level:3},{value:"3. sudo \u914d\u7f6e",id:"3-sudo-\u914d\u7f6e",level:3},{value:"4. \u5b89\u5168\u5efa\u8bae",id:"4-\u5b89\u5168\u5efa\u8bae",level:3},{value:"\u6545\u969c\u6392\u67e5",id:"\u6545\u969c\u6392\u67e5",level:2},{value:"\u65e0\u6cd5\u767b\u5f55",id:"\u65e0\u6cd5\u767b\u5f55",level:3},{value:"sudo \u95ee\u9898",id:"sudo-\u95ee\u9898",level:3},{value:"\u603b\u7ed3",id:"\u603b\u7ed3",level:2}];function c(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.header,{children:(0,l.jsx)(e.h1,{id:"linux-\u7528\u6237\u548c\u7ec4\u7ba1\u7406",children:"Linux \u7528\u6237\u548c\u7ec4\u7ba1\u7406"})}),"\n",(0,l.jsx)(e.p,{children:"Linux \u662f\u4e00\u4e2a\u591a\u7528\u6237\u64cd\u4f5c\u7cfb\u7edf\uff0c\u7406\u89e3\u7528\u6237\u548c\u7ec4\u7ba1\u7406\u5bf9\u7cfb\u7edf\u5b89\u5168\u548c\u6743\u9650\u63a7\u5236\u81f3\u5173\u91cd\u8981\u3002"}),"\n",(0,l.jsx)(e.h2,{id:"\u7528\u6237\u57fa\u7840",children:"\u7528\u6237\u57fa\u7840"}),"\n",(0,l.jsx)(e.h3,{id:"\u7528\u6237\u7c7b\u578b",children:"\u7528\u6237\u7c7b\u578b"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"root\uff08\u8d85\u7ea7\u7528\u6237\uff09"})," - UID 0\uff0c\u62e5\u6709\u6240\u6709\u6743\u9650"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u7cfb\u7edf\u7528\u6237"})," - UID 1-999\uff0c\u7528\u4e8e\u7cfb\u7edf\u670d\u52a1"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"\u666e\u901a\u7528\u6237"})," - UID 1000+\uff0c\u65e5\u5e38\u4f7f\u7528\u8d26\u6237"]}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"\u7528\u6237\u4fe1\u606f\u6587\u4ef6",children:"\u7528\u6237\u4fe1\u606f\u6587\u4ef6"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# /etc/passwd - \u7528\u6237\u8d26\u6237\u4fe1\u606f\n# \u683c\u5f0f\uff1a\u7528\u6237\u540d:\u5bc6\u7801\u5360\u4f4d\u7b26:UID:GID:\u63cf\u8ff0:\u4e3b\u76ee\u5f55:Shell\ncat /etc/passwd\n# \u793a\u4f8b\uff1a\n# john:x:1000:1000:John Doe:/home/john:/bin/bash\n\n# /etc/shadow - \u7528\u6237\u5bc6\u7801\u4fe1\u606f\uff08\u52a0\u5bc6\uff09\nsudo cat /etc/shadow\n# \u683c\u5f0f\uff1a\u7528\u6237\u540d:\u52a0\u5bc6\u5bc6\u7801:\u6700\u540e\u4fee\u6539\u65e5\u671f:\u6700\u5c0f\u95f4\u9694:\u6700\u5927\u95f4\u9694:\u8b66\u544a\u671f:\u7981\u7528\u671f:\u8fc7\u671f\u65e5\u671f\n\n# /etc/group - \u7ec4\u4fe1\u606f\ncat /etc/group\n# \u683c\u5f0f\uff1a\u7ec4\u540d:\u5bc6\u7801:GID:\u6210\u5458\u5217\u8868\n"})}),"\n",(0,l.jsx)(e.h2,{id:"\u7528\u6237\u7ba1\u7406",children:"\u7528\u6237\u7ba1\u7406"}),"\n",(0,l.jsx)(e.h3,{id:"\u521b\u5efa\u7528\u6237",children:"\u521b\u5efa\u7528\u6237"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:'# \u57fa\u672c\u521b\u5efa\nsudo useradd username\n\n# \u521b\u5efa\u5e76\u6307\u5b9a\u9009\u9879\nsudo useradd -m -s /bin/bash -c "Full Name" username\n# -m: \u521b\u5efa\u4e3b\u76ee\u5f55\n# -s: \u6307\u5b9a Shell\n# -c: \u6dfb\u52a0\u6ce8\u91ca\n\n# \u521b\u5efa\u7528\u6237\u5e76\u8bbe\u7f6e\u4e3b\u76ee\u5f55\nsudo useradd -m -d /home/customdir username\n\n# \u6307\u5b9a UID\nsudo useradd -u 1500 username\n\n# \u6307\u5b9a\u4e3b\u7ec4\u548c\u9644\u52a0\u7ec4\nsudo useradd -g users -G sudo,developers username\n\n# \u8bbe\u7f6e\u5bc6\u7801\nsudo passwd username\n\n# \u4ea4\u4e92\u5f0f\u521b\u5efa\uff08\u63a8\u8350\uff09\nsudo adduser username\n'})}),"\n",(0,l.jsx)(e.h3,{id:"\u4fee\u6539\u7528\u6237",children:"\u4fee\u6539\u7528\u6237"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u4fee\u6539\u7528\u6237\u540d\nsudo usermod -l newname oldname\n\n# \u4fee\u6539\u4e3b\u76ee\u5f55\nsudo usermod -d /new/home -m username\n\n# \u4fee\u6539 Shell\nsudo usermod -s /bin/zsh username\n\n# \u4fee\u6539 UID\nsudo usermod -u 1600 username\n\n# \u6dfb\u52a0\u5230\u9644\u52a0\u7ec4\nsudo usermod -aG groupname username\n\n# \u9501\u5b9a\u7528\u6237\nsudo usermod -L username\nsudo passwd -l username\n\n# \u89e3\u9501\u7528\u6237\nsudo usermod -U username\nsudo passwd -u username\n\n# \u8bbe\u7f6e\u8d26\u6237\u8fc7\u671f\nsudo usermod -e 2024-12-31 username\n"})}),"\n",(0,l.jsx)(e.h3,{id:"\u5220\u9664\u7528\u6237",children:"\u5220\u9664\u7528\u6237"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u5220\u9664\u7528\u6237\uff08\u4fdd\u7559\u4e3b\u76ee\u5f55\uff09\nsudo userdel username\n\n# \u5220\u9664\u7528\u6237\u53ca\u4e3b\u76ee\u5f55\nsudo userdel -r username\n\n# \u5f3a\u5236\u5220\u9664\uff08\u5373\u4f7f\u7528\u6237\u5df2\u767b\u5f55\uff09\nsudo userdel -f username\n"})}),"\n",(0,l.jsx)(e.h3,{id:"\u67e5\u770b\u7528\u6237\u4fe1\u606f",children:"\u67e5\u770b\u7528\u6237\u4fe1\u606f"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u67e5\u770b\u5f53\u524d\u7528\u6237\nwhoami\nid\n\n# \u67e5\u770b\u7528\u6237\u8be6\u7ec6\u4fe1\u606f\nid username\nfinger username\n\n# \u67e5\u770b\u5df2\u767b\u5f55\u7528\u6237\nwho\nw\nusers\n\n# \u67e5\u770b\u7528\u6237\u6700\u540e\u767b\u5f55\nlast\nlastlog\n\n# \u67e5\u770b\u7528\u6237\u6240\u5c5e\u7ec4\ngroups username\n"})}),"\n",(0,l.jsx)(e.h2,{id:"\u7ec4\u7ba1\u7406",children:"\u7ec4\u7ba1\u7406"}),"\n",(0,l.jsx)(e.h3,{id:"\u521b\u5efa\u7ec4",children:"\u521b\u5efa\u7ec4"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u521b\u5efa\u7ec4\nsudo groupadd groupname\n\n# \u6307\u5b9a GID\nsudo groupadd -g 5000 groupname\n\n# \u521b\u5efa\u7cfb\u7edf\u7ec4\nsudo groupadd -r groupname\n"})}),"\n",(0,l.jsx)(e.h3,{id:"\u4fee\u6539\u7ec4",children:"\u4fee\u6539\u7ec4"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u4fee\u6539\u7ec4\u540d\nsudo groupmod -n newname oldname\n\n# \u4fee\u6539 GID\nsudo groupmod -g 5001 groupname\n"})}),"\n",(0,l.jsx)(e.h3,{id:"\u5220\u9664\u7ec4",children:"\u5220\u9664\u7ec4"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u5220\u9664\u7ec4\nsudo groupdel groupname\n\n# \u6ce8\u610f\uff1a\u4e0d\u80fd\u5220\u9664\u7528\u6237\u7684\u4e3b\u7ec4\uff0c\u9700\u5148\u5220\u9664\u6216\u4fee\u6539\u7528\u6237\n"})}),"\n",(0,l.jsx)(e.h3,{id:"\u7ec4\u6210\u5458\u7ba1\u7406",children:"\u7ec4\u6210\u5458\u7ba1\u7406"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u6dfb\u52a0\u7528\u6237\u5230\u7ec4\nsudo usermod -aG groupname username\nsudo gpasswd -a username groupname\n\n# \u4ece\u7ec4\u4e2d\u5220\u9664\u7528\u6237\nsudo gpasswd -d username groupname\n\n# \u8bbe\u7f6e\u7ec4\u7ba1\u7406\u5458\nsudo gpasswd -A admin_user groupname\n\n# \u67e5\u770b\u7ec4\u6210\u5458\ngetent group groupname\nmembers groupname\n"})}),"\n",(0,l.jsx)(e.h2,{id:"sudo-\u914d\u7f6e",children:"sudo \u914d\u7f6e"}),"\n",(0,l.jsx)(e.h3,{id:"sudo-\u57fa\u7840",children:"sudo \u57fa\u7840"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u4f7f\u7528 sudo\nsudo command\n\n# \u5207\u6362\u5230 root\nsudo -i\nsudo su -\n\n# \u4ee5\u5176\u4ed6\u7528\u6237\u8eab\u4efd\u6267\u884c\nsudo -u username command\n\n# \u7f16\u8f91\u9700\u8981 root \u6743\u9650\u7684\u6587\u4ef6\nsudo vim /etc/hosts\n\n# \u5217\u51fa sudo \u6743\u9650\nsudo -l\n\n# \u66f4\u65b0 sudo \u65f6\u95f4\u6233\nsudo -v\n\n# \u6e05\u9664 sudo \u65f6\u95f4\u6233\nsudo -k\n"})}),"\n",(0,l.jsx)(e.h3,{id:"\u914d\u7f6e-sudoers",children:"\u914d\u7f6e sudoers"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u5b89\u5168\u7f16\u8f91 sudoers \u6587\u4ef6\nsudo visudo\n\n# sudoers \u6587\u4ef6\u4f4d\u7f6e\n/etc/sudoers\n/etc/sudoers.d/\n\n# \u57fa\u672c\u8bed\u6cd5\n# \u7528\u6237 \u4e3b\u673a=(\u8fd0\u884c\u8eab\u4efd) \u547d\u4ee4\n# User Host=(RunAs) Commands\n"})}),"\n",(0,l.jsx)(e.h3,{id:"sudoers-\u914d\u7f6e\u793a\u4f8b",children:"sudoers \u914d\u7f6e\u793a\u4f8b"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u5141\u8bb8\u7528\u6237\u6267\u884c\u6240\u6709\u547d\u4ee4\nusername ALL=(ALL:ALL) ALL\n\n# \u5141\u8bb8\u7ec4\u6267\u884c\u6240\u6709\u547d\u4ee4\n%groupname ALL=(ALL:ALL) ALL\n\n# \u65e0\u5bc6\u7801\u6267\u884c\u6240\u6709\u547d\u4ee4\nusername ALL=(ALL) NOPASSWD: ALL\n\n# \u65e0\u5bc6\u7801\u6267\u884c\u7279\u5b9a\u547d\u4ee4\nusername ALL=(ALL) NOPASSWD: /sbin/shutdown, /sbin/reboot\n\n# \u9650\u5236\u7279\u5b9a\u547d\u4ee4\nusername ALL=(ALL) /usr/bin/apt, /usr/bin/systemctl\n\n# \u547d\u4ee4\u522b\u540d\nCmnd_Alias NETWORKING = /sbin/route, /sbin/ifconfig, /bin/ping\nusername ALL=NETWORKING\n\n# \u7528\u6237\u522b\u540d\nUser_Alias ADMINS = alice, bob, charlie\nADMINS ALL=(ALL) ALL\n\n# \u4e3b\u673a\u522b\u540d\nHost_Alias SERVERS = server1, server2\nusername SERVERS=(ALL) ALL\n"})}),"\n",(0,l.jsx)(e.h3,{id:"sudo-\u6700\u4f73\u5b9e\u8df5",children:"sudo \u6700\u4f73\u5b9e\u8df5"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# 1. \u4e0d\u8981\u76f4\u63a5\u4fee\u6539 /etc/sudoers\n# \u4f7f\u7528 visudo \u6216\u5728 /etc/sudoers.d/ \u521b\u5efa\u6587\u4ef6\n\n# 2. \u521b\u5efa\u72ec\u7acb\u7684 sudoers \u6587\u4ef6\nsudo visudo -f /etc/sudoers.d/username\n\n# 3. \u6587\u4ef6\u6743\u9650\u5fc5\u987b\u662f 0440\nsudo chmod 0440 /etc/sudoers.d/username\n\n# 4. \u4f7f\u7528\u7ec4\u7ba1\u7406\u6743\u9650\n%sudo ALL=(ALL:ALL) ALL\n%wheel ALL=(ALL:ALL) ALL\n"})}),"\n",(0,l.jsx)(e.h2,{id:"\u7528\u6237\u73af\u5883",children:"\u7528\u6237\u73af\u5883"}),"\n",(0,l.jsx)(e.h3,{id:"\u914d\u7f6e\u6587\u4ef6",children:"\u914d\u7f6e\u6587\u4ef6"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u5168\u5c40\u914d\u7f6e\n/etc/profile              # \u6240\u6709\u7528\u6237\u767b\u5f55\u65f6\u6267\u884c\n/etc/bash.bashrc          # \u6240\u6709\u7528\u6237\u7684 bash \u914d\u7f6e\n/etc/environment          # \u73af\u5883\u53d8\u91cf\n\n# \u7528\u6237\u914d\u7f6e\n~/.profile                # \u7528\u6237\u767b\u5f55\u65f6\u6267\u884c\n~/.bashrc                 # \u6bcf\u6b21\u6253\u5f00 bash \u65f6\u6267\u884c\n~/.bash_profile           # \u767b\u5f55 shell \u6267\u884c\n~/.bash_logout            # \u9000\u51fa\u65f6\u6267\u884c\n~/.bash_history           # \u547d\u4ee4\u5386\u53f2\n"})}),"\n",(0,l.jsx)(e.h3,{id:"\u73af\u5883\u53d8\u91cf",children:"\u73af\u5883\u53d8\u91cf"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u67e5\u770b\u73af\u5883\u53d8\u91cf\nenv\nprintenv\necho $PATH\n\n# \u8bbe\u7f6e\u4e34\u65f6\u73af\u5883\u53d8\u91cf\nexport VAR=value\n\n# \u6c38\u4e45\u8bbe\u7f6e\uff08\u5f53\u524d\u7528\u6237\uff09\necho 'export VAR=value' >> ~/.bashrc\nsource ~/.bashrc\n\n# \u6c38\u4e45\u8bbe\u7f6e\uff08\u6240\u6709\u7528\u6237\uff09\nsudo vim /etc/environment\n# \u6dfb\u52a0\uff1aVAR=value\n"})}),"\n",(0,l.jsx)(e.h2,{id:"\u5bc6\u7801\u7b56\u7565",children:"\u5bc6\u7801\u7b56\u7565"}),"\n",(0,l.jsx)(e.h3,{id:"\u5bc6\u7801\u8bbe\u7f6e",children:"\u5bc6\u7801\u8bbe\u7f6e"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u4fee\u6539\u81ea\u5df1\u7684\u5bc6\u7801\npasswd\n\n# \u4fee\u6539\u5176\u4ed6\u7528\u6237\u5bc6\u7801\uff08\u9700 root\uff09\nsudo passwd username\n\n# \u5f3a\u5236\u7528\u6237\u4e0b\u6b21\u767b\u5f55\u4fee\u6539\u5bc6\u7801\nsudo passwd -e username\n\n# \u751f\u6210\u968f\u673a\u5bc6\u7801\npwgen 16 1\nopenssl rand -base64 16\n"})}),"\n",(0,l.jsx)(e.h3,{id:"\u5bc6\u7801\u7b56\u7565\u914d\u7f6e",children:"\u5bc6\u7801\u7b56\u7565\u914d\u7f6e"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u5b89\u88c5 PAM \u5bc6\u7801\u8d28\u91cf\u6a21\u5757\nsudo apt install libpam-pwquality\n\n# \u914d\u7f6e\u5bc6\u7801\u7b56\u7565\nsudo vim /etc/security/pwquality.conf\n\n# \u5e38\u7528\u914d\u7f6e\uff1a\nminlen = 12              # \u6700\u5c0f\u957f\u5ea6\ndcredit = -1             # \u81f3\u5c111\u4e2a\u6570\u5b57\nucredit = -1             # \u81f3\u5c111\u4e2a\u5927\u5199\u5b57\u6bcd\nlcredit = -1             # \u81f3\u5c111\u4e2a\u5c0f\u5199\u5b57\u6bcd\nocredit = -1             # \u81f3\u5c111\u4e2a\u7279\u6b8a\u5b57\u7b26\n"})}),"\n",(0,l.jsx)(e.h3,{id:"\u5bc6\u7801\u6709\u6548\u671f",children:"\u5bc6\u7801\u6709\u6548\u671f"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u8bbe\u7f6e\u5bc6\u7801\u6700\u957f\u6709\u6548\u671f\nsudo chage -M 90 username\n\n# \u8bbe\u7f6e\u5bc6\u7801\u6700\u77ed\u6709\u6548\u671f\nsudo chage -m 7 username\n\n# \u8bbe\u7f6e\u5bc6\u7801\u8fc7\u671f\u8b66\u544a\nsudo chage -W 14 username\n\n# \u67e5\u770b\u5bc6\u7801\u72b6\u6001\nsudo chage -l username\n\n# \u914d\u7f6e\u9ed8\u8ba4\u7b56\u7565\nsudo vim /etc/login.defs\n# PASS_MAX_DAYS   90\n# PASS_MIN_DAYS   7\n# PASS_WARN_AGE   14\n"})}),"\n",(0,l.jsx)(e.h2,{id:"\u7528\u6237\u914d\u989d",children:"\u7528\u6237\u914d\u989d"}),"\n",(0,l.jsx)(e.h3,{id:"\u78c1\u76d8\u914d\u989d",children:"\u78c1\u76d8\u914d\u989d"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u5b89\u88c5\u914d\u989d\u5de5\u5177\nsudo apt install quota\n\n# \u542f\u7528\u914d\u989d\uff08\u7f16\u8f91 /etc/fstab\uff09\n/dev/sda1 /home ext4 defaults,usrquota,grpquota 0 2\n\n# \u91cd\u65b0\u6302\u8f7d\nsudo mount -o remount /home\n\n# \u521b\u5efa\u914d\u989d\u6587\u4ef6\nsudo quotacheck -cugm /home\n\n# \u542f\u7528\u914d\u989d\nsudo quotaon /home\n\n# \u7f16\u8f91\u7528\u6237\u914d\u989d\nsudo edquota username\n\n# \u67e5\u770b\u914d\u989d\nquota -u username\nsudo repquota /home\n"})}),"\n",(0,l.jsx)(e.h2,{id:"\u5207\u6362\u7528\u6237",children:"\u5207\u6362\u7528\u6237"}),"\n",(0,l.jsx)(e.h3,{id:"su-\u547d\u4ee4",children:"su \u547d\u4ee4"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:'# \u5207\u6362\u5230\u5176\u4ed6\u7528\u6237\nsu username\n\n# \u5207\u6362\u5230 root\nsu -\nsu - root\n\n# \u4ee5\u5176\u4ed6\u7528\u6237\u8eab\u4efd\u6267\u884c\u547d\u4ee4\nsu -c "command" username\n\n# su \u548c su - \u7684\u533a\u522b\n# su: \u5207\u6362\u7528\u6237\u4f46\u4fdd\u7559\u5f53\u524d\u73af\u5883\n# su -: \u5207\u6362\u7528\u6237\u5e76\u52a0\u8f7d\u76ee\u6807\u7528\u6237\u73af\u5883\n'})}),"\n",(0,l.jsx)(e.h2,{id:"\u6279\u91cf\u7ba1\u7406",children:"\u6279\u91cf\u7ba1\u7406"}),"\n",(0,l.jsx)(e.h3,{id:"\u6279\u91cf\u521b\u5efa\u7528\u6237",children:"\u6279\u91cf\u521b\u5efa\u7528\u6237"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:'#!/bin/bash\n# \u4ece\u6587\u4ef6\u6279\u91cf\u521b\u5efa\u7528\u6237\n\nwhile IFS=: read -r username password; do\n    sudo useradd -m "$username"\n    echo "$username:$password" | sudo chpasswd\n    echo "\u521b\u5efa\u7528\u6237: $username"\ndone < users.txt\n'})}),"\n",(0,l.jsx)(e.h3,{id:"\u6279\u91cf\u4fee\u6539",children:"\u6279\u91cf\u4fee\u6539"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:'# \u6279\u91cf\u4fee\u6539\u5bc6\u7801\u6709\u6548\u671f\nfor user in $(cut -d: -f1 /etc/passwd); do\n    sudo chage -M 90 "$user"\ndone\n\n# \u6279\u91cf\u6dfb\u52a0\u5230\u7ec4\nfor user in alice bob charlie; do\n    sudo usermod -aG developers "$user"\ndone\n'})}),"\n",(0,l.jsx)(e.h2,{id:"\u7528\u6237\u5ba1\u8ba1",children:"\u7528\u6237\u5ba1\u8ba1"}),"\n",(0,l.jsx)(e.h3,{id:"\u67e5\u770b\u7528\u6237\u6d3b\u52a8",children:"\u67e5\u770b\u7528\u6237\u6d3b\u52a8"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u67e5\u770b\u767b\u5f55\u5386\u53f2\nlast\nlast -n 10           # \u6700\u8fd110\u6b21\nlast username        # \u7279\u5b9a\u7528\u6237\n\n# \u67e5\u770b\u5931\u8d25\u7684\u767b\u5f55\nlastb\nsudo lastb\n\n# \u67e5\u770b\u5f53\u524d\u767b\u5f55\nw\nwho\nwho -a\n\n# \u67e5\u770b\u7528\u6237\u8fdb\u7a0b\nps -u username\n"})}),"\n",(0,l.jsx)(e.h3,{id:"\u8d26\u6237\u5b89\u5168\u5ba1\u8ba1",children:"\u8d26\u6237\u5b89\u5168\u5ba1\u8ba1"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u67e5\u627e\u6ca1\u6709\u5bc6\u7801\u7684\u8d26\u6237\nsudo awk -F: '($2 == \"\" ) {print $1}' /etc/shadow\n\n# \u67e5\u627e UID \u4e3a 0 \u7684\u8d26\u6237\uff08\u9664\u4e86 root\uff09\nsudo awk -F: '($3 == 0) {print $1}' /etc/passwd\n\n# \u67e5\u627e\u7a7a GID\nsudo awk -F: '($4 == \"\" ) {print $1}' /etc/passwd\n\n# \u68c0\u67e5\u53ef\u7591\u7684 shell\ngrep -v '/nologin\\|/false' /etc/passwd\n"})}),"\n",(0,l.jsx)(e.h2,{id:"\u6700\u4f73\u5b9e\u8df5",children:"\u6700\u4f73\u5b9e\u8df5"}),"\n",(0,l.jsx)(e.h3,{id:"1-\u7528\u6237\u7ba1\u7406",children:"1. \u7528\u6237\u7ba1\u7406"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u2705 \u4f7f\u7528\u666e\u901a\u7528\u6237\u65e5\u5e38\u5de5\u4f5c\n# \u2705 \u9700\u8981\u65f6\u4f7f\u7528 sudo\n# \u2705 \u7981\u7528 root \u8fdc\u7a0b\u767b\u5f55\n# \u2705 \u5b9a\u671f\u5ba1\u67e5\u7528\u6237\u8d26\u6237\n# \u2705 \u5220\u9664\u4e0d\u9700\u8981\u7684\u8d26\u6237\n\n# \u274c \u4e0d\u8981\u4ee5 root \u8eab\u4efd\u65e5\u5e38\u5de5\u4f5c\n# \u274c \u4e0d\u8981\u5171\u4eab\u8d26\u6237\n# \u274c \u4e0d\u8981\u4f7f\u7528\u7b80\u5355\u5bc6\u7801\n"})}),"\n",(0,l.jsx)(e.h3,{id:"2-\u7ec4\u7ba1\u7406",children:"2. \u7ec4\u7ba1\u7406"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u6309\u804c\u80fd\u521b\u5efa\u7ec4\nsudo groupadd developers\nsudo groupadd admins\nsudo groupadd readonly\n\n# \u4f7f\u7528\u7ec4\u7ba1\u7406\u6743\u9650\nsudo chown :developers /var/www/project\nsudo chmod 2775 /var/www/project\n"})}),"\n",(0,l.jsx)(e.h3,{id:"3-sudo-\u914d\u7f6e",children:"3. sudo \u914d\u7f6e"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u4f7f\u7528\u6700\u5c0f\u6743\u9650\u539f\u5219\n# \u53ea\u6388\u4e88\u5fc5\u8981\u7684\u547d\u4ee4\u6743\u9650\nusername ALL=(ALL) NOPASSWD: /sbin/reboot, /sbin/poweroff\n\n# \u8bb0\u5f55 sudo \u64cd\u4f5c\nDefaults logfile=/var/log/sudo.log\nDefaults log_year, log_host, log_input, log_output\n"})}),"\n",(0,l.jsx)(e.h3,{id:"4-\u5b89\u5168\u5efa\u8bae",children:"4. \u5b89\u5168\u5efa\u8bae"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# 1. \u5f3a\u5236\u4f7f\u7528\u5f3a\u5bc6\u7801\n# \u914d\u7f6e pwquality\n\n# 2. \u5b9e\u65bd\u5bc6\u7801\u6709\u6548\u671f\n# \u4f7f\u7528 chage \u8bbe\u7f6e\n\n# 3. \u7981\u7528\u4e0d\u5fc5\u8981\u7684\u8d26\u6237\nsudo usermod -L username\n\n# 4. \u76d1\u63a7\u53ef\u7591\u6d3b\u52a8\n# \u5b9a\u671f\u68c0\u67e5 /var/log/auth.log\n\n# 5. \u4f7f\u7528 SSH \u5bc6\u94a5\u66ff\u4ee3\u5bc6\u7801\n# \u914d\u7f6e\u516c\u94a5\u8ba4\u8bc1\n"})}),"\n",(0,l.jsx)(e.h2,{id:"\u6545\u969c\u6392\u67e5",children:"\u6545\u969c\u6392\u67e5"}),"\n",(0,l.jsx)(e.h3,{id:"\u65e0\u6cd5\u767b\u5f55",children:"\u65e0\u6cd5\u767b\u5f55"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u68c0\u67e5\u8d26\u6237\u662f\u5426\u9501\u5b9a\nsudo passwd -S username\n\n# \u68c0\u67e5\u5bc6\u7801\u6709\u6548\u671f\nsudo chage -l username\n\n# \u68c0\u67e5 Shell \u662f\u5426\u6709\u6548\ngrep username /etc/passwd\n\n# \u91cd\u7f6e\u5bc6\u7801\uff08\u5355\u7528\u6237\u6a21\u5f0f\uff09\npasswd username\n"})}),"\n",(0,l.jsx)(e.h3,{id:"sudo-\u95ee\u9898",children:"sudo \u95ee\u9898"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# \u68c0\u67e5 sudo \u6743\u9650\nsudo -l\n\n# \u68c0\u67e5 sudoers \u8bed\u6cd5\nsudo visudo -c\n\n# \u67e5\u770b sudo \u65e5\u5fd7\nsudo cat /var/log/auth.log | grep sudo\n"})}),"\n",(0,l.jsx)(e.h2,{id:"\u603b\u7ed3",children:"\u603b\u7ed3"}),"\n",(0,l.jsx)(e.p,{children:"\u672c\u6587\u4ecb\u7ecd\u4e86 Linux \u7528\u6237\u548c\u7ec4\u7ba1\u7406\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u2705 \u7528\u6237\u521b\u5efa\u3001\u4fee\u6539\u3001\u5220\u9664"}),"\n",(0,l.jsx)(e.li,{children:"\u2705 \u7ec4\u7ba1\u7406\u548c\u6210\u5458\u63a7\u5236"}),"\n",(0,l.jsx)(e.li,{children:"\u2705 sudo \u914d\u7f6e\u548c\u6700\u4f73\u5b9e\u8df5"}),"\n",(0,l.jsx)(e.li,{children:"\u2705 \u5bc6\u7801\u7b56\u7565\u548c\u5b89\u5168"}),"\n",(0,l.jsx)(e.li,{children:"\u2705 \u7528\u6237\u5ba1\u8ba1\u548c\u6545\u969c\u6392\u67e5"}),"\n"]}),"\n",(0,l.jsxs)(e.p,{children:["\u7ee7\u7eed\u5b66\u4e60 ",(0,l.jsx)(e.a,{href:"./package-management",children:"\u8f6f\u4ef6\u5305\u7ba1\u7406"})," \u548c ",(0,l.jsx)(e.a,{href:"./system-admin",children:"\u7cfb\u7edf\u7ba1\u7406"}),"\u3002"]})]})}function h(n={}){const{wrapper:e}={...(0,a.R)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(c,{...n})}):c(n)}}}]);