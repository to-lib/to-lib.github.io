"use strict";(globalThis.webpackChunkto_lib_github_io=globalThis.webpackChunkto_lib_github_io||[]).push([[70299],{48885:(e,n,r)=>{r.d(n,{R:()=>i,x:()=>t});var s=r(99378);const a={},c=s.createContext(a);function i(e){const n=s.useContext(c);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),s.createElement(c.Provider,{value:n},e.children)}},52716:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>t,default:()=>p,frontMatter:()=>i,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"kubernetes/configmap-secret","title":"ConfigMap \u4e0e Secret","description":"Kubernetes \u914d\u7f6e\u7ba1\u7406","source":"@site/docs/kubernetes/configmap-secret.md","sourceDirName":"kubernetes","slug":"/kubernetes/configmap-secret","permalink":"/docs/kubernetes/configmap-secret","draft":false,"unlisted":false,"editUrl":"https://github.com/to-lib/to-lib.github.io/tree/main/docs/kubernetes/configmap-secret.md","tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"sidebar_position":7,"title":"ConfigMap \u4e0e Secret","description":"Kubernetes \u914d\u7f6e\u7ba1\u7406"},"sidebar":"kubernetes","previous":{"title":"Service \u670d\u52a1\u53d1\u73b0","permalink":"/docs/kubernetes/services"},"next":{"title":"StatefulSet \u6709\u72b6\u6001\u5e94\u7528","permalink":"/docs/kubernetes/statefulset"}}');var a=r(22714),c=r(48885);const i={sidebar_position:7,title:"ConfigMap \u4e0e Secret",description:"Kubernetes \u914d\u7f6e\u7ba1\u7406"},t="ConfigMap \u4e0e Secret",l={},d=[{value:"ConfigMap \u6982\u8ff0",id:"configmap-\u6982\u8ff0",level:2},{value:"\u521b\u5efa ConfigMap",id:"\u521b\u5efa-configmap",level:2},{value:"\u4ece\u5b57\u9762\u91cf\u521b\u5efa",id:"\u4ece\u5b57\u9762\u91cf\u521b\u5efa",level:3},{value:"\u4ece\u6587\u4ef6\u521b\u5efa",id:"\u4ece\u6587\u4ef6\u521b\u5efa",level:3},{value:"\u4ece YAML \u521b\u5efa",id:"\u4ece-yaml-\u521b\u5efa",level:3},{value:"\u4f7f\u7528 ConfigMap",id:"\u4f7f\u7528-configmap",level:2},{value:"\u4f5c\u4e3a\u73af\u5883\u53d8\u91cf",id:"\u4f5c\u4e3a\u73af\u5883\u53d8\u91cf",level:3},{value:"\u4f5c\u4e3a\u6587\u4ef6\u6302\u8f7d",id:"\u4f5c\u4e3a\u6587\u4ef6\u6302\u8f7d",level:3},{value:"\u6302\u8f7d\u5355\u4e2a\u6587\u4ef6",id:"\u6302\u8f7d\u5355\u4e2a\u6587\u4ef6",level:3},{value:"Secret \u6982\u8ff0",id:"secret-\u6982\u8ff0",level:2},{value:"Secret \u7c7b\u578b",id:"secret-\u7c7b\u578b",level:3},{value:"\u521b\u5efa Secret",id:"\u521b\u5efa-secret",level:2},{value:"\u4ece\u5b57\u9762\u91cf\u521b\u5efa",id:"\u4ece\u5b57\u9762\u91cf\u521b\u5efa-1",level:3},{value:"\u4ece\u6587\u4ef6\u521b\u5efa",id:"\u4ece\u6587\u4ef6\u521b\u5efa-1",level:3},{value:"\u4ece YAML \u521b\u5efa",id:"\u4ece-yaml-\u521b\u5efa-1",level:3},{value:"TLS Secret",id:"tls-secret",level:3},{value:"Docker Registry Secret",id:"docker-registry-secret",level:3},{value:"\u4f7f\u7528 Secret",id:"\u4f7f\u7528-secret",level:2},{value:"\u4f5c\u4e3a\u73af\u5883\u53d8\u91cf",id:"\u4f5c\u4e3a\u73af\u5883\u53d8\u91cf-1",level:3},{value:"\u4f5c\u4e3a\u6587\u4ef6\u6302\u8f7d",id:"\u4f5c\u4e3a\u6587\u4ef6\u6302\u8f7d-1",level:3},{value:"\u62c9\u53d6\u79c1\u6709\u955c\u50cf",id:"\u62c9\u53d6\u79c1\u6709\u955c\u50cf",level:3},{value:"\u914d\u7f6e\u66f4\u65b0",id:"\u914d\u7f6e\u66f4\u65b0",level:2},{value:"ConfigMap \u66f4\u65b0",id:"configmap-\u66f4\u65b0",level:3},{value:"\u4e0d\u53ef\u53d8 ConfigMap/Secret",id:"\u4e0d\u53ef\u53d8-configmapsecret",level:3},{value:"\u52a0\u5bc6 Secret",id:"\u52a0\u5bc6-secret",level:2},{value:"\u542f\u7528\u52a0\u5bc6",id:"\u542f\u7528\u52a0\u5bc6",level:3},{value:"\u5916\u90e8\u5bc6\u94a5\u7ba1\u7406",id:"\u5916\u90e8\u5bc6\u94a5\u7ba1\u7406",level:3},{value:"\u5e38\u7528\u64cd\u4f5c",id:"\u5e38\u7528\u64cd\u4f5c",level:2},{value:"\u6700\u4f73\u5b9e\u8df5",id:"\u6700\u4f73\u5b9e\u8df5",level:2}];function o(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,c.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"configmap-\u4e0e-secret",children:"ConfigMap \u4e0e Secret"})}),"\n",(0,a.jsx)(n.h2,{id:"configmap-\u6982\u8ff0",children:"ConfigMap \u6982\u8ff0"}),"\n",(0,a.jsx)(n.p,{children:"ConfigMap \u7528\u4e8e\u5b58\u50a8\u975e\u673a\u5bc6\u7684\u914d\u7f6e\u6570\u636e\uff0c\u4ee5\u952e\u503c\u5bf9\u5f62\u5f0f\u4fdd\u5b58\u3002"}),"\n",(0,a.jsx)(n.mermaid,{value:"graph LR\n    CM[ConfigMap] --\x3e |\u73af\u5883\u53d8\u91cf| C1[Container]\n    CM --\x3e |\u6302\u8f7d\u6587\u4ef6| C2[Container]\n    CM --\x3e |\u547d\u4ee4\u884c\u53c2\u6570| C3[Container]"}),"\n",(0,a.jsx)(n.h2,{id:"\u521b\u5efa-configmap",children:"\u521b\u5efa ConfigMap"}),"\n",(0,a.jsx)(n.h3,{id:"\u4ece\u5b57\u9762\u91cf\u521b\u5efa",children:"\u4ece\u5b57\u9762\u91cf\u521b\u5efa"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# \u521b\u5efa\u5355\u4e2a\u952e\u503c\u5bf9\nkubectl create configmap my-config --from-literal=key1=value1\n\n# \u521b\u5efa\u591a\u4e2a\u952e\u503c\u5bf9\nkubectl create configmap my-config \\\n  --from-literal=database.host=mysql \\\n  --from-literal=database.port=3306\n"})}),"\n",(0,a.jsx)(n.h3,{id:"\u4ece\u6587\u4ef6\u521b\u5efa",children:"\u4ece\u6587\u4ef6\u521b\u5efa"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# \u4ece\u5355\u4e2a\u6587\u4ef6\u521b\u5efa\nkubectl create configmap my-config --from-file=config.properties\n\n# \u6307\u5b9a\u952e\u540d\nkubectl create configmap my-config --from-file=mykey=config.properties\n\n# \u4ece\u76ee\u5f55\u521b\u5efa\nkubectl create configmap my-config --from-file=./configs/\n"})}),"\n",(0,a.jsx)(n.h3,{id:"\u4ece-yaml-\u521b\u5efa",children:"\u4ece YAML \u521b\u5efa"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'apiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: app-config\n  namespace: default\ndata:\n  # \u7b80\u5355\u952e\u503c\u5bf9\n  database.host: "mysql-service"\n  database.port: "3306"\n  log.level: "INFO"\n\n  # \u591a\u884c\u914d\u7f6e\u6587\u4ef6\n  application.properties: |\n    server.port=8080\n    spring.datasource.url=jdbc:mysql://mysql:3306/mydb\n    spring.datasource.username=root\n    logging.level.root=INFO\n\n  # JSON \u914d\u7f6e\n  config.json: |\n    {\n      "database": {\n        "host": "mysql-service",\n        "port": 3306\n      },\n      "cache": {\n        "enabled": true,\n        "ttl": 3600\n      }\n    }\n\n# \u4e8c\u8fdb\u5236\u6570\u636e\u4f7f\u7528 binaryData\nbinaryData:\n  logo.png: <base64-encoded-data>\n'})}),"\n",(0,a.jsx)(n.h2,{id:"\u4f7f\u7528-configmap",children:"\u4f7f\u7528 ConfigMap"}),"\n",(0,a.jsx)(n.h3,{id:"\u4f5c\u4e3a\u73af\u5883\u53d8\u91cf",children:"\u4f5c\u4e3a\u73af\u5883\u53d8\u91cf"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"apiVersion: v1\nkind: Pod\nmetadata:\n  name: app\nspec:\n  containers:\n    - name: app\n      image: my-app:1.0\n      env:\n        # \u5355\u4e2a\u952e\n        - name: DB_HOST\n          valueFrom:\n            configMapKeyRef:\n              name: app-config\n              key: database.host\n        - name: DB_PORT\n          valueFrom:\n            configMapKeyRef:\n              name: app-config\n              key: database.port\n              optional: true # \u53ef\u9009\uff0cconfigMap \u4e0d\u5b58\u5728\u4e0d\u62a5\u9519\n\n      # \u5bfc\u5165\u6240\u6709\u952e\uff08\u5e26\u524d\u7f00\uff09\n      envFrom:\n        - configMapRef:\n            name: app-config\n          prefix: CONFIG_ # \u524d\u7f00\n"})}),"\n",(0,a.jsx)(n.h3,{id:"\u4f5c\u4e3a\u6587\u4ef6\u6302\u8f7d",children:"\u4f5c\u4e3a\u6587\u4ef6\u6302\u8f7d"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"apiVersion: v1\nkind: Pod\nmetadata:\n  name: app\nspec:\n  containers:\n    - name: app\n      image: my-app:1.0\n      volumeMounts:\n        - name: config-volume\n          mountPath: /etc/config\n          readOnly: true\n\n  volumes:\n    - name: config-volume\n      configMap:\n        name: app-config\n        # \u53ef\u9009\uff1a\u53ea\u6302\u8f7d\u90e8\u5206\u952e\n        items:\n          - key: application.properties\n            path: app.properties # \u81ea\u5b9a\u4e49\u6587\u4ef6\u540d\n          - key: config.json\n            path: config.json\n            mode: 0644 # \u81ea\u5b9a\u4e49\u6743\u9650\n"})}),"\n",(0,a.jsx)(n.h3,{id:"\u6302\u8f7d\u5355\u4e2a\u6587\u4ef6",children:"\u6302\u8f7d\u5355\u4e2a\u6587\u4ef6"}),"\n",(0,a.jsxs)(n.p,{children:["\u4f7f\u7528 ",(0,a.jsx)(n.code,{children:"subPath"})," \u907f\u514d\u8986\u76d6\u76ee\u5f55\u4e2d\u7684\u5176\u4ed6\u6587\u4ef6\u3002"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"volumeMounts:\n  - name: config-volume\n    mountPath: /etc/app/application.properties\n    subPath: application.properties\n"})}),"\n",(0,a.jsx)(n.h2,{id:"secret-\u6982\u8ff0",children:"Secret \u6982\u8ff0"}),"\n",(0,a.jsx)(n.p,{children:"Secret \u7528\u4e8e\u5b58\u50a8\u654f\u611f\u6570\u636e\uff0c\u5982\u5bc6\u7801\u3001\u4ee4\u724c\u3001\u5bc6\u94a5\u7b49\u3002"}),"\n",(0,a.jsx)(n.h3,{id:"secret-\u7c7b\u578b",children:"Secret \u7c7b\u578b"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"\u7c7b\u578b"}),(0,a.jsx)(n.th,{children:"\u8bf4\u660e"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"Opaque"}),(0,a.jsx)(n.td,{children:"\u901a\u7528 Secret\uff08\u9ed8\u8ba4\uff09"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"kubernetes.io/tls"}),(0,a.jsx)(n.td,{children:"TLS \u8bc1\u4e66"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"kubernetes.io/dockerconfigjson"}),(0,a.jsx)(n.td,{children:"Docker \u4ed3\u5e93\u51ed\u8bc1"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"kubernetes.io/basic-auth"}),(0,a.jsx)(n.td,{children:"\u57fa\u672c\u8ba4\u8bc1\u51ed\u8bc1"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"kubernetes.io/ssh-auth"}),(0,a.jsx)(n.td,{children:"SSH \u8ba4\u8bc1\u51ed\u8bc1"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"kubernetes.io/service-account-token"}),(0,a.jsx)(n.td,{children:"ServiceAccount \u4ee4\u724c"})]})]})]}),"\n",(0,a.jsx)(n.h2,{id:"\u521b\u5efa-secret",children:"\u521b\u5efa Secret"}),"\n",(0,a.jsx)(n.h3,{id:"\u4ece\u5b57\u9762\u91cf\u521b\u5efa-1",children:"\u4ece\u5b57\u9762\u91cf\u521b\u5efa"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# \u521b\u5efa\u901a\u7528 Secret\nkubectl create secret generic my-secret \\\n  --from-literal=username=admin \\\n  --from-literal=password=s3cr3t\n\n# \u521b\u5efa Docker \u4ed3\u5e93\u51ed\u8bc1\nkubectl create secret docker-registry my-registry \\\n  --docker-server=https://registry.example.com \\\n  --docker-username=user \\\n  --docker-password=password \\\n  --docker-email=user@example.com\n\n# \u521b\u5efa TLS \u8bc1\u4e66\nkubectl create secret tls my-tls \\\n  --cert=path/to/tls.crt \\\n  --key=path/to/tls.key\n"})}),"\n",(0,a.jsx)(n.h3,{id:"\u4ece\u6587\u4ef6\u521b\u5efa-1",children:"\u4ece\u6587\u4ef6\u521b\u5efa"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# \u4ece\u6587\u4ef6\u521b\u5efa\nkubectl create secret generic my-secret --from-file=ssh-privatekey=~/.ssh/id_rsa\n\n# \u4ece\u76ee\u5f55\u521b\u5efa\nkubectl create secret generic my-secret --from-file=./secrets/\n"})}),"\n",(0,a.jsx)(n.h3,{id:"\u4ece-yaml-\u521b\u5efa-1",children:"\u4ece YAML \u521b\u5efa"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"apiVersion: v1\nkind: Secret\nmetadata:\n  name: db-secret\ntype: Opaque\n# data \u4e2d\u7684\u503c\u5fc5\u987b\u662f Base64 \u7f16\u7801\ndata:\n  username: YWRtaW4= # echo -n 'admin' | base64\n  password: czNjcjN0 # echo -n 's3cr3t' | base64\n\n# \u6216\u4f7f\u7528 stringData\uff08\u4f1a\u81ea\u52a8\u7f16\u7801\uff09\nstringData:\n  api-key: my-api-key-12345\n  config.yaml: |\n    database:\n      password: secret123\n"})}),"\n",(0,a.jsx)(n.h3,{id:"tls-secret",children:"TLS Secret"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"apiVersion: v1\nkind: Secret\nmetadata:\n  name: tls-secret\ntype: kubernetes.io/tls\ndata:\n  tls.crt: <base64-encoded-cert>\n  tls.key: <base64-encoded-key>\n"})}),"\n",(0,a.jsx)(n.h3,{id:"docker-registry-secret",children:"Docker Registry Secret"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"apiVersion: v1\nkind: Secret\nmetadata:\n  name: registry-secret\ntype: kubernetes.io/dockerconfigjson\ndata:\n  .dockerconfigjson: <base64-encoded-docker-config>\n"})}),"\n",(0,a.jsx)(n.h2,{id:"\u4f7f\u7528-secret",children:"\u4f7f\u7528 Secret"}),"\n",(0,a.jsx)(n.h3,{id:"\u4f5c\u4e3a\u73af\u5883\u53d8\u91cf-1",children:"\u4f5c\u4e3a\u73af\u5883\u53d8\u91cf"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"apiVersion: v1\nkind: Pod\nmetadata:\n  name: app\nspec:\n  containers:\n    - name: app\n      image: my-app:1.0\n      env:\n        - name: DB_USERNAME\n          valueFrom:\n            secretKeyRef:\n              name: db-secret\n              key: username\n        - name: DB_PASSWORD\n          valueFrom:\n            secretKeyRef:\n              name: db-secret\n              key: password\n\n      # \u5bfc\u5165\u6240\u6709\u952e\n      envFrom:\n        - secretRef:\n            name: db-secret\n"})}),"\n",(0,a.jsx)(n.h3,{id:"\u4f5c\u4e3a\u6587\u4ef6\u6302\u8f7d-1",children:"\u4f5c\u4e3a\u6587\u4ef6\u6302\u8f7d"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"apiVersion: v1\nkind: Pod\nmetadata:\n  name: app\nspec:\n  containers:\n    - name: app\n      image: my-app:1.0\n      volumeMounts:\n        - name: secret-volume\n          mountPath: /etc/secrets\n          readOnly: true\n\n  volumes:\n    - name: secret-volume\n      secret:\n        secretName: db-secret\n        defaultMode: 0400 # \u8bbe\u7f6e\u6743\u9650\n        items:\n          - key: password\n            path: db-password\n"})}),"\n",(0,a.jsx)(n.h3,{id:"\u62c9\u53d6\u79c1\u6709\u955c\u50cf",children:"\u62c9\u53d6\u79c1\u6709\u955c\u50cf"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"apiVersion: v1\nkind: Pod\nmetadata:\n  name: app\nspec:\n  imagePullSecrets:\n    - name: registry-secret\n  containers:\n    - name: app\n      image: registry.example.com/my-app:1.0\n"})}),"\n",(0,a.jsx)(n.h2,{id:"\u914d\u7f6e\u66f4\u65b0",children:"\u914d\u7f6e\u66f4\u65b0"}),"\n",(0,a.jsx)(n.h3,{id:"configmap-\u66f4\u65b0",children:"ConfigMap \u66f4\u65b0"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# \u7f16\u8f91 ConfigMap\nkubectl edit configmap my-config\n\n# \u6216\u901a\u8fc7 apply \u66f4\u65b0\nkubectl apply -f configmap.yaml\n"})}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"\u66f4\u65b0\u884c\u4e3a"}),"\uff1a"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"\u5377\u6302\u8f7d\uff1a\u81ea\u52a8\u66f4\u65b0\uff08\u6709\u4e00\u5b9a\u5ef6\u8fdf\uff09"}),"\n",(0,a.jsx)(n.li,{children:"\u73af\u5883\u53d8\u91cf\uff1a\u9700\u8981\u91cd\u542f Pod"}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.code,{children:"subPath"})," \u6302\u8f7d\uff1a\u4e0d\u4f1a\u81ea\u52a8\u66f4\u65b0"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"\u4e0d\u53ef\u53d8-configmapsecret",children:"\u4e0d\u53ef\u53d8 ConfigMap/Secret"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"apiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: immutable-config\nimmutable: true # \u4e0d\u53ef\u4fee\u6539\ndata:\n  key: value\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u597d\u5904\uff1a"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"\u9632\u6b62\u610f\u5916\u4fee\u6539"}),"\n",(0,a.jsx)(n.li,{children:"\u964d\u4f4e API Server \u8d1f\u8f7d"}),"\n",(0,a.jsx)(n.li,{children:"\u63d0\u9ad8\u96c6\u7fa4\u6027\u80fd"}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"\u52a0\u5bc6-secret",children:"\u52a0\u5bc6 Secret"}),"\n",(0,a.jsx)(n.h3,{id:"\u542f\u7528\u52a0\u5bc6",children:"\u542f\u7528\u52a0\u5bc6"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"# /etc/kubernetes/encryption-config.yaml\napiVersion: apiserver.config.k8s.io/v1\nkind: EncryptionConfiguration\nresources:\n  - resources:\n      - secrets\n    providers:\n      - aescbc:\n          keys:\n            - name: key1\n              secret: <base64-encoded-key>\n      - identity: {}\n"})}),"\n",(0,a.jsx)(n.h3,{id:"\u5916\u90e8\u5bc6\u94a5\u7ba1\u7406",children:"\u5916\u90e8\u5bc6\u94a5\u7ba1\u7406"}),"\n",(0,a.jsx)(n.p,{children:"\u63a8\u8350\u4f7f\u7528\u5916\u90e8\u5bc6\u94a5\u7ba1\u7406\u5de5\u5177\uff1a"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.strong,{children:"HashiCorp Vault"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.strong,{children:"AWS Secrets Manager"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.strong,{children:"Azure Key Vault"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.strong,{children:"Google Secret Manager"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.strong,{children:"External Secrets Operator"})}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"# External Secrets Operator \u793a\u4f8b\napiVersion: external-secrets.io/v1beta1\nkind: ExternalSecret\nmetadata:\n  name: my-secret\nspec:\n  refreshInterval: 1h\n  secretStoreRef:\n    name: vault-backend\n    kind: SecretStore\n  target:\n    name: my-secret\n  data:\n    - secretKey: password\n      remoteRef:\n        key: secret/data/myapp\n        property: password\n"})}),"\n",(0,a.jsx)(n.h2,{id:"\u5e38\u7528\u64cd\u4f5c",children:"\u5e38\u7528\u64cd\u4f5c"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# \u67e5\u770b ConfigMap\nkubectl get configmaps\nkubectl describe configmap my-config\nkubectl get configmap my-config -o yaml\n\n# \u67e5\u770b Secret\nkubectl get secrets\nkubectl describe secret my-secret\nkubectl get secret my-secret -o yaml\n\n# \u89e3\u7801 Secret\nkubectl get secret my-secret -o jsonpath='{.data.password}' | base64 -d\n\n# \u5220\u9664\nkubectl delete configmap my-config\nkubectl delete secret my-secret\n"})}),"\n",(0,a.jsx)(n.h2,{id:"\u6700\u4f73\u5b9e\u8df5",children:"\u6700\u4f73\u5b9e\u8df5"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"\u4e0d\u8981\u5728 Secret \u4e2d\u5b58\u50a8\u660e\u6587"}),"\uff1a\u867d\u7136 Secret \u6570\u636e\u662f Base64 \u7f16\u7801\uff0c\u4f46\u4e0d\u662f\u52a0\u5bc6"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"\u4f7f\u7528\u5916\u90e8\u5bc6\u94a5\u7ba1\u7406"}),"\uff1a\u751f\u4ea7\u73af\u5883\u63a8\u8350\u4f7f\u7528 Vault \u7b49\u5de5\u5177"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"\u9650\u5236\u8bbf\u95ee\u6743\u9650"}),"\uff1a\u4f7f\u7528 RBAC \u63a7\u5236 ConfigMap/Secret \u8bbf\u95ee"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"\u4f7f\u7528\u4e0d\u53ef\u53d8\u914d\u7f6e"}),"\uff1a\u5bf9\u4e8e\u4e0d\u4f1a\u66f4\u6539\u7684\u914d\u7f6e\uff0c\u8bbe\u7f6e ",(0,a.jsx)(n.code,{children:"immutable: true"})]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"\u5206\u79bb\u914d\u7f6e\u548c\u4ee3\u7801"}),"\uff1a\u914d\u7f6e\u5e94\u8be5\u4e0e\u5e94\u7528\u955c\u50cf\u5206\u79bb"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"\u4f7f\u7528\u547d\u540d\u7ea6\u5b9a"}),"\uff1a\u5982 ",(0,a.jsx)(n.code,{children:"app-name-config"}),"\u3001",(0,a.jsx)(n.code,{children:"app-name-secret"})]}),"\n"]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(o,{...e})}):o(e)}}}]);