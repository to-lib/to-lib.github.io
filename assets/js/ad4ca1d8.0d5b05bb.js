"use strict";(globalThis.webpackChunkto_lib_github_io=globalThis.webpackChunkto_lib_github_io||[]).push([[6041],{12030:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"react/best-practices","title":"\u6700\u4f73\u5b9e\u8df5","description":"[!TIP]","source":"@site/docs/react/best-practices.md","sourceDirName":"react","slug":"/react/best-practices","permalink":"/docs/react/best-practices","draft":false,"unlisted":false,"editUrl":"https://github.com/to-lib/to-lib.github.io/tree/main/docs/react/best-practices.md","tags":[],"version":"current","sidebarPosition":91,"frontMatter":{"sidebar_position":91,"title":"\u6700\u4f73\u5b9e\u8df5"},"sidebar":"react","previous":{"title":"\u5feb\u901f\u53c2\u8003","permalink":"/docs/react/quick-reference"},"next":{"title":"FAQ","permalink":"/docs/react/faq"}}');var r=s(22714),i=s(48885);const l={sidebar_position:91,title:"\u6700\u4f73\u5b9e\u8df5"},a="React \u6700\u4f73\u5b9e\u8df5",c={},d=[{value:"\ud83d\udcc1 \u9879\u76ee\u7ed3\u6784",id:"-\u9879\u76ee\u7ed3\u6784",level:2},{value:"\u63a8\u8350\u7684\u76ee\u5f55\u7ec4\u7ec7",id:"\u63a8\u8350\u7684\u76ee\u5f55\u7ec4\u7ec7",level:3},{value:"\ud83c\udfaf \u7ec4\u4ef6\u8bbe\u8ba1\u539f\u5219",id:"-\u7ec4\u4ef6\u8bbe\u8ba1\u539f\u5219",level:2},{value:"1. \u5355\u4e00\u804c\u8d23",id:"1-\u5355\u4e00\u804c\u8d23",level:3},{value:"2. \u7ec4\u5408\u4f18\u4e8e\u7ee7\u627f",id:"2-\u7ec4\u5408\u4f18\u4e8e\u7ee7\u627f",level:3},{value:"3. Props \u89e3\u6784",id:"3-props-\u89e3\u6784",level:3},{value:"\u26a1 \u6027\u80fd\u4f18\u5316",id:"-\u6027\u80fd\u4f18\u5316",level:2},{value:"1. \u907f\u514d\u4e0d\u5fc5\u8981\u7684\u6e32\u67d3",id:"1-\u907f\u514d\u4e0d\u5fc5\u8981\u7684\u6e32\u67d3",level:3},{value:"2. \u5408\u7406\u4f7f\u7528 Key",id:"2-\u5408\u7406\u4f7f\u7528-key",level:3},{value:"\ud83d\udd12 \u72b6\u6001\u7ba1\u7406",id:"-\u72b6\u6001\u7ba1\u7406",level:2},{value:"1. \u72b6\u6001\u653e\u7f6e\u4f4d\u7f6e",id:"1-\u72b6\u6001\u653e\u7f6e\u4f4d\u7f6e",level:3},{value:"2. \u72b6\u6001\u6241\u5e73\u5316",id:"2-\u72b6\u6001\u6241\u5e73\u5316",level:3},{value:"\ud83d\udcdd \u4ee3\u7801\u98ce\u683c",id:"-\u4ee3\u7801\u98ce\u683c",level:2},{value:"1. \u4f7f\u7528 TypeScript",id:"1-\u4f7f\u7528-typescript",level:3},{value:"2. \u547d\u540d\u89c4\u8303",id:"2-\u547d\u540d\u89c4\u8303",level:3},{value:"3. \u907f\u514d\u9b54\u6cd5\u6570\u5b57",id:"3-\u907f\u514d\u9b54\u6cd5\u6570\u5b57",level:3},{value:"\ud83e\uddea \u6d4b\u8bd5",id:"-\u6d4b\u8bd5",level:2},{value:"\ud83d\udd10 \u5b89\u5168",id:"-\u5b89\u5168",level:2},{value:"\ud83d\udca1 \u901a\u7528\u5efa\u8bae",id:"-\u901a\u7528\u5efa\u8bae",level:2}];function o(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"react-\u6700\u4f73\u5b9e\u8df5",children:"React \u6700\u4f73\u5b9e\u8df5"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"[!TIP]\n\u9075\u5faa\u6700\u4f73\u5b9e\u8df5\u80fd\u8ba9\u4f60\u7684 React \u4ee3\u7801\u66f4\u6e05\u6670\u3001\u53ef\u7ef4\u62a4\u3001\u9ad8\u6027\u80fd\u3002"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"-\u9879\u76ee\u7ed3\u6784",children:"\ud83d\udcc1 \u9879\u76ee\u7ed3\u6784"}),"\n",(0,r.jsx)(n.h3,{id:"\u63a8\u8350\u7684\u76ee\u5f55\u7ec4\u7ec7",children:"\u63a8\u8350\u7684\u76ee\u5f55\u7ec4\u7ec7"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"src/\n\u251c\u2500\u2500 components/       # \u53ef\u590d\u7528\u7ec4\u4ef6\n\u2502   \u251c\u2500\u2500 Button/\n\u2502   \u2502   \u251c\u2500\u2500 Button.tsx\n\u2502   \u2502   \u251c\u2500\u2500 Button.test.tsx\n\u2502   \u2502   \u2514\u2500\u2500 index.ts\n\u251c\u2500\u2500 features/         # \u529f\u80fd\u6a21\u5757\n\u2502   \u251c\u2500\u2500 auth/\n\u2502   \u251c\u2500\u2500 dashboard/\n\u251c\u2500\u2500 hooks/            # \u81ea\u5b9a\u4e49 Hooks\n\u251c\u2500\u2500 utils/            # \u5de5\u5177\u51fd\u6570\n\u251c\u2500\u2500 types/            # TypeScript \u7c7b\u578b\n\u251c\u2500\u2500 styles/           # \u5168\u5c40\u6837\u5f0f\n\u2514\u2500\u2500 App.tsx\n"})}),"\n",(0,r.jsx)(n.h2,{id:"-\u7ec4\u4ef6\u8bbe\u8ba1\u539f\u5219",children:"\ud83c\udfaf \u7ec4\u4ef6\u8bbe\u8ba1\u539f\u5219"}),"\n",(0,r.jsx)(n.h3,{id:"1-\u5355\u4e00\u804c\u8d23",children:"1. \u5355\u4e00\u804c\u8d23"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-jsx",children:"// \u2713 \u597d\uff1a\u804c\u8d23\u6e05\u6670\nfunction UserAvatar({ imageUrl, size }) {\n  return <img src={imageUrl} width={size} />;\n}\n\nfunction UserName({ name }) {\n  return <span>{name}</span>;\n}\n\n// \u2717 \u4e0d\u597d\uff1a\u6df7\u6742\u591a\u4e2a\u804c\u8d23\nfunction UserCard({ user }) {\n  return (\n    <div>\n      <img src={user.avatar} />\n      <span>{user.name}</span>\n      <button onClick={handleDelete}>\u5220\u9664</button>\n      <form>{/* \u7f16\u8f91\u8868\u5355 */}</form>\n    </div>\n  );\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"2-\u7ec4\u5408\u4f18\u4e8e\u7ee7\u627f",children:"2. \u7ec4\u5408\u4f18\u4e8e\u7ee7\u627f"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-jsx",children:'// \u2713 \u597d\uff1a\u4f7f\u7528\u7ec4\u5408\nfunction Card({ children }) {\n  return <div className="card">{children}</div>;\n}\n\n<Card>\n  <UserInfo user={user} />\n  <Actions />\n</Card>;\n\n// \u2717 \u4e0d\u597d\uff1a\u4f7f\u7528\u7ee7\u627f\nclass BaseCard extends React.Component {}\nclass UserCard extends BaseCard {}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"3-props-\u89e3\u6784",children:"3. Props \u89e3\u6784"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-jsx",children:"// \u2713 \u597d\uff1a\u89e3\u6784 Props\nfunction Button({ variant, size, children, ...rest }) {\n  return (\n    <button className={`btn-${variant}-${size}`} {...rest}>\n      {children}\n    </button>\n  );\n}\n\n// \u2717 \u4e0d\u597d\uff1a\u76f4\u63a5\u4f7f\u7528 props\nfunction Button(props) {\n  return <button className={`btn-${props.variant}`}>{props.children}</button>;\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"-\u6027\u80fd\u4f18\u5316",children:"\u26a1 \u6027\u80fd\u4f18\u5316"}),"\n",(0,r.jsx)(n.h3,{id:"1-\u907f\u514d\u4e0d\u5fc5\u8981\u7684\u6e32\u67d3",children:"1. \u907f\u514d\u4e0d\u5fc5\u8981\u7684\u6e32\u67d3"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-jsx",children:"// \u2713 \u4f7f\u7528 React.memo\nconst ExpensiveComponent = React.memo(({ data }) => {\n  return <div>{/* \u590d\u6742\u6e32\u67d3 */}</div>;\n});\n\n// \u2713 \u4f7f\u7528 useMemo \u7f13\u5b58\u8ba1\u7b97\u7ed3\u679c\nconst sortedData = useMemo(\n  () => data.sort((a, b) => a.value - b.value),\n  [data]\n);\n\n// \u2713 \u4f7f\u7528 useCallback \u7f13\u5b58\u51fd\u6570\nconst handleClick = useCallback(() => {\n  doSomething();\n}, []);\n"})}),"\n",(0,r.jsx)(n.h3,{id:"2-\u5408\u7406\u4f7f\u7528-key",children:"2. \u5408\u7406\u4f7f\u7528 Key"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-jsx",children:"// \u2713 \u597d\uff1a\u4f7f\u7528\u7a33\u5b9a\u7684 ID\n{\n  items.map((item) => <Item key={item.id} {...item} />);\n}\n\n// \u2717 \u4e0d\u597d\uff1a\u4f7f\u7528\u7d22\u5f15\uff08\u5217\u8868\u4f1a\u53d8\u5316\u65f6\uff09\n{\n  items.map((item, index) => <Item key={index} {...item} />);\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"-\u72b6\u6001\u7ba1\u7406",children:"\ud83d\udd12 \u72b6\u6001\u7ba1\u7406"}),"\n",(0,r.jsx)(n.h3,{id:"1-\u72b6\u6001\u653e\u7f6e\u4f4d\u7f6e",children:"1. \u72b6\u6001\u653e\u7f6e\u4f4d\u7f6e"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-jsx",children:"// \u2713 \u597d\uff1a\u72b6\u6001\u4e0b\u653e\u5230\u9700\u8981\u7684\u7ec4\u4ef6\nfunction Parent() {\n  return <Child />; // Parent \u65e0\u9700\u5173\u5fc3 Child \u7684\u72b6\u6001\n}\n\nfunction Child() {\n  const [open, setOpen] = useState(false);\n  return <Modal open={open} />;\n}\n\n// \u2717 \u4e0d\u597d\uff1a\u72b6\u6001\u63d0\u5347\u8fc7\u9ad8\nfunction Parent() {\n  const [childOpen, setChildOpen] = useState(false);\n  return <Child open={childOpen} setOpen={setChildOpen} />;\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"2-\u72b6\u6001\u6241\u5e73\u5316",children:"2. \u72b6\u6001\u6241\u5e73\u5316"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-jsx",children:'// \u2713 \u597d\uff1a\u6241\u5e73\u7684\u72b6\u6001\u7ed3\u6784\nconst [firstName, setFirstName] = useState("");\nconst [lastName, setLastName] = useState("");\n\n// \u2717 \u4e0d\u597d\uff1a\u8fc7\u6df1\u7684\u5d4c\u5957\nconst [user, setUser] = useState({\n  profile: {\n    name: { first: "", last: "" },\n  },\n});\n'})}),"\n",(0,r.jsx)(n.h2,{id:"-\u4ee3\u7801\u98ce\u683c",children:"\ud83d\udcdd \u4ee3\u7801\u98ce\u683c"}),"\n",(0,r.jsx)(n.h3,{id:"1-\u4f7f\u7528-typescript",children:"1. \u4f7f\u7528 TypeScript"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-tsx",children:"// \u2713 \u5b9a\u4e49\u660e\u786e\u7684\u7c7b\u578b\ninterface UserProps {\n  id: number;\n  name: string;\n  email?: string;\n}\n\nfunction User({ id, name, email }: UserProps) {\n  // ...\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"2-\u547d\u540d\u89c4\u8303",children:"2. \u547d\u540d\u89c4\u8303"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-jsx",children:"// \u7ec4\u4ef6\u540d\uff1aPascalCase\nfunction UserProfile() {}\n\n// Hooks\uff1ause \u5f00\u5934\nfunction useAuth() {}\n\n// \u4e8b\u4ef6\u5904\u7406\uff1ahandle \u5f00\u5934\nconst handleClick = () => {};\n\n// \u5e03\u5c14\u503c\uff1ais/has \u5f00\u5934\nconst isLoading = true;\nconst hasError = false;\n"})}),"\n",(0,r.jsx)(n.h3,{id:"3-\u907f\u514d\u9b54\u6cd5\u6570\u5b57",children:"3. \u907f\u514d\u9b54\u6cd5\u6570\u5b57"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-jsx",children:"// \u2713 \u597d\uff1a\u4f7f\u7528\u5e38\u91cf\nconst MAX_ITEMS = 10;\nconst DEBOUNCE_DELAY = 500;\n\n// \u2717 \u4e0d\u597d\uff1a\u76f4\u63a5\u4f7f\u7528\u6570\u5b57\nsetTimeout(() => {}, 500);\nitems.slice(0, 10);\n"})}),"\n",(0,r.jsx)(n.h2,{id:"-\u6d4b\u8bd5",children:"\ud83e\uddea \u6d4b\u8bd5"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-jsx",children:'// \u2713 \u6d4b\u8bd5\u7528\u6237\u884c\u4e3a\nit("shows modal when clicking button", async () => {\n  render(<App />);\n  await userEvent.click(screen.getByText("Open"));\n  expect(screen.getByRole("dialog")).toBeInTheDocument();\n});\n\n// \u2717 \u6d4b\u8bd5\u5b9e\u73b0\u7ec6\u8282\nit("sets state correctly", () => {\n  // \u4e0d\u63a8\u8350\n});\n'})}),"\n",(0,r.jsx)(n.h2,{id:"-\u5b89\u5168",children:"\ud83d\udd10 \u5b89\u5168"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-jsx",children:'// \u2713 \u597d\uff1a\u8f6c\u4e49\u7528\u6237\u8f93\u5165\n<div>{sanitize(userInput)}</div>\n\n// \u2717 \u5371\u9669\uff1adangerouslySetInnerHTML\n<div dangerouslySetInnerHTML={{ __html: userInput }} />\n\n// \u2713 \u597d\uff1a\u9a8c\u8bc1\u5916\u90e8\u94fe\u63a5\n<a href={url} rel="noopener noreferrer" target="_blank">\n'})}),"\n",(0,r.jsx)(n.h2,{id:"-\u901a\u7528\u5efa\u8bae",children:"\ud83d\udca1 \u901a\u7528\u5efa\u8bae"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"\u4fdd\u6301\u7ec4\u4ef6\u5c0f\u800c\u4e13\u4e00"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"\u4f7f\u7528\u81ea\u5b9a\u4e49 Hooks \u590d\u7528\u903b\u8f91"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"\u4f18\u5148\u4f7f\u7528\u51fd\u6570\u7ec4\u4ef6\u548c Hooks"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"\u5408\u7406\u4f7f\u7528 TypeScript"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"\u7f16\u5199\u6d4b\u8bd5\u4fdd\u8bc1\u8d28\u91cf"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"\u9075\u5faa\u53ef\u8bbf\u95ee\u6027\u6807\u51c6"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.strong,{children:"\u5b9a\u671f\u66f4\u65b0\u4f9d\u8d56"})}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u76f8\u5173\u8d44\u6e90"}),"\uff1a",(0,r.jsx)(n.a,{href:"/docs/react/quick-reference",children:"\u5feb\u901f\u53c2\u8003"})," | ",(0,r.jsx)(n.a,{href:"/docs/react/performance-optimization",children:"\u6027\u80fd\u4f18\u5316"})," | ",(0,r.jsx)(n.a,{href:"/docs/react/faq",children:"FAQ"})]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},48885:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>a});var t=s(99378);const r={},i=t.createContext(r);function l(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);