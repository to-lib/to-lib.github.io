"use strict";(globalThis.webpackChunkto_lib_github_io=globalThis.webpackChunkto_lib_github_io||[]).push([[44547],{48885:(n,e,l)=>{l.d(e,{R:()=>i,x:()=>d});var s=l(99378);const E={},r=s.createContext(E);function i(n){const e=s.useContext(r);return s.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function d(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(E):n.components||E:i(n.components),s.createElement(r.Provider,{value:e},n.children)}},97750:(n,e,l)=>{l.r(e),l.d(e,{assets:()=>a,contentTitle:()=>d,default:()=>T,frontMatter:()=>i,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"mysql/stored-procedures","title":"\u5b58\u50a8\u8fc7\u7a0b\u4e0e\u51fd\u6570","description":"[!TIP] > \u5b58\u50a8\u8fc7\u7a0b\u4f18\u52bf: \u51cf\u5c11\u7f51\u7edc\u4f20\u8f93\u3001\u63d0\u9ad8\u6027\u80fd\u3001\u589e\u5f3a\u5b89\u5168\u6027\u3001\u4ee3\u7801\u590d\u7528\u3002\u672c\u6587\u4ecb\u7ecd\u5b58\u50a8\u8fc7\u7a0b\u548c\u51fd\u6570\u7684\u521b\u5efa\u4e0e\u4f7f\u7528\u3002","source":"@site/docs/mysql/stored-procedures.md","sourceDirName":"mysql","slug":"/mysql/stored-procedures","permalink":"/docs/mysql/stored-procedures","draft":false,"unlisted":false,"editUrl":"https://github.com/to-lib/to-lib.github.io/tree/main/docs/mysql/stored-procedures.md","tags":[],"version":"current","sidebarPosition":8,"frontMatter":{"sidebar_position":8,"title":"\u5b58\u50a8\u8fc7\u7a0b\u4e0e\u51fd\u6570"},"sidebar":"mysql","previous":{"title":"\u8d26\u53f7\u3001\u6743\u9650\u4e0e\u5b89\u5168","permalink":"/docs/mysql/security-and-accounts"},"next":{"title":"\u89c6\u56fe\u4e0e\u89e6\u53d1\u5668","permalink":"/docs/mysql/views-triggers"}}');var E=l(22714),r=l(48885);const i={sidebar_position:8,title:"\u5b58\u50a8\u8fc7\u7a0b\u4e0e\u51fd\u6570"},d="MySQL \u5b58\u50a8\u8fc7\u7a0b\u4e0e\u51fd\u6570",a={},c=[{value:"\u5b58\u50a8\u8fc7\u7a0b\u57fa\u7840",id:"\u5b58\u50a8\u8fc7\u7a0b\u57fa\u7840",level:2},{value:"\u4ec0\u4e48\u662f\u5b58\u50a8\u8fc7\u7a0b",id:"\u4ec0\u4e48\u662f\u5b58\u50a8\u8fc7\u7a0b",level:3},{value:"\u521b\u5efa\u5b58\u50a8\u8fc7\u7a0b",id:"\u521b\u5efa\u5b58\u50a8\u8fc7\u7a0b",level:3},{value:"\u8c03\u7528\u5b58\u50a8\u8fc7\u7a0b",id:"\u8c03\u7528\u5b58\u50a8\u8fc7\u7a0b",level:3},{value:"\u53c2\u6570\u7c7b\u578b",id:"\u53c2\u6570\u7c7b\u578b",level:2},{value:"IN \u53c2\u6570\uff08\u8f93\u5165\uff09",id:"in-\u53c2\u6570\u8f93\u5165",level:3},{value:"OUT \u53c2\u6570\uff08\u8f93\u51fa\uff09",id:"out-\u53c2\u6570\u8f93\u51fa",level:3},{value:"INOUT \u53c2\u6570\uff08\u8f93\u5165\u8f93\u51fa\uff09",id:"inout-\u53c2\u6570\u8f93\u5165\u8f93\u51fa",level:3},{value:"\u53d8\u91cf",id:"\u53d8\u91cf",level:2},{value:"\u5c40\u90e8\u53d8\u91cf",id:"\u5c40\u90e8\u53d8\u91cf",level:3},{value:"\u7528\u6237\u53d8\u91cf",id:"\u7528\u6237\u53d8\u91cf",level:3},{value:"\u6d41\u7a0b\u63a7\u5236",id:"\u6d41\u7a0b\u63a7\u5236",level:2},{value:"IF \u6761\u4ef6\u8bed\u53e5",id:"if-\u6761\u4ef6\u8bed\u53e5",level:3},{value:"CASE \u8bed\u53e5",id:"case-\u8bed\u53e5",level:3},{value:"WHILE \u5faa\u73af",id:"while-\u5faa\u73af",level:3},{value:"REPEAT \u5faa\u73af",id:"repeat-\u5faa\u73af",level:3},{value:"LOOP \u5faa\u73af",id:"loop-\u5faa\u73af",level:3},{value:"\u6e38\u6807",id:"\u6e38\u6807",level:2},{value:"\u6e38\u6807\u4f7f\u7528",id:"\u6e38\u6807\u4f7f\u7528",level:3},{value:"\u81ea\u5b9a\u4e49\u51fd\u6570",id:"\u81ea\u5b9a\u4e49\u51fd\u6570",level:2},{value:"\u521b\u5efa\u51fd\u6570",id:"\u521b\u5efa\u51fd\u6570",level:3},{value:"\u51fd\u6570 vs \u5b58\u50a8\u8fc7\u7a0b",id:"\u51fd\u6570-vs-\u5b58\u50a8\u8fc7\u7a0b",level:3},{value:"\u9519\u8bef\u5904\u7406",id:"\u9519\u8bef\u5904\u7406",level:2},{value:"HANDLER \u58f0\u660e",id:"handler-\u58f0\u660e",level:3},{value:"\u4e8b\u52a1\u5904\u7406\u793a\u4f8b",id:"\u4e8b\u52a1\u5904\u7406\u793a\u4f8b",level:3},{value:"\u5b9e\u7528\u793a\u4f8b",id:"\u5b9e\u7528\u793a\u4f8b",level:2},{value:"\u6279\u91cf\u63d2\u5165\u6570\u636e",id:"\u6279\u91cf\u63d2\u5165\u6570\u636e",level:3},{value:"\u6570\u636e\u7edf\u8ba1",id:"\u6570\u636e\u7edf\u8ba1",level:3},{value:"\u7ba1\u7406\u5b58\u50a8\u8fc7\u7a0b\u548c\u51fd\u6570",id:"\u7ba1\u7406\u5b58\u50a8\u8fc7\u7a0b\u548c\u51fd\u6570",level:2},{value:"\u67e5\u770b",id:"\u67e5\u770b",level:3},{value:"\u5220\u9664",id:"\u5220\u9664",level:3},{value:"\u4fee\u6539",id:"\u4fee\u6539",level:3},{value:"\u6700\u4f73\u5b9e\u8df5",id:"\u6700\u4f73\u5b9e\u8df5",level:2},{value:"\u603b\u7ed3",id:"\u603b\u7ed3",level:2}];function t(n){const e={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...n.components};return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(e.header,{children:(0,E.jsx)(e.h1,{id:"mysql-\u5b58\u50a8\u8fc7\u7a0b\u4e0e\u51fd\u6570",children:"MySQL \u5b58\u50a8\u8fc7\u7a0b\u4e0e\u51fd\u6570"})}),"\n",(0,E.jsxs)(e.blockquote,{children:["\n",(0,E.jsxs)(e.p,{children:["[!TIP] > ",(0,E.jsx)(e.strong,{children:"\u5b58\u50a8\u8fc7\u7a0b\u4f18\u52bf"}),": \u51cf\u5c11\u7f51\u7edc\u4f20\u8f93\u3001\u63d0\u9ad8\u6027\u80fd\u3001\u589e\u5f3a\u5b89\u5168\u6027\u3001\u4ee3\u7801\u590d\u7528\u3002\u672c\u6587\u4ecb\u7ecd\u5b58\u50a8\u8fc7\u7a0b\u548c\u51fd\u6570\u7684\u521b\u5efa\u4e0e\u4f7f\u7528\u3002"]}),"\n"]}),"\n",(0,E.jsx)(e.h2,{id:"\u5b58\u50a8\u8fc7\u7a0b\u57fa\u7840",children:"\u5b58\u50a8\u8fc7\u7a0b\u57fa\u7840"}),"\n",(0,E.jsx)(e.h3,{id:"\u4ec0\u4e48\u662f\u5b58\u50a8\u8fc7\u7a0b",children:"\u4ec0\u4e48\u662f\u5b58\u50a8\u8fc7\u7a0b"}),"\n",(0,E.jsx)(e.p,{children:"\u5b58\u50a8\u8fc7\u7a0b\u662f\u4e00\u7ec4\u9884\u7f16\u8bd1\u7684 SQL \u8bed\u53e5\u96c6\u5408\uff0c\u5b58\u50a8\u5728\u6570\u636e\u5e93\u4e2d\uff0c\u53ef\u4ee5\u88ab\u91cd\u590d\u8c03\u7528\u3002"}),"\n",(0,E.jsx)(e.h3,{id:"\u521b\u5efa\u5b58\u50a8\u8fc7\u7a0b",children:"\u521b\u5efa\u5b58\u50a8\u8fc7\u7a0b"}),"\n",(0,E.jsx)(e.pre,{children:(0,E.jsx)(e.code,{className:"language-sql",children:"DELIMITER //\n\nCREATE PROCEDURE procedure_name(\n    IN param1 INT,\n    OUT param2 VARCHAR(50)\n)\nBEGIN\n    -- SQL \u8bed\u53e5\n    SELECT column INTO param2 FROM table WHERE id = param1;\nEND//\n\nDELIMITER ;\n"})}),"\n",(0,E.jsx)(e.h3,{id:"\u8c03\u7528\u5b58\u50a8\u8fc7\u7a0b",children:"\u8c03\u7528\u5b58\u50a8\u8fc7\u7a0b"}),"\n",(0,E.jsx)(e.pre,{children:(0,E.jsx)(e.code,{className:"language-sql",children:"CALL procedure_name(1, @result);\nSELECT @result;\n"})}),"\n",(0,E.jsx)(e.h2,{id:"\u53c2\u6570\u7c7b\u578b",children:"\u53c2\u6570\u7c7b\u578b"}),"\n",(0,E.jsx)(e.h3,{id:"in-\u53c2\u6570\u8f93\u5165",children:"IN \u53c2\u6570\uff08\u8f93\u5165\uff09"}),"\n",(0,E.jsx)(e.pre,{children:(0,E.jsx)(e.code,{className:"language-sql",children:"DELIMITER //\n\nCREATE PROCEDURE get_user_by_id(IN user_id BIGINT)\nBEGIN\n    SELECT * FROM users WHERE id = user_id;\nEND//\n\nDELIMITER ;\n\n-- \u8c03\u7528\nCALL get_user_by_id(1);\n"})}),"\n",(0,E.jsx)(e.h3,{id:"out-\u53c2\u6570\u8f93\u51fa",children:"OUT \u53c2\u6570\uff08\u8f93\u51fa\uff09"}),"\n",(0,E.jsx)(e.pre,{children:(0,E.jsx)(e.code,{className:"language-sql",children:"DELIMITER //\n\nCREATE PROCEDURE get_user_count(OUT total INT)\nBEGIN\n    SELECT COUNT(*) INTO total FROM users;\nEND//\n\nDELIMITER ;\n\n-- \u8c03\u7528\nCALL get_user_count(@count);\nSELECT @count;\n"})}),"\n",(0,E.jsx)(e.h3,{id:"inout-\u53c2\u6570\u8f93\u5165\u8f93\u51fa",children:"INOUT \u53c2\u6570\uff08\u8f93\u5165\u8f93\u51fa\uff09"}),"\n",(0,E.jsx)(e.pre,{children:(0,E.jsx)(e.code,{className:"language-sql",children:"DELIMITER //\n\nCREATE PROCEDURE square_number(INOUT num INT)\nBEGIN\n    SET num = num * num;\nEND//\n\nDELIMITER ;\n\n-- \u8c03\u7528\nSET @number = 5;\nCALL square_number(@number);\nSELECT @number;  -- 25\n"})}),"\n",(0,E.jsx)(e.h2,{id:"\u53d8\u91cf",children:"\u53d8\u91cf"}),"\n",(0,E.jsx)(e.h3,{id:"\u5c40\u90e8\u53d8\u91cf",children:"\u5c40\u90e8\u53d8\u91cf"}),"\n",(0,E.jsx)(e.pre,{children:(0,E.jsx)(e.code,{className:"language-sql",children:"DELIMITER //\n\nCREATE PROCEDURE calculate_discount()\nBEGIN\n    DECLARE original_price DECIMAL(10,2);\n    DECLARE discount_rate DECIMAL(4,2);\n    DECLARE final_price DECIMAL(10,2);\n\n    SET original_price = 100.00;\n    SET discount_rate = 0.20;\n    SET final_price = original_price * (1 - discount_rate);\n\n    SELECT final_price;\nEND//\n\nDELIMITER ;\n"})}),"\n",(0,E.jsx)(e.h3,{id:"\u7528\u6237\u53d8\u91cf",children:"\u7528\u6237\u53d8\u91cf"}),"\n",(0,E.jsx)(e.pre,{children:(0,E.jsx)(e.code,{className:"language-sql",children:"-- \u4f7f\u7528 @ \u524d\u7f00\nSET @name = '\u5f20\u4e09';\nSET @age = 25;\n\nSELECT @name, @age;\n"})}),"\n",(0,E.jsx)(e.h2,{id:"\u6d41\u7a0b\u63a7\u5236",children:"\u6d41\u7a0b\u63a7\u5236"}),"\n",(0,E.jsx)(e.h3,{id:"if-\u6761\u4ef6\u8bed\u53e5",children:"IF \u6761\u4ef6\u8bed\u53e5"}),"\n",(0,E.jsx)(e.pre,{children:(0,E.jsx)(e.code,{className:"language-sql",children:"DELIMITER //\n\nCREATE PROCEDURE check_age(IN age INT)\nBEGIN\n    IF age < 18 THEN\n        SELECT '\u672a\u6210\u5e74' AS result;\n    ELSEIF age >= 18 AND age < 60 THEN\n        SELECT '\u6210\u5e74' AS result;\n    ELSE\n        SELECT '\u8001\u5e74' AS result;\n    END IF;\nEND//\n\nDELIMITER ;\n"})}),"\n",(0,E.jsx)(e.h3,{id:"case-\u8bed\u53e5",children:"CASE \u8bed\u53e5"}),"\n",(0,E.jsx)(e.pre,{children:(0,E.jsx)(e.code,{className:"language-sql",children:"DELIMITER //\n\nCREATE PROCEDURE get_grade(IN score INT, OUT grade CHAR(1))\nBEGIN\n    CASE\n        WHEN score >= 90 THEN SET grade = 'A';\n        WHEN score >= 80 THEN SET grade = 'B';\n        WHEN score >= 70 THEN SET grade = 'C';\n        WHEN score >= 60 THEN SET grade = 'D';\n        ELSE SET grade = 'F';\n    END CASE;\nEND//\n\nDELIMITER ;\n"})}),"\n",(0,E.jsx)(e.h3,{id:"while-\u5faa\u73af",children:"WHILE \u5faa\u73af"}),"\n",(0,E.jsx)(e.pre,{children:(0,E.jsx)(e.code,{className:"language-sql",children:"DELIMITER //\n\nCREATE PROCEDURE sum_to_n(IN n INT, OUT total INT)\nBEGIN\n    DECLARE i INT DEFAULT 1;\n    SET total = 0;\n\n    WHILE i <= n DO\n        SET total = total + i;\n        SET i = i + 1;\n    END WHILE;\nEND//\n\nDELIMITER ;\n"})}),"\n",(0,E.jsx)(e.h3,{id:"repeat-\u5faa\u73af",children:"REPEAT \u5faa\u73af"}),"\n",(0,E.jsx)(e.pre,{children:(0,E.jsx)(e.code,{className:"language-sql",children:"DELIMITER //\n\nCREATE PROCEDURE repeat_example(IN n INT)\nBEGIN\n    DECLARE i INT DEFAULT 1;\n\n    REPEAT\n        SELECT i;\n        SET i = i + 1;\n    UNTIL i > n\n    END REPEAT;\nEND//\n\nDELIMITER ;\n"})}),"\n",(0,E.jsx)(e.h3,{id:"loop-\u5faa\u73af",children:"LOOP \u5faa\u73af"}),"\n",(0,E.jsx)(e.pre,{children:(0,E.jsx)(e.code,{className:"language-sql",children:"DELIMITER //\n\nCREATE PROCEDURE loop_example(IN n INT)\nBEGIN\n    DECLARE i INT DEFAULT 1;\n\n    my_loop: LOOP\n        IF i > n THEN\n            LEAVE my_loop;\n        END IF;\n\n        SELECT i;\n        SET i = i + 1;\n    END LOOP;\nEND//\n\nDELIMITER ;\n"})}),"\n",(0,E.jsx)(e.h2,{id:"\u6e38\u6807",children:"\u6e38\u6807"}),"\n",(0,E.jsx)(e.h3,{id:"\u6e38\u6807\u4f7f\u7528",children:"\u6e38\u6807\u4f7f\u7528"}),"\n",(0,E.jsx)(e.pre,{children:(0,E.jsx)(e.code,{className:"language-sql",children:"DELIMITER //\n\nCREATE PROCEDURE cursor_example()\nBEGIN\n    DECLARE done INT DEFAULT FALSE;\n    DECLARE user_id BIGINT;\n    DECLARE user_name VARCHAR(50);\n\n    -- \u58f0\u660e\u6e38\u6807\n    DECLARE user_cursor CURSOR FOR\n        SELECT id, username FROM users;\n\n    -- \u58f0\u660e CONTINUE HANDLER\n    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;\n\n    -- \u6253\u5f00\u6e38\u6807\n    OPEN user_cursor;\n\n    -- \u5faa\u73af\u8bfb\u53d6\n    read_loop: LOOP\n        FETCH user_cursor INTO user_id, user_name;\n\n        IF done THEN\n            LEAVE read_loop;\n        END IF;\n\n        -- \u5904\u7406\u6570\u636e\n        SELECT user_id, user_name;\n    END LOOP;\n\n    -- \u5173\u95ed\u6e38\u6807\n    CLOSE user_cursor;\nEND//\n\nDELIMITER ;\n"})}),"\n",(0,E.jsx)(e.h2,{id:"\u81ea\u5b9a\u4e49\u51fd\u6570",children:"\u81ea\u5b9a\u4e49\u51fd\u6570"}),"\n",(0,E.jsx)(e.h3,{id:"\u521b\u5efa\u51fd\u6570",children:"\u521b\u5efa\u51fd\u6570"}),"\n",(0,E.jsx)(e.pre,{children:(0,E.jsx)(e.code,{className:"language-sql",children:"DELIMITER //\n\nCREATE FUNCTION calculate_age(birth_date DATE)\nRETURNS INT\nDETERMINISTIC\nBEGIN\n    RETURN YEAR(CURDATE()) - YEAR(birth_date);\nEND//\n\nDELIMITER ;\n\n-- \u4f7f\u7528\u51fd\u6570\nSELECT username, calculate_age(birth_date) AS age FROM users;\n"})}),"\n",(0,E.jsx)(e.h3,{id:"\u51fd\u6570-vs-\u5b58\u50a8\u8fc7\u7a0b",children:"\u51fd\u6570 vs \u5b58\u50a8\u8fc7\u7a0b"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,E.jsxs)(e.table,{children:[(0,E.jsx)(e.thead,{children:(0,E.jsxs)(e.tr,{children:[(0,E.jsx)(e.th,{children:"\u7279\u6027"}),(0,E.jsx)(e.th,{children:"\u51fd\u6570"}),(0,E.jsx)(e.th,{children:"\u5b58\u50a8\u8fc7\u7a0b"})]})}),(0,E.jsxs)(e.tbody,{children:[(0,E.jsxs)(e.tr,{children:[(0,E.jsx)(e.td,{children:"\u8fd4\u56de\u503c"}),(0,E.jsx)(e.td,{children:"\u5fc5\u987b\u8fd4\u56de\u5355\u4e2a\u503c"}),(0,E.jsx)(e.td,{children:"\u53ef\u4ee5\u8fd4\u56de\u591a\u4e2a\u503c\u6216\u4e0d\u8fd4\u56de"})]}),(0,E.jsxs)(e.tr,{children:[(0,E.jsx)(e.td,{children:"\u8c03\u7528\u65b9\u5f0f"}),(0,E.jsx)(e.td,{children:"\u53ef\u5728 SQL \u4e2d\u4f7f\u7528"}),(0,E.jsx)(e.td,{children:"\u4f7f\u7528 CALL \u8c03\u7528"})]}),(0,E.jsxs)(e.tr,{children:[(0,E.jsx)(e.td,{children:"\u53c2\u6570"}),(0,E.jsx)(e.td,{children:"\u53ea\u652f\u6301 IN"}),(0,E.jsx)(e.td,{children:"\u652f\u6301 IN\u3001OUT\u3001INOUT"})]}),(0,E.jsxs)(e.tr,{children:[(0,E.jsx)(e.td,{children:"\u4e8b\u52a1"}),(0,E.jsx)(e.td,{children:"\u4e0d\u80fd\u5305\u542b\u4e8b\u52a1\u63a7\u5236"}),(0,E.jsx)(e.td,{children:"\u53ef\u4ee5\u5305\u542b\u4e8b\u52a1\u63a7\u5236"})]})]})]}),"\n",(0,E.jsx)(e.h2,{id:"\u9519\u8bef\u5904\u7406",children:"\u9519\u8bef\u5904\u7406"}),"\n",(0,E.jsx)(e.h3,{id:"handler-\u58f0\u660e",children:"HANDLER \u58f0\u660e"}),"\n",(0,E.jsx)(e.pre,{children:(0,E.jsx)(e.code,{className:"language-sql",children:"DELIMITER //\n\nCREATE PROCEDURE safe_insert(IN username VARCHAR(50))\nBEGIN\n    -- \u58f0\u660e\u9519\u8bef\u5904\u7406\n    DECLARE CONTINUE HANDLER FOR SQLEXCEPTION\n    BEGIN\n        SELECT 'Error occurred' AS message;\n    END;\n\n    INSERT INTO users (username) VALUES (username);\n    SELECT 'Success' AS message;\nEND//\n\nDELIMITER ;\n"})}),"\n",(0,E.jsx)(e.h3,{id:"\u4e8b\u52a1\u5904\u7406\u793a\u4f8b",children:"\u4e8b\u52a1\u5904\u7406\u793a\u4f8b"}),"\n",(0,E.jsx)(e.pre,{children:(0,E.jsx)(e.code,{className:"language-sql",children:"DELIMITER //\n\nCREATE PROCEDURE transfer_money(\n    IN from_user_id BIGINT,\n    IN to_user_id BIGINT,\n    IN amount DECIMAL(10,2)\n)\nBEGIN\n    DECLARE EXIT HANDLER FOR SQLEXCEPTION\n    BEGIN\n        ROLLBACK;\n        SELECT 'Transaction failed' AS message;\n    END;\n\n    START TRANSACTION;\n\n    UPDATE accounts SET balance = balance - amount WHERE user_id = from_user_id;\n    UPDATE accounts SET balance = balance + amount WHERE user_id = to_user_id;\n\n    COMMIT;\n    SELECT 'Transaction successful' AS message;\nEND//\n\nDELIMITER ;\n"})}),"\n",(0,E.jsx)(e.h2,{id:"\u5b9e\u7528\u793a\u4f8b",children:"\u5b9e\u7528\u793a\u4f8b"}),"\n",(0,E.jsx)(e.h3,{id:"\u6279\u91cf\u63d2\u5165\u6570\u636e",children:"\u6279\u91cf\u63d2\u5165\u6570\u636e"}),"\n",(0,E.jsx)(e.pre,{children:(0,E.jsx)(e.code,{className:"language-sql",children:"DELIMITER //\n\nCREATE PROCEDURE batch_insert_users(IN count INT)\nBEGIN\n    DECLARE i INT DEFAULT 1;\n\n    WHILE i <= count DO\n        INSERT INTO users (username, email)\n        VALUES (CONCAT('user', i), CONCAT('user', i, '@example.com'));\n        SET i = i + 1;\n    END WHILE;\nEND//\n\nDELIMITER ;\n\nCALL batch_insert_users(1000);\n"})}),"\n",(0,E.jsx)(e.h3,{id:"\u6570\u636e\u7edf\u8ba1",children:"\u6570\u636e\u7edf\u8ba1"}),"\n",(0,E.jsx)(e.pre,{children:(0,E.jsx)(e.code,{className:"language-sql",children:"DELIMITER //\n\nCREATE PROCEDURE user_statistics(\n    OUT total_users INT,\n    OUT active_users INT,\n    OUT avg_age FLOAT\n)\nBEGIN\n    SELECT COUNT(*) INTO total_users FROM users;\n    SELECT COUNT(*) INTO active_users FROM users WHERE status = 1;\n    SELECT AVG(age) INTO avg_age FROM users;\nEND//\n\nDELIMITER ;\n\nCALL user_statistics(@total, @active, @avg);\nSELECT @total, @active, @avg;\n"})}),"\n",(0,E.jsx)(e.h2,{id:"\u7ba1\u7406\u5b58\u50a8\u8fc7\u7a0b\u548c\u51fd\u6570",children:"\u7ba1\u7406\u5b58\u50a8\u8fc7\u7a0b\u548c\u51fd\u6570"}),"\n",(0,E.jsx)(e.h3,{id:"\u67e5\u770b",children:"\u67e5\u770b"}),"\n",(0,E.jsx)(e.pre,{children:(0,E.jsx)(e.code,{className:"language-sql",children:"-- \u67e5\u770b\u6240\u6709\u5b58\u50a8\u8fc7\u7a0b\nSHOW PROCEDURE STATUS WHERE db = 'database_name';\n\n-- \u67e5\u770b\u6240\u6709\u51fd\u6570\nSHOW FUNCTION STATUS WHERE db = 'database_name';\n\n-- \u67e5\u770b\u5b58\u50a8\u8fc7\u7a0b\u5b9a\u4e49\nSHOW CREATE PROCEDURE procedure_name;\n\n-- \u67e5\u770b\u51fd\u6570\u5b9a\u4e49\nSHOW CREATE FUNCTION function_name;\n"})}),"\n",(0,E.jsx)(e.h3,{id:"\u5220\u9664",children:"\u5220\u9664"}),"\n",(0,E.jsx)(e.pre,{children:(0,E.jsx)(e.code,{className:"language-sql",children:"DROP PROCEDURE IF EXISTS procedure_name;\nDROP FUNCTION IF EXISTS function_name;\n"})}),"\n",(0,E.jsx)(e.h3,{id:"\u4fee\u6539",children:"\u4fee\u6539"}),"\n",(0,E.jsx)(e.pre,{children:(0,E.jsx)(e.code,{className:"language-sql",children:"-- MySQL \u4e0d\u652f\u6301\u76f4\u63a5\u4fee\u6539\uff0c\u9700\u8981\u5148\u5220\u9664\u518d\u91cd\u5efa\nDROP PROCEDURE IF EXISTS procedure_name;\n\nDELIMITER //\nCREATE PROCEDURE procedure_name() BEGIN ... END//\nDELIMITER ;\n"})}),"\n",(0,E.jsx)(e.h2,{id:"\u6700\u4f73\u5b9e\u8df5",children:"\u6700\u4f73\u5b9e\u8df5"}),"\n",(0,E.jsxs)(e.blockquote,{children:["\n",(0,E.jsxs)(e.p,{children:["[!IMPORTANT] > ",(0,E.jsx)(e.strong,{children:"\u5b58\u50a8\u8fc7\u7a0b\u6700\u4f73\u5b9e\u8df5"}),":"]}),"\n",(0,E.jsxs)(e.ol,{children:["\n",(0,E.jsx)(e.li,{children:"\u5408\u7406\u4f7f\u7528\u53c2\u6570\uff08IN\u3001OUT\u3001INOUT\uff09"}),"\n",(0,E.jsx)(e.li,{children:"\u6dfb\u52a0\u9519\u8bef\u5904\u7406\uff08HANDLER\uff09"}),"\n",(0,E.jsx)(e.li,{children:"\u4f7f\u7528\u4e8b\u52a1\u4fdd\u8bc1\u6570\u636e\u4e00\u81f4\u6027"}),"\n",(0,E.jsx)(e.li,{children:"\u907f\u514d\u8fc7\u4e8e\u590d\u6742\u7684\u903b\u8f91"}),"\n",(0,E.jsx)(e.li,{children:"\u6dfb\u52a0\u6ce8\u91ca\u8bf4\u660e"}),"\n",(0,E.jsx)(e.li,{children:"\u5b9a\u671f\u68c0\u67e5\u548c\u4f18\u5316"}),"\n"]}),"\n"]}),"\n",(0,E.jsx)(e.h2,{id:"\u603b\u7ed3",children:"\u603b\u7ed3"}),"\n",(0,E.jsx)(e.p,{children:"\u672c\u6587\u4ecb\u7ecd\u4e86 MySQL \u5b58\u50a8\u8fc7\u7a0b\u4e0e\u51fd\u6570\uff1a"}),"\n",(0,E.jsxs)(e.ul,{children:["\n",(0,E.jsx)(e.li,{children:"\u2705 \u5b58\u50a8\u8fc7\u7a0b\u521b\u5efa\u548c\u8c03\u7528"}),"\n",(0,E.jsx)(e.li,{children:"\u2705 \u53c2\u6570\u7c7b\u578b\uff08IN\u3001OUT\u3001INOUT\uff09"}),"\n",(0,E.jsx)(e.li,{children:"\u2705 \u53d8\u91cf\u548c\u6d41\u7a0b\u63a7\u5236"}),"\n",(0,E.jsx)(e.li,{children:"\u2705 \u6e38\u6807\u4f7f\u7528"}),"\n",(0,E.jsx)(e.li,{children:"\u2705 \u81ea\u5b9a\u4e49\u51fd\u6570"}),"\n",(0,E.jsx)(e.li,{children:"\u2705 \u9519\u8bef\u5904\u7406\u548c\u4e8b\u52a1"}),"\n"]}),"\n",(0,E.jsxs)(e.p,{children:["\u7ee7\u7eed\u5b66\u4e60 ",(0,E.jsx)(e.a,{href:"/docs/mysql/views-triggers",children:"\u89c6\u56fe\u4e0e\u89e6\u53d1\u5668"})," \u548c ",(0,E.jsx)(e.a,{href:"/docs/mysql/backup-recovery",children:"\u5907\u4efd\u6062\u590d"}),"\uff01"]})]})}function T(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,E.jsx)(e,{...n,children:(0,E.jsx)(t,{...n})}):t(n)}}}]);