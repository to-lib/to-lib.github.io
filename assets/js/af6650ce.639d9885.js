"use strict";(globalThis.webpackChunkto_lib_github_io=globalThis.webpackChunkto_lib_github_io||[]).push([[4049],{34713:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>o,frontMatter:()=>d,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"rabbitmq/faq","title":"\u5e38\u89c1\u95ee\u9898","description":"RabbitMQ \u5e38\u89c1\u95ee\u9898\u89e3\u7b54","source":"@site/docs/rabbitmq/faq.md","sourceDirName":"rabbitmq","slug":"/rabbitmq/faq","permalink":"/docs/rabbitmq/faq","draft":false,"unlisted":false,"editUrl":"https://github.com/to-lib/to-lib.github.io/tree/main/docs/rabbitmq/faq.md","tags":[],"version":"current","sidebarPosition":11,"frontMatter":{"sidebar_position":11,"title":"\u5e38\u89c1\u95ee\u9898","description":"RabbitMQ \u5e38\u89c1\u95ee\u9898\u89e3\u7b54"}}');var l=s(22714),r=s(48885);const d={sidebar_position:11,title:"\u5e38\u89c1\u95ee\u9898",description:"RabbitMQ \u5e38\u89c1\u95ee\u9898\u89e3\u7b54"},t="RabbitMQ \u5e38\u89c1\u95ee\u9898",c={},a=[{value:"\u8fde\u63a5\u95ee\u9898",id:"\u8fde\u63a5\u95ee\u9898",level:2},{value:"Q: \u65e0\u6cd5\u8fde\u63a5\u5230 RabbitMQ?",id:"q-\u65e0\u6cd5\u8fde\u63a5\u5230-rabbitmq",level:3},{value:"Q: \u8fde\u63a5\u9891\u7e41\u65ad\u5f00?",id:"q-\u8fde\u63a5\u9891\u7e41\u65ad\u5f00",level:3},{value:"\u6d88\u606f\u95ee\u9898",id:"\u6d88\u606f\u95ee\u9898",level:2},{value:"Q: \u6d88\u606f\u4e22\u5931\u600e\u4e48\u529e?",id:"q-\u6d88\u606f\u4e22\u5931\u600e\u4e48\u529e",level:3},{value:"Q: \u6d88\u606f\u91cd\u590d\u6d88\u8d39?",id:"q-\u6d88\u606f\u91cd\u590d\u6d88\u8d39",level:3},{value:"Q: \u6d88\u606f\u987a\u5e8f\u65e0\u6cd5\u4fdd\u8bc1?",id:"q-\u6d88\u606f\u987a\u5e8f\u65e0\u6cd5\u4fdd\u8bc1",level:3},{value:"\u961f\u5217\u95ee\u9898",id:"\u961f\u5217\u95ee\u9898",level:2},{value:"Q: \u961f\u5217\u6d88\u606f\u79ef\u538b?",id:"q-\u961f\u5217\u6d88\u606f\u79ef\u538b",level:3},{value:"Q: \u961f\u5217\u65e0\u6cd5\u5220\u9664?",id:"q-\u961f\u5217\u65e0\u6cd5\u5220\u9664",level:3},{value:"\u6027\u80fd\u95ee\u9898",id:"\u6027\u80fd\u95ee\u9898",level:2},{value:"Q: \u541e\u5410\u91cf\u4f4e?",id:"q-\u541e\u5410\u91cf\u4f4e",level:3},{value:"Q: \u5185\u5b58\u4f7f\u7528\u8fc7\u9ad8?",id:"q-\u5185\u5b58\u4f7f\u7528\u8fc7\u9ad8",level:3},{value:"\u96c6\u7fa4\u95ee\u9898",id:"\u96c6\u7fa4\u95ee\u9898",level:2},{value:"Q: \u8282\u70b9\u65e0\u6cd5\u52a0\u5165\u96c6\u7fa4?",id:"q-\u8282\u70b9\u65e0\u6cd5\u52a0\u5165\u96c6\u7fa4",level:3},{value:"Q: \u7f51\u7edc\u5206\u533a?",id:"q-\u7f51\u7edc\u5206\u533a",level:3},{value:"\u5e38\u7528\u547d\u4ee4\u901f\u67e5",id:"\u5e38\u7528\u547d\u4ee4\u901f\u67e5",level:2},{value:"\u53c2\u8003\u8d44\u6599",id:"\u53c2\u8003\u8d44\u6599",level:2}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"rabbitmq-\u5e38\u89c1\u95ee\u9898",children:"RabbitMQ \u5e38\u89c1\u95ee\u9898"})}),"\n",(0,l.jsx)(n.h2,{id:"\u8fde\u63a5\u95ee\u9898",children:"\u8fde\u63a5\u95ee\u9898"}),"\n",(0,l.jsx)(n.h3,{id:"q-\u65e0\u6cd5\u8fde\u63a5\u5230-rabbitmq",children:"Q: \u65e0\u6cd5\u8fde\u63a5\u5230 RabbitMQ?"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"A:"})," \u68c0\u67e5\u4ee5\u4e0b\u51e0\u70b9:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# 1. \u68c0\u67e5\u670d\u52a1\u662f\u5426\u8fd0\u884c\nrabbitmqctl status\n\n# 2. \u68c0\u67e5\u7aef\u53e3\u662f\u5426\u5f00\u653e\nnc -zv localhost 5672\n\n# 3. \u68c0\u67e5\u9632\u706b\u5899\nsudo iptables -L | grep 5672\n\n# 4. \u68c0\u67e5\u7528\u6237\u6743\u9650\nrabbitmqctl list_permissions\n"})}),"\n",(0,l.jsx)(n.h3,{id:"q-\u8fde\u63a5\u9891\u7e41\u65ad\u5f00",children:"Q: \u8fde\u63a5\u9891\u7e41\u65ad\u5f00?"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"A:"})," \u53ef\u80fd\u539f\u56e0\u548c\u89e3\u51b3\u65b9\u6848:"]}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u5fc3\u8df3\u8d85\u65f6"}),": \u8c03\u6574\u5fc3\u8df3\u95f4\u9694"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:"factory.setRequestedHeartbeat(60);\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u7f51\u7edc\u95ee\u9898"}),": \u68c0\u67e5\u7f51\u7edc\u7a33\u5b9a\u6027"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"\u542f\u7528\u81ea\u52a8\u6062\u590d"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:"factory.setAutomaticRecoveryEnabled(true);\nfactory.setNetworkRecoveryInterval(5000);\n"})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"\u6d88\u606f\u95ee\u9898",children:"\u6d88\u606f\u95ee\u9898"}),"\n",(0,l.jsx)(n.h3,{id:"q-\u6d88\u606f\u4e22\u5931\u600e\u4e48\u529e",children:"Q: \u6d88\u606f\u4e22\u5931\u600e\u4e48\u529e?"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"A:"})," \u786e\u4fdd\u4ee5\u4e0b\u914d\u7f6e:"]}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u961f\u5217\u6301\u4e45\u5316"}),": ",(0,l.jsx)(n.code,{children:"durable = true"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u6d88\u606f\u6301\u4e45\u5316"}),": ",(0,l.jsx)(n.code,{children:"deliveryMode = 2"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u7981\u7528\u81ea\u52a8\u786e\u8ba4"}),": ",(0,l.jsx)(n.code,{children:"autoAck = false"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u542f\u7528\u53d1\u5e03\u786e\u8ba4"}),": ",(0,l.jsx)(n.code,{children:"confirmSelect()"})]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"q-\u6d88\u606f\u91cd\u590d\u6d88\u8d39",children:"Q: \u6d88\u606f\u91cd\u590d\u6d88\u8d39?"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"A:"})," \u5b9e\u73b0\u5e42\u7b49\u6027:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-java",children:'// \u4f7f\u7528\u6d88\u606f ID \u53bb\u91cd\nString messageId = properties.getMessageId();\nif (!redis.setIfAbsent("processed:" + messageId, "1")) {\n    return; // \u5df2\u5904\u7406\u8fc7\n}\nprocessMessage(body);\n'})}),"\n",(0,l.jsx)(n.h3,{id:"q-\u6d88\u606f\u987a\u5e8f\u65e0\u6cd5\u4fdd\u8bc1",children:"Q: \u6d88\u606f\u987a\u5e8f\u65e0\u6cd5\u4fdd\u8bc1?"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"A:"})," RabbitMQ \u53ea\u4fdd\u8bc1\u961f\u5217\u5185\u6709\u5e8f:"]}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"\u4f7f\u7528\u5355\u4e00\u961f\u5217\u548c\u5355\u4e00\u6d88\u8d39\u8005"}),"\n",(0,l.jsx)(n.li,{children:"\u6216\u4f7f\u7528\u6d88\u606f\u6279\u6b21\u7f16\u53f7\u6392\u5e8f"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"\u961f\u5217\u95ee\u9898",children:"\u961f\u5217\u95ee\u9898"}),"\n",(0,l.jsx)(n.h3,{id:"q-\u961f\u5217\u6d88\u606f\u79ef\u538b",children:"Q: \u961f\u5217\u6d88\u606f\u79ef\u538b?"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"A:"})," \u89e3\u51b3\u65b9\u6848:"]}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"\u589e\u52a0\u6d88\u8d39\u8005\u6570\u91cf"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"\u63d0\u9ad8\u9884\u53d6\u503c"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"\u4f18\u5316\u6d88\u8d39\u903b\u8f91"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"\u6e05\u7406\u5386\u53f2\u6d88\u606f"})}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# \u6e05\u7a7a\u961f\u5217\nrabbitmqctl purge_queue queue_name\n"})}),"\n",(0,l.jsx)(n.h3,{id:"q-\u961f\u5217\u65e0\u6cd5\u5220\u9664",children:"Q: \u961f\u5217\u65e0\u6cd5\u5220\u9664?"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"A:"})," \u786e\u4fdd\u6ca1\u6709\u6d88\u8d39\u8005:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# \u67e5\u770b\u961f\u5217\u6d88\u8d39\u8005\nrabbitmqctl list_queues name consumers\n\n# \u5f3a\u5236\u5220\u9664\nrabbitmqctl delete_queue queue_name\n"})}),"\n",(0,l.jsx)(n.h2,{id:"\u6027\u80fd\u95ee\u9898",children:"\u6027\u80fd\u95ee\u9898"}),"\n",(0,l.jsx)(n.h3,{id:"q-\u541e\u5410\u91cf\u4f4e",children:"Q: \u541e\u5410\u91cf\u4f4e?"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"A:"})," \u4f18\u5316\u5efa\u8bae:"]}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"\u4f7f\u7528\u6279\u91cf\u53d1\u9001\u548c\u786e\u8ba4"}),"\n",(0,l.jsx)(n.li,{children:"\u8c03\u6574 QoS \u9884\u53d6\u503c"}),"\n",(0,l.jsx)(n.li,{children:"\u4f7f\u7528\u5f02\u6b65\u786e\u8ba4"}),"\n",(0,l.jsx)(n.li,{children:"\u51cf\u5c11\u6d88\u606f\u5927\u5c0f"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"q-\u5185\u5b58\u4f7f\u7528\u8fc7\u9ad8",children:"Q: \u5185\u5b58\u4f7f\u7528\u8fc7\u9ad8?"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"A:"})," \u89e3\u51b3\u65b9\u6848:"]}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"\u4f7f\u7528 Lazy Queue"}),"\n",(0,l.jsx)(n.li,{children:"\u8bbe\u7f6e\u6d88\u606f TTL"}),"\n",(0,l.jsx)(n.li,{children:"\u9650\u5236\u961f\u5217\u957f\u5ea6"}),"\n",(0,l.jsx)(n.li,{children:"\u8c03\u6574\u5185\u5b58\u9608\u503c"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ini",children:"# rabbitmq.conf\nvm_memory_high_watermark.relative = 0.4\n"})}),"\n",(0,l.jsx)(n.h2,{id:"\u96c6\u7fa4\u95ee\u9898",children:"\u96c6\u7fa4\u95ee\u9898"}),"\n",(0,l.jsx)(n.h3,{id:"q-\u8282\u70b9\u65e0\u6cd5\u52a0\u5165\u96c6\u7fa4",children:"Q: \u8282\u70b9\u65e0\u6cd5\u52a0\u5165\u96c6\u7fa4?"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"A:"})," \u68c0\u67e5:"]}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"Erlang Cookie \u4e00\u81f4"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.strong,{children:"\u4e3b\u673a\u540d\u89e3\u6790\u6b63\u786e"})}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"\u7aef\u53e3\u5f00\u653e"}),": 4369, 25672"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"q-\u7f51\u7edc\u5206\u533a",children:"Q: \u7f51\u7edc\u5206\u533a?"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"A:"})," \u914d\u7f6e\u5206\u533a\u5904\u7406:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ini",children:"cluster_partition_handling = autoheal\n"})}),"\n",(0,l.jsx)(n.h2,{id:"\u5e38\u7528\u547d\u4ee4\u901f\u67e5",children:"\u5e38\u7528\u547d\u4ee4\u901f\u67e5"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'# \u670d\u52a1\u7ba1\u7406\nrabbitmqctl status\nrabbitmqctl stop_app\nrabbitmqctl start_app\n\n# \u961f\u5217\u7ba1\u7406\nrabbitmqctl list_queues\nrabbitmqctl purge_queue <queue>\nrabbitmqctl delete_queue <queue>\n\n# \u7528\u6237\u7ba1\u7406\nrabbitmqctl add_user <user> <pass>\nrabbitmqctl set_permissions -p / <user> ".*" ".*" ".*"\n\n# \u63d2\u4ef6\u7ba1\u7406\nrabbitmq-plugins enable rabbitmq_management\nrabbitmq-plugins list\n'})}),"\n",(0,l.jsx)(n.h2,{id:"\u53c2\u8003\u8d44\u6599",children:"\u53c2\u8003\u8d44\u6599"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://www.rabbitmq.com/troubleshooting.html",children:"RabbitMQ \u6545\u969c\u6392\u67e5"})}),"\n"]})]})}function o(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(h,{...e})}):h(e)}},48885:(e,n,s)=>{s.d(n,{R:()=>d,x:()=>t});var i=s(99378);const l={},r=i.createContext(l);function d(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:d(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);