"use strict";(globalThis.webpackChunkto_lib_github_io=globalThis.webpackChunkto_lib_github_io||[]).push([[20274],{48885:(n,e,a)=>{a.d(e,{R:()=>s,x:()=>t});var i=a(99378);const o={},r=i.createContext(o);function s(n){const e=i.useContext(r);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function t(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:s(n.components),i.createElement(r.Provider,{value:e},n.children)}},73597:(n,e,a)=>{a.r(e),a.d(e,{assets:()=>d,contentTitle:()=>t,default:()=>p,frontMatter:()=>s,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"kubernetes/pods","title":"Pod \u8be6\u89e3","description":"Kubernetes Pod \u6982\u5ff5\u4e0e\u4f7f\u7528","source":"@site/docs/kubernetes/pods.md","sourceDirName":"kubernetes","slug":"/kubernetes/pods","permalink":"/docs/kubernetes/pods","draft":false,"unlisted":false,"editUrl":"https://github.com/to-lib/to-lib.github.io/tree/main/docs/kubernetes/pods.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"title":"Pod \u8be6\u89e3","description":"Kubernetes Pod \u6982\u5ff5\u4e0e\u4f7f\u7528"},"sidebar":"kubernetes","previous":{"title":"\u57fa\u7840\u547d\u4ee4","permalink":"/docs/kubernetes/basic-commands"},"next":{"title":"Deployment \u4e0e ReplicaSet","permalink":"/docs/kubernetes/deployments"}}');var o=a(22714),r=a(48885);const s={sidebar_position:4,title:"Pod \u8be6\u89e3",description:"Kubernetes Pod \u6982\u5ff5\u4e0e\u4f7f\u7528"},t="Pod \u8be6\u89e3",d={},l=[{value:"\u4ec0\u4e48\u662f Pod\uff1f",id:"\u4ec0\u4e48\u662f-pod",level:2},{value:"Pod \u7279\u6027",id:"pod-\u7279\u6027",level:3},{value:"\u57fa\u7840 Pod \u5b9a\u4e49",id:"\u57fa\u7840-pod-\u5b9a\u4e49",level:2},{value:"\u591a\u5bb9\u5668 Pod \u6a21\u5f0f",id:"\u591a\u5bb9\u5668-pod-\u6a21\u5f0f",level:2},{value:"Sidecar \u6a21\u5f0f",id:"sidecar-\u6a21\u5f0f",level:3},{value:"Ambassador \u6a21\u5f0f",id:"ambassador-\u6a21\u5f0f",level:3},{value:"Adapter \u6a21\u5f0f",id:"adapter-\u6a21\u5f0f",level:3},{value:"\u5bb9\u5668\u914d\u7f6e",id:"\u5bb9\u5668\u914d\u7f6e",level:2},{value:"\u73af\u5883\u53d8\u91cf",id:"\u73af\u5883\u53d8\u91cf",level:3},{value:"\u8d44\u6e90\u9650\u5236",id:"\u8d44\u6e90\u9650\u5236",level:3},{value:"\u7aef\u53e3\u914d\u7f6e",id:"\u7aef\u53e3\u914d\u7f6e",level:3},{value:"\u5065\u5eb7\u68c0\u67e5",id:"\u5065\u5eb7\u68c0\u67e5",level:2},{value:"Liveness Probe\uff08\u5b58\u6d3b\u63a2\u9488\uff09",id:"liveness-probe\u5b58\u6d3b\u63a2\u9488",level:3},{value:"Readiness Probe\uff08\u5c31\u7eea\u63a2\u9488\uff09",id:"readiness-probe\u5c31\u7eea\u63a2\u9488",level:3},{value:"Startup Probe\uff08\u542f\u52a8\u63a2\u9488\uff09",id:"startup-probe\u542f\u52a8\u63a2\u9488",level:3},{value:"\u63a2\u9488\u7c7b\u578b\u5bf9\u6bd4",id:"\u63a2\u9488\u7c7b\u578b\u5bf9\u6bd4",level:3},{value:"\u751f\u547d\u5468\u671f\u94a9\u5b50",id:"\u751f\u547d\u5468\u671f\u94a9\u5b50",level:2},{value:"Init Containers",id:"init-containers",level:2},{value:"Pod \u8c03\u5ea6",id:"pod-\u8c03\u5ea6",level:2},{value:"NodeSelector",id:"nodeselector",level:3},{value:"Node Affinity",id:"node-affinity",level:3},{value:"Pod Affinity/Anti-Affinity",id:"pod-affinityanti-affinity",level:3},{value:"Tolerations",id:"tolerations",level:3},{value:"Pod \u5b89\u5168\u4e0a\u4e0b\u6587",id:"pod-\u5b89\u5168\u4e0a\u4e0b\u6587",level:2},{value:"\u5e38\u7528\u64cd\u4f5c",id:"\u5e38\u7528\u64cd\u4f5c",level:2}];function c(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mermaid:"mermaid",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.header,{children:(0,o.jsx)(e.h1,{id:"pod-\u8be6\u89e3",children:"Pod \u8be6\u89e3"})}),"\n",(0,o.jsx)(e.h2,{id:"\u4ec0\u4e48\u662f-pod",children:"\u4ec0\u4e48\u662f Pod\uff1f"}),"\n",(0,o.jsx)(e.p,{children:"Pod \u662f Kubernetes \u4e2d\u6700\u5c0f\u7684\u53ef\u90e8\u7f72\u5355\u5143\uff0c\u4ee3\u8868\u96c6\u7fa4\u4e2d\u8fd0\u884c\u7684\u4e00\u4e2a\u6216\u591a\u4e2a\u5bb9\u5668\u7684\u7ec4\u5408\u3002"}),"\n",(0,o.jsx)(e.mermaid,{value:"graph TB\n    subgraph Pod\n        C1[Container 1<br/>Main App]\n        C2[Container 2<br/>Sidecar]\n        V[Shared Volume]\n        N[Shared Network<br/>localhost:port]\n    end\n\n    C1 --\x3e V\n    C2 --\x3e V\n    C1 <--\x3e N\n    C2 <--\x3e N"}),"\n",(0,o.jsx)(e.h3,{id:"pod-\u7279\u6027",children:"Pod \u7279\u6027"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"\u5171\u4eab\u7f51\u7edc"}),"\uff1a\u540c\u4e00 Pod \u4e2d\u7684\u5bb9\u5668\u5171\u4eab\u7f51\u7edc\u547d\u540d\u7a7a\u95f4\uff0c\u53ef\u901a\u8fc7 localhost \u901a\u4fe1"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"\u5171\u4eab\u5b58\u50a8"}),"\uff1a\u53ef\u4ee5\u6302\u8f7d\u5171\u4eab\u5377"]}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"\u751f\u547d\u5468\u671f"}),'\uff1aPod \u662f\u4e34\u65f6\u7684\uff0c\u4e0d\u4f1a"\u91cd\u542f"\uff0c\u53ea\u4f1a\u88ab\u66ff\u6362']}),"\n",(0,o.jsxs)(e.li,{children:[(0,o.jsx)(e.strong,{children:"\u552f\u4e00 IP"}),"\uff1a\u6bcf\u4e2a Pod \u5728\u96c6\u7fa4\u4e2d\u6709\u552f\u4e00\u7684 IP \u5730\u5740"]}),"\n"]}),"\n",(0,o.jsx)(e.h2,{id:"\u57fa\u7840-pod-\u5b9a\u4e49",children:"\u57fa\u7840 Pod \u5b9a\u4e49"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-yaml",children:'apiVersion: v1\nkind: Pod\nmetadata:\n  name: my-pod\n  namespace: default\n  labels:\n    app: my-app\n    environment: dev\n  annotations:\n    description: "My first pod"\nspec:\n  containers:\n    - name: main-container\n      image: nginx:1.24\n      ports:\n        - containerPort: 80\n          name: http\n      resources:\n        requests:\n          memory: "64Mi"\n          cpu: "250m"\n        limits:\n          memory: "128Mi"\n          cpu: "500m"\n'})}),"\n",(0,o.jsx)(e.h2,{id:"\u591a\u5bb9\u5668-pod-\u6a21\u5f0f",children:"\u591a\u5bb9\u5668 Pod \u6a21\u5f0f"}),"\n",(0,o.jsx)(e.h3,{id:"sidecar-\u6a21\u5f0f",children:"Sidecar \u6a21\u5f0f"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-yaml",children:"apiVersion: v1\nkind: Pod\nmetadata:\n  name: app-with-sidecar\nspec:\n  containers:\n    # \u4e3b\u5e94\u7528\u5bb9\u5668\n    - name: app\n      image: my-app:1.0\n      ports:\n        - containerPort: 8080\n      volumeMounts:\n        - name: logs\n          mountPath: /var/log/app\n\n    # Sidecar: \u65e5\u5fd7\u6536\u96c6\n    - name: log-collector\n      image: fluentd:latest\n      volumeMounts:\n        - name: logs\n          mountPath: /var/log/app\n          readOnly: true\n\n  volumes:\n    - name: logs\n      emptyDir: {}\n"})}),"\n",(0,o.jsx)(e.h3,{id:"ambassador-\u6a21\u5f0f",children:"Ambassador \u6a21\u5f0f"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-yaml",children:'apiVersion: v1\nkind: Pod\nmetadata:\n  name: app-with-ambassador\nspec:\n  containers:\n    - name: app\n      image: my-app:1.0\n      env:\n        - name: DB_HOST\n          value: "localhost" # \u901a\u8fc7 ambassador \u8bbf\u95ee\n        - name: DB_PORT\n          value: "5432"\n\n    # Ambassador: \u4ee3\u7406\u5916\u90e8\u6570\u636e\u5e93\n    - name: db-ambassador\n      image: haproxy:2.8\n      ports:\n        - containerPort: 5432\n'})}),"\n",(0,o.jsx)(e.h3,{id:"adapter-\u6a21\u5f0f",children:"Adapter \u6a21\u5f0f"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-yaml",children:"apiVersion: v1\nkind: Pod\nmetadata:\n  name: app-with-adapter\nspec:\n  containers:\n    - name: app\n      image: legacy-app:1.0\n      volumeMounts:\n        - name: data\n          mountPath: /var/data\n\n    # Adapter: \u683c\u5f0f\u8f6c\u6362\n    - name: format-adapter\n      image: prometheus-adapter:1.0\n      volumeMounts:\n        - name: data\n          mountPath: /var/data\n          readOnly: true\n      ports:\n        - containerPort: 9090 # Prometheus \u683c\u5f0f\u8f93\u51fa\n\n  volumes:\n    - name: data\n      emptyDir: {}\n"})}),"\n",(0,o.jsx)(e.h2,{id:"\u5bb9\u5668\u914d\u7f6e",children:"\u5bb9\u5668\u914d\u7f6e"}),"\n",(0,o.jsx)(e.h3,{id:"\u73af\u5883\u53d8\u91cf",children:"\u73af\u5883\u53d8\u91cf"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-yaml",children:'spec:\n  containers:\n    - name: app\n      image: my-app:1.0\n      env:\n        # \u76f4\u63a5\u5b9a\u4e49\n        - name: APP_ENV\n          value: "production"\n\n        # \u6765\u81ea ConfigMap\n        - name: DB_HOST\n          valueFrom:\n            configMapKeyRef:\n              name: db-config\n              key: host\n\n        # \u6765\u81ea Secret\n        - name: DB_PASSWORD\n          valueFrom:\n            secretKeyRef:\n              name: db-secret\n              key: password\n\n        # \u6765\u81ea Pod \u5b57\u6bb5\n        - name: POD_NAME\n          valueFrom:\n            fieldRef:\n              fieldPath: metadata.name\n\n        # \u6765\u81ea\u5bb9\u5668\u8d44\u6e90\n        - name: MEMORY_LIMIT\n          valueFrom:\n            resourceFieldRef:\n              containerName: app\n              resource: limits.memory\n\n      # \u4ece ConfigMap \u5bfc\u5165\u6240\u6709\n      envFrom:\n        - configMapRef:\n            name: app-config\n        - secretRef:\n            name: app-secrets\n'})}),"\n",(0,o.jsx)(e.h3,{id:"\u8d44\u6e90\u9650\u5236",children:"\u8d44\u6e90\u9650\u5236"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-yaml",children:'spec:\n  containers:\n    - name: app\n      image: my-app:1.0\n      resources:\n        # \u8bf7\u6c42\uff1a\u8c03\u5ea6\u65f6\u8003\u8651\n        requests:\n          memory: "256Mi"\n          cpu: "500m" # 0.5 \u6838\n          ephemeral-storage: "1Gi"\n        # \u9650\u5236\uff1a\u8fd0\u884c\u65f6\u9650\u5236\n        limits:\n          memory: "512Mi"\n          cpu: "1000m" # 1 \u6838\n          ephemeral-storage: "2Gi"\n'})}),"\n",(0,o.jsx)(e.h3,{id:"\u7aef\u53e3\u914d\u7f6e",children:"\u7aef\u53e3\u914d\u7f6e"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-yaml",children:"spec:\n  containers:\n    - name: app\n      image: my-app:1.0\n      ports:\n        - name: http\n          containerPort: 8080\n          protocol: TCP\n        - name: metrics\n          containerPort: 9090\n          protocol: TCP\n        - name: health\n          containerPort: 8081\n          protocol: TCP\n"})}),"\n",(0,o.jsx)(e.h2,{id:"\u5065\u5eb7\u68c0\u67e5",children:"\u5065\u5eb7\u68c0\u67e5"}),"\n",(0,o.jsx)(e.h3,{id:"liveness-probe\u5b58\u6d3b\u63a2\u9488",children:"Liveness Probe\uff08\u5b58\u6d3b\u63a2\u9488\uff09"}),"\n",(0,o.jsx)(e.p,{children:"\u68c0\u6d4b\u5bb9\u5668\u662f\u5426\u5728\u8fd0\u884c\uff0c\u5931\u8d25\u5219\u91cd\u542f\u5bb9\u5668\u3002"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-yaml",children:"spec:\n  containers:\n    - name: app\n      image: my-app:1.0\n      livenessProbe:\n        # HTTP \u68c0\u67e5\n        httpGet:\n          path: /healthz\n          port: 8080\n          httpHeaders:\n            - name: Custom-Header\n              value: Awesome\n        initialDelaySeconds: 30 # \u542f\u52a8\u540e\u7b49\u5f85\n        periodSeconds: 10 # \u68c0\u67e5\u95f4\u9694\n        timeoutSeconds: 5 # \u8d85\u65f6\u65f6\u95f4\n        successThreshold: 1 # \u6210\u529f\u9608\u503c\n        failureThreshold: 3 # \u5931\u8d25\u9608\u503c\n"})}),"\n",(0,o.jsx)(e.h3,{id:"readiness-probe\u5c31\u7eea\u63a2\u9488",children:"Readiness Probe\uff08\u5c31\u7eea\u63a2\u9488\uff09"}),"\n",(0,o.jsx)(e.p,{children:"\u68c0\u6d4b\u5bb9\u5668\u662f\u5426\u51c6\u5907\u597d\u63a5\u6536\u6d41\u91cf\uff0c\u5931\u8d25\u5219\u4ece Service \u79fb\u9664\u3002"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-yaml",children:"spec:\n  containers:\n    - name: app\n      image: my-app:1.0\n      readinessProbe:\n        # TCP \u68c0\u67e5\n        tcpSocket:\n          port: 8080\n        initialDelaySeconds: 5\n        periodSeconds: 10\n"})}),"\n",(0,o.jsx)(e.h3,{id:"startup-probe\u542f\u52a8\u63a2\u9488",children:"Startup Probe\uff08\u542f\u52a8\u63a2\u9488\uff09"}),"\n",(0,o.jsx)(e.p,{children:"\u68c0\u6d4b\u5bb9\u5668\u662f\u5426\u5df2\u542f\u52a8\u5b8c\u6210\uff0c\u7528\u4e8e\u6162\u542f\u52a8\u5e94\u7528\u3002"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-yaml",children:"spec:\n  containers:\n    - name: app\n      image: my-app:1.0\n      startupProbe:\n        # \u547d\u4ee4\u68c0\u67e5\n        exec:\n          command:\n            - cat\n            - /tmp/healthy\n        initialDelaySeconds: 0\n        periodSeconds: 5\n        failureThreshold: 30 # 30 * 5 = 150s \u6700\u5927\u542f\u52a8\u65f6\u95f4\n"})}),"\n",(0,o.jsx)(e.h3,{id:"\u63a2\u9488\u7c7b\u578b\u5bf9\u6bd4",children:"\u63a2\u9488\u7c7b\u578b\u5bf9\u6bd4"}),"\n",(0,o.jsxs)(e.table,{children:[(0,o.jsx)(e.thead,{children:(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.th,{children:"\u63a2\u9488\u7c7b\u578b"}),(0,o.jsx)(e.th,{children:"\u7528\u9014"}),(0,o.jsx)(e.th,{children:"\u5931\u8d25\u540e\u679c"})]})}),(0,o.jsxs)(e.tbody,{children:[(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:"Liveness"}),(0,o.jsx)(e.td,{children:"\u68c0\u6d4b\u5bb9\u5668\u662f\u5426\u5b58\u6d3b"}),(0,o.jsx)(e.td,{children:"\u91cd\u542f\u5bb9\u5668"})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:"Readiness"}),(0,o.jsx)(e.td,{children:"\u68c0\u6d4b\u5bb9\u5668\u662f\u5426\u5c31\u7eea"}),(0,o.jsx)(e.td,{children:"\u4ece Service \u79fb\u9664"})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:"Startup"}),(0,o.jsx)(e.td,{children:"\u68c0\u6d4b\u5bb9\u5668\u662f\u5426\u542f\u52a8\u5b8c\u6210"}),(0,o.jsx)(e.td,{children:"\u7981\u7528\u5176\u4ed6\u63a2\u9488"})]})]})]}),"\n",(0,o.jsx)(e.h2,{id:"\u751f\u547d\u5468\u671f\u94a9\u5b50",children:"\u751f\u547d\u5468\u671f\u94a9\u5b50"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-yaml",children:'spec:\n  containers:\n    - name: app\n      image: my-app:1.0\n      lifecycle:\n        postStart:\n          exec:\n            command: ["/bin/sh", "-c", "echo \'Container started\'"]\n        preStop:\n          httpGet:\n            path: /shutdown\n            port: 8080\n          # \u6216\u4f7f\u7528\u547d\u4ee4\n          # exec:\n          #   command: ["/bin/sh", "-c", "nginx -s quit; sleep 10"]\n'})}),"\n",(0,o.jsx)(e.h2,{id:"init-containers",children:"Init Containers"}),"\n",(0,o.jsx)(e.p,{children:"\u5728\u4e3b\u5bb9\u5668\u542f\u52a8\u524d\u8fd0\u884c\u7684\u521d\u59cb\u5316\u5bb9\u5668\u3002"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-yaml",children:'apiVersion: v1\nkind: Pod\nmetadata:\n  name: app-with-init\nspec:\n  initContainers:\n    # \u7b49\u5f85\u6570\u636e\u5e93\u5c31\u7eea\n    - name: wait-for-db\n      image: busybox:1.36\n      command:\n        [\n          "sh",\n          "-c",\n          "until nc -z db-service 5432; do echo waiting...; sleep 2; done",\n        ]\n\n    # \u4e0b\u8f7d\u914d\u7f6e\n    - name: download-config\n      image: busybox:1.36\n      command:\n        ["wget", "-O", "/config/app.conf", "http://config-server/app.conf"]\n      volumeMounts:\n        - name: config\n          mountPath: /config\n\n  containers:\n    - name: app\n      image: my-app:1.0\n      volumeMounts:\n        - name: config\n          mountPath: /etc/app\n\n  volumes:\n    - name: config\n      emptyDir: {}\n'})}),"\n",(0,o.jsx)(e.h2,{id:"pod-\u8c03\u5ea6",children:"Pod \u8c03\u5ea6"}),"\n",(0,o.jsx)(e.h3,{id:"nodeselector",children:"NodeSelector"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-yaml",children:"spec:\n  nodeSelector:\n    disktype: ssd\n    zone: cn-beijing-a\n"})}),"\n",(0,o.jsx)(e.h3,{id:"node-affinity",children:"Node Affinity"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-yaml",children:"spec:\n  affinity:\n    nodeAffinity:\n      requiredDuringSchedulingIgnoredDuringExecution:\n        nodeSelectorTerms:\n          - matchExpressions:\n              - key: kubernetes.io/os\n                operator: In\n                values:\n                  - linux\n      preferredDuringSchedulingIgnoredDuringExecution:\n        - weight: 1\n          preference:\n            matchExpressions:\n              - key: disktype\n                operator: In\n                values:\n                  - ssd\n"})}),"\n",(0,o.jsx)(e.h3,{id:"pod-affinityanti-affinity",children:"Pod Affinity/Anti-Affinity"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-yaml",children:"spec:\n  affinity:\n    podAffinity:\n      requiredDuringSchedulingIgnoredDuringExecution:\n        - labelSelector:\n            matchLabels:\n              app: cache\n          topologyKey: kubernetes.io/hostname\n\n    podAntiAffinity:\n      preferredDuringSchedulingIgnoredDuringExecution:\n        - weight: 100\n          podAffinityTerm:\n            labelSelector:\n              matchLabels:\n                app: web\n            topologyKey: kubernetes.io/hostname\n"})}),"\n",(0,o.jsx)(e.h3,{id:"tolerations",children:"Tolerations"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-yaml",children:'spec:\n  tolerations:\n    - key: "node-role.kubernetes.io/master"\n      operator: "Exists"\n      effect: "NoSchedule"\n    - key: "special"\n      operator: "Equal"\n      value: "true"\n      effect: "NoExecute"\n      tolerationSeconds: 3600\n'})}),"\n",(0,o.jsx)(e.h2,{id:"pod-\u5b89\u5168\u4e0a\u4e0b\u6587",children:"Pod \u5b89\u5168\u4e0a\u4e0b\u6587"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-yaml",children:"spec:\n  securityContext:\n    runAsUser: 1000\n    runAsGroup: 3000\n    fsGroup: 2000\n    runAsNonRoot: true\n\n  containers:\n    - name: app\n      image: my-app:1.0\n      securityContext:\n        allowPrivilegeEscalation: false\n        readOnlyRootFilesystem: true\n        capabilities:\n          drop:\n            - ALL\n          add:\n            - NET_BIND_SERVICE\n"})}),"\n",(0,o.jsx)(e.h2,{id:"\u5e38\u7528\u64cd\u4f5c",children:"\u5e38\u7528\u64cd\u4f5c"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"# \u521b\u5efa Pod\nkubectl apply -f pod.yaml\n\n# \u67e5\u770b Pod\nkubectl get pods\nkubectl get pods -o wide\n\n# \u67e5\u770b\u8be6\u60c5\nkubectl describe pod my-pod\n\n# \u67e5\u770b\u65e5\u5fd7\nkubectl logs my-pod\nkubectl logs my-pod -c container-name  # \u591a\u5bb9\u5668\n\n# \u8fdb\u5165\u5bb9\u5668\nkubectl exec -it my-pod -- /bin/bash\n\n# \u5220\u9664 Pod\nkubectl delete pod my-pod\nkubectl delete pod my-pod --force --grace-period=0\n"})})]})}function p(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(c,{...n})}):c(n)}}}]);