"use strict";(globalThis.webpackChunkto_lib_github_io=globalThis.webpackChunkto_lib_github_io||[]).push([[3895],{40749:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>o,contentTitle:()=>a,default:()=>u,frontMatter:()=>s,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"rust/structs-enums","title":"\u7ed3\u6784\u4f53\u548c\u679a\u4e3e","description":"\u7ed3\u6784\u4f53\u548c\u679a\u4e3e\u662f Rust \u4e2d\u521b\u5efa\u81ea\u5b9a\u4e49\u6570\u636e\u7c7b\u578b\u7684\u65b9\u5f0f\u3002","source":"@site/docs/rust/structs-enums.md","sourceDirName":"rust","slug":"/rust/structs-enums","permalink":"/docs/rust/structs-enums","draft":false,"unlisted":false,"editUrl":"https://github.com/to-lib/to-lib.github.io/tree/main/docs/rust/structs-enums.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"title":"\u7ed3\u6784\u4f53\u548c\u679a\u4e3e"},"sidebar":"rust","previous":{"title":"\u6240\u6709\u6743\u7cfb\u7edf","permalink":"/docs/rust/ownership"},"next":{"title":"\u9519\u8bef\u5904\u7406","permalink":"/docs/rust/error-handling"}}');var t=i(22714),l=i(48885);const s={sidebar_position:4,title:"\u7ed3\u6784\u4f53\u548c\u679a\u4e3e"},a="\u7ed3\u6784\u4f53\u548c\u679a\u4e3e",o={},d=[{value:"\u7ed3\u6784\u4f53 (Struct)",id:"\u7ed3\u6784\u4f53-struct",level:2},{value:"\u5b9a\u4e49\u7ed3\u6784\u4f53",id:"\u5b9a\u4e49\u7ed3\u6784\u4f53",level:3},{value:"\u53ef\u53d8\u7ed3\u6784\u4f53",id:"\u53ef\u53d8\u7ed3\u6784\u4f53",level:3},{value:"\u5b57\u6bb5\u521d\u59cb\u5316\u7b80\u5199",id:"\u5b57\u6bb5\u521d\u59cb\u5316\u7b80\u5199",level:3},{value:"\u7ed3\u6784\u4f53\u66f4\u65b0\u8bed\u6cd5",id:"\u7ed3\u6784\u4f53\u66f4\u65b0\u8bed\u6cd5",level:3},{value:"\u5143\u7ec4\u7ed3\u6784\u4f53",id:"\u5143\u7ec4\u7ed3\u6784\u4f53",level:3},{value:"\u5355\u5143\u7ed3\u6784\u4f53",id:"\u5355\u5143\u7ed3\u6784\u4f53",level:3},{value:"\u7ed3\u6784\u4f53\u65b9\u6cd5",id:"\u7ed3\u6784\u4f53\u65b9\u6cd5",level:2},{value:"\u65b9\u6cd5\u5b9a\u4e49",id:"\u65b9\u6cd5\u5b9a\u4e49",level:3},{value:"\u5173\u8054\u51fd\u6570",id:"\u5173\u8054\u51fd\u6570",level:3},{value:"\u591a\u4e2a impl \u5757",id:"\u591a\u4e2a-impl-\u5757",level:3},{value:"\u679a\u4e3e (Enum)",id:"\u679a\u4e3e-enum",level:2},{value:"\u5b9a\u4e49\u679a\u4e3e",id:"\u5b9a\u4e49\u679a\u4e3e",level:3},{value:"\u679a\u4e3e\u503c",id:"\u679a\u4e3e\u503c",level:3},{value:"\u4e0d\u540c\u7c7b\u578b\u7684\u679a\u4e3e\u53d8\u4f53",id:"\u4e0d\u540c\u7c7b\u578b\u7684\u679a\u4e3e\u53d8\u4f53",level:3},{value:"Option \u679a\u4e3e",id:"option-\u679a\u4e3e",level:2},{value:"<code>Option&lt;T&gt;</code> \u5b9a\u4e49",id:"optiont-\u5b9a\u4e49",level:3},{value:"\u4f7f\u7528 Option",id:"\u4f7f\u7528-option",level:3},{value:"match \u8868\u8fbe\u5f0f",id:"match-\u8868\u8fbe\u5f0f",level:2},{value:"\u57fa\u672c match",id:"\u57fa\u672c-match",level:3},{value:"\u7ed1\u5b9a\u503c\u7684\u6a21\u5f0f",id:"\u7ed1\u5b9a\u503c\u7684\u6a21\u5f0f",level:3},{value:"\u5339\u914d <code>Option&lt;T&gt;</code>",id:"\u5339\u914d-optiont",level:3},{value:"\u901a\u914d\u6a21\u5f0f",id:"\u901a\u914d\u6a21\u5f0f",level:3},{value:"if let \u7b80\u6d01\u63a7\u5236\u6d41",id:"if-let-\u7b80\u6d01\u63a7\u5236\u6d41",level:2},{value:"if let \u8bed\u6cd5",id:"if-let-\u8bed\u6cd5",level:3},{value:"if let \u4e0e else",id:"if-let-\u4e0e-else",level:3},{value:"\u5b9e\u7528\u793a\u4f8b",id:"\u5b9e\u7528\u793a\u4f8b",level:2},{value:"\u81ea\u5b9a\u4e49 Result \u7c7b\u578b",id:"\u81ea\u5b9a\u4e49-result-\u7c7b\u578b",level:3},{value:"\u94fe\u8868\u8282\u70b9",id:"\u94fe\u8868\u8282\u70b9",level:3},{value:"\u6253\u5370\u7ed3\u6784\u4f53",id:"\u6253\u5370\u7ed3\u6784\u4f53",level:2},{value:"\u6700\u4f73\u5b9e\u8df5",id:"\u6700\u4f73\u5b9e\u8df5",level:2},{value:"1. \u4f7f\u7528 derive \u81ea\u52a8\u5b9e\u73b0 trait",id:"1-\u4f7f\u7528-derive-\u81ea\u52a8\u5b9e\u73b0-trait",level:3},{value:"2. \u4f18\u5148\u4f7f\u7528\u679a\u4e3e\u800c\u975e\u591a\u4e2a\u5e03\u5c14\u503c",id:"2-\u4f18\u5148\u4f7f\u7528\u679a\u4e3e\u800c\u975e\u591a\u4e2a\u5e03\u5c14\u503c",level:3},{value:"3. \u4f7f\u7528 Option \u800c\u975e\u7a7a\u503c",id:"3-\u4f7f\u7528-option-\u800c\u975e\u7a7a\u503c",level:3},{value:"\u8bbe\u8ba1\u6a21\u5f0f",id:"\u8bbe\u8ba1\u6a21\u5f0f",level:2},{value:"\u6784\u5efa\u8005\u6a21\u5f0f (Builder Pattern)",id:"\u6784\u5efa\u8005\u6a21\u5f0f-builder-pattern",level:3},{value:"\u7c7b\u578b\u72b6\u6001\u6a21\u5f0f (Typestate Pattern)",id:"\u7c7b\u578b\u72b6\u6001\u6a21\u5f0f-typestate-pattern",level:3},{value:"Newtype \u6a21\u5f0f",id:"newtype-\u6a21\u5f0f",level:3},{value:"\u679a\u4e3e\u9ad8\u7ea7\u7528\u6cd5",id:"\u679a\u4e3e\u9ad8\u7ea7\u7528\u6cd5",level:2},{value:"\u679a\u4e3e\u65b9\u6cd5\u548c\u5173\u8054\u51fd\u6570",id:"\u679a\u4e3e\u65b9\u6cd5\u548c\u5173\u8054\u51fd\u6570",level:3},{value:"\u679a\u4e3e\u548c\u6cdb\u578b\u7ed3\u5408",id:"\u679a\u4e3e\u548c\u6cdb\u578b\u7ed3\u5408",level:3},{value:"\u9012\u5f52\u679a\u4e3e",id:"\u9012\u5f52\u679a\u4e3e",level:3},{value:"\u5b9e\u7528\u6a21\u5f0f",id:"\u5b9e\u7528\u6a21\u5f0f",level:2},{value:"\u72b6\u6001\u673a",id:"\u72b6\u6001\u673a",level:3},{value:"\u9519\u8bef\u7c7b\u578b\u7ec4\u5408",id:"\u9519\u8bef\u7c7b\u578b\u7ec4\u5408",level:3},{value:"\u603b\u7ed3",id:"\u603b\u7ed3",level:2}];function c(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"\u7ed3\u6784\u4f53\u548c\u679a\u4e3e",children:"\u7ed3\u6784\u4f53\u548c\u679a\u4e3e"})}),"\n",(0,t.jsx)(e.p,{children:"\u7ed3\u6784\u4f53\u548c\u679a\u4e3e\u662f Rust \u4e2d\u521b\u5efa\u81ea\u5b9a\u4e49\u6570\u636e\u7c7b\u578b\u7684\u65b9\u5f0f\u3002"}),"\n",(0,t.jsx)(e.h2,{id:"\u7ed3\u6784\u4f53-struct",children:"\u7ed3\u6784\u4f53 (Struct)"}),"\n",(0,t.jsx)(e.h3,{id:"\u5b9a\u4e49\u7ed3\u6784\u4f53",children:"\u5b9a\u4e49\u7ed3\u6784\u4f53"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-rust",children:'struct User {\n    username: String,\n    email: String,\n    sign_in_count: u64,\n    active: bool,\n}\n\nfn main() {\n    // \u521b\u5efa\u5b9e\u4f8b\n    let user1 = User {\n        email: String::from("someone@example.com"),\n        username: String::from("someusername123"),\n        active: true,\n        sign_in_count: 1,\n    };\n    \n    // \u8bbf\u95ee\u5b57\u6bb5\n    println!("\u7528\u6237\u540d: {}", user1.username);\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"\u53ef\u53d8\u7ed3\u6784\u4f53",children:"\u53ef\u53d8\u7ed3\u6784\u4f53"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let mut user1 = User {\n        email: String::from("someone@example.com"),\n        username: String::from("someusername123"),\n        active: true,\n        sign_in_count: 1,\n    };\n    \n    // \u4fee\u6539\u5b57\u6bb5\n    user1.email = String::from("anotheremail@example.com");\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"\u5b57\u6bb5\u521d\u59cb\u5316\u7b80\u5199",children:"\u5b57\u6bb5\u521d\u59cb\u5316\u7b80\u5199"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-rust",children:"fn build_user(email: String, username: String) -> User {\n    User {\n        email,      // \u7b80\u5199\uff1aemail: email\n        username,   // \u7b80\u5199\uff1ausername: username\n        active: true,\n        sign_in_count: 1,\n    }\n}\n"})}),"\n",(0,t.jsx)(e.h3,{id:"\u7ed3\u6784\u4f53\u66f4\u65b0\u8bed\u6cd5",children:"\u7ed3\u6784\u4f53\u66f4\u65b0\u8bed\u6cd5"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let user1 = User {\n        email: String::from("someone@example.com"),\n        username: String::from("someusername123"),\n        active: true,\n        sign_in_count: 1,\n    };\n    \n    // \u4f7f\u7528 user1 \u7684\u90e8\u5206\u5b57\u6bb5\u521b\u5efa user2\n    let user2 = User {\n        email: String::from("another@example.com"),\n        ..user1  // \u5176\u4f59\u5b57\u6bb5\u4ece user1 \u590d\u5236\n    };\n    \n    // \u6ce8\u610f\uff1auser1 \u7684 username \u88ab\u79fb\u52a8\u5230 user2\n    // println!("{}", user1.username);  // \u9519\u8bef\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"\u5143\u7ec4\u7ed3\u6784\u4f53",children:"\u5143\u7ec4\u7ed3\u6784\u4f53"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-rust",children:'struct Color(i32, i32, i32);\nstruct Point(i32, i32, i32);\n\nfn main() {\n    let black = Color(0, 0, 0);\n    let origin = Point(0, 0, 0);\n    \n    // \u8bbf\u95ee\u5143\u7ec4\u7ed3\u6784\u4f53\u7684\u5b57\u6bb5\n    println!("Black: ({}, {}, {})", black.0, black.1, black.2);\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"\u5355\u5143\u7ed3\u6784\u4f53",children:"\u5355\u5143\u7ed3\u6784\u4f53"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-rust",children:"struct AlwaysEqual;\n\nfn main() {\n    let subject = AlwaysEqual;\n}\n"})}),"\n",(0,t.jsx)(e.h2,{id:"\u7ed3\u6784\u4f53\u65b9\u6cd5",children:"\u7ed3\u6784\u4f53\u65b9\u6cd5"}),"\n",(0,t.jsx)(e.h3,{id:"\u65b9\u6cd5\u5b9a\u4e49",children:"\u65b9\u6cd5\u5b9a\u4e49"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-rust",children:'#[derive(Debug)]\nstruct Rectangle {\n    width: u32,\n    height: u32,\n}\n\nimpl Rectangle {\n    // \u65b9\u6cd5\uff1a\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f &self\n    fn area(&self) -> u32 {\n        self.width * self.height\n    }\n    \n    fn can_hold(&self, other: &Rectangle) -> bool {\n        self.width > other.width && self.height > other.height\n    }\n    \n    // \u53ef\u53d8\u65b9\u6cd5\n    fn set_width(&mut self, width: u32) {\n        self.width = width;\n    }\n}\n\nfn main() {\n    let rect1 = Rectangle {\n        width: 30,\n        height: 50,\n    };\n    \n    println!("\u9762\u79ef: {}", rect1.area());\n    \n    let mut rect2 = Rectangle {\n        width: 10,\n        height: 20,\n    };\n    \n    rect2.set_width(15);\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"\u5173\u8054\u51fd\u6570",children:"\u5173\u8054\u51fd\u6570"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-rust",children:"impl Rectangle {\n    // \u5173\u8054\u51fd\u6570\uff08\u7c7b\u4f3c\u9759\u6001\u65b9\u6cd5\uff09\n    fn square(size: u32) -> Rectangle {\n        Rectangle {\n            width: size,\n            height: size,\n        }\n    }\n}\n\nfn main() {\n    let sq = Rectangle::square(10);\n}\n"})}),"\n",(0,t.jsx)(e.h3,{id:"\u591a\u4e2a-impl-\u5757",children:"\u591a\u4e2a impl \u5757"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-rust",children:"impl Rectangle {\n    fn area(&self) -> u32 {\n        self.width * self.height\n    }\n}\n\nimpl Rectangle {\n    fn can_hold(&self, other: &Rectangle) -> bool {\n        self.width > other.width && self.height > other.height\n    }\n}\n"})}),"\n",(0,t.jsx)(e.h2,{id:"\u679a\u4e3e-enum",children:"\u679a\u4e3e (Enum)"}),"\n",(0,t.jsx)(e.h3,{id:"\u5b9a\u4e49\u679a\u4e3e",children:"\u5b9a\u4e49\u679a\u4e3e"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-rust",children:"enum IpAddrKind {\n    V4,\n    V6,\n}\n\nfn main() {\n    let four = IpAddrKind::V4;\n    let six = IpAddrKind::V6;\n    \n    route(IpAddrKind::V4);\n}\n\nfn route(ip_kind: IpAddrKind) {}\n"})}),"\n",(0,t.jsx)(e.h3,{id:"\u679a\u4e3e\u503c",children:"\u679a\u4e3e\u503c"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-rust",children:'enum IpAddr {\n    V4(u8, u8, u8, u8),\n    V6(String),\n}\n\nfn main() {\n    let home = IpAddr::V4(127, 0, 0, 1);\n    let loopback = IpAddr::V6(String::from("::1"));\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"\u4e0d\u540c\u7c7b\u578b\u7684\u679a\u4e3e\u53d8\u4f53",children:"\u4e0d\u540c\u7c7b\u578b\u7684\u679a\u4e3e\u53d8\u4f53"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-rust",children:'enum Message {\n    Quit,                       // \u65e0\u6570\u636e\n    Move { x: i32, y: i32 },   // \u5177\u540d\u5b57\u6bb5\n    Write(String),              // \u5355\u4e2a String\n    ChangeColor(i32, i32, i32), // \u4e09\u4e2a i32\n}\n\nimpl Message {\n    fn call(&self) {\n        // \u65b9\u6cd5\u4f53\n    }\n}\n\nfn main() {\n    let m = Message::Write(String::from("hello"));\n    m.call();\n}\n'})}),"\n",(0,t.jsx)(e.h2,{id:"option-\u679a\u4e3e",children:"Option \u679a\u4e3e"}),"\n",(0,t.jsxs)(e.h3,{id:"optiont-\u5b9a\u4e49",children:[(0,t.jsx)(e.code,{children:"Option<T>"})," \u5b9a\u4e49"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-rust",children:'enum Option<T> {\n    Some(T),\n    None,\n}\n\nfn main() {\n    let some_number = Some(5);\n    let some_string = Some("a string");\n    \n    let absent_number: Option<i32> = None;\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"\u4f7f\u7528-option",children:"\u4f7f\u7528 Option"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let x: i8 = 5;\n    let y: Option<i8> = Some(5);\n    \n    // let sum = x + y;  // \u9519\u8bef\uff1a\u4e0d\u80fd\u76f4\u63a5\u76f8\u52a0\n    \n    // \u9700\u8981\u5148\u5904\u7406 Option\n    match y {\n        Some(value) => println!("sum = {}", x + value),\n        None => println!("y is None"),\n    }\n}\n'})}),"\n",(0,t.jsx)(e.h2,{id:"match-\u8868\u8fbe\u5f0f",children:"match \u8868\u8fbe\u5f0f"}),"\n",(0,t.jsx)(e.h3,{id:"\u57fa\u672c-match",children:"\u57fa\u672c match"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-rust",children:"enum Coin {\n    Penny,\n    Nickel,\n    Dime,\n    Quarter,\n}\n\nfn value_in_cents(coin: Coin) -> u8 {\n    match coin {\n        Coin::Penny => 1,\n        Coin::Nickel => 5,\n        Coin::Dime => 10,\n        Coin::Quarter => 25,\n    }\n}\n"})}),"\n",(0,t.jsx)(e.h3,{id:"\u7ed1\u5b9a\u503c\u7684\u6a21\u5f0f",children:"\u7ed1\u5b9a\u503c\u7684\u6a21\u5f0f"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-rust",children:'#[derive(Debug)]\nenum UsState {\n    Alabama,\n    Alaska,\n    // ...\n}\n\nenum Coin {\n    Penny,\n    Nickel,\n    Dime,\n    Quarter(UsState),\n}\n\nfn value_in_cents(coin: Coin) -> u8 {\n    match coin {\n        Coin::Penny => 1,\n        Coin::Nickel => 5,\n        Coin::Dime => 10,\n        Coin::Quarter(state) => {\n            println!("\u5dde\u786c\u5e01\u6765\u81ea {:?}!", state);\n            25\n        }\n    }\n}\n'})}),"\n",(0,t.jsxs)(e.h3,{id:"\u5339\u914d-optiont",children:["\u5339\u914d ",(0,t.jsx)(e.code,{children:"Option<T>"})]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-rust",children:"fn plus_one(x: Option<i32>) -> Option<i32> {\n    match x {\n        None => None,\n        Some(i) => Some(i + 1),\n    }\n}\n\nfn main() {\n    let five = Some(5);\n    let six = plus_one(five);\n    let none = plus_one(None);\n}\n"})}),"\n",(0,t.jsx)(e.h3,{id:"\u901a\u914d\u6a21\u5f0f",children:"\u901a\u914d\u6a21\u5f0f"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let some_value = 0u8;\n    \n    match some_value {\n        1 => println!("one"),\n        3 => println!("three"),\n        5 => println!("five"),\n        7 => println!("seven"),\n        _ => (),  // \u5339\u914d\u6240\u6709\u5176\u4ed6\u60c5\u51b5\n    }\n}\n'})}),"\n",(0,t.jsx)(e.h2,{id:"if-let-\u7b80\u6d01\u63a7\u5236\u6d41",children:"if let \u7b80\u6d01\u63a7\u5236\u6d41"}),"\n",(0,t.jsx)(e.h3,{id:"if-let-\u8bed\u6cd5",children:"if let \u8bed\u6cd5"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let some_value = Some(3);\n    \n    // \u4f7f\u7528 match\n    match some_value {\n        Some(3) => println!("three"),\n        _ => (),\n    }\n    \n    // \u4f7f\u7528 if let\uff08\u66f4\u7b80\u6d01\uff09\n    if let Some(3) = some_value {\n        println!("three");\n    }\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"if-let-\u4e0e-else",children:"if let \u4e0e else"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let mut count = 0;\n    let coin = Coin::Quarter(UsState::Alaska);\n    \n    if let Coin::Quarter(state) = coin {\n        println!("\u5dde\u786c\u5e01\u6765\u81ea {:?}!", state);\n    } else {\n        count += 1;\n    }\n}\n'})}),"\n",(0,t.jsx)(e.h2,{id:"\u5b9e\u7528\u793a\u4f8b",children:"\u5b9e\u7528\u793a\u4f8b"}),"\n",(0,t.jsx)(e.h3,{id:"\u81ea\u5b9a\u4e49-result-\u7c7b\u578b",children:"\u81ea\u5b9a\u4e49 Result \u7c7b\u578b"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-rust",children:'enum Result<T, E> {\n    Ok(T),\n    Err(E),\n}\n\nfn divide(numerator: f64, denominator: f64) -> Result<f64, String> {\n    if denominator == 0.0 {\n        Err(String::from("\u9664\u6570\u4e0d\u80fd\u4e3a0"))\n    } else {\n        Ok(numerator / denominator)\n    }\n}\n\nfn main() {\n    match divide(10.0, 2.0) {\n        Ok(result) => println!("\u7ed3\u679c: {}", result),\n        Err(e) => println!("\u9519\u8bef: {}", e),\n    }\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"\u94fe\u8868\u8282\u70b9",children:"\u94fe\u8868\u8282\u70b9"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-rust",children:'#[derive(Debug)]\nenum List {\n    Cons(i32, Box<List>),\n    Nil,\n}\n\nuse List::{Cons, Nil};\n\nfn main() {\n    let list = Cons(1, Box::new(Cons(2, Box::new(Cons(3, Box::new(Nil))))));\n    println!("{:?}", list);\n}\n'})}),"\n",(0,t.jsx)(e.h2,{id:"\u6253\u5370\u7ed3\u6784\u4f53",children:"\u6253\u5370\u7ed3\u6784\u4f53"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-rust",children:'#[derive(Debug)]\nstruct Rectangle {\n    width: u32,\n    height: u32,\n}\n\nfn main() {\n    let rect = Rectangle {\n        width: 30,\n        height: 50,\n    };\n    \n    // Debug \u8f93\u51fa\n    println!("{:?}", rect);\n    \n    // \u7f8e\u5316\u8f93\u51fa\n    println!("{:#?}", rect);\n    \n    // dbg! \u5b8f\n    dbg!(&rect);\n}\n'})}),"\n",(0,t.jsx)(e.h2,{id:"\u6700\u4f73\u5b9e\u8df5",children:"\u6700\u4f73\u5b9e\u8df5"}),"\n",(0,t.jsx)(e.h3,{id:"1-\u4f7f\u7528-derive-\u81ea\u52a8\u5b9e\u73b0-trait",children:"1. \u4f7f\u7528 derive \u81ea\u52a8\u5b9e\u73b0 trait"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-rust",children:"#[derive(Debug, Clone, PartialEq)]\nstruct Point {\n    x: i32,\n    y: i32,\n}\n"})}),"\n",(0,t.jsx)(e.h3,{id:"2-\u4f18\u5148\u4f7f\u7528\u679a\u4e3e\u800c\u975e\u591a\u4e2a\u5e03\u5c14\u503c",children:"2. \u4f18\u5148\u4f7f\u7528\u679a\u4e3e\u800c\u975e\u591a\u4e2a\u5e03\u5c14\u503c"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-rust",children:"// \u4e0d\u597d\nstruct Config {\n    is_active: bool,\n    is_premium: bool,\n    is_verified: bool,\n}\n\n// \u597d\nenum AccountStatus {\n    Active,\n    Premium,\n    Verified,\n    Inactive,\n}\n"})}),"\n",(0,t.jsx)(e.h3,{id:"3-\u4f7f\u7528-option-\u800c\u975e\u7a7a\u503c",children:"3. \u4f7f\u7528 Option \u800c\u975e\u7a7a\u503c"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-rust",children:"// \u4e0d\u597d\uff08\u5728\u5176\u4ed6\u8bed\u8a00\u4e2d\uff09\n// fn find_user(id: i32) -> User {\n//     // \u8fd4\u56de null \u5982\u679c\u672a\u627e\u5230\n// }\n\n// \u597d\nfn find_user(id: i32) -> Option<User> {\n    // \u8fd4\u56de Some(user) \u6216 None\n    None\n}\n"})}),"\n",(0,t.jsx)(e.h2,{id:"\u8bbe\u8ba1\u6a21\u5f0f",children:"\u8bbe\u8ba1\u6a21\u5f0f"}),"\n",(0,t.jsx)(e.h3,{id:"\u6784\u5efa\u8005\u6a21\u5f0f-builder-pattern",children:"\u6784\u5efa\u8005\u6a21\u5f0f (Builder Pattern)"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-rust",children:'#[derive(Debug)]\nstruct Server {\n    host: String,\n    port: u16,\n    timeout: Option<u64>,\n    max_connections: Option<usize>,\n}\n\nstruct ServerBuilder {\n    host: String,\n    port: u16,\n    timeout: Option<u64>,\n    max_connections: Option<usize>,\n}\n\nimpl ServerBuilder {\n    fn new(host: String, port: u16) -> Self {\n        ServerBuilder {\n            host,\n            port,\n            timeout: None,\n            max_connections: None,\n        }\n    }\n    \n    fn timeout(mut self, timeout: u64) -> Self {\n        self.timeout = Some(timeout);\n        self\n    }\n    \n    fn max_connections(mut self, max: usize) -> Self {\n        self.max_connections = Some(max);\n        self\n    }\n    \n    fn build(self) -> Server {\n        Server {\n            host: self.host,\n            port: self.port,\n            timeout: self.timeout,\n            max_connections: self.max_connections,\n        }\n    }\n}\n\nfn main() {\n    let server = ServerBuilder::new("localhost".to_string(), 8080)\n        .timeout(30)\n        .max_connections(100)\n        .build();\n    \n    println!("{:?}", server);\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"\u7c7b\u578b\u72b6\u6001\u6a21\u5f0f-typestate-pattern",children:"\u7c7b\u578b\u72b6\u6001\u6a21\u5f0f (Typestate Pattern)"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-rust",children:'// \u4f7f\u7528\u7c7b\u578b\u7cfb\u7edf\u8868\u793a\u72b6\u6001\nstruct Locked;\nstruct Unlocked;\n\nstruct Door<State> {\n    _state: std::marker::PhantomData<State>,\n}\n\nimpl Door<Locked> {\n    fn new() -> Self {\n        println!("\u95e8\u5df2\u9501\u4e0a");\n        Door {\n            _state: std::marker::PhantomData,\n        }\n    }\n    \n    fn unlock(self) -> Door<Unlocked> {\n        println!("\u95e8\u5df2\u89e3\u9501");\n        Door {\n            _state: std::marker::PhantomData,\n        }\n    }\n}\n\nimpl Door<Unlocked> {\n    fn lock(self) -> Door<Locked> {\n        println!("\u95e8\u5df2\u9501\u4e0a");\n        Door {\n            _state: std::marker::PhantomData,\n        }\n    }\n    \n    fn open(&self) {\n        println!("\u95e8\u5df2\u6253\u5f00");\n    }\n}\n\nfn main() {\n    let door = Door::<Locked>::new();\n    // door.open();  // \u7f16\u8bd1\u9519\u8bef:\u9501\u4f4f\u7684\u95e8\u4e0d\u80fd\u6253\u5f00\n    \n    let door = door.unlock();\n    door.open();  // \u6b63\u786e\n    \n    let door = door.lock();\n    // door.open();  // \u7f16\u8bd1\u9519\u8bef\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"newtype-\u6a21\u5f0f",children:"Newtype \u6a21\u5f0f"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-rust",children:'// \u521b\u5efa\u7c7b\u578b\u5b89\u5168\u7684\u5305\u88c5\nstruct UserId(u64);\nstruct OrderId(u64);\n\nfn process_user(user_id: UserId) {\n    println!("\u5904\u7406\u7528\u6237: {}", user_id.0);\n}\n\nfn process_order(order_id: OrderId) {\n    println!("\u5904\u7406\u8ba2\u5355: {}", order_id.0);\n}\n\nfn main() {\n    let user = UserId(42);\n    let order = OrderId(123);\n    \n    process_user(user);\n    process_order(order);\n    \n    // process_user(order);  // \u7f16\u8bd1\u9519\u8bef:\u7c7b\u578b\u4e0d\u5339\u914d\n}\n'})}),"\n",(0,t.jsx)(e.h2,{id:"\u679a\u4e3e\u9ad8\u7ea7\u7528\u6cd5",children:"\u679a\u4e3e\u9ad8\u7ea7\u7528\u6cd5"}),"\n",(0,t.jsx)(e.h3,{id:"\u679a\u4e3e\u65b9\u6cd5\u548c\u5173\u8054\u51fd\u6570",children:"\u679a\u4e3e\u65b9\u6cd5\u548c\u5173\u8054\u51fd\u6570"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-rust",children:'#[derive(Debug)]\nenum Message {\n    Quit,\n    Move { x: i32, y: i32 },\n    Write(String),\n    ChangeColor(i32, i32, i32),\n}\n\nimpl Message {\n    // \u5173\u8054\u51fd\u6570\n    fn new_move(x: i32, y: i32) -> Self {\n        Message::Move { x, y }\n    }\n    \n    // \u65b9\u6cd5\n    fn call(&self) {\n        match self {\n            Message::Quit => println!("\u9000\u51fa"),\n            Message::Move { x, y } => println!("\u79fb\u52a8\u5230 ({}, {})", x, y),\n            Message::Write(text) => println!("\u5199\u5165: {}", text),\n            Message::ChangeColor(r, g, b) => {\n                println!("\u6539\u53d8\u989c\u8272: RGB({}, {}, {})", r, g, b)\n            }\n        }\n    }\n    \n    fn is_quit(&self) -> bool {\n        matches!(self, Message::Quit)\n    }\n}\n\nfn main() {\n    let msg1 = Message::Quit;\n    let msg2 = Message::new_move(10, 20);\n    let msg3 = Message::Write("Hello".to_string());\n    \n    msg1.call();\n    msg2.call();\n    msg3.call();\n    \n    println!("\u662f\u5426\u9000\u51fa: {}", msg1.is_quit());\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"\u679a\u4e3e\u548c\u6cdb\u578b\u7ed3\u5408",children:"\u679a\u4e3e\u548c\u6cdb\u578b\u7ed3\u5408"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-rust",children:'enum Either<L, R> {\n    Left(L),\n    Right(R),\n}\n\nimpl<L, R> Either<L, R> {\n    fn is_left(&self) -> bool {\n        matches!(self, Either::Left(_))\n    }\n    \n    fn is_right(&self) -> bool {\n        matches!(self, Either::Right(_))\n    }\n    \n    fn left(self) -> Option<L> {\n        match self {\n            Either::Left(l) => Some(l),\n            Either::Right(_) => None,\n        }\n    }\n    \n    fn right(self) -> Option<R> {\n        match self {\n            Either::Left(_) => None,\n            Either::Right(r) => Some(r),\n        }\n    }\n}\n\nfn main() {\n    let value: Either<i32, String> = Either::Left(42);\n    \n    if value.is_left() {\n        println!("\u662f\u5de6\u503c");\n    }\n    \n    let left_value = value.left();\n    println!("{:?}", left_value);\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"\u9012\u5f52\u679a\u4e3e",children:"\u9012\u5f52\u679a\u4e3e"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-rust",children:'#[derive(Debug)]\nenum Json {\n    Null,\n    Bool(bool),\n    Number(f64),\n    String(String),\n    Array(Vec<Json>),\n    Object(std::collections::HashMap<String, Json>),\n}\n\nfn main() {\n    use std::collections::HashMap;\n    \n    let mut obj = HashMap::new();\n    obj.insert("name".to_string(), Json::String("Alice".to_string()));\n    obj.insert("age".to_string(), Json::Number(30.0));\n    obj.insert("active".to_string(), Json::Bool(true));\n    \n    let json = Json::Object(obj);\n    println!("{:#?}", json);\n}\n'})}),"\n",(0,t.jsx)(e.h2,{id:"\u5b9e\u7528\u6a21\u5f0f",children:"\u5b9e\u7528\u6a21\u5f0f"}),"\n",(0,t.jsx)(e.h3,{id:"\u72b6\u6001\u673a",children:"\u72b6\u6001\u673a"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-rust",children:'enum TrafficLight {\n    Red,\n    Yellow,\n    Green,\n}\n\nimpl TrafficLight {\n    fn next(self) -> Self {\n        match self {\n            TrafficLight::Red => TrafficLight::Green,\n            TrafficLight::Yellow => TrafficLight::Red,\n            TrafficLight::Green => TrafficLight::Yellow,\n        }\n    }\n    \n    fn duration(&self) -> u32 {\n        match self {\n            TrafficLight::Red => 60,\n            TrafficLight::Yellow => 3,\n            TrafficLight::Green => 45,\n        }\n    }\n}\n\nfn main() {\n    let mut light = TrafficLight::Red;\n    \n    for _ in 0..5 {\n        println!("\u5f53\u524d: {:?}, \u6301\u7eed: {}\u79d2", light, light.duration());\n        light = light.next();\n    }\n}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"\u9519\u8bef\u7c7b\u578b\u7ec4\u5408",children:"\u9519\u8bef\u7c7b\u578b\u7ec4\u5408"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-rust",children:"#[derive(Debug)]\nenum Error {\n    Io(std::io::Error),\n    Parse(std::num::ParseIntError),\n    Custom(String),\n}\n\nimpl From<std::io::Error> for Error {\n    fn from(error: std::io::Error) -> Self {\n        Error::Io(error)\n    }\n}\n\nimpl From<std::num::ParseIntError> for Error {\n    fn from(error: std::num::ParseIntError) -> Self {\n        Error::Parse(error)\n    }\n}\n\nfn read_number_from_file(path: &str) -> Result<i32, Error> {\n    let content = std::fs::read_to_string(path)?;\n    let number: i32 = content.trim().parse()?;\n    Ok(number)\n}\n"})}),"\n",(0,t.jsx)(e.h2,{id:"\u603b\u7ed3",children:"\u603b\u7ed3"}),"\n",(0,t.jsx)(e.p,{children:"\u672c\u6587\u4ecb\u7ecd\u4e86\u7ed3\u6784\u4f53\u548c\u679a\u4e3e\u7684\u4f7f\u7528\uff1a"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"\u2705 \u7ed3\u6784\u4f53\u5b9a\u4e49\u548c\u65b9\u6cd5"}),"\n",(0,t.jsx)(e.li,{children:"\u2705 \u5173\u8054\u51fd\u6570"}),"\n",(0,t.jsx)(e.li,{children:"\u2705 \u679a\u4e3e\u5b9a\u4e49\u548c\u53d8\u4f53"}),"\n",(0,t.jsx)(e.li,{children:"\u2705 Option \u679a\u4e3e"}),"\n",(0,t.jsx)(e.li,{children:"\u2705 match \u8868\u8fbe\u5f0f"}),"\n",(0,t.jsx)(e.li,{children:"\u2705 if let \u8bed\u6cd5"}),"\n",(0,t.jsx)(e.li,{children:"\u2705 \u8bbe\u8ba1\u6a21\u5f0f:\u6784\u5efa\u8005\u6a21\u5f0f\u3001\u7c7b\u578b\u72b6\u6001\u6a21\u5f0f\u3001Newtype\u6a21\u5f0f"}),"\n",(0,t.jsx)(e.li,{children:"\u2705 \u679a\u4e3e\u9ad8\u7ea7\u7528\u6cd5:\u65b9\u6cd5\u3001\u6cdb\u578b\u7ed3\u5408\u3001\u9012\u5f52\u679a\u4e3e"}),"\n",(0,t.jsx)(e.li,{children:"\u2705 \u5b9e\u7528\u6a21\u5f0f:\u72b6\u6001\u673a\u3001\u9519\u8bef\u7c7b\u578b\u7ec4\u5408"}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:["\u638c\u63e1\u8fd9\u4e9b\u540e\uff0c\u7ee7\u7eed\u5b66\u4e60 ",(0,t.jsx)(e.a,{href:"./generics-traits",children:"\u6cdb\u578b\u548cTrait"}),"\u3002"]})]})}function u(n={}){const{wrapper:e}={...(0,l.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(c,{...n})}):c(n)}},48885:(n,e,i)=>{i.d(e,{R:()=>s,x:()=>a});var r=i(99378);const t={},l=r.createContext(t);function s(n){const e=r.useContext(l);return r.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:s(n.components),r.createElement(l.Provider,{value:e},n.children)}}}]);