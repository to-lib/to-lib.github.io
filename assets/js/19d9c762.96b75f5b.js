"use strict";(globalThis.webpackChunkto_lib_github_io=globalThis.webpackChunkto_lib_github_io||[]).push([[24350],{48885:(n,e,r)=>{r.d(e,{R:()=>i,x:()=>c});var o=r(99378);const t={},l=o.createContext(t);function i(n){const e=o.useContext(l);return o.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:i(n.components),o.createElement(l.Provider,{value:e},n.children)}},49888:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>s,contentTitle:()=>c,default:()=>p,frontMatter:()=>i,metadata:()=>o,toc:()=>a});const o=JSON.parse('{"id":"cpp/operator-overloading","title":"\u8fd0\u7b97\u7b26\u91cd\u8f7d","description":"\u8fd0\u7b97\u7b26\u91cd\u8f7d\u5141\u8bb8\u81ea\u5b9a\u4e49\u7c7b\u578b\u4f7f\u7528\u5185\u7f6e\u8fd0\u7b97\u7b26\uff0c\u4f7f\u4ee3\u7801\u66f4\u76f4\u89c2\u3002","source":"@site/docs/cpp/operator-overloading.md","sourceDirName":"cpp","slug":"/cpp/operator-overloading","permalink":"/docs/cpp/operator-overloading","draft":false,"unlisted":false,"editUrl":"https://github.com/to-lib/to-lib.github.io/tree/main/docs/cpp/operator-overloading.md","tags":[],"version":"current","sidebarPosition":8.5,"frontMatter":{"sidebar_position":8.5,"title":"\u8fd0\u7b97\u7b26\u91cd\u8f7d"},"sidebar":"cpp","previous":{"title":"\u7c7b\u548c\u5bf9\u8c61","permalink":"/docs/cpp/classes-objects"},"next":{"title":"\u7ee7\u627f","permalink":"/docs/cpp/inheritance"}}');var t=r(22714),l=r(48885);const i={sidebar_position:8.5,title:"\u8fd0\u7b97\u7b26\u91cd\u8f7d"},c="C++ \u8fd0\u7b97\u7b26\u91cd\u8f7d",s={},a=[{value:"\ud83c\udfaf \u57fa\u672c\u8bed\u6cd5",id:"-\u57fa\u672c\u8bed\u6cd5",level:2},{value:"\ud83d\udce6 \u5e38\u89c1\u8fd0\u7b97\u7b26\u91cd\u8f7d",id:"-\u5e38\u89c1\u8fd0\u7b97\u7b26\u91cd\u8f7d",level:2},{value:"\u7b97\u672f\u8fd0\u7b97\u7b26",id:"\u7b97\u672f\u8fd0\u7b97\u7b26",level:3},{value:"\u6bd4\u8f83\u8fd0\u7b97\u7b26",id:"\u6bd4\u8f83\u8fd0\u7b97\u7b26",level:3},{value:"\u4e0b\u6807\u8fd0\u7b97\u7b26",id:"\u4e0b\u6807\u8fd0\u7b97\u7b26",level:3},{value:"\u51fd\u6570\u8c03\u7528\u8fd0\u7b97\u7b26",id:"\u51fd\u6570\u8c03\u7528\u8fd0\u7b97\u7b26",level:3},{value:"\u81ea\u589e/\u81ea\u51cf",id:"\u81ea\u589e\u81ea\u51cf",level:3},{value:"\u7c7b\u578b\u8f6c\u6362",id:"\u7c7b\u578b\u8f6c\u6362",level:3},{value:"\u26a0\ufe0f \u4e0d\u80fd\u91cd\u8f7d\u7684\u8fd0\u7b97\u7b26",id:"\ufe0f-\u4e0d\u80fd\u91cd\u8f7d\u7684\u8fd0\u7b97\u7b26",level:2},{value:"\u26a1 \u6700\u4f73\u5b9e\u8df5",id:"-\u6700\u4f73\u5b9e\u8df5",level:2}];function d(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"c-\u8fd0\u7b97\u7b26\u91cd\u8f7d",children:"C++ \u8fd0\u7b97\u7b26\u91cd\u8f7d"})}),"\n",(0,t.jsx)(e.p,{children:"\u8fd0\u7b97\u7b26\u91cd\u8f7d\u5141\u8bb8\u81ea\u5b9a\u4e49\u7c7b\u578b\u4f7f\u7528\u5185\u7f6e\u8fd0\u7b97\u7b26\uff0c\u4f7f\u4ee3\u7801\u66f4\u76f4\u89c2\u3002"}),"\n",(0,t.jsx)(e.h2,{id:"-\u57fa\u672c\u8bed\u6cd5",children:"\ud83c\udfaf \u57fa\u672c\u8bed\u6cd5"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-cpp",children:'class Complex {\nprivate:\n    double real, imag;\n\npublic:\n    Complex(double r = 0, double i = 0) : real(r), imag(i) {}\n\n    // \u6210\u5458\u51fd\u6570\u91cd\u8f7d +\n    Complex operator+(const Complex& other) const {\n        return Complex(real + other.real, imag + other.imag);\n    }\n\n    // \u6210\u5458\u51fd\u6570\u91cd\u8f7d +=\n    Complex& operator+=(const Complex& other) {\n        real += other.real;\n        imag += other.imag;\n        return *this;\n    }\n\n    // \u53cb\u5143\u51fd\u6570\u91cd\u8f7d <<\n    friend std::ostream& operator<<(std::ostream& os, const Complex& c) {\n        return os << c.real << " + " << c.imag << "i";\n    }\n};\n\nint main() {\n    Complex a(1, 2), b(3, 4);\n    Complex c = a + b;\n    std::cout << c << std::endl;  // 4 + 6i\n    return 0;\n}\n'})}),"\n",(0,t.jsx)(e.h2,{id:"-\u5e38\u89c1\u8fd0\u7b97\u7b26\u91cd\u8f7d",children:"\ud83d\udce6 \u5e38\u89c1\u8fd0\u7b97\u7b26\u91cd\u8f7d"}),"\n",(0,t.jsx)(e.h3,{id:"\u7b97\u672f\u8fd0\u7b97\u7b26",children:"\u7b97\u672f\u8fd0\u7b97\u7b26"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-cpp",children:"class Vector2D {\npublic:\n    double x, y;\n\n    Vector2D operator+(const Vector2D& v) const {\n        return {x + v.x, y + v.y};\n    }\n\n    Vector2D operator-(const Vector2D& v) const {\n        return {x - v.x, y - v.y};\n    }\n\n    Vector2D operator*(double scalar) const {\n        return {x * scalar, y * scalar};\n    }\n\n    // \u4e00\u5143\u8d1f\u53f7\n    Vector2D operator-() const {\n        return {-x, -y};\n    }\n};\n\n// \u975e\u6210\u5458\u51fd\u6570\uff1ascalar * vector\nVector2D operator*(double scalar, const Vector2D& v) {\n    return v * scalar;\n}\n"})}),"\n",(0,t.jsx)(e.h3,{id:"\u6bd4\u8f83\u8fd0\u7b97\u7b26",children:"\u6bd4\u8f83\u8fd0\u7b97\u7b26"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-cpp",children:"class Point {\npublic:\n    int x, y;\n\n    bool operator==(const Point& p) const {\n        return x == p.x && y == p.y;\n    }\n\n    bool operator!=(const Point& p) const {\n        return !(*this == p);\n    }\n\n    bool operator<(const Point& p) const {\n        return (x < p.x) || (x == p.x && y < p.y);\n    }\n\n    // C++20: \u592a\u7a7a\u8239\u8fd0\u7b97\u7b26\n    auto operator<=>(const Point&) const = default;\n};\n"})}),"\n",(0,t.jsx)(e.h3,{id:"\u4e0b\u6807\u8fd0\u7b97\u7b26",children:"\u4e0b\u6807\u8fd0\u7b97\u7b26"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-cpp",children:"class Array {\n    int* data;\n    size_t size;\n\npublic:\n    int& operator[](size_t i) {\n        return data[i];\n    }\n\n    const int& operator[](size_t i) const {\n        return data[i];\n    }\n};\n"})}),"\n",(0,t.jsx)(e.h3,{id:"\u51fd\u6570\u8c03\u7528\u8fd0\u7b97\u7b26",children:"\u51fd\u6570\u8c03\u7528\u8fd0\u7b97\u7b26"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-cpp",children:"class Adder {\n    int value;\n\npublic:\n    Adder(int v) : value(v) {}\n\n    int operator()(int x) const {\n        return x + value;\n    }\n};\n\nAdder add5(5);\nstd::cout << add5(10) << std::endl;  // 15\n"})}),"\n",(0,t.jsx)(e.h3,{id:"\u81ea\u589e\u81ea\u51cf",children:"\u81ea\u589e/\u81ea\u51cf"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-cpp",children:"class Counter {\n    int count;\n\npublic:\n    // \u524d\u7f6e ++\n    Counter& operator++() {\n        ++count;\n        return *this;\n    }\n\n    // \u540e\u7f6e ++ (int \u662f\u5360\u4f4d\u7b26)\n    Counter operator++(int) {\n        Counter temp = *this;\n        ++count;\n        return temp;\n    }\n};\n"})}),"\n",(0,t.jsx)(e.h3,{id:"\u7c7b\u578b\u8f6c\u6362",children:"\u7c7b\u578b\u8f6c\u6362"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-cpp",children:"class Fraction {\n    int num, den;\n\npublic:\n    // \u8f6c\u6362\u4e3a double\n    explicit operator double() const {\n        return static_cast<double>(num) / den;\n    }\n\n    // \u8f6c\u6362\u4e3a bool\n    explicit operator bool() const {\n        return num != 0;\n    }\n};\n"})}),"\n",(0,t.jsx)(e.h2,{id:"\ufe0f-\u4e0d\u80fd\u91cd\u8f7d\u7684\u8fd0\u7b97\u7b26",children:"\u26a0\ufe0f \u4e0d\u80fd\u91cd\u8f7d\u7684\u8fd0\u7b97\u7b26"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"::"})," \u4f5c\u7528\u57df\u89e3\u6790"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"."})," \u6210\u5458\u8bbf\u95ee"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:".*"})," \u6210\u5458\u6307\u9488\u8bbf\u95ee"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"?:"})," \u6761\u4ef6\u8fd0\u7b97\u7b26"]}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.code,{children:"sizeof"})}),"\n",(0,t.jsx)(e.li,{children:(0,t.jsx)(e.code,{children:"typeid"})}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"-\u6700\u4f73\u5b9e\u8df5",children:"\u26a1 \u6700\u4f73\u5b9e\u8df5"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"\u4fdd\u6301\u8bed\u4e49\u4e00\u81f4"})," - \u8fd0\u7b97\u7b26\u884c\u4e3a\u7b26\u5408\u76f4\u89c9"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"\u8fd4\u56de\u5f15\u7528"})," - \u8d4b\u503c\u8fd0\u7b97\u7b26\u8fd4\u56de ",(0,t.jsx)(e.code,{children:"*this"})," \u5f15\u7528"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"\u4f7f\u7528 const"})," - \u4e0d\u4fee\u6539\u5bf9\u8c61\u7684\u8fd0\u7b97\u7b26"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"\u5bf9\u79f0\u8fd0\u7b97\u7b26\u7528\u975e\u6210\u5458"})," - \u5982 ",(0,t.jsx)(e.code,{children:"a + b"})," \u548c ",(0,t.jsx)(e.code,{children:"b + a"})]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"\u4f7f\u7528 explicit"})," - \u9632\u6b62\u9690\u5f0f\u7c7b\u578b\u8f6c\u6362"]}),"\n"]})]})}function p(n={}){const{wrapper:e}={...(0,l.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(d,{...n})}):d(n)}}}]);