"use strict";(globalThis.webpackChunkto_lib_github_io=globalThis.webpackChunkto_lib_github_io||[]).push([[73706],{43108:(n,t,e)=>{e.r(t),e.d(t,{assets:()=>a,contentTitle:()=>d,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"cpp/type-casting","title":"\u7c7b\u578b\u8f6c\u6362","description":"C++ \u63d0\u4f9b\u4e86\u56db\u79cd\u663e\u5f0f\u7c7b\u578b\u8f6c\u6362\u8fd0\u7b97\u7b26\uff0c\u6bd4 C \u98ce\u683c\u8f6c\u6362\u66f4\u5b89\u5168\u3002","source":"@site/docs/cpp/type-casting.md","sourceDirName":"cpp","slug":"/cpp/type-casting","permalink":"/docs/cpp/type-casting","draft":false,"unlisted":false,"editUrl":"https://github.com/to-lib/to-lib.github.io/tree/main/docs/cpp/type-casting.md","tags":[],"version":"current","sidebarPosition":6.5,"frontMatter":{"sidebar_position":6.5,"title":"\u7c7b\u578b\u8f6c\u6362"},"sidebar":"cpp","previous":{"title":"\u6570\u7ec4\u548c\u5b57\u7b26\u4e32","permalink":"/docs/cpp/arrays-strings"},"next":{"title":"\u6307\u9488\u548c\u5f15\u7528","permalink":"/docs/cpp/pointers-references"}}');var c=e(22714),i=e(48885);const r={sidebar_position:6.5,title:"\u7c7b\u578b\u8f6c\u6362"},d="C++ \u7c7b\u578b\u8f6c\u6362",a={},l=[{value:"\ud83c\udfaf \u56db\u79cd\u8f6c\u6362\u8fd0\u7b97\u7b26",id:"-\u56db\u79cd\u8f6c\u6362\u8fd0\u7b97\u7b26",level:2},{value:"static_cast",id:"static_cast",level:3},{value:"dynamic_cast",id:"dynamic_cast",level:3},{value:"const_cast",id:"const_cast",level:3},{value:"reinterpret_cast",id:"reinterpret_cast",level:3},{value:"\ud83d\udcca \u8f6c\u6362\u5bf9\u6bd4",id:"-\u8f6c\u6362\u5bf9\u6bd4",level:2},{value:"\u26a1 \u6700\u4f73\u5b9e\u8df5",id:"-\u6700\u4f73\u5b9e\u8df5",level:2}];function o(n){const t={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...n.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(t.header,{children:(0,c.jsx)(t.h1,{id:"c-\u7c7b\u578b\u8f6c\u6362",children:"C++ \u7c7b\u578b\u8f6c\u6362"})}),"\n",(0,c.jsx)(t.p,{children:"C++ \u63d0\u4f9b\u4e86\u56db\u79cd\u663e\u5f0f\u7c7b\u578b\u8f6c\u6362\u8fd0\u7b97\u7b26\uff0c\u6bd4 C \u98ce\u683c\u8f6c\u6362\u66f4\u5b89\u5168\u3002"}),"\n",(0,c.jsx)(t.h2,{id:"-\u56db\u79cd\u8f6c\u6362\u8fd0\u7b97\u7b26",children:"\ud83c\udfaf \u56db\u79cd\u8f6c\u6362\u8fd0\u7b97\u7b26"}),"\n",(0,c.jsx)(t.h3,{id:"static_cast",children:"static_cast"}),"\n",(0,c.jsx)(t.p,{children:"\u7f16\u8bd1\u671f\u7c7b\u578b\u8f6c\u6362\uff0c\u7528\u4e8e\u76f8\u5173\u7c7b\u578b\u4e4b\u95f4\uff1a"}),"\n",(0,c.jsx)(t.pre,{children:(0,c.jsx)(t.code,{className:"language-cpp",children:"// \u6570\u503c\u7c7b\u578b\u8f6c\u6362\ndouble d = 3.14;\nint i = static_cast<int>(d);  // 3\n\n// \u6307\u9488\u5411\u4e0a/\u5411\u4e0b\u8f6c\u6362\uff08\u65e0\u8fd0\u884c\u65f6\u68c0\u67e5\uff09\nclass Base {};\nclass Derived : public Base {};\n\nDerived* d = new Derived();\nBase* b = static_cast<Base*>(d);      // \u5411\u4e0a\u8f6c\u6362\nDerived* d2 = static_cast<Derived*>(b); // \u5411\u4e0b\u8f6c\u6362\uff08\u9700\u786e\u4fdd\u5b89\u5168\uff09\n\n// void* \u8f6c\u6362\nvoid* ptr = &i;\nint* ip = static_cast<int*>(ptr);\n"})}),"\n",(0,c.jsx)(t.h3,{id:"dynamic_cast",children:"dynamic_cast"}),"\n",(0,c.jsx)(t.p,{children:"\u8fd0\u884c\u65f6\u591a\u6001\u7c7b\u578b\u8f6c\u6362\uff0c\u7528\u4e8e\u7c7b\u5c42\u6b21\u7ed3\u6784\uff1a"}),"\n",(0,c.jsx)(t.pre,{children:(0,c.jsx)(t.code,{className:"language-cpp",children:"class Base {\npublic:\n    virtual ~Base() = default;\n};\n\nclass Derived : public Base {};\n\nBase* b = new Derived();\n\n// \u5b89\u5168\u7684\u5411\u4e0b\u8f6c\u6362\nDerived* d = dynamic_cast<Derived*>(b);\nif (d) {\n    // \u8f6c\u6362\u6210\u529f\n}\n\n// \u5f15\u7528\u7248\u672c\uff08\u5931\u8d25\u629b\u51fa std::bad_cast\uff09\ntry {\n    Derived& dr = dynamic_cast<Derived&>(*b);\n} catch (std::bad_cast& e) {\n    // \u8f6c\u6362\u5931\u8d25\n}\n"})}),"\n",(0,c.jsx)(t.h3,{id:"const_cast",children:"const_cast"}),"\n",(0,c.jsx)(t.p,{children:"\u6dfb\u52a0\u6216\u79fb\u9664 const/volatile\uff1a"}),"\n",(0,c.jsx)(t.pre,{children:(0,c.jsx)(t.code,{className:"language-cpp",children:"const int* cp = &i;\nint* p = const_cast<int*>(cp);  // \u79fb\u9664 const\n\n// \u7528\u4e8e\u8c03\u7528\u975e const \u7248\u672c\u7684\u51fd\u6570\nvoid func(int* p);\nfunc(const_cast<int*>(cp));\n"})}),"\n",(0,c.jsx)(t.h3,{id:"reinterpret_cast",children:"reinterpret_cast"}),"\n",(0,c.jsx)(t.p,{children:"\u5e95\u5c42\u4f4d\u6a21\u5f0f\u91cd\u65b0\u89e3\u91ca\uff08\u5371\u9669\uff09\uff1a"}),"\n",(0,c.jsx)(t.pre,{children:(0,c.jsx)(t.code,{className:"language-cpp",children:"int i = 42;\nint* p = &i;\n\n// \u6307\u9488\u8f6c\u6574\u6570\nuintptr_t addr = reinterpret_cast<uintptr_t>(p);\n\n// \u6574\u6570\u8f6c\u6307\u9488\nint* p2 = reinterpret_cast<int*>(addr);\n\n// \u4e0d\u540c\u7c7b\u578b\u6307\u9488\u8f6c\u6362\uff08\u5371\u9669\uff09\nchar* cp = reinterpret_cast<char*>(p);\n"})}),"\n",(0,c.jsx)(t.h2,{id:"-\u8f6c\u6362\u5bf9\u6bd4",children:"\ud83d\udcca \u8f6c\u6362\u5bf9\u6bd4"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,c.jsxs)(t.table,{children:[(0,c.jsx)(t.thead,{children:(0,c.jsxs)(t.tr,{children:[(0,c.jsx)(t.th,{children:"\u8f6c\u6362\u7c7b\u578b"}),(0,c.jsx)(t.th,{children:"\u7528\u9014"}),(0,c.jsx)(t.th,{children:"\u5b89\u5168\u6027"})]})}),(0,c.jsxs)(t.tbody,{children:[(0,c.jsxs)(t.tr,{children:[(0,c.jsx)(t.td,{children:"static_cast"}),(0,c.jsx)(t.td,{children:"\u76f8\u5173\u7c7b\u578b\u8f6c\u6362"}),(0,c.jsx)(t.td,{children:"\u7f16\u8bd1\u671f"})]}),(0,c.jsxs)(t.tr,{children:[(0,c.jsx)(t.td,{children:"dynamic_cast"}),(0,c.jsx)(t.td,{children:"\u591a\u6001\u7c7b\u578b\u8f6c\u6362"}),(0,c.jsx)(t.td,{children:"\u8fd0\u884c\u65f6"})]}),(0,c.jsxs)(t.tr,{children:[(0,c.jsx)(t.td,{children:"const_cast"}),(0,c.jsx)(t.td,{children:"\u4fee\u6539 const"}),(0,c.jsx)(t.td,{children:"\u7f16\u8bd1\u671f"})]}),(0,c.jsxs)(t.tr,{children:[(0,c.jsx)(t.td,{children:"reinterpret_cast"}),(0,c.jsx)(t.td,{children:"\u5e95\u5c42\u4f4d\u8f6c\u6362"}),(0,c.jsx)(t.td,{children:"\u65e0\u68c0\u67e5"})]})]})]}),"\n",(0,c.jsx)(t.h2,{id:"-\u6700\u4f73\u5b9e\u8df5",children:"\u26a1 \u6700\u4f73\u5b9e\u8df5"}),"\n",(0,c.jsxs)(t.ol,{children:["\n",(0,c.jsxs)(t.li,{children:[(0,c.jsx)(t.strong,{children:"\u907f\u514d C \u98ce\u683c\u8f6c\u6362"})," - \u4f7f\u7528 C++ \u8f6c\u6362\u8fd0\u7b97\u7b26"]}),"\n",(0,c.jsxs)(t.li,{children:[(0,c.jsx)(t.strong,{children:"\u4f18\u5148\u4f7f\u7528 static_cast"})," - \u5927\u591a\u6570\u60c5\u51b5\u8db3\u591f"]}),"\n",(0,c.jsxs)(t.li,{children:[(0,c.jsx)(t.strong,{children:"\u591a\u6001\u7528 dynamic_cast"})," - \u5b89\u5168\u7684\u5411\u4e0b\u8f6c\u6362"]}),"\n",(0,c.jsxs)(t.li,{children:[(0,c.jsx)(t.strong,{children:"\u8c28\u614e\u4f7f\u7528 reinterpret_cast"})," - \u4ec5\u5728\u5fc5\u8981\u65f6"]}),"\n",(0,c.jsxs)(t.li,{children:[(0,c.jsx)(t.strong,{children:"\u907f\u514d const_cast"})," - \u53ef\u80fd\u5bfc\u81f4\u672a\u5b9a\u4e49\u884c\u4e3a"]}),"\n"]})]})}function h(n={}){const{wrapper:t}={...(0,i.R)(),...n.components};return t?(0,c.jsx)(t,{...n,children:(0,c.jsx)(o,{...n})}):o(n)}},48885:(n,t,e)=>{e.d(t,{R:()=>r,x:()=>d});var s=e(99378);const c={},i=s.createContext(c);function r(n){const t=s.useContext(i);return s.useMemo(function(){return"function"==typeof n?n(t):{...t,...n}},[t,n])}function d(n){let t;return t=n.disableParentContext?"function"==typeof n.components?n.components(c):n.components||c:r(n.components),s.createElement(i.Provider,{value:t},n.children)}}}]);