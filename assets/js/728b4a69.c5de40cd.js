"use strict";(globalThis.webpackChunkto_lib_github_io=globalThis.webpackChunkto_lib_github_io||[]).push([[8812],{46546:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>o,frontMatter:()=>t,metadata:()=>r,toc:()=>h});const r=JSON.parse('{"id":"nginx/quick-reference","title":"\u5feb\u901f\u53c2\u8003","description":"Nginx \u5e38\u7528\u914d\u7f6e\u4e0e\u547d\u4ee4\u901f\u67e5\u8868","source":"@site/docs/nginx/quick-reference.md","sourceDirName":"nginx","slug":"/nginx/quick-reference","permalink":"/docs/nginx/quick-reference","draft":false,"unlisted":false,"editUrl":"https://github.com/to-lib/to-lib.github.io/tree/main/docs/nginx/quick-reference.md","tags":[],"version":"current","sidebarPosition":11,"frontMatter":{"sidebar_position":11,"title":"\u5feb\u901f\u53c2\u8003","description":"Nginx \u5e38\u7528\u914d\u7f6e\u4e0e\u547d\u4ee4\u901f\u67e5\u8868"},"sidebar":"nginx","previous":{"title":"\u6027\u80fd\u4f18\u5316","permalink":"/docs/nginx/performance"},"next":{"title":"\u5e38\u89c1\u95ee\u9898","permalink":"/docs/nginx/faq"}}');var i=s(22714),d=s(48885);const t={sidebar_position:11,title:"\u5feb\u901f\u53c2\u8003",description:"Nginx \u5e38\u7528\u914d\u7f6e\u4e0e\u547d\u4ee4\u901f\u67e5\u8868"},l="Nginx \u5feb\u901f\u53c2\u8003",c={},h=[{value:"\u5e38\u7528\u547d\u4ee4",id:"\u5e38\u7528\u547d\u4ee4",level:2},{value:"\u914d\u7f6e\u7ed3\u6784",id:"\u914d\u7f6e\u7ed3\u6784",level:2},{value:"\u5e38\u7528\u914d\u7f6e\u6a21\u677f",id:"\u5e38\u7528\u914d\u7f6e\u6a21\u677f",level:2},{value:"\u9759\u6001\u7f51\u7ad9",id:"\u9759\u6001\u7f51\u7ad9",level:3},{value:"\u53cd\u5411\u4ee3\u7406",id:"\u53cd\u5411\u4ee3\u7406",level:3},{value:"HTTPS",id:"https",level:3},{value:"\u8d1f\u8f7d\u5747\u8861",id:"\u8d1f\u8f7d\u5747\u8861",level:3},{value:"Location \u5339\u914d\u4f18\u5148\u7ea7",id:"location-\u5339\u914d\u4f18\u5148\u7ea7",level:2},{value:"\u5e38\u7528\u53d8\u91cf",id:"\u5e38\u7528\u53d8\u91cf",level:2},{value:"\u76ee\u5f55\u7ed3\u6784",id:"\u76ee\u5f55\u7ed3\u6784",level:2},{value:"\u5e38\u89c1\u7aef\u53e3",id:"\u5e38\u89c1\u7aef\u53e3",level:2}];function x(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,d.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"nginx-\u5feb\u901f\u53c2\u8003",children:"Nginx \u5feb\u901f\u53c2\u8003"})}),"\n",(0,i.jsx)(n.h2,{id:"\u5e38\u7528\u547d\u4ee4",children:"\u5e38\u7528\u547d\u4ee4"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# \u542f\u52a8/\u505c\u6b62\nnginx                    # \u542f\u52a8\nnginx -s stop            # \u5feb\u901f\u505c\u6b62\nnginx -s quit            # \u4f18\u96c5\u505c\u6b62\nnginx -s reload          # \u91cd\u8f7d\u914d\u7f6e\nnginx -s reopen          # \u91cd\u65b0\u6253\u5f00\u65e5\u5fd7\n\n# \u6d4b\u8bd5\u914d\u7f6e\nnginx -t                 # \u6d4b\u8bd5\u8bed\u6cd5\nnginx -T                 # \u6d4b\u8bd5\u5e76\u6253\u5370\n\n# \u67e5\u770b\u4fe1\u606f\nnginx -v                 # \u7248\u672c\nnginx -V                 # \u7248\u672c\u548c\u7f16\u8bd1\u53c2\u6570\n\n# systemd\nsystemctl start nginx\nsystemctl stop nginx\nsystemctl reload nginx\nsystemctl status nginx\n"})}),"\n",(0,i.jsx)(n.h2,{id:"\u914d\u7f6e\u7ed3\u6784",children:"\u914d\u7f6e\u7ed3\u6784"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-nginx",children:"# \u5168\u5c40\u914d\u7f6e\nuser nginx;\nworker_processes auto;\n\nevents {\n    worker_connections 1024;\n}\n\nhttp {\n    # HTTP \u914d\u7f6e\n    server {\n        # \u865a\u62df\u4e3b\u673a\n        location / {\n            # \u4f4d\u7f6e\u5339\u914d\n        }\n    }\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"\u5e38\u7528\u914d\u7f6e\u6a21\u677f",children:"\u5e38\u7528\u914d\u7f6e\u6a21\u677f"}),"\n",(0,i.jsx)(n.h3,{id:"\u9759\u6001\u7f51\u7ad9",children:"\u9759\u6001\u7f51\u7ad9"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-nginx",children:"server {\n    listen 80;\n    server_name example.com;\n    root /var/www/html;\n    index index.html;\n\n    location / {\n        try_files $uri $uri/ =404;\n    }\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"\u53cd\u5411\u4ee3\u7406",children:"\u53cd\u5411\u4ee3\u7406"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-nginx",children:"server {\n    listen 80;\n    server_name api.example.com;\n\n    location / {\n        proxy_pass http://localhost:3000;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n    }\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"https",children:"HTTPS"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-nginx",children:"server {\n    listen 443 ssl http2;\n    server_name example.com;\n\n    ssl_certificate /path/to/cert.pem;\n    ssl_certificate_key /path/to/key.pem;\n    ssl_protocols TLSv1.2 TLSv1.3;\n}\n"})}),"\n",(0,i.jsx)(n.h3,{id:"\u8d1f\u8f7d\u5747\u8861",children:"\u8d1f\u8f7d\u5747\u8861"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-nginx",children:"upstream backend {\n    server 10.0.0.1:8080;\n    server 10.0.0.2:8080;\n}\n\nserver {\n    location / {\n        proxy_pass http://backend;\n    }\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"location-\u5339\u914d\u4f18\u5148\u7ea7",children:"Location \u5339\u914d\u4f18\u5148\u7ea7"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\u8bed\u6cd5"}),(0,i.jsx)(n.th,{children:"\u4f18\u5148\u7ea7"}),(0,i.jsx)(n.th,{children:"\u8bf4\u660e"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"= /path"})}),(0,i.jsx)(n.td,{children:"1"}),(0,i.jsx)(n.td,{children:"\u7cbe\u786e\u5339\u914d"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"^~ /path"})}),(0,i.jsx)(n.td,{children:"2"}),(0,i.jsx)(n.td,{children:"\u524d\u7f00\u5339\u914d\uff08\u4f18\u5148\uff09"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"~ regex"})}),(0,i.jsx)(n.td,{children:"3"}),(0,i.jsx)(n.td,{children:"\u6b63\u5219\uff08\u533a\u5206\u5927\u5c0f\u5199\uff09"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"~* regex"})}),(0,i.jsx)(n.td,{children:"3"}),(0,i.jsx)(n.td,{children:"\u6b63\u5219\uff08\u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff09"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"/path"})}),(0,i.jsx)(n.td,{children:"4"}),(0,i.jsx)(n.td,{children:"\u524d\u7f00\u5339\u914d"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"/"})}),(0,i.jsx)(n.td,{children:"5"}),(0,i.jsx)(n.td,{children:"\u9ed8\u8ba4\u5339\u914d"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"\u5e38\u7528\u53d8\u91cf",children:"\u5e38\u7528\u53d8\u91cf"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\u53d8\u91cf"}),(0,i.jsx)(n.th,{children:"\u8bf4\u660e"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"$host"})}),(0,i.jsx)(n.td,{children:"\u8bf7\u6c42\u4e3b\u673a\u540d"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"$uri"})}),(0,i.jsx)(n.td,{children:"\u8bf7\u6c42 URI"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"$args"})}),(0,i.jsx)(n.td,{children:"\u67e5\u8be2\u53c2\u6570"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"$remote_addr"})}),(0,i.jsx)(n.td,{children:"\u5ba2\u6237\u7aef IP"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"$request_method"})}),(0,i.jsx)(n.td,{children:"\u8bf7\u6c42\u65b9\u6cd5"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"$status"})}),(0,i.jsx)(n.td,{children:"\u54cd\u5e94\u72b6\u6001\u7801"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"$request_time"})}),(0,i.jsx)(n.td,{children:"\u8bf7\u6c42\u5904\u7406\u65f6\u95f4"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"\u76ee\u5f55\u7ed3\u6784",children:"\u76ee\u5f55\u7ed3\u6784"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"/etc/nginx/\n\u251c\u2500\u2500 nginx.conf           # \u4e3b\u914d\u7f6e\n\u251c\u2500\u2500 conf.d/              # \u7ad9\u70b9\u914d\u7f6e\n\u251c\u2500\u2500 sites-available/     # \u53ef\u7528\u7ad9\u70b9\n\u251c\u2500\u2500 sites-enabled/       # \u542f\u7528\u7ad9\u70b9\n\u2514\u2500\u2500 ssl/                 # \u8bc1\u4e66\u76ee\u5f55\n\n/var/log/nginx/\n\u251c\u2500\u2500 access.log           # \u8bbf\u95ee\u65e5\u5fd7\n\u2514\u2500\u2500 error.log            # \u9519\u8bef\u65e5\u5fd7\n"})}),"\n",(0,i.jsx)(n.h2,{id:"\u5e38\u89c1\u7aef\u53e3",children:"\u5e38\u89c1\u7aef\u53e3"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"\u7aef\u53e3"}),(0,i.jsx)(n.th,{children:"\u7528\u9014"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"80"}),(0,i.jsx)(n.td,{children:"HTTP"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"443"}),(0,i.jsx)(n.td,{children:"HTTPS"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"8080"}),(0,i.jsx)(n.td,{children:"\u5907\u7528 HTTP"})]})]})]})]})}function o(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(x,{...e})}):x(e)}},48885:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>l});var r=s(99378);const i={},d=r.createContext(i);function t(e){const n=r.useContext(d);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),r.createElement(d.Provider,{value:n},e.children)}}}]);