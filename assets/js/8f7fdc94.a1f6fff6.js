"use strict";(globalThis.webpackChunkto_lib_github_io=globalThis.webpackChunkto_lib_github_io||[]).push([[10910],{48885:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>d});var l=s(99378);const r={},i=l.createContext(r);function c(e){const n=l.useContext(i);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),l.createElement(i.Provider,{value:n},e.children)}},97777:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>d,default:()=>x,frontMatter:()=>c,metadata:()=>l,toc:()=>t});const l=JSON.parse('{"id":"mybatis/faq","title":"MyBatis \u5e38\u89c1\u95ee\u9898","description":"\u672c\u9875\u6c47\u603b MyBatis \u5f00\u53d1\u4e2d\u7684\u5e38\u89c1\u95ee\u9898\u548c\u89e3\u51b3\u65b9\u6848\u3002","source":"@site/docs/mybatis/faq.md","sourceDirName":"mybatis","slug":"/mybatis/faq","permalink":"/docs/mybatis/faq","draft":false,"unlisted":false,"editUrl":"https://github.com/to-lib/to-lib.github.io/tree/main/docs/mybatis/faq.md","tags":[],"version":"current","sidebarPosition":12,"frontMatter":{"sidebar_position":12,"title":"MyBatis \u5e38\u89c1\u95ee\u9898"},"sidebar":"mybatis","previous":{"title":"MyBatis \u5feb\u901f\u53c2\u8003","permalink":"/docs/mybatis/quick-reference"}}');var r=s(22714),i=s(48885);const c={sidebar_position:12,title:"MyBatis \u5e38\u89c1\u95ee\u9898"},d="MyBatis \u5e38\u89c1\u95ee\u9898",a={},t=[{value:"\u914d\u7f6e\u76f8\u5173\u95ee\u9898",id:"\u914d\u7f6e\u76f8\u5173\u95ee\u9898",level:2},{value:"Q: Mapper \u63a5\u53e3\u627e\u4e0d\u5230\uff0c\u62a5 <code>Invalid bound statement</code>",id:"q-mapper-\u63a5\u53e3\u627e\u4e0d\u5230\u62a5-invalid-bound-statement",level:3},{value:"Q: \u9a7c\u5cf0\u547d\u540d\u6620\u5c04\u4e0d\u751f\u6548",id:"q-\u9a7c\u5cf0\u547d\u540d\u6620\u5c04\u4e0d\u751f\u6548",level:3},{value:"Q: \u914d\u7f6e\u6587\u4ef6\u52a0\u8f7d\u987a\u5e8f\u95ee\u9898",id:"q-\u914d\u7f6e\u6587\u4ef6\u52a0\u8f7d\u987a\u5e8f\u95ee\u9898",level:3},{value:"Q: \u65e5\u5fd7\u4e0d\u8f93\u51fa SQL",id:"q-\u65e5\u5fd7\u4e0d\u8f93\u51fa-sql",level:3},{value:"\u6620\u5c04\u76f8\u5173\u95ee\u9898",id:"\u6620\u5c04\u76f8\u5173\u95ee\u9898",level:2},{value:"Q: \u67e5\u8be2\u7ed3\u679c\u4e3a null\uff0c\u4f46\u6570\u636e\u5e93\u6709\u6570\u636e",id:"q-\u67e5\u8be2\u7ed3\u679c\u4e3a-null\u4f46\u6570\u636e\u5e93\u6709\u6570\u636e",level:3},{value:"Q: \u63d2\u5165\u540e\u83b7\u53d6\u4e0d\u5230\u81ea\u589e ID",id:"q-\u63d2\u5165\u540e\u83b7\u53d6\u4e0d\u5230\u81ea\u589e-id",level:3},{value:"Q: \u53c2\u6570\u4f20\u9012\u95ee\u9898\uff0c\u62a5 <code>Parameter &#39;xxx&#39; not found</code>",id:"q-\u53c2\u6570\u4f20\u9012\u95ee\u9898\u62a5-parameter-xxx-not-found",level:3},{value:"Q: # \u548c $ \u7684\u533a\u522b",id:"q--\u548c--\u7684\u533a\u522b",level:3},{value:"Q: \u6a21\u7cca\u67e5\u8be2\u5199\u6cd5",id:"q-\u6a21\u7cca\u67e5\u8be2\u5199\u6cd5",level:3},{value:"Q: \u4e00\u5bf9\u591a\u67e5\u8be2\u7ed3\u679c\u53ea\u6709\u4e00\u6761",id:"q-\u4e00\u5bf9\u591a\u67e5\u8be2\u7ed3\u679c\u53ea\u6709\u4e00\u6761",level:3},{value:"Q: \u679a\u4e3e\u7c7b\u578b\u6620\u5c04",id:"q-\u679a\u4e3e\u7c7b\u578b\u6620\u5c04",level:3},{value:"\u6027\u80fd\u76f8\u5173\u95ee\u9898",id:"\u6027\u80fd\u76f8\u5173\u95ee\u9898",level:2},{value:"Q: N+1 \u67e5\u8be2\u95ee\u9898",id:"q-n1-\u67e5\u8be2\u95ee\u9898",level:3},{value:"Q: \u6279\u91cf\u63d2\u5165\u6027\u80fd\u5dee",id:"q-\u6279\u91cf\u63d2\u5165\u6027\u80fd\u5dee",level:3},{value:"Q: \u5927\u6570\u636e\u91cf\u67e5\u8be2\u5185\u5b58\u6ea2\u51fa",id:"q-\u5927\u6570\u636e\u91cf\u67e5\u8be2\u5185\u5b58\u6ea2\u51fa",level:3},{value:"Q: \u7f13\u5b58\u4e0d\u751f\u6548",id:"q-\u7f13\u5b58\u4e0d\u751f\u6548",level:3},{value:"Spring \u96c6\u6210\u95ee\u9898",id:"spring-\u96c6\u6210\u95ee\u9898",level:2},{value:"Q: Spring \u4e2d\u4e00\u7ea7\u7f13\u5b58\u4e0d\u751f\u6548",id:"q-spring-\u4e2d\u4e00\u7ea7\u7f13\u5b58\u4e0d\u751f\u6548",level:3},{value:"Q: @Transactional \u4e0d\u751f\u6548",id:"q-transactional-\u4e0d\u751f\u6548",level:3},{value:"Q: \u591a\u6570\u636e\u6e90\u4e8b\u52a1\u95ee\u9898",id:"q-\u591a\u6570\u636e\u6e90\u4e8b\u52a1\u95ee\u9898",level:3},{value:"Q: Mapper \u6ce8\u5165\u4e3a null",id:"q-mapper-\u6ce8\u5165\u4e3a-null",level:3},{value:"\u52a8\u6001 SQL \u95ee\u9898",id:"\u52a8\u6001-sql-\u95ee\u9898",level:2},{value:"Q: if \u5224\u65ad\u5b57\u7b26\u4e32\u76f8\u7b49",id:"q-if-\u5224\u65ad\u5b57\u7b26\u4e32\u76f8\u7b49",level:3},{value:"Q: \u7279\u6b8a\u5b57\u7b26\u62a5\u9519",id:"q-\u7279\u6b8a\u5b57\u7b26\u62a5\u9519",level:3},{value:"Q: foreach collection \u53d6\u503c",id:"q-foreach-collection-\u53d6\u503c",level:3},{value:"Q: where \u6807\u7b7e\u4e0d\u53bb\u9664 AND",id:"q-where-\u6807\u7b7e\u4e0d\u53bb\u9664-and",level:3},{value:"\u5176\u4ed6\u95ee\u9898",id:"\u5176\u4ed6\u95ee\u9898",level:2},{value:"Q: \u65f6\u533a\u95ee\u9898",id:"q-\u65f6\u533a\u95ee\u9898",level:3},{value:"Q: \u4e2d\u6587\u4e71\u7801",id:"q-\u4e2d\u6587\u4e71\u7801",level:3},{value:"Q: \u8fde\u63a5\u6c60\u8017\u5c3d",id:"q-\u8fde\u63a5\u6c60\u8017\u5c3d",level:3},{value:"\u76f8\u5173\u94fe\u63a5",id:"\u76f8\u5173\u94fe\u63a5",level:2}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"mybatis-\u5e38\u89c1\u95ee\u9898",children:"MyBatis \u5e38\u89c1\u95ee\u9898"})}),"\n",(0,r.jsx)(n.p,{children:"\u672c\u9875\u6c47\u603b MyBatis \u5f00\u53d1\u4e2d\u7684\u5e38\u89c1\u95ee\u9898\u548c\u89e3\u51b3\u65b9\u6848\u3002"}),"\n",(0,r.jsx)(n.h2,{id:"\u914d\u7f6e\u76f8\u5173\u95ee\u9898",children:"\u914d\u7f6e\u76f8\u5173\u95ee\u9898"}),"\n",(0,r.jsxs)(n.h3,{id:"q-mapper-\u63a5\u53e3\u627e\u4e0d\u5230\u62a5-invalid-bound-statement",children:["Q: Mapper \u63a5\u53e3\u627e\u4e0d\u5230\uff0c\u62a5 ",(0,r.jsx)(n.code,{children:"Invalid bound statement"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u539f\u56e0"}),"\uff1aMapper XML \u672a\u6b63\u786e\u52a0\u8f7d\u6216 namespace \u4e0d\u5339\u914d\u3002"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u89e3\u51b3\u65b9\u6848"}),"\uff1a"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"\u68c0\u67e5 XML \u6587\u4ef6\u4f4d\u7f6e\u548c\u914d\u7f6e\uff1a"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"mybatis:\n  mapper-locations: classpath:mapper/*.xml\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsx)(n.li,{children:"\u786e\u4fdd namespace \u4e0e\u63a5\u53e3\u5168\u9650\u5b9a\u540d\u4e00\u81f4\uff1a"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'<mapper namespace="com.example.mapper.UserMapper">\n'})}),"\n",(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsx)(n.li,{children:"\u68c0\u67e5\u65b9\u6cd5 id \u4e0e\u63a5\u53e3\u65b9\u6cd5\u540d\u4e00\u81f4\uff1a"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'<select id="selectById" ...>  \x3c!-- \u5bf9\u5e94 UserMapper.selectById() --\x3e\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"q-\u9a7c\u5cf0\u547d\u540d\u6620\u5c04\u4e0d\u751f\u6548",children:"Q: \u9a7c\u5cf0\u547d\u540d\u6620\u5c04\u4e0d\u751f\u6548"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u539f\u56e0"}),"\uff1a\u672a\u5f00\u542f\u9a7c\u5cf0\u547d\u540d\u81ea\u52a8\u6620\u5c04\u3002"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u89e3\u51b3\u65b9\u6848"}),"\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"mybatis:\n  configuration:\n    map-underscore-to-camel-case: true\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u6216\u5728 mybatis-config.xml \u4e2d\uff1a"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'<settings>\n    <setting name="mapUnderscoreToCamelCase" value="true"/>\n</settings>\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"q-\u914d\u7f6e\u6587\u4ef6\u52a0\u8f7d\u987a\u5e8f\u95ee\u9898",children:"Q: \u914d\u7f6e\u6587\u4ef6\u52a0\u8f7d\u987a\u5e8f\u95ee\u9898"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u539f\u56e0"}),"\uff1a\u540c\u65f6\u4f7f\u7528 mybatis-config.xml \u548c application.yml \u914d\u7f6e\u3002"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u89e3\u51b3\u65b9\u6848"}),"\uff1a"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u4f18\u5148\u4f7f\u7528 application.yml \u914d\u7f6e"}),"\n",(0,r.jsx)(n.li,{children:"\u5982\u9700\u4f7f\u7528 mybatis-config.xml\uff0c\u786e\u4fdd\u4e0d\u91cd\u590d\u914d\u7f6e\uff1a"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"mybatis:\n  config-location: classpath:mybatis-config.xml\n  # \u4e0d\u8981\u540c\u65f6\u914d\u7f6e configuration \u5c5e\u6027\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"q-\u65e5\u5fd7\u4e0d\u8f93\u51fa-sql",children:"Q: \u65e5\u5fd7\u4e0d\u8f93\u51fa SQL"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u89e3\u51b3\u65b9\u6848"}),"\uff1a"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"\u914d\u7f6e\u65e5\u5fd7\u5b9e\u73b0\uff1a"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"mybatis:\n  configuration:\n    log-impl: org.apache.ibatis.logging.slf4j.Slf4jImpl\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsx)(n.li,{children:"\u914d\u7f6e\u65e5\u5fd7\u7ea7\u522b\uff08logback\uff09\uff1a"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'<logger name="com.example.mapper" level="DEBUG"/>\n'})}),"\n",(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsx)(n.li,{children:"\u6216\u4f7f\u7528 application.yml\uff1a"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"logging:\n  level:\n    com.example.mapper: debug\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u6620\u5c04\u76f8\u5173\u95ee\u9898",children:"\u6620\u5c04\u76f8\u5173\u95ee\u9898"}),"\n",(0,r.jsx)(n.h3,{id:"q-\u67e5\u8be2\u7ed3\u679c\u4e3a-null\u4f46\u6570\u636e\u5e93\u6709\u6570\u636e",children:"Q: \u67e5\u8be2\u7ed3\u679c\u4e3a null\uff0c\u4f46\u6570\u636e\u5e93\u6709\u6570\u636e"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u53ef\u80fd\u539f\u56e0"}),"\uff1a"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"\u5b57\u6bb5\u540d\u4e0e\u5c5e\u6027\u540d\u4e0d\u5339\u914d"}),"\n",(0,r.jsx)(n.li,{children:"\u672a\u5f00\u542f\u9a7c\u5cf0\u6620\u5c04"}),"\n",(0,r.jsx)(n.li,{children:"resultType \u7c7b\u578b\u9519\u8bef"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u89e3\u51b3\u65b9\u6848"}),"\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'\x3c!-- \u65b9\u6848\u4e00\uff1a\u4f7f\u7528 resultMap --\x3e\n<resultMap id="userMap" type="User">\n    <result property="userName" column="user_name"/>\n</resultMap>\n\n\x3c!-- \u65b9\u6848\u4e8c\uff1a\u4f7f\u7528\u522b\u540d --\x3e\n<select id="selectById" resultType="User">\n    SELECT user_name AS userName FROM user WHERE id = #{id}\n</select>\n\n\x3c!-- \u65b9\u6848\u4e09\uff1a\u5f00\u542f\u9a7c\u5cf0\u6620\u5c04 --\x3e\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"q-\u63d2\u5165\u540e\u83b7\u53d6\u4e0d\u5230\u81ea\u589e-id",children:"Q: \u63d2\u5165\u540e\u83b7\u53d6\u4e0d\u5230\u81ea\u589e ID"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u89e3\u51b3\u65b9\u6848"}),"\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'<insert id="insert" useGeneratedKeys="true" keyProperty="id">\n    INSERT INTO user (name) VALUES (#{name})\n</insert>\n'})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"// \u63d2\u5165\u540e\u4ece\u5bf9\u8c61\u83b7\u53d6 ID\nuserMapper.insert(user);\nLong id = user.getId();  // \u81ea\u589e ID \u5df2\u56de\u586b\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.h3,{id:"q-\u53c2\u6570\u4f20\u9012\u95ee\u9898\u62a5-parameter-xxx-not-found",children:["Q: \u53c2\u6570\u4f20\u9012\u95ee\u9898\uff0c\u62a5 ",(0,r.jsx)(n.code,{children:"Parameter 'xxx' not found"})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u539f\u56e0"}),"\uff1a\u591a\u53c2\u6570\u672a\u4f7f\u7528 @Param \u6ce8\u89e3\u3002"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u89e3\u51b3\u65b9\u6848"}),"\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'// \u274c \u9519\u8bef\nList<User> select(String name, Integer age);\n\n// \u2705 \u6b63\u786e\nList<User> select(@Param("name") String name, @Param("age") Integer age);\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.h3,{id:"q--\u548c--\u7684\u533a\u522b",children:["Q: #"," \u548c $"," \u7684\u533a\u522b"]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"\u8bed\u6cd5"}),(0,r.jsx)(n.th,{children:"\u7279\u70b9"}),(0,r.jsx)(n.th,{children:"\u4f7f\u7528\u573a\u666f"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"#{}"})}),(0,r.jsx)(n.td,{children:"\u9884\u7f16\u8bd1\uff0c\u9632 SQL \u6ce8\u5165"}),(0,r.jsx)(n.td,{children:"\u53c2\u6570\u503c"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"${}"})}),(0,r.jsx)(n.td,{children:"\u5b57\u7b26\u4e32\u66ff\u6362\uff0c\u6709\u6ce8\u5165\u98ce\u9669"}),(0,r.jsx)(n.td,{children:"\u8868\u540d\u3001\u5217\u540d\u3001\u6392\u5e8f"})]})]})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:"\x3c!-- \u53c2\u6570\u503c\u7528 #{} --\x3e\nWHERE name = #{name}\n\n\x3c!-- \u52a8\u6001\u8868\u540d/\u5217\u540d\u7528 ${} --\x3e\nORDER BY ${orderColumn}\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"q-\u6a21\u7cca\u67e5\u8be2\u5199\u6cd5",children:"Q: \u6a21\u7cca\u67e5\u8be2\u5199\u6cd5"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:"\x3c!-- \u65b9\u5f0f\u4e00\uff1aCONCAT\uff08\u63a8\u8350\uff09 --\x3e\nWHERE name LIKE CONCAT('%', #{name}, '%')\n\n\x3c!-- \u65b9\u5f0f\u4e8c\uff1abind --\x3e\n<bind name=\"pattern\" value=\"'%' + name + '%'\"/>\nWHERE name LIKE #{pattern}\n\n\x3c!-- \u274c \u9519\u8bef\uff1a\u76f4\u63a5\u62fc\u63a5 --\x3e\nWHERE name LIKE '%${name}%'\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"q-\u4e00\u5bf9\u591a\u67e5\u8be2\u7ed3\u679c\u53ea\u6709\u4e00\u6761",children:"Q: \u4e00\u5bf9\u591a\u67e5\u8be2\u7ed3\u679c\u53ea\u6709\u4e00\u6761"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u539f\u56e0"}),"\uff1a\u4e3b\u952e\u6620\u5c04\u7f3a\u5931\uff0cMyBatis \u65e0\u6cd5\u533a\u5206\u4e0d\u540c\u8bb0\u5f55\u3002"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u89e3\u51b3\u65b9\u6848"}),"\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'<resultMap id="userWithOrders" type="User">\n    <id property="id" column="id"/>  \x3c!-- \u5fc5\u987b\u6709 id \u6620\u5c04 --\x3e\n    <result property="name" column="name"/>\n    <collection property="orders" ofType="Order">\n        <id property="id" column="order_id"/>  \x3c!-- \u5fc5\u987b\u6709 id \u6620\u5c04 --\x3e\n        <result property="orderNo" column="order_no"/>\n    </collection>\n</resultMap>\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"q-\u679a\u4e3e\u7c7b\u578b\u6620\u5c04",children:"Q: \u679a\u4e3e\u7c7b\u578b\u6620\u5c04"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u65b9\u5f0f\u4e00\uff1a\u4f7f\u7528\u679a\u4e3e\u540d\u79f0\uff08\u9ed8\u8ba4\uff09"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"public enum Status { ACTIVE, INACTIVE }\n"})}),"\n",(0,r.jsxs)(n.p,{children:["\u6570\u636e\u5e93\u5b58\u50a8\uff1a",(0,r.jsx)(n.code,{children:"ACTIVE"}),"\u3001",(0,r.jsx)(n.code,{children:"INACTIVE"})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"\u65b9\u5f0f\u4e8c\uff1a\u4f7f\u7528\u679a\u4e3e\u503c"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"public enum Status {\n    ACTIVE(1), INACTIVE(0);\n    private final int code;\n}\n\n// \u81ea\u5b9a\u4e49 TypeHandler\n@MappedTypes(Status.class)\npublic class StatusTypeHandler extends BaseTypeHandler<Status> {\n    @Override\n    public void setNonNullParameter(PreparedStatement ps, int i, \n            Status parameter, JdbcType jdbcType) throws SQLException {\n        ps.setInt(i, parameter.getCode());\n    }\n    // ...\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u6027\u80fd\u76f8\u5173\u95ee\u9898",children:"\u6027\u80fd\u76f8\u5173\u95ee\u9898"}),"\n",(0,r.jsx)(n.h3,{id:"q-n1-\u67e5\u8be2\u95ee\u9898",children:"Q: N+1 \u67e5\u8be2\u95ee\u9898"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u95ee\u9898"}),"\uff1a\u5d4c\u5957\u67e5\u8be2\u5bfc\u81f4\u5927\u91cf SQL \u6267\u884c\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'\x3c!-- \u95ee\u9898\u4ee3\u7801\uff1a\u6bcf\u4e2a\u7528\u6237\u90fd\u4f1a\u6267\u884c\u4e00\u6b21 selectOrders --\x3e\n<collection property="orders" column="id" select="selectOrders"/>\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u89e3\u51b3\u65b9\u6848"}),"\uff1a"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"\u4f7f\u7528\u8054\u8868\u67e5\u8be2\uff1a"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'<select id="selectWithOrders" resultMap="userWithOrders">\n    SELECT u.*, o.id as order_id, o.order_no\n    FROM user u LEFT JOIN orders o ON u.id = o.user_id\n</select>\n'})}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsx)(n.li,{children:"\u4f7f\u7528\u5ef6\u8fdf\u52a0\u8f7d\uff1a"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'<collection property="orders" fetchType="lazy" .../>\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"q-\u6279\u91cf\u63d2\u5165\u6027\u80fd\u5dee",children:"Q: \u6279\u91cf\u63d2\u5165\u6027\u80fd\u5dee"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u89e3\u51b3\u65b9\u6848"}),"\uff1a"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"\u4f7f\u7528 foreach \u6279\u91cf\u63d2\u5165\uff1a"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'<insert id="batchInsert">\n    INSERT INTO user (name, email) VALUES\n    <foreach collection="list" item="u" separator=",">\n        (#{u.name}, #{u.email})\n    </foreach>\n</insert>\n'})}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsx)(n.li,{children:"\u4f7f\u7528 BATCH \u6267\u884c\u5668\uff1a"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"try (SqlSession session = sqlSessionFactory.openSession(ExecutorType.BATCH)) {\n    UserMapper mapper = session.getMapper(UserMapper.class);\n    for (User user : users) {\n        mapper.insert(user);\n    }\n    session.flushStatements();\n    session.commit();\n}\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsx)(n.li,{children:"\u63a7\u5236\u6279\u91cf\u5927\u5c0f\uff08\u5efa\u8bae 500-1000 \u6761\uff09"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"q-\u5927\u6570\u636e\u91cf\u67e5\u8be2\u5185\u5b58\u6ea2\u51fa",children:"Q: \u5927\u6570\u636e\u91cf\u67e5\u8be2\u5185\u5b58\u6ea2\u51fa"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u89e3\u51b3\u65b9\u6848"}),"\uff1a\u4f7f\u7528\u6d41\u5f0f\u67e5\u8be2"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'@Select("SELECT * FROM user")\n@Options(resultSetType = ResultSetType.FORWARD_ONLY, fetchSize = 1000)\nvoid selectAll(ResultHandler<User> handler);\n\n// \u4f7f\u7528\nuserMapper.selectAll(context -> {\n    User user = context.getResultObject();\n    processUser(user);\n});\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"q-\u7f13\u5b58\u4e0d\u751f\u6548",children:"Q: \u7f13\u5b58\u4e0d\u751f\u6548"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u4e00\u7ea7\u7f13\u5b58\u4e0d\u751f\u6548\u539f\u56e0"}),"\uff1a"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u4e0d\u540c SqlSession"}),"\n",(0,r.jsx)(n.li,{children:"\u6267\u884c\u4e86\u589e\u5220\u6539\u64cd\u4f5c"}),"\n",(0,r.jsx)(n.li,{children:"\u8c03\u7528\u4e86 clearCache()"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u4e8c\u7ea7\u7f13\u5b58\u4e0d\u751f\u6548\u539f\u56e0"}),"\uff1a"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u672a\u5f00\u542f\u4e8c\u7ea7\u7f13\u5b58"}),"\n",(0,r.jsx)(n.li,{children:"\u5b9e\u4f53\u7c7b\u672a\u5b9e\u73b0 Serializable"}),"\n",(0,r.jsx)(n.li,{children:"SqlSession \u672a\u63d0\u4ea4/\u5173\u95ed"}),"\n",(0,r.jsx)(n.li,{children:'\u914d\u7f6e\u4e86 useCache="false"'}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"spring-\u96c6\u6210\u95ee\u9898",children:"Spring \u96c6\u6210\u95ee\u9898"}),"\n",(0,r.jsx)(n.h3,{id:"q-spring-\u4e2d\u4e00\u7ea7\u7f13\u5b58\u4e0d\u751f\u6548",children:"Q: Spring \u4e2d\u4e00\u7ea7\u7f13\u5b58\u4e0d\u751f\u6548"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u539f\u56e0"}),"\uff1aSpring \u9ed8\u8ba4\u6bcf\u6b21\u8c03\u7528\u521b\u5efa\u65b0\u7684 SqlSession\u3002"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u89e3\u51b3\u65b9\u6848"}),"\uff1a\u5728\u4e8b\u52a1\u4e2d\u6267\u884c"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"@Transactional\npublic void test() {\n    User user1 = userMapper.selectById(1L);  // \u67e5\u8be2\n    User user2 = userMapper.selectById(1L);  // \u4ece\u7f13\u5b58\u83b7\u53d6\n}\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"q-transactional-\u4e0d\u751f\u6548",children:"Q: @Transactional \u4e0d\u751f\u6548"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u53ef\u80fd\u539f\u56e0"}),"\uff1a"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"\u65b9\u6cd5\u4e0d\u662f public"}),"\n",(0,r.jsx)(n.li,{children:"\u540c\u7c7b\u5185\u90e8\u8c03\u7528"}),"\n",(0,r.jsx)(n.li,{children:"\u5f02\u5e38\u88ab\u6355\u83b7"}),"\n",(0,r.jsx)(n.li,{children:"\u672a\u542f\u7528\u4e8b\u52a1\u7ba1\u7406"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u89e3\u51b3\u65b9\u6848"}),"\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"// 1. \u786e\u4fdd\u65b9\u6cd5\u662f public\n@Transactional\npublic void save() { ... }\n\n// 2. \u907f\u514d\u540c\u7c7b\u8c03\u7528\uff0c\u6216\u6ce8\u5165\u81ea\u8eab\n@Autowired\nprivate UserService self;\n\npublic void outer() {\n    self.inner();  // \u901a\u8fc7\u4ee3\u7406\u8c03\u7528\n}\n\n// 3. \u6b63\u786e\u629b\u51fa\u5f02\u5e38\n@Transactional(rollbackFor = Exception.class)\npublic void save() throws Exception {\n    // \u4e0d\u8981 catch \u5f02\u5e38\u540e\u4e0d\u629b\u51fa\n}\n\n// 4. \u542f\u7528\u4e8b\u52a1\u7ba1\u7406\n@EnableTransactionManagement\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"q-\u591a\u6570\u636e\u6e90\u4e8b\u52a1\u95ee\u9898",children:"Q: \u591a\u6570\u636e\u6e90\u4e8b\u52a1\u95ee\u9898"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u95ee\u9898"}),"\uff1a\u8de8\u6570\u636e\u6e90\u4e8b\u52a1\u65e0\u6cd5\u4fdd\u8bc1\u4e00\u81f4\u6027\u3002"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u89e3\u51b3\u65b9\u6848"}),"\uff1a"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"\u4f7f\u7528\u5206\u5e03\u5f0f\u4e8b\u52a1\uff08Seata\uff09"}),"\n",(0,r.jsx)(n.li,{children:"\u4f7f\u7528\u672c\u5730\u6d88\u606f\u8868"}),"\n",(0,r.jsx)(n.li,{children:"\u4e1a\u52a1\u4e0a\u5141\u8bb8\u6700\u7ec8\u4e00\u81f4\u6027"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"q-mapper-\u6ce8\u5165\u4e3a-null",children:"Q: Mapper \u6ce8\u5165\u4e3a null"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u89e3\u51b3\u65b9\u6848"}),"\uff1a"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"\u786e\u4fdd Mapper \u88ab\u626b\u63cf\uff1a"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:'@MapperScan("com.example.mapper")\n'})}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsx)(n.li,{children:"\u6216\u4f7f\u7528 @Mapper \u6ce8\u89e3\uff1a"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-java",children:"@Mapper\npublic interface UserMapper { }\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"3",children:["\n",(0,r.jsx)(n.li,{children:"\u68c0\u67e5\u5305\u8def\u5f84\u662f\u5426\u6b63\u786e"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"\u52a8\u6001-sql-\u95ee\u9898",children:"\u52a8\u6001 SQL \u95ee\u9898"}),"\n",(0,r.jsx)(n.h3,{id:"q-if-\u5224\u65ad\u5b57\u7b26\u4e32\u76f8\u7b49",children:"Q: if \u5224\u65ad\u5b57\u7b26\u4e32\u76f8\u7b49"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:"\x3c!-- \u274c \u9519\u8bef --\x3e\n<if test=\"type == 'A'\">...</if>\n\n\x3c!-- \u2705 \u6b63\u786e --\x3e\n<if test=\"type == 'A'.toString()\">...</if>\n<if test='type == \"A\"'>...</if>\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"q-\u7279\u6b8a\u5b57\u7b26\u62a5\u9519",children:"Q: \u7279\u6b8a\u5b57\u7b26\u62a5\u9519"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'\x3c!-- \u274c \u9519\u8bef\uff1a< > \u662f XML \u7279\u6b8a\u5b57\u7b26 --\x3e\n<if test="age > 18">...</if>\n\n\x3c!-- \u2705 \u6b63\u786e\uff1a\u4f7f\u7528\u8f6c\u4e49 --\x3e\n<if test="age &gt; 18">...</if>\n\n\x3c!-- \u2705 \u6b63\u786e\uff1a\u4f7f\u7528 CDATA --\x3e\n<![CDATA[AND age > 18]]>\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"q-foreach-collection-\u53d6\u503c",children:"Q: foreach collection \u53d6\u503c"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"\u53c2\u6570\u7c7b\u578b"}),(0,r.jsx)(n.th,{children:"collection \u503c"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"List"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"list"})," \u6216 ",(0,r.jsx)(n.code,{children:"collection"})]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Array"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"array"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:'@Param("ids")'}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"ids"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Map \u4e2d\u7684 key"}),(0,r.jsx)(n.td,{children:"\u5bf9\u5e94\u7684 key \u540d"})]})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"q-where-\u6807\u7b7e\u4e0d\u53bb\u9664-and",children:"Q: where \u6807\u7b7e\u4e0d\u53bb\u9664 AND"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u539f\u56e0"}),"\uff1aAND \u524d\u6709\u7a7a\u683c\u6216\u6362\u884c\u3002"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-xml",children:'\x3c!-- \u274c \u95ee\u9898 --\x3e\n<where>\n    <if test="name != null">\n        AND name = #{name}  \x3c!-- AND \u524d\u6709\u6362\u884c --\x3e\n    </if>\n</where>\n\n\x3c!-- \u2705 \u6b63\u786e --\x3e\n<where>\n    <if test="name != null">AND name = #{name}</if>\n</where>\n'})}),"\n",(0,r.jsx)(n.h2,{id:"\u5176\u4ed6\u95ee\u9898",children:"\u5176\u4ed6\u95ee\u9898"}),"\n",(0,r.jsx)(n.h3,{id:"q-\u65f6\u533a\u95ee\u9898",children:"Q: \u65f6\u533a\u95ee\u9898"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u89e3\u51b3\u65b9\u6848"}),"\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-properties",children:"# \u6570\u636e\u5e93\u8fde\u63a5\u6dfb\u52a0\u65f6\u533a\nspring.datasource.url=jdbc:mysql://localhost:3306/db?serverTimezone=Asia/Shanghai\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"q-\u4e2d\u6587\u4e71\u7801",children:"Q: \u4e2d\u6587\u4e71\u7801"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u89e3\u51b3\u65b9\u6848"}),"\uff1a"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-properties",children:"# \u6570\u636e\u5e93\u8fde\u63a5\u6dfb\u52a0\u7f16\u7801\nspring.datasource.url=jdbc:mysql://localhost:3306/db?characterEncoding=utf8\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"q-\u8fde\u63a5\u6c60\u8017\u5c3d",children:"Q: \u8fde\u63a5\u6c60\u8017\u5c3d"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u89e3\u51b3\u65b9\u6848"}),"\uff1a"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"\u589e\u52a0\u8fde\u63a5\u6c60\u5927\u5c0f"}),"\n",(0,r.jsx)(n.li,{children:"\u68c0\u67e5\u662f\u5426\u6709\u8fde\u63a5\u6cc4\u6f0f"}),"\n",(0,r.jsx)(n.li,{children:"\u51cf\u5c11\u957f\u4e8b\u52a1"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"spring:\n  datasource:\n    hikari:\n      maximum-pool-size: 20\n      minimum-idle: 5\n      connection-timeout: 30000\n"})}),"\n",(0,r.jsx)(n.h2,{id:"\u76f8\u5173\u94fe\u63a5",children:"\u76f8\u5173\u94fe\u63a5"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/docs/mybatis/configuration",children:"\u914d\u7f6e\u8be6\u89e3"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/docs/mybatis/best-practices",children:"\u6700\u4f73\u5b9e\u8df5"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"/docs/mybatis/spring-integration",children:"Spring \u96c6\u6210"})}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u6700\u540e\u66f4\u65b0"}),": 2025 \u5e74 12 \u6708"]})]})}function x(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}}}]);