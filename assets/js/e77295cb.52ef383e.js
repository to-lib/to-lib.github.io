"use strict";(globalThis.webpackChunkto_lib_github_io=globalThis.webpackChunkto_lib_github_io||[]).push([[45021],{48885:(n,e,l)=>{l.d(e,{R:()=>s,x:()=>c});var t=l(99378);const i={},r=t.createContext(i);function s(n){const e=t.useContext(r);return t.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:s(n.components),t.createElement(r.Provider,{value:e},n.children)}},78444:(n,e,l)=>{l.r(e),l.d(e,{assets:()=>a,contentTitle:()=>c,default:()=>u,frontMatter:()=>s,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"rust/closures-iterators","title":"\u95ed\u5305\u548c\u8fed\u4ee3\u5668","description":"\u95ed\u5305\u548c\u8fed\u4ee3\u5668\u662f Rust \u51fd\u6570\u5f0f\u7f16\u7a0b\u7684\u6838\u5fc3\u7279\u6027\uff0c\u5b83\u4eec\u63d0\u4f9b\u4e86\u5f3a\u5927\u800c\u4f18\u96c5\u7684\u4ee3\u7801\u62bd\u8c61\u80fd\u529b\u3002","source":"@site/docs/rust/closures-iterators.md","sourceDirName":"rust","slug":"/rust/closures-iterators","permalink":"/docs/rust/closures-iterators","draft":false,"unlisted":false,"editUrl":"https://github.com/to-lib/to-lib.github.io/tree/main/docs/rust/closures-iterators.md","tags":[],"version":"current","sidebarPosition":8,"frontMatter":{"sidebar_position":8,"title":"\u95ed\u5305\u548c\u8fed\u4ee3\u5668"},"sidebar":"rust","previous":{"title":"\u751f\u547d\u5468\u671f","permalink":"/docs/rust/lifetimes"},"next":{"title":"\u6a21\u5757\u548c\u5305\u7ba1\u7406","permalink":"/docs/rust/modules-packages"}}');var i=l(22714),r=l(48885);const s={sidebar_position:8,title:"\u95ed\u5305\u548c\u8fed\u4ee3\u5668"},c="\u95ed\u5305\u548c\u8fed\u4ee3\u5668",a={},d=[{value:"\u95ed\u5305 (Closures)",id:"\u95ed\u5305-closures",level:2},{value:"\u95ed\u5305\u8bed\u6cd5",id:"\u95ed\u5305\u8bed\u6cd5",level:3},{value:"\u7c7b\u578b\u63a8\u65ad",id:"\u7c7b\u578b\u63a8\u65ad",level:3},{value:"\u6355\u83b7\u73af\u5883",id:"\u6355\u83b7\u73af\u5883",level:3},{value:"\u4e0d\u53ef\u53d8\u501f\u7528",id:"\u4e0d\u53ef\u53d8\u501f\u7528",level:4},{value:"\u53ef\u53d8\u501f\u7528",id:"\u53ef\u53d8\u501f\u7528",level:4},{value:"\u83b7\u53d6\u6240\u6709\u6743 (move)",id:"\u83b7\u53d6\u6240\u6709\u6743-move",level:4},{value:"\u95ed\u5305 Trait",id:"\u95ed\u5305-trait",level:2},{value:"FnOnce",id:"fnonce",level:3},{value:"FnMut",id:"fnmut",level:3},{value:"Fn",id:"fn",level:3},{value:"Trait \u7ee7\u627f\u5173\u7cfb",id:"trait-\u7ee7\u627f\u5173\u7cfb",level:3},{value:"\u8fed\u4ee3\u5668 (Iterators)",id:"\u8fed\u4ee3\u5668-iterators",level:2},{value:"Iterator Trait",id:"iterator-trait",level:3},{value:"\u521b\u5efa\u8fed\u4ee3\u5668",id:"\u521b\u5efa\u8fed\u4ee3\u5668",level:3},{value:"\u4f7f\u7528\u8fed\u4ee3\u5668",id:"\u4f7f\u7528\u8fed\u4ee3\u5668",level:3},{value:"\u8fed\u4ee3\u5668\u9002\u914d\u5668",id:"\u8fed\u4ee3\u5668\u9002\u914d\u5668",level:2},{value:"map - \u8f6c\u6362",id:"map---\u8f6c\u6362",level:3},{value:"filter - \u8fc7\u6ee4",id:"filter---\u8fc7\u6ee4",level:3},{value:"\u94fe\u5f0f\u8c03\u7528",id:"\u94fe\u5f0f\u8c03\u7528",level:3},{value:"enumerate - \u7d22\u5f15",id:"enumerate---\u7d22\u5f15",level:3},{value:"zip - \u7ec4\u5408",id:"zip---\u7ec4\u5408",level:3},{value:"take - \u83b7\u53d6\u524d n \u4e2a",id:"take---\u83b7\u53d6\u524d-n-\u4e2a",level:3},{value:"skip - \u8df3\u8fc7\u524d n \u4e2a",id:"skip---\u8df3\u8fc7\u524d-n-\u4e2a",level:3},{value:"\u6d88\u8d39\u9002\u914d\u5668",id:"\u6d88\u8d39\u9002\u914d\u5668",level:2},{value:"sum - \u6c42\u548c",id:"sum---\u6c42\u548c",level:3},{value:"collect - \u6536\u96c6",id:"collect---\u6536\u96c6",level:3},{value:"fold - \u6298\u53e0",id:"fold---\u6298\u53e0",level:3},{value:"any / all - \u5224\u65ad",id:"any--all---\u5224\u65ad",level:3},{value:"find - \u67e5\u627e",id:"find---\u67e5\u627e",level:3},{value:"position - \u4f4d\u7f6e",id:"position---\u4f4d\u7f6e",level:3},{value:"\u81ea\u5b9a\u4e49\u8fed\u4ee3\u5668",id:"\u81ea\u5b9a\u4e49\u8fed\u4ee3\u5668",level:2},{value:"\u95ed\u5305\u4e0e\u8fed\u4ee3\u5668\u7ed3\u5408",id:"\u95ed\u5305\u4e0e\u8fed\u4ee3\u5668\u7ed3\u5408",level:2},{value:"\u5b9e\u6218\u793a\u4f8b 1: \u6570\u636e\u5904\u7406",id:"\u5b9e\u6218\u793a\u4f8b-1-\u6570\u636e\u5904\u7406",level:3},{value:"\u5b9e\u6218\u793a\u4f8b 2: \u6587\u672c\u5904\u7406",id:"\u5b9e\u6218\u793a\u4f8b-2-\u6587\u672c\u5904\u7406",level:3},{value:"\u5b9e\u6218\u793a\u4f8b 3: \u914d\u7f6e\u5904\u7406",id:"\u5b9e\u6218\u793a\u4f8b-3-\u914d\u7f6e\u5904\u7406",level:3},{value:"\u6027\u80fd\u5bf9\u6bd4",id:"\u6027\u80fd\u5bf9\u6bd4",level:2},{value:"\u8fed\u4ee3\u5668 vs for \u5faa\u73af",id:"\u8fed\u4ee3\u5668-vs-for-\u5faa\u73af",level:3},{value:"\u60f0\u6027\u6c42\u503c\u7684\u4f18\u52bf",id:"\u60f0\u6027\u6c42\u503c\u7684\u4f18\u52bf",level:3},{value:"\u6700\u4f73\u5b9e\u8df5",id:"\u6700\u4f73\u5b9e\u8df5",level:2},{value:"1. \u4f18\u5148\u4f7f\u7528\u8fed\u4ee3\u5668",id:"1-\u4f18\u5148\u4f7f\u7528\u8fed\u4ee3\u5668",level:3},{value:"2. \u4f7f\u7528 filter_map \u7b80\u5316\u4ee3\u7801",id:"2-\u4f7f\u7528-filter_map-\u7b80\u5316\u4ee3\u7801",level:3},{value:"3. \u907f\u514d\u4e0d\u5fc5\u8981\u7684 collect",id:"3-\u907f\u514d\u4e0d\u5fc5\u8981\u7684-collect",level:3},{value:"4. \u9009\u62e9\u5408\u9002\u7684\u95ed\u5305 trait",id:"4-\u9009\u62e9\u5408\u9002\u7684\u95ed\u5305-trait",level:3},{value:"\u5e38\u89c1\u9677\u9631",id:"\u5e38\u89c1\u9677\u9631",level:2},{value:"1. \u5fd8\u8bb0\u6d88\u8d39\u8fed\u4ee3\u5668",id:"1-\u5fd8\u8bb0\u6d88\u8d39\u8fed\u4ee3\u5668",level:3},{value:"2. \u8fc7\u65e9 collect",id:"2-\u8fc7\u65e9-collect",level:3},{value:"3. \u95ed\u5305\u6355\u83b7\u8fc7\u591a",id:"3-\u95ed\u5305\u6355\u83b7\u8fc7\u591a",level:3},{value:"\u603b\u7ed3",id:"\u603b\u7ed3",level:2}];function o(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.header,{children:(0,i.jsx)(e.h1,{id:"\u95ed\u5305\u548c\u8fed\u4ee3\u5668",children:"\u95ed\u5305\u548c\u8fed\u4ee3\u5668"})}),"\n",(0,i.jsx)(e.p,{children:"\u95ed\u5305\u548c\u8fed\u4ee3\u5668\u662f Rust \u51fd\u6570\u5f0f\u7f16\u7a0b\u7684\u6838\u5fc3\u7279\u6027\uff0c\u5b83\u4eec\u63d0\u4f9b\u4e86\u5f3a\u5927\u800c\u4f18\u96c5\u7684\u4ee3\u7801\u62bd\u8c61\u80fd\u529b\u3002"}),"\n",(0,i.jsx)(e.h2,{id:"\u95ed\u5305-closures",children:"\u95ed\u5305 (Closures)"}),"\n",(0,i.jsx)(e.p,{children:"\u95ed\u5305\u662f\u53ef\u4ee5\u6355\u83b7\u5176\u73af\u5883\u7684\u533f\u540d\u51fd\u6570\u3002"}),"\n",(0,i.jsx)(e.h3,{id:"\u95ed\u5305\u8bed\u6cd5",children:"\u95ed\u5305\u8bed\u6cd5"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    // \u57fa\u672c\u8bed\u6cd5\n    let add_one = |x| x + 1;\n    println!("{}", add_one(5));  // 6\n\n    // \u5e26\u7c7b\u578b\u6ce8\u89e3\n    let add_one: fn(i32) -> i32 = |x: i32| -> i32 { x + 1 };\n\n    // \u591a\u53c2\u6570\n    let add = |x, y| x + y;\n    println!("{}", add(1, 2));  // 3\n\n    // \u591a\u884c\u95ed\u5305\n    let complex = |x| {\n        let y = x + 1;\n        y * 2\n    };\n}\n'})}),"\n",(0,i.jsx)(e.h3,{id:"\u7c7b\u578b\u63a8\u65ad",children:"\u7c7b\u578b\u63a8\u65ad"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    // Rust \u4f1a\u63a8\u65ad\u95ed\u5305\u7684\u7c7b\u578b\n    let example_closure = |x| x;\n\n    let s = example_closure(String::from("hello"));\n    // let n = example_closure(5);  // \u9519\u8bef\uff1a\u7c7b\u578b\u5df2\u786e\u5b9a\u4e3a String\n}\n'})}),"\n",(0,i.jsx)(e.h3,{id:"\u6355\u83b7\u73af\u5883",children:"\u6355\u83b7\u73af\u5883"}),"\n",(0,i.jsx)(e.h4,{id:"\u4e0d\u53ef\u53d8\u501f\u7528",children:"\u4e0d\u53ef\u53d8\u501f\u7528"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let list = vec![1, 2, 3];\n\n    // \u95ed\u5305\u4e0d\u53ef\u53d8\u501f\u7528 list\n    let only_borrows = || println!("\u4ece\u95ed\u5305\u8bbf\u95ee: {:?}", list);\n\n    println!("\u8c03\u7528\u95ed\u5305\u524d: {:?}", list);\n    only_borrows();\n    println!("\u8c03\u7528\u95ed\u5305\u540e: {:?}", list);\n}\n'})}),"\n",(0,i.jsx)(e.h4,{id:"\u53ef\u53d8\u501f\u7528",children:"\u53ef\u53d8\u501f\u7528"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let mut list = vec![1, 2, 3];\n\n    // \u95ed\u5305\u53ef\u53d8\u501f\u7528 list\n    let mut borrows_mutably = || list.push(7);\n\n    // println!("{:?}", list);  // \u9519\u8bef\uff1a\u5df2\u6709\u53ef\u53d8\u501f\u7528\n    borrows_mutably();\n    println!("\u8c03\u7528\u540e: {:?}", list);\n}\n'})}),"\n",(0,i.jsx)(e.h4,{id:"\u83b7\u53d6\u6240\u6709\u6743-move",children:"\u83b7\u53d6\u6240\u6709\u6743 (move)"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-rust",children:'use std::thread;\n\nfn main() {\n    let list = vec![1, 2, 3];\n\n    // move \u5173\u952e\u5b57\u5f3a\u5236\u83b7\u53d6\u6240\u6709\u6743\n    thread::spawn(move || {\n        println!("\u4ece\u7ebf\u7a0b: {:?}", list);\n    }).join().unwrap();\n\n    // println!("{:?}", list);  // \u9519\u8bef\uff1a\u6240\u6709\u6743\u5df2\u79fb\u52a8\n}\n'})}),"\n",(0,i.jsx)(e.h2,{id:"\u95ed\u5305-trait",children:"\u95ed\u5305 Trait"}),"\n",(0,i.jsx)(e.p,{children:"Rust \u7684\u95ed\u5305\u5b9e\u73b0\u4e86\u4ee5\u4e0b trait \u4e4b\u4e00\uff1a"}),"\n",(0,i.jsx)(e.h3,{id:"fnonce",children:"FnOnce"}),"\n",(0,i.jsx)(e.p,{children:"\u53ea\u80fd\u8c03\u7528\u4e00\u6b21\uff0c\u4f1a\u83b7\u53d6\u73af\u5883\u7684\u6240\u6709\u6743\u3002"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-rust",children:'fn consume<F>(func: F)\nwhere\n    F: FnOnce() -> String,\n{\n    println!("{}", func());\n    // func();  // \u9519\u8bef\uff1aFnOnce \u53ea\u80fd\u8c03\u7528\u4e00\u6b21\n}\n\nfn main() {\n    let s = String::from("hello");\n\n    let closure = || {\n        s  // \u83b7\u53d6\u6240\u6709\u6743\n    };\n\n    consume(closure);\n}\n'})}),"\n",(0,i.jsx)(e.h3,{id:"fnmut",children:"FnMut"}),"\n",(0,i.jsx)(e.p,{children:"\u53ef\u4ee5\u591a\u6b21\u8c03\u7528\uff0c\u53ef\u53d8\u501f\u7528\u73af\u5883\u3002"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-rust",children:'fn do_twice<F>(mut func: F)\nwhere\n    F: FnMut(),\n{\n    func();\n    func();\n}\n\nfn main() {\n    let mut counter = 0;\n\n    let mut increment = || {\n        counter += 1;\n        println!("\u8ba1\u6570: {}", counter);\n    };\n\n    do_twice(increment);\n}\n'})}),"\n",(0,i.jsx)(e.h3,{id:"fn",children:"Fn"}),"\n",(0,i.jsx)(e.p,{children:"\u53ef\u4ee5\u591a\u6b21\u8c03\u7528\uff0c\u4e0d\u53ef\u53d8\u501f\u7528\u73af\u5883\u3002"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-rust",children:'fn call_multiple<F>(func: F)\nwhere\n    F: Fn(i32) -> i32,\n{\n    println!("{}", func(1));\n    println!("{}", func(2));\n}\n\nfn main() {\n    let multiplier = 2;\n\n    let multiply = |x| x * multiplier;\n\n    call_multiple(multiply);\n}\n'})}),"\n",(0,i.jsx)(e.h3,{id:"trait-\u7ee7\u627f\u5173\u7cfb",children:"Trait \u7ee7\u627f\u5173\u7cfb"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-rust",children:'// Fn: FnMut: FnOnce\n// \u6240\u6709\u95ed\u5305\u90fd\u5b9e\u73b0 FnOnce\n// \u4e0d\u4f1a\u79fb\u52a8\u6355\u83b7\u53d8\u91cf\u7684\u95ed\u5305\u5b9e\u73b0 FnMut\n// \u4e0d\u9700\u8981\u53ef\u53d8\u8bbf\u95ee\u7684\u95ed\u5305\u5b9e\u73b0 Fn\n\nfn main() {\n    let s = String::from("hello");\n\n    // Fn\n    let f1 = || println!("{}", s);\n\n    let mut count = 0;\n    // FnMut\n    let mut f2 = || count += 1;\n\n    let s2 = String::from("world");\n    // FnOnce\n    let f3 = || {\n        drop(s2);  // \u6d88\u8017 s2\n    };\n}\n'})}),"\n",(0,i.jsx)(e.h2,{id:"\u8fed\u4ee3\u5668-iterators",children:"\u8fed\u4ee3\u5668 (Iterators)"}),"\n",(0,i.jsx)(e.p,{children:"\u8fed\u4ee3\u5668\u5141\u8bb8\u5bf9\u5143\u7d20\u5e8f\u5217\u8fdb\u884c\u5904\u7406\u3002"}),"\n",(0,i.jsx)(e.h3,{id:"iterator-trait",children:"Iterator Trait"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-rust",children:"pub trait Iterator {\n    type Item;\n\n    fn next(&mut self) -> Option<Self::Item>;\n\n    // \u63d0\u4f9b\u4e86\u5f88\u591a\u9ed8\u8ba4\u65b9\u6cd5...\n}\n"})}),"\n",(0,i.jsx)(e.h3,{id:"\u521b\u5efa\u8fed\u4ee3\u5668",children:"\u521b\u5efa\u8fed\u4ee3\u5668"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-rust",children:"fn main() {\n    let v = vec![1, 2, 3];\n\n    // iter(): \u4e0d\u53ef\u53d8\u5f15\u7528\n    let iter1 = v.iter();\n\n    // iter_mut(): \u53ef\u53d8\u5f15\u7528\n    let mut v2 = vec![1, 2, 3];\n    let iter2 = v2.iter_mut();\n\n    // into_iter(): \u83b7\u53d6\u6240\u6709\u6743\n    let iter3 = v.into_iter();\n}\n"})}),"\n",(0,i.jsx)(e.h3,{id:"\u4f7f\u7528\u8fed\u4ee3\u5668",children:"\u4f7f\u7528\u8fed\u4ee3\u5668"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let v = vec![1, 2, 3, 4, 5];\n\n    // for \u5faa\u73af\u81ea\u52a8\u8c03\u7528 into_iter()\n    for val in &v {\n        println!("{}", val);\n    }\n\n    // \u624b\u52a8\u4f7f\u7528 next()\n    let mut iter = v.iter();\n    assert_eq!(iter.next(), Some(&1));\n    assert_eq!(iter.next(), Some(&2));\n    assert_eq!(iter.next(), Some(&3));\n}\n'})}),"\n",(0,i.jsx)(e.h2,{id:"\u8fed\u4ee3\u5668\u9002\u914d\u5668",children:"\u8fed\u4ee3\u5668\u9002\u914d\u5668"}),"\n",(0,i.jsx)(e.p,{children:"\u8fed\u4ee3\u5668\u9002\u914d\u5668\u662f\u60f0\u6027\u7684\uff0c\u53ea\u6709\u5728\u8c03\u7528\u6d88\u8d39\u8005\u65b9\u6cd5\u65f6\u624d\u4f1a\u6267\u884c\u3002"}),"\n",(0,i.jsx)(e.h3,{id:"map---\u8f6c\u6362",children:"map - \u8f6c\u6362"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let v = vec![1, 2, 3];\n\n    // map \u662f\u60f0\u6027\u7684\n    let iter = v.iter().map(|x| x + 1);\n\n    // collect \u89e6\u53d1\u6267\u884c\n    let v2: Vec<_> = iter.collect();\n    println!("{:?}", v2);  // [2, 3, 4]\n}\n'})}),"\n",(0,i.jsx)(e.h3,{id:"filter---\u8fc7\u6ee4",children:"filter - \u8fc7\u6ee4"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let v = vec![1, 2, 3, 4, 5, 6];\n\n    let evens: Vec<_> = v.iter()\n        .filter(|x| *x % 2 == 0)\n        .collect();\n\n    println!("{:?}", evens);  // [2, 4, 6]\n}\n'})}),"\n",(0,i.jsx)(e.h3,{id:"\u94fe\u5f0f\u8c03\u7528",children:"\u94fe\u5f0f\u8c03\u7528"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let v = vec![1, 2, 3, 4, 5, 6];\n\n    let result: Vec<_> = v.iter()\n        .filter(|x| *x % 2 == 0)  // \u8fc7\u6ee4\u5076\u6570\n        .map(|x| x * 2)            // \u4e58\u4ee5 2\n        .collect();\n\n    println!("{:?}", result);  // [4, 8, 12]\n}\n'})}),"\n",(0,i.jsx)(e.h3,{id:"enumerate---\u7d22\u5f15",children:"enumerate - \u7d22\u5f15"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let v = vec!["a", "b", "c"];\n\n    for (index, value) in v.iter().enumerate() {\n        println!("{}: {}", index, value);\n    }\n}\n'})}),"\n",(0,i.jsx)(e.h3,{id:"zip---\u7ec4\u5408",children:"zip - \u7ec4\u5408"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let names = vec!["Alice", "Bob", "Carol"];\n    let ages = vec![25, 30, 35];\n\n    for (name, age) in names.iter().zip(ages.iter()) {\n        println!("{} is {} years old", name, age);\n    }\n}\n'})}),"\n",(0,i.jsx)(e.h3,{id:"take---\u83b7\u53d6\u524d-n-\u4e2a",children:"take - \u83b7\u53d6\u524d n \u4e2a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let v = vec![1, 2, 3, 4, 5];\n\n    let first_three: Vec<_> = v.iter()\n        .take(3)\n        .collect();\n\n    println!("{:?}", first_three);  // [1, 2, 3]\n}\n'})}),"\n",(0,i.jsx)(e.h3,{id:"skip---\u8df3\u8fc7\u524d-n-\u4e2a",children:"skip - \u8df3\u8fc7\u524d n \u4e2a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let v = vec![1, 2, 3, 4, 5];\n\n    let after_two: Vec<_> = v.iter()\n        .skip(2)\n        .collect();\n\n    println!("{:?}", after_two);  // [3, 4, 5]\n}\n'})}),"\n",(0,i.jsx)(e.h2,{id:"\u6d88\u8d39\u9002\u914d\u5668",children:"\u6d88\u8d39\u9002\u914d\u5668"}),"\n",(0,i.jsx)(e.p,{children:"\u6d88\u8d39\u9002\u914d\u5668\u4f1a\u6d88\u8017\u8fed\u4ee3\u5668\u3002"}),"\n",(0,i.jsx)(e.h3,{id:"sum---\u6c42\u548c",children:"sum - \u6c42\u548c"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let v = vec![1, 2, 3, 4, 5];\n\n    let total: i32 = v.iter().sum();\n    println!("{}", total);  // 15\n}\n'})}),"\n",(0,i.jsx)(e.h3,{id:"collect---\u6536\u96c6",children:"collect - \u6536\u96c6"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-rust",children:"fn main() {\n    let v = vec![1, 2, 3];\n\n    // \u6536\u96c6\u4e3a Vec\n    let v2: Vec<_> = v.iter().map(|x| x * 2).collect();\n\n    // \u6536\u96c6\u4e3a HashMap\n    use std::collections::HashMap;\n    let map: HashMap<_, _> = v.iter()\n        .enumerate()\n        .collect();\n}\n"})}),"\n",(0,i.jsx)(e.h3,{id:"fold---\u6298\u53e0",children:"fold - \u6298\u53e0"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let v = vec![1, 2, 3, 4];\n\n    // fold(\u521d\u59cb\u503c, \u7d2f\u79ef\u51fd\u6570)\n    let sum = v.iter().fold(0, |acc, x| acc + x);\n    println!("{}", sum);  // 10\n\n    // \u8ba1\u7b97\u4e58\u79ef\n    let product = v.iter().fold(1, |acc, x| acc * x);\n    println!("{}", product);  // 24\n}\n'})}),"\n",(0,i.jsx)(e.h3,{id:"any--all---\u5224\u65ad",children:"any / all - \u5224\u65ad"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let v = vec![1, 2, 3, 4, 5];\n\n    // \u662f\u5426\u6709\u5076\u6570\n    let has_even = v.iter().any(|x| x % 2 == 0);\n    println!("{}", has_even);  // true\n\n    // \u662f\u5426\u5168\u662f\u6b63\u6570\n    let all_positive = v.iter().all(|x| *x > 0);\n    println!("{}", all_positive);  // true\n}\n'})}),"\n",(0,i.jsx)(e.h3,{id:"find---\u67e5\u627e",children:"find - \u67e5\u627e"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let v = vec![1, 2, 3, 4, 5];\n\n    let first_even = v.iter().find(|x| *x % 2 == 0);\n    println!("{:?}", first_even);  // Some(2)\n}\n'})}),"\n",(0,i.jsx)(e.h3,{id:"position---\u4f4d\u7f6e",children:"position - \u4f4d\u7f6e"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let v = vec![10, 20, 30, 40];\n\n    let pos = v.iter().position(|x| *x == 30);\n    println!("{:?}", pos);  // Some(2)\n}\n'})}),"\n",(0,i.jsx)(e.h2,{id:"\u81ea\u5b9a\u4e49\u8fed\u4ee3\u5668",children:"\u81ea\u5b9a\u4e49\u8fed\u4ee3\u5668"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-rust",children:'struct Counter {\n    count: u32,\n}\n\nimpl Counter {\n    fn new() -> Counter {\n        Counter { count: 0 }\n    }\n}\n\nimpl Iterator for Counter {\n    type Item = u32;\n\n    fn next(&mut self) -> Option<Self::Item> {\n        if self.count < 5 {\n            self.count += 1;\n            Some(self.count)\n        } else {\n            None\n        }\n    }\n}\n\nfn main() {\n    let mut counter = Counter::new();\n\n    assert_eq!(counter.next(), Some(1));\n    assert_eq!(counter.next(), Some(2));\n\n    // \u4f7f\u7528\u8fed\u4ee3\u5668\u65b9\u6cd5\n    let sum: u32 = Counter::new().sum();\n    println!("{}", sum);  // 15\n}\n'})}),"\n",(0,i.jsx)(e.h2,{id:"\u95ed\u5305\u4e0e\u8fed\u4ee3\u5668\u7ed3\u5408",children:"\u95ed\u5305\u4e0e\u8fed\u4ee3\u5668\u7ed3\u5408"}),"\n",(0,i.jsx)(e.h3,{id:"\u5b9e\u6218\u793a\u4f8b-1-\u6570\u636e\u5904\u7406",children:"\u5b9e\u6218\u793a\u4f8b 1: \u6570\u636e\u5904\u7406"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-rust",children:'#[derive(Debug)]\nstruct Product {\n    name: String,\n    price: f64,\n    stock: u32,\n}\n\nfn main() {\n    let products = vec![\n        Product { name: "\u7b14\u8bb0\u672c".to_string(), price: 5000.0, stock: 10 },\n        Product { name: "\u9f20\u6807".to_string(), price: 100.0, stock: 50 },\n        Product { name: "\u952e\u76d8".to_string(), price: 300.0, stock: 0 },\n        Product { name: "\u663e\u793a\u5668".to_string(), price: 2000.0, stock: 5 },\n    ];\n\n    // \u627e\u51fa\u6709\u5e93\u5b58\u4e14\u4ef7\u683c\u8d85\u8fc7 1000 \u7684\u4ea7\u54c1\n    let expensive_in_stock: Vec<_> = products.iter()\n        .filter(|p| p.stock > 0)\n        .filter(|p| p.price > 1000.0)\n        .collect();\n\n    for product in expensive_in_stock {\n        println!("{}: {} \u5143", product.name, product.price);\n    }\n\n    // \u8ba1\u7b97\u603b\u5e93\u5b58\u4ef7\u503c\n    let total_value: f64 = products.iter()\n        .map(|p| p.price * p.stock as f64)\n        .sum();\n\n    println!("\u603b\u5e93\u5b58\u4ef7\u503c: {} \u5143", total_value);\n}\n'})}),"\n",(0,i.jsx)(e.h3,{id:"\u5b9e\u6218\u793a\u4f8b-2-\u6587\u672c\u5904\u7406",children:"\u5b9e\u6218\u793a\u4f8b 2: \u6587\u672c\u5904\u7406"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let text = "Hello world! This is Rust programming.";\n\n    // \u7edf\u8ba1\u5355\u8bcd\u957f\u5ea6\n    let word_lengths: Vec<_> = text\n        .split_whitespace()\n        .map(|word| (word, word.len()))\n        .collect();\n\n    println!("{:?}", word_lengths);\n\n    // \u627e\u51fa\u6700\u957f\u7684\u5355\u8bcd\n    let longest = text\n        .split_whitespace()\n        .max_by_key(|word| word.len());\n\n    println!("\u6700\u957f\u5355\u8bcd: {:?}", longest);\n}\n'})}),"\n",(0,i.jsx)(e.h3,{id:"\u5b9e\u6218\u793a\u4f8b-3-\u914d\u7f6e\u5904\u7406",children:"\u5b9e\u6218\u793a\u4f8b 3: \u914d\u7f6e\u5904\u7406"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-rust",children:'use std::collections::HashMap;\n\nfn main() {\n    let config_pairs = vec![\n        ("host", "localhost"),\n        ("port", "8080"),\n        ("timeout", "30"),\n    ];\n\n    // \u8f6c\u6362\u4e3a HashMap\n    let config: HashMap<_, _> = config_pairs\n        .into_iter()\n        .collect();\n\n    println!("{:?}", config);\n\n    // \u8fc7\u6ee4\u548c\u8f6c\u6362\n    let numeric_configs: Vec<_> = vec![\n        ("max_connections", "100"),\n        ("timeout", "30"),\n        ("buffer_size", "1024"),\n    ]\n    .into_iter()\n    .filter_map(|(key, value)| {\n        value.parse::<u32>().ok().map(|v| (key, v))\n    })\n    .collect();\n\n    println!("{:?}", numeric_configs);\n}\n'})}),"\n",(0,i.jsx)(e.h2,{id:"\u6027\u80fd\u5bf9\u6bd4",children:"\u6027\u80fd\u5bf9\u6bd4"}),"\n",(0,i.jsx)(e.h3,{id:"\u8fed\u4ee3\u5668-vs-for-\u5faa\u73af",children:"\u8fed\u4ee3\u5668 vs for \u5faa\u73af"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-rust",children:"fn main() {\n    let v = vec![1, 2, 3, 4, 5];\n\n    // for \u5faa\u73af\n    let mut sum1 = 0;\n    for &x in &v {\n        sum1 += x;\n    }\n\n    // \u8fed\u4ee3\u5668\uff08\u96f6\u6210\u672c\u62bd\u8c61\uff09\n    let sum2: i32 = v.iter().sum();\n\n    // \u6027\u80fd\u76f8\u540c\uff01\n    assert_eq!(sum1, sum2);\n}\n"})}),"\n",(0,i.jsx)(e.h3,{id:"\u60f0\u6027\u6c42\u503c\u7684\u4f18\u52bf",children:"\u60f0\u6027\u6c42\u503c\u7684\u4f18\u52bf"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-rust",children:"fn main() {\n    let v: Vec<_> = (1..1000000).collect();\n\n    // \u53ea\u5904\u7406\u524d 10 \u4e2a\u5143\u7d20\n    let result: Vec<_> = v.iter()\n        .map(|x| x * 2)           // \u60f0\u6027\uff0c\u4e0d\u4f1a\u7acb\u5373\u6267\u884c\n        .filter(|x| *x > 100)     // \u60f0\u6027\n        .take(10)                  // \u60f0\u6027\n        .collect();                // \u89e6\u53d1\u6267\u884c\n\n    // \u6548\u7387\u9ad8\uff1a\u53ea\u5904\u7406\u4e86\u9700\u8981\u7684\u5143\u7d20\n}\n"})}),"\n",(0,i.jsx)(e.h2,{id:"\u6700\u4f73\u5b9e\u8df5",children:"\u6700\u4f73\u5b9e\u8df5"}),"\n",(0,i.jsx)(e.h3,{id:"1-\u4f18\u5148\u4f7f\u7528\u8fed\u4ee3\u5668",children:"1. \u4f18\u5148\u4f7f\u7528\u8fed\u4ee3\u5668"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-rust",children:"// \u597d\uff1a\u4f7f\u7528\u8fed\u4ee3\u5668\nfn sum_positives(numbers: &[i32]) -> i32 {\n    numbers.iter()\n        .filter(|&&x| x > 0)\n        .sum()\n}\n\n// \u53ef\u4ee5\uff0c\u4f46\u4e0d\u591f\u4f18\u96c5\nfn sum_positives_loop(numbers: &[i32]) -> i32 {\n    let mut sum = 0;\n    for &num in numbers {\n        if num > 0 {\n            sum += num;\n        }\n    }\n    sum\n}\n"})}),"\n",(0,i.jsx)(e.h3,{id:"2-\u4f7f\u7528-filter_map-\u7b80\u5316\u4ee3\u7801",children:"2. \u4f7f\u7528 filter_map \u7b80\u5316\u4ee3\u7801"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let strings = vec!["1", "two", "3", "four", "5"];\n\n    // \u597d\uff1a\u4f7f\u7528 filter_map\n    let numbers: Vec<_> = strings.iter()\n        .filter_map(|s| s.parse::<i32>().ok())\n        .collect();\n\n    // \u4e0d\u591f\u7b80\u6d01\n    let numbers2: Vec<_> = strings.iter()\n        .map(|s| s.parse::<i32>())\n        .filter(|r| r.is_ok())\n        .map(|r| r.unwrap())\n        .collect();\n}\n'})}),"\n",(0,i.jsx)(e.h3,{id:"3-\u907f\u514d\u4e0d\u5fc5\u8981\u7684-collect",children:"3. \u907f\u514d\u4e0d\u5fc5\u8981\u7684 collect"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-rust",children:"fn main() {\n    let v = vec![1, 2, 3, 4, 5];\n\n    // \u4e0d\u597d\uff1a\u4e0d\u5fc5\u8981\u7684\u4e2d\u95f4\u96c6\u5408\n    let temp: Vec<_> = v.iter().map(|x| x * 2).collect();\n    let sum: i32 = temp.iter().sum();\n\n    // \u597d\uff1a\u94fe\u5f0f\u8c03\u7528\n    let sum: i32 = v.iter().map(|x| x * 2).sum();\n}\n"})}),"\n",(0,i.jsx)(e.h3,{id:"4-\u9009\u62e9\u5408\u9002\u7684\u95ed\u5305-trait",children:"4. \u9009\u62e9\u5408\u9002\u7684\u95ed\u5305 trait"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-rust",children:"// \u5982\u679c\u53ea\u9700\u4e0d\u53ef\u53d8\u8bbf\u95ee\uff0c\u4f7f\u7528 Fn\nfn apply<F>(f: F, x: i32) -> i32\nwhere\n    F: Fn(i32) -> i32,\n{\n    f(x)\n}\n\n// \u5982\u679c\u9700\u8981\u53ef\u53d8\u8bbf\u95ee\uff0c\u4f7f\u7528 FnMut\nfn apply_mut<F>(mut f: F, x: i32)\nwhere\n    F: FnMut(i32),\n{\n    f(x);\n}\n\n// \u5982\u679c\u4f1a\u6d88\u8017\u95ed\u5305\uff0c\u4f7f\u7528 FnOnce\nfn apply_once<F>(f: F, x: i32)\nwhere\n    F: FnOnce(i32),\n{\n    f(x);\n}\n"})}),"\n",(0,i.jsx)(e.h2,{id:"\u5e38\u89c1\u9677\u9631",children:"\u5e38\u89c1\u9677\u9631"}),"\n",(0,i.jsx)(e.h3,{id:"1-\u5fd8\u8bb0\u6d88\u8d39\u8fed\u4ee3\u5668",children:"1. \u5fd8\u8bb0\u6d88\u8d39\u8fed\u4ee3\u5668"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let v = vec![1, 2, 3];\n\n    // \u9519\u8bef\uff1amap \u4e0d\u4f1a\u6267\u884c\uff08\u7f16\u8bd1\u8b66\u544a\uff09\n    v.iter().map(|x| println!("{}", x));\n\n    // \u6b63\u786e\uff1a\u4f7f\u7528 for_each \u6216 collect\n    v.iter().for_each(|x| println!("{}", x));\n}\n'})}),"\n",(0,i.jsx)(e.h3,{id:"2-\u8fc7\u65e9-collect",children:"2. \u8fc7\u65e9 collect"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-rust",children:"fn main() {\n    let v = vec![1, 2, 3, 4, 5];\n\n    // \u4e0d\u591f\u9ad8\u6548\n    let temp: Vec<_> = v.iter().filter(|&&x| x > 2).collect();\n    let result: Vec<_> = temp.iter().map(|&x| x * 2).collect();\n\n    // \u66f4\u597d\uff1a\u4e00\u6b21\u6027\u5904\u7406\n    let result: Vec<_> = v.iter()\n        .filter(|&&x| x > 2)\n        .map(|x| x * 2)\n        .collect();\n}\n"})}),"\n",(0,i.jsx)(e.h3,{id:"3-\u95ed\u5305\u6355\u83b7\u8fc7\u591a",children:"3. \u95ed\u5305\u6355\u83b7\u8fc7\u591a"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-rust",children:'fn main() {\n    let data = vec![1, 2, 3];\n    let extra = String::from("extra");\n\n    // \u4e0d\u597d\uff1a\u6355\u83b7\u4e86\u6574\u4e2a data\n    let closure = || {\n        println!("{}", data.len());\n        println!("{}", extra);\n    };\n\n    // \u597d\uff1a\u53ea\u6355\u83b7\u9700\u8981\u7684\n    let len = data.len();\n    let closure = || {\n        println!("{}", len);\n        println!("{}", extra);\n    };\n}\n'})}),"\n",(0,i.jsx)(e.h2,{id:"\u603b\u7ed3",children:"\u603b\u7ed3"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u2705 \u95ed\u5305\u63d0\u4f9b\u4e86\u7075\u6d3b\u7684\u51fd\u6570\u62bd\u8c61"}),"\n",(0,i.jsx)(e.li,{children:"\u2705 \u4e09\u79cd\u95ed\u5305 trait\uff1aFn\u3001FnMut\u3001FnOnce"}),"\n",(0,i.jsx)(e.li,{children:"\u2705 \u8fed\u4ee3\u5668\u662f\u96f6\u6210\u672c\u62bd\u8c61"}),"\n",(0,i.jsx)(e.li,{children:"\u2705 \u94fe\u5f0f\u8c03\u7528\u63d0\u9ad8\u4ee3\u7801\u53ef\u8bfb\u6027"}),"\n",(0,i.jsx)(e.li,{children:"\u2705 \u60f0\u6027\u6c42\u503c\u63d0\u5347\u6027\u80fd"}),"\n",(0,i.jsx)(e.li,{children:"\u2705 \u4f18\u5148\u4f7f\u7528\u8fed\u4ee3\u5668\u800c\u975e for \u5faa\u73af"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u638c\u63e1\u95ed\u5305\u548c\u8fed\u4ee3\u5668\uff0c\u80fd\u8ba9\u4f60\u7684 Rust \u4ee3\u7801\u66f4\u52a0\u4f18\u96c5\u548c\u9ad8\u6548\uff01"})]})}function u(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(o,{...n})}):o(n)}}}]);