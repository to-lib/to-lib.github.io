"use strict";(globalThis.webpackChunkto_lib_github_io=globalThis.webpackChunkto_lib_github_io||[]).push([[6432],{32827:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>l,contentTitle:()=>i,default:()=>h,frontMatter:()=>s,metadata:()=>c,toc:()=>a});const c=JSON.parse('{"id":"linux/docker-basics","title":"Docker \u57fa\u7840","description":"Docker \u662f\u4e00\u4e2a\u5f00\u6e90\u7684\u5bb9\u5668\u5316\u5e73\u53f0\uff0c\u53ef\u4ee5\u5c06\u5e94\u7528\u7a0b\u5e8f\u53ca\u5176\u4f9d\u8d56\u6253\u5305\u5230\u4e00\u4e2a\u53ef\u79fb\u690d\u7684\u5bb9\u5668\u4e2d\u3002","source":"@site/docs/linux/docker-basics.md","sourceDirName":"linux","slug":"/linux/docker-basics","permalink":"/docs/linux/docker-basics","draft":false,"unlisted":false,"editUrl":"https://github.com/to-lib/to-lib.github.io/tree/main/docs/linux/docker-basics.md","tags":[],"version":"current","sidebarPosition":15,"frontMatter":{"sidebar_position":15,"title":"Docker \u57fa\u7840"},"sidebar":"linux","previous":{"title":"\u6545\u969c\u6392\u67e5","permalink":"/docs/linux/troubleshooting"},"next":{"title":"\u5feb\u901f\u53c2\u8003","permalink":"/docs/linux/quick-reference"}}');var o=r(22714),d=r(48885);const s={sidebar_position:15,title:"Docker \u57fa\u7840"},i="Docker \u5bb9\u5668\u57fa\u7840",l={},a=[{value:"Docker \u6982\u8ff0",id:"docker-\u6982\u8ff0",level:2},{value:"\u4ec0\u4e48\u662f\u5bb9\u5668",id:"\u4ec0\u4e48\u662f\u5bb9\u5668",level:3},{value:"\u5bb9\u5668 vs \u865a\u62df\u673a",id:"\u5bb9\u5668-vs-\u865a\u62df\u673a",level:3},{value:"\u5b89\u88c5 Docker",id:"\u5b89\u88c5-docker",level:2},{value:"Ubuntu/Debian",id:"ubuntudebian",level:3},{value:"CentOS/RHEL",id:"centosrhel",level:3},{value:"\u9a8c\u8bc1\u5b89\u88c5",id:"\u9a8c\u8bc1\u5b89\u88c5",level:3},{value:"\u955c\u50cf\u7ba1\u7406",id:"\u955c\u50cf\u7ba1\u7406",level:2},{value:"\u955c\u50cf\u64cd\u4f5c",id:"\u955c\u50cf\u64cd\u4f5c",level:3},{value:"\u955c\u50cf\u52a0\u901f",id:"\u955c\u50cf\u52a0\u901f",level:3},{value:"\u6784\u5efa\u955c\u50cf",id:"\u6784\u5efa\u955c\u50cf",level:3},{value:"\u5bb9\u5668\u64cd\u4f5c",id:"\u5bb9\u5668\u64cd\u4f5c",level:2},{value:"\u8fd0\u884c\u5bb9\u5668",id:"\u8fd0\u884c\u5bb9\u5668",level:3},{value:"\u5bb9\u5668\u7ba1\u7406",id:"\u5bb9\u5668\u7ba1\u7406",level:3},{value:"\u5bb9\u5668\u4ea4\u4e92",id:"\u5bb9\u5668\u4ea4\u4e92",level:3},{value:"\u6570\u636e\u7ba1\u7406",id:"\u6570\u636e\u7ba1\u7406",level:2},{value:"\u6570\u636e\u5377",id:"\u6570\u636e\u5377",level:3},{value:"\u6302\u8f7d\u7c7b\u578b",id:"\u6302\u8f7d\u7c7b\u578b",level:3},{value:"\u7f51\u7edc\u7ba1\u7406",id:"\u7f51\u7edc\u7ba1\u7406",level:2},{value:"\u7f51\u7edc\u64cd\u4f5c",id:"\u7f51\u7edc\u64cd\u4f5c",level:3},{value:"\u7f51\u7edc\u7c7b\u578b",id:"\u7f51\u7edc\u7c7b\u578b",level:3},{value:"\u5bb9\u5668\u95f4\u901a\u4fe1",id:"\u5bb9\u5668\u95f4\u901a\u4fe1",level:3},{value:"Docker Compose",id:"docker-compose",level:2},{value:"\u5b89\u88c5 Docker Compose",id:"\u5b89\u88c5-docker-compose",level:3},{value:"docker-compose.yml \u793a\u4f8b",id:"docker-composeyml-\u793a\u4f8b",level:3},{value:"Compose \u547d\u4ee4",id:"compose-\u547d\u4ee4",level:3},{value:"\u5e38\u7528\u547d\u4ee4\u901f\u67e5",id:"\u5e38\u7528\u547d\u4ee4\u901f\u67e5",level:2},{value:"\u955c\u50cf\u76f8\u5173",id:"\u955c\u50cf\u76f8\u5173",level:3},{value:"\u5bb9\u5668\u76f8\u5173",id:"\u5bb9\u5668\u76f8\u5173",level:3},{value:"\u6e05\u7406\u547d\u4ee4",id:"\u6e05\u7406\u547d\u4ee4",level:3},{value:"\u6700\u4f73\u5b9e\u8df5",id:"\u6700\u4f73\u5b9e\u8df5",level:2},{value:"Dockerfile \u4f18\u5316",id:"dockerfile-\u4f18\u5316",level:3},{value:"\u5b89\u5168\u5efa\u8bae",id:"\u5b89\u5168\u5efa\u8bae",level:3},{value:"\u603b\u7ed3",id:"\u603b\u7ed3",level:2}];function t(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mermaid:"mermaid",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.header,{children:(0,o.jsx)(e.h1,{id:"docker-\u5bb9\u5668\u57fa\u7840",children:"Docker \u5bb9\u5668\u57fa\u7840"})}),"\n",(0,o.jsx)(e.p,{children:"Docker \u662f\u4e00\u4e2a\u5f00\u6e90\u7684\u5bb9\u5668\u5316\u5e73\u53f0\uff0c\u53ef\u4ee5\u5c06\u5e94\u7528\u7a0b\u5e8f\u53ca\u5176\u4f9d\u8d56\u6253\u5305\u5230\u4e00\u4e2a\u53ef\u79fb\u690d\u7684\u5bb9\u5668\u4e2d\u3002"}),"\n",(0,o.jsx)(e.h2,{id:"docker-\u6982\u8ff0",children:"Docker \u6982\u8ff0"}),"\n",(0,o.jsx)(e.h3,{id:"\u4ec0\u4e48\u662f\u5bb9\u5668",children:"\u4ec0\u4e48\u662f\u5bb9\u5668"}),"\n",(0,o.jsx)(e.mermaid,{value:"graph TD\n    A[\u7269\u7406\u670d\u52a1\u5668] --\x3e B[\u64cd\u4f5c\u7cfb\u7edf]\n    B --\x3e C[Docker Engine]\n    C --\x3e D[\u5bb9\u56681]\n    C --\x3e E[\u5bb9\u56682]\n    C --\x3e F[\u5bb9\u56683]\n    D --\x3e G[\u5e94\u7528A]\n    E --\x3e H[\u5e94\u7528B]\n    F --\x3e I[\u5e94\u7528C]"}),"\n",(0,o.jsx)(e.h3,{id:"\u5bb9\u5668-vs-\u865a\u62df\u673a",children:"\u5bb9\u5668 vs \u865a\u62df\u673a"}),"\n",(0,o.jsxs)(e.table,{children:[(0,o.jsx)(e.thead,{children:(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.th,{children:"\u7279\u6027"}),(0,o.jsx)(e.th,{children:"\u5bb9\u5668"}),(0,o.jsx)(e.th,{children:"\u865a\u62df\u673a"})]})}),(0,o.jsxs)(e.tbody,{children:[(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:"\u542f\u52a8\u901f\u5ea6"}),(0,o.jsx)(e.td,{children:"\u79d2\u7ea7"}),(0,o.jsx)(e.td,{children:"\u5206\u949f\u7ea7"})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:"\u8d44\u6e90\u5360\u7528"}),(0,o.jsx)(e.td,{children:"\u4f4e"}),(0,o.jsx)(e.td,{children:"\u9ad8"})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:"\u9694\u79bb\u7ea7\u522b"}),(0,o.jsx)(e.td,{children:"\u8fdb\u7a0b\u7ea7"}),(0,o.jsx)(e.td,{children:"\u7cfb\u7edf\u7ea7"})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:"\u955c\u50cf\u5927\u5c0f"}),(0,o.jsx)(e.td,{children:"MB \u7ea7"}),(0,o.jsx)(e.td,{children:"GB \u7ea7"})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:"\u6027\u80fd"}),(0,o.jsx)(e.td,{children:"\u63a5\u8fd1\u539f\u751f"}),(0,o.jsx)(e.td,{children:"\u6709\u635f\u8017"})]})]})]}),"\n",(0,o.jsx)(e.h2,{id:"\u5b89\u88c5-docker",children:"\u5b89\u88c5 Docker"}),"\n",(0,o.jsx)(e.h3,{id:"ubuntudebian",children:"Ubuntu/Debian"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:'# \u66f4\u65b0\u5305\u7d22\u5f15\nsudo apt update\n\n# \u5b89\u88c5\u4f9d\u8d56\nsudo apt install apt-transport-https ca-certificates curl gnupg lsb-release\n\n# \u6dfb\u52a0 Docker \u5b98\u65b9 GPG \u5bc6\u94a5\ncurl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg\n\n# \u6dfb\u52a0 Docker \u4ed3\u5e93\necho "deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null\n\n# \u5b89\u88c5 Docker\nsudo apt update\nsudo apt install docker-ce docker-ce-cli containerd.io\n\n# \u542f\u52a8 Docker\nsudo systemctl start docker\nsudo systemctl enable docker\n\n# \u5c06\u5f53\u524d\u7528\u6237\u6dfb\u52a0\u5230 docker \u7ec4\nsudo usermod -aG docker $USER\n# \u91cd\u65b0\u767b\u5f55\u540e\u751f\u6548\n'})}),"\n",(0,o.jsx)(e.h3,{id:"centosrhel",children:"CentOS/RHEL"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"# \u5b89\u88c5\u4f9d\u8d56\nsudo yum install -y yum-utils\n\n# \u6dfb\u52a0 Docker \u4ed3\u5e93\nsudo yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo\n\n# \u5b89\u88c5 Docker\nsudo yum install docker-ce docker-ce-cli containerd.io\n\n# \u542f\u52a8 Docker\nsudo systemctl start docker\nsudo systemctl enable docker\n"})}),"\n",(0,o.jsx)(e.h3,{id:"\u9a8c\u8bc1\u5b89\u88c5",children:"\u9a8c\u8bc1\u5b89\u88c5"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"# \u67e5\u770b\u7248\u672c\ndocker --version\ndocker version\n\n# \u8fd0\u884c\u6d4b\u8bd5\u5bb9\u5668\ndocker run hello-world\n\n# \u67e5\u770b\u7cfb\u7edf\u4fe1\u606f\ndocker info\n"})}),"\n",(0,o.jsx)(e.h2,{id:"\u955c\u50cf\u7ba1\u7406",children:"\u955c\u50cf\u7ba1\u7406"}),"\n",(0,o.jsx)(e.h3,{id:"\u955c\u50cf\u64cd\u4f5c",children:"\u955c\u50cf\u64cd\u4f5c"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"# \u641c\u7d22\u955c\u50cf\ndocker search nginx\n\n# \u62c9\u53d6\u955c\u50cf\ndocker pull nginx\ndocker pull nginx:1.21\ndocker pull nginx:latest\n\n# \u5217\u51fa\u672c\u5730\u955c\u50cf\ndocker images\ndocker image ls\n\n# \u67e5\u770b\u955c\u50cf\u8be6\u60c5\ndocker inspect nginx\n\n# \u67e5\u770b\u955c\u50cf\u5386\u53f2\ndocker history nginx\n\n# \u5220\u9664\u955c\u50cf\ndocker rmi nginx\ndocker rmi nginx:1.21\ndocker image rm nginx\n\n# \u6e05\u7406\u672a\u4f7f\u7528\u7684\u955c\u50cf\ndocker image prune\ndocker image prune -a  # \u5220\u9664\u6240\u6709\u672a\u4f7f\u7528\u7684\u955c\u50cf\n"})}),"\n",(0,o.jsx)(e.h3,{id:"\u955c\u50cf\u52a0\u901f",children:"\u955c\u50cf\u52a0\u901f"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:'# \u914d\u7f6e\u955c\u50cf\u52a0\u901f\u5668\nsudo vim /etc/docker/daemon.json\n\n{\n  "registry-mirrors": [\n    "https://mirror.ccs.tencentyun.com",\n    "https://docker.mirrors.ustc.edu.cn"\n  ]\n}\n\n# \u91cd\u542f Docker\nsudo systemctl daemon-reload\nsudo systemctl restart docker\n'})}),"\n",(0,o.jsx)(e.h3,{id:"\u6784\u5efa\u955c\u50cf",children:"\u6784\u5efa\u955c\u50cf"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-dockerfile",children:'# Dockerfile \u793a\u4f8b\nFROM ubuntu:20.04\n\n# \u8bbe\u7f6e\u5de5\u4f5c\u76ee\u5f55\nWORKDIR /app\n\n# \u590d\u5236\u6587\u4ef6\nCOPY . .\n\n# \u5b89\u88c5\u4f9d\u8d56\nRUN apt-get update && apt-get install -y python3 python3-pip \\\n    && pip3 install -r requirements.txt \\\n    && apt-get clean\n\n# \u66b4\u9732\u7aef\u53e3\nEXPOSE 8080\n\n# \u542f\u52a8\u547d\u4ee4\nCMD ["python3", "app.py"]\n'})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"# \u6784\u5efa\u955c\u50cf\ndocker build -t myapp:1.0 .\ndocker build -t myapp:latest -f Dockerfile.prod .\n\n# \u6807\u8bb0\u955c\u50cf\ndocker tag myapp:1.0 myregistry/myapp:1.0\n\n# \u63a8\u9001\u955c\u50cf\ndocker push myregistry/myapp:1.0\n"})}),"\n",(0,o.jsx)(e.h2,{id:"\u5bb9\u5668\u64cd\u4f5c",children:"\u5bb9\u5668\u64cd\u4f5c"}),"\n",(0,o.jsx)(e.h3,{id:"\u8fd0\u884c\u5bb9\u5668",children:"\u8fd0\u884c\u5bb9\u5668"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"# \u57fa\u672c\u8fd0\u884c\ndocker run nginx\n\n# \u540e\u53f0\u8fd0\u884c\ndocker run -d nginx\n\n# \u6307\u5b9a\u540d\u79f0\ndocker run -d --name my-nginx nginx\n\n# \u7aef\u53e3\u6620\u5c04\ndocker run -d -p 8080:80 nginx\ndocker run -d -p 127.0.0.1:8080:80 nginx\n\n# \u6302\u8f7d\u5377\ndocker run -d -v /host/path:/container/path nginx\ndocker run -d -v myvolume:/data nginx\n\n# \u73af\u5883\u53d8\u91cf\ndocker run -d -e MYSQL_ROOT_PASSWORD=password mysql\n\n# \u8d44\u6e90\u9650\u5236\ndocker run -d --memory=512m --cpus=1 nginx\n\n# \u7f51\u7edc\u8bbe\u7f6e\ndocker run -d --network=mynet nginx\n\n# \u4ea4\u4e92\u5f0f\u8fd0\u884c\ndocker run -it ubuntu /bin/bash\ndocker run -it --rm ubuntu /bin/bash  # \u9000\u51fa\u540e\u81ea\u52a8\u5220\u9664\n"})}),"\n",(0,o.jsx)(e.h3,{id:"\u5bb9\u5668\u7ba1\u7406",children:"\u5bb9\u5668\u7ba1\u7406"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"# \u5217\u51fa\u5bb9\u5668\ndocker ps           # \u8fd0\u884c\u4e2d\u7684\u5bb9\u5668\ndocker ps -a        # \u6240\u6709\u5bb9\u5668\ndocker ps -q        # \u53ea\u663e\u793aID\n\n# \u542f\u52a8/\u505c\u6b62/\u91cd\u542f\ndocker start container_name\ndocker stop container_name\ndocker restart container_name\n\n# \u6682\u505c/\u6062\u590d\ndocker pause container_name\ndocker unpause container_name\n\n# \u5220\u9664\u5bb9\u5668\ndocker rm container_name\ndocker rm -f container_name       # \u5f3a\u5236\u5220\u9664\u8fd0\u884c\u4e2d\u7684\u5bb9\u5668\ndocker rm $(docker ps -aq)        # \u5220\u9664\u6240\u6709\u5bb9\u5668\n\n# \u6e05\u7406\u5df2\u505c\u6b62\u7684\u5bb9\u5668\ndocker container prune\n"})}),"\n",(0,o.jsx)(e.h3,{id:"\u5bb9\u5668\u4ea4\u4e92",children:"\u5bb9\u5668\u4ea4\u4e92"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"# \u8fdb\u5165\u8fd0\u884c\u4e2d\u7684\u5bb9\u5668\ndocker exec -it container_name /bin/bash\ndocker exec -it container_name sh\n\n# \u6267\u884c\u547d\u4ee4\ndocker exec container_name ls -la\ndocker exec -u root container_name whoami\n\n# \u67e5\u770b\u65e5\u5fd7\ndocker logs container_name\ndocker logs -f container_name         # \u5b9e\u65f6\u67e5\u770b\ndocker logs --tail 100 container_name # \u6700\u540e100\u884c\ndocker logs --since 1h container_name # \u6700\u8fd11\u5c0f\u65f6\n\n# \u67e5\u770b\u8d44\u6e90\u4f7f\u7528\ndocker stats\ndocker stats container_name\n\n# \u67e5\u770b\u5bb9\u5668\u8be6\u60c5\ndocker inspect container_name\n\n# \u67e5\u770b\u7aef\u53e3\u6620\u5c04\ndocker port container_name\n\n# \u67e5\u770b\u8fdb\u7a0b\ndocker top container_name\n\n# \u590d\u5236\u6587\u4ef6\ndocker cp container_name:/path/file /host/path\ndocker cp /host/file container_name:/path/\n"})}),"\n",(0,o.jsx)(e.h2,{id:"\u6570\u636e\u7ba1\u7406",children:"\u6570\u636e\u7ba1\u7406"}),"\n",(0,o.jsx)(e.h3,{id:"\u6570\u636e\u5377",children:"\u6570\u636e\u5377"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"# \u521b\u5efa\u5377\ndocker volume create myvolume\n\n# \u5217\u51fa\u5377\ndocker volume ls\n\n# \u67e5\u770b\u5377\u8be6\u60c5\ndocker volume inspect myvolume\n\n# \u5220\u9664\u5377\ndocker volume rm myvolume\n\n# \u6e05\u7406\u672a\u4f7f\u7528\u7684\u5377\ndocker volume prune\n\n# \u4f7f\u7528\u5377\ndocker run -d -v myvolume:/data nginx\n"})}),"\n",(0,o.jsx)(e.h3,{id:"\u6302\u8f7d\u7c7b\u578b",children:"\u6302\u8f7d\u7c7b\u578b"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"# \u547d\u540d\u5377\uff08\u63a8\u8350\uff09\ndocker run -d -v myvolume:/app/data nginx\n\n# \u7ed1\u5b9a\u6302\u8f7d\ndocker run -d -v /host/path:/container/path nginx\n\n# \u53ea\u8bfb\u6302\u8f7d\ndocker run -d -v /host/path:/container/path:ro nginx\n\n# tmpfs \u6302\u8f7d\uff08\u5185\u5b58\uff09\ndocker run -d --tmpfs /tmp nginx\n"})}),"\n",(0,o.jsx)(e.h2,{id:"\u7f51\u7edc\u7ba1\u7406",children:"\u7f51\u7edc\u7ba1\u7406"}),"\n",(0,o.jsx)(e.h3,{id:"\u7f51\u7edc\u64cd\u4f5c",children:"\u7f51\u7edc\u64cd\u4f5c"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"# \u5217\u51fa\u7f51\u7edc\ndocker network ls\n\n# \u521b\u5efa\u7f51\u7edc\ndocker network create mynet\ndocker network create --driver bridge mynet\n\n# \u67e5\u770b\u7f51\u7edc\u8be6\u60c5\ndocker network inspect mynet\n\n# \u5220\u9664\u7f51\u7edc\ndocker network rm mynet\n\n# \u8fde\u63a5\u5bb9\u5668\u5230\u7f51\u7edc\ndocker network connect mynet container_name\n\n# \u65ad\u5f00\u5bb9\u5668\u4e0e\u7f51\u7edc\ndocker network disconnect mynet container_name\n"})}),"\n",(0,o.jsx)(e.h3,{id:"\u7f51\u7edc\u7c7b\u578b",children:"\u7f51\u7edc\u7c7b\u578b"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"# bridge\uff08\u9ed8\u8ba4\uff09- \u5bb9\u5668\u95f4\u901a\u4fe1\ndocker network create --driver bridge mybridge\n\n# host - \u4f7f\u7528\u4e3b\u673a\u7f51\u7edc\ndocker run --network=host nginx\n\n# none - \u65e0\u7f51\u7edc\ndocker run --network=none nginx\n\n# overlay - \u8de8\u4e3b\u673a\u901a\u4fe1\uff08Swarm\uff09\ndocker network create --driver overlay myoverlay\n"})}),"\n",(0,o.jsx)(e.h3,{id:"\u5bb9\u5668\u95f4\u901a\u4fe1",children:"\u5bb9\u5668\u95f4\u901a\u4fe1"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"# \u521b\u5efa\u7f51\u7edc\ndocker network create app-net\n\n# \u8fd0\u884c\u5bb9\u5668\u5e76\u52a0\u5165\u7f51\u7edc\ndocker run -d --name db --network app-net mysql\ndocker run -d --name web --network app-net nginx\n\n# \u5bb9\u5668\u53ef\u901a\u8fc7\u540d\u79f0\u4e92\u76f8\u8bbf\u95ee\n# \u5728 web \u5bb9\u5668\u4e2d\u53ef\u4ee5\u8bbf\u95ee db:3306\n"})}),"\n",(0,o.jsx)(e.h2,{id:"docker-compose",children:"Docker Compose"}),"\n",(0,o.jsx)(e.h3,{id:"\u5b89\u88c5-docker-compose",children:"\u5b89\u88c5 Docker Compose"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:'# \u4e0b\u8f7d Docker Compose\nsudo curl -L "https://github.com/docker/compose/releases/latest/download/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose\n\n# \u6dfb\u52a0\u6267\u884c\u6743\u9650\nsudo chmod +x /usr/local/bin/docker-compose\n\n# \u9a8c\u8bc1\u5b89\u88c5\ndocker-compose --version\n'})}),"\n",(0,o.jsx)(e.h3,{id:"docker-composeyml-\u793a\u4f8b",children:"docker-compose.yml \u793a\u4f8b"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-yaml",children:'version: "3.8"\n\nservices:\n  web:\n    build: .\n    ports:\n      - "8080:80"\n    volumes:\n      - ./app:/app\n    environment:\n      - NODE_ENV=production\n    depends_on:\n      - db\n    networks:\n      - app-net\n\n  db:\n    image: mysql:8.0\n    environment:\n      MYSQL_ROOT_PASSWORD: password\n      MYSQL_DATABASE: myapp\n    volumes:\n      - db-data:/var/lib/mysql\n    networks:\n      - app-net\n\nvolumes:\n  db-data:\n\nnetworks:\n  app-net:\n'})}),"\n",(0,o.jsx)(e.h3,{id:"compose-\u547d\u4ee4",children:"Compose \u547d\u4ee4"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"# \u542f\u52a8\u670d\u52a1\ndocker-compose up\ndocker-compose up -d        # \u540e\u53f0\u8fd0\u884c\ndocker-compose up --build   # \u91cd\u65b0\u6784\u5efa\n\n# \u505c\u6b62\u670d\u52a1\ndocker-compose down\ndocker-compose down -v      # \u540c\u65f6\u5220\u9664\u5377\n\n# \u67e5\u770b\u670d\u52a1\u72b6\u6001\ndocker-compose ps\n\n# \u67e5\u770b\u65e5\u5fd7\ndocker-compose logs\ndocker-compose logs -f web\n\n# \u6267\u884c\u547d\u4ee4\ndocker-compose exec web bash\n\n# \u6269\u5c55\u670d\u52a1\ndocker-compose up -d --scale web=3\n\n# \u91cd\u542f\u670d\u52a1\ndocker-compose restart\ndocker-compose restart web\n"})}),"\n",(0,o.jsx)(e.h2,{id:"\u5e38\u7528\u547d\u4ee4\u901f\u67e5",children:"\u5e38\u7528\u547d\u4ee4\u901f\u67e5"}),"\n",(0,o.jsx)(e.h3,{id:"\u955c\u50cf\u76f8\u5173",children:"\u955c\u50cf\u76f8\u5173"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"docker images                    # \u5217\u51fa\u955c\u50cf\ndocker pull image:tag            # \u62c9\u53d6\u955c\u50cf\ndocker build -t name:tag .       # \u6784\u5efa\u955c\u50cf\ndocker push name:tag             # \u63a8\u9001\u955c\u50cf\ndocker rmi image                 # \u5220\u9664\u955c\u50cf\ndocker save -o file.tar image    # \u5bfc\u51fa\u955c\u50cf\ndocker load -i file.tar          # \u5bfc\u5165\u955c\u50cf\n"})}),"\n",(0,o.jsx)(e.h3,{id:"\u5bb9\u5668\u76f8\u5173",children:"\u5bb9\u5668\u76f8\u5173"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"docker run -d -p 80:80 image     # \u8fd0\u884c\u5bb9\u5668\ndocker ps                        # \u5217\u51fa\u5bb9\u5668\ndocker start/stop/restart name   # \u7ba1\u7406\u5bb9\u5668\ndocker rm name                   # \u5220\u9664\u5bb9\u5668\ndocker exec -it name bash        # \u8fdb\u5165\u5bb9\u5668\ndocker logs -f name              # \u67e5\u770b\u65e5\u5fd7\ndocker cp src dest               # \u590d\u5236\u6587\u4ef6\n"})}),"\n",(0,o.jsx)(e.h3,{id:"\u6e05\u7406\u547d\u4ee4",children:"\u6e05\u7406\u547d\u4ee4"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"docker system prune              # \u6e05\u7406\u6240\u6709\u672a\u4f7f\u7528\u8d44\u6e90\ndocker system prune -a           # \u5305\u62ec\u672a\u4f7f\u7528\u7684\u955c\u50cf\ndocker container prune           # \u6e05\u7406\u505c\u6b62\u7684\u5bb9\u5668\ndocker image prune               # \u6e05\u7406\u60ac\u7a7a\u955c\u50cf\ndocker volume prune              # \u6e05\u7406\u672a\u4f7f\u7528\u7684\u5377\ndocker network prune             # \u6e05\u7406\u672a\u4f7f\u7528\u7684\u7f51\u7edc\n"})}),"\n",(0,o.jsx)(e.h2,{id:"\u6700\u4f73\u5b9e\u8df5",children:"\u6700\u4f73\u5b9e\u8df5"}),"\n",(0,o.jsx)(e.h3,{id:"dockerfile-\u4f18\u5316",children:"Dockerfile \u4f18\u5316"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-dockerfile",children:'# \u4f7f\u7528\u5b98\u65b9\u57fa\u7840\u955c\u50cf\nFROM python:3.9-slim\n\n# \u4f7f\u7528 .dockerignore \u6392\u9664\u65e0\u5173\u6587\u4ef6\n# .dockerignore \u5185\u5bb9:\n# .git\n# __pycache__\n# *.pyc\n# node_modules\n\n# \u5408\u5e76 RUN \u547d\u4ee4\u51cf\u5c11\u5c42\u6570\nRUN apt-get update \\\n    && apt-get install -y --no-install-recommends gcc \\\n    && pip install --no-cache-dir requirements.txt \\\n    && apt-get remove -y gcc \\\n    && apt-get autoremove -y \\\n    && rm -rf /var/lib/apt/lists/*\n\n# \u4f7f\u7528\u975e root \u7528\u6237\nRUN useradd -m myuser\nUSER myuser\n\n# \u4f7f\u7528\u591a\u9636\u6bb5\u6784\u5efa\nFROM golang:1.17 AS builder\nWORKDIR /app\nCOPY . .\nRUN go build -o main .\n\nFROM alpine:latest\nCOPY --from=builder /app/main /main\nCMD ["/main"]\n'})}),"\n",(0,o.jsx)(e.h3,{id:"\u5b89\u5168\u5efa\u8bae",children:"\u5b89\u5168\u5efa\u8bae"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-bash",children:"# \u4f7f\u7528\u7279\u5b9a\u7248\u672c\u6807\u7b7e\nFROM nginx:1.21.0  # \u800c\u4e0d\u662f nginx:latest\n\n# \u626b\u63cf\u955c\u50cf\u6f0f\u6d1e\ndocker scan myimage\n\n# \u9650\u5236\u5bb9\u5668\u8d44\u6e90\ndocker run --memory=512m --cpus=1 myimage\n\n# \u4f7f\u7528\u53ea\u8bfb\u6587\u4ef6\u7cfb\u7edf\ndocker run --read-only myimage\n\n# \u7981\u7528 root\ndocker run --user 1000:1000 myimage\n"})}),"\n",(0,o.jsx)(e.h2,{id:"\u603b\u7ed3",children:"\u603b\u7ed3"}),"\n",(0,o.jsx)(e.p,{children:"\u672c\u6587\u4ecb\u7ecd\u4e86 Docker \u5bb9\u5668\u57fa\u7840\uff1a"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"\u2705 Docker \u6982\u5ff5\u548c\u5b89\u88c5"}),"\n",(0,o.jsx)(e.li,{children:"\u2705 \u955c\u50cf\u7ba1\u7406\u548c\u6784\u5efa"}),"\n",(0,o.jsx)(e.li,{children:"\u2705 \u5bb9\u5668\u64cd\u4f5c\u548c\u4ea4\u4e92"}),"\n",(0,o.jsx)(e.li,{children:"\u2705 \u6570\u636e\u5377\u548c\u6302\u8f7d"}),"\n",(0,o.jsx)(e.li,{children:"\u2705 \u7f51\u7edc\u7ba1\u7406"}),"\n",(0,o.jsx)(e.li,{children:"\u2705 Docker Compose"}),"\n",(0,o.jsx)(e.li,{children:"\u2705 \u6700\u4f73\u5b9e\u8df5"}),"\n"]}),"\n",(0,o.jsxs)(e.p,{children:["\u7ee7\u7eed\u5b66\u4e60 ",(0,o.jsx)(e.a,{href:"/docs/linux/security",children:"\u7cfb\u7edf\u5b89\u5168"})," \u548c ",(0,o.jsx)(e.a,{href:"/docs/linux/performance-tuning",children:"\u6027\u80fd\u8c03\u4f18"}),"\u3002"]})]})}function h(n={}){const{wrapper:e}={...(0,d.R)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(t,{...n})}):t(n)}},48885:(n,e,r)=>{r.d(e,{R:()=>s,x:()=>i});var c=r(99378);const o={},d=c.createContext(o);function s(n){const e=c.useContext(d);return c.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function i(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:s(n.components),c.createElement(d.Provider,{value:e},n.children)}}}]);