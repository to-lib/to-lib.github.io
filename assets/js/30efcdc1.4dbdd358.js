"use strict";(globalThis.webpackChunkto_lib_github_io=globalThis.webpackChunkto_lib_github_io||[]).push([[50954],{25873:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>s,contentTitle:()=>a,default:()=>m,frontMatter:()=>o,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"ai/llamaindex","title":"\ud83e\udd99 LlamaIndex \u6846\u67b6","description":"LlamaIndex \u662f\u4e13\u6ce8\u4e8e\u6570\u636e\u7d22\u5f15\u548c\u68c0\u7d22\u7684 LLM \u5e94\u7528\u6846\u67b6\uff0c\u7279\u522b\u64c5\u957f RAG \u573a\u666f\u3002\u76f8\u6bd4 LangChain\uff0c\u5b83\u5728\u6570\u636e\u5904\u7406\u548c\u68c0\u7d22\u4f18\u5316\u65b9\u9762\u66f4\u52a0\u4e13\u4e1a\u3002","source":"@site/docs/ai/llamaindex.md","sourceDirName":"ai","slug":"/ai/llamaindex","permalink":"/docs/ai/llamaindex","draft":false,"unlisted":false,"editUrl":"https://github.com/to-lib/to-lib.github.io/tree/main/docs/ai/llamaindex.md","tags":[],"version":"current","sidebarPosition":21,"frontMatter":{"sidebar_position":21,"title":"\ud83e\udd99 LlamaIndex \u6846\u67b6"}}');var t=r(22714),l=r(48885);const o={sidebar_position:21,title:"\ud83e\udd99 LlamaIndex \u6846\u67b6"},a="LlamaIndex \u6846\u67b6",s={},d=[{value:"LlamaIndex vs LangChain",id:"llamaindex-vs-langchain",level:2},{value:"\u5b89\u88c5",id:"\u5b89\u88c5",level:2},{value:"\u5feb\u901f\u5f00\u59cb",id:"\u5feb\u901f\u5f00\u59cb",level:2},{value:"5 \u5206\u949f\u6784\u5efa RAG",id:"5-\u5206\u949f\u6784\u5efa-rag",level:3},{value:"\u6301\u4e45\u5316\u7d22\u5f15",id:"\u6301\u4e45\u5316\u7d22\u5f15",level:3},{value:"\u6838\u5fc3\u6982\u5ff5",id:"\u6838\u5fc3\u6982\u5ff5",level:2},{value:"1. Document \u548c Node",id:"1-document-\u548c-node",level:3},{value:"2. \u7d22\u5f15\u7c7b\u578b",id:"2-\u7d22\u5f15\u7c7b\u578b",level:3},{value:"3. \u68c0\u7d22\u5668",id:"3-\u68c0\u7d22\u5668",level:3},{value:"4. \u67e5\u8be2\u5f15\u64ce",id:"4-\u67e5\u8be2\u5f15\u64ce",level:3},{value:"\u6570\u636e\u52a0\u8f7d\u5668",id:"\u6570\u636e\u52a0\u8f7d\u5668",level:2},{value:"\u5185\u7f6e\u52a0\u8f7d\u5668",id:"\u5185\u7f6e\u52a0\u8f7d\u5668",level:3},{value:"LlamaHub \u52a0\u8f7d\u5668",id:"llamahub-\u52a0\u8f7d\u5668",level:3},{value:"\u81ea\u5b9a\u4e49\u52a0\u8f7d\u5668",id:"\u81ea\u5b9a\u4e49\u52a0\u8f7d\u5668",level:3},{value:"\u9ad8\u7ea7 RAG \u6280\u672f",id:"\u9ad8\u7ea7-rag-\u6280\u672f",level:2},{value:"1. \u67e5\u8be2\u8f6c\u6362",id:"1-\u67e5\u8be2\u8f6c\u6362",level:3},{value:"2. \u91cd\u6392\u5e8f",id:"2-\u91cd\u6392\u5e8f",level:3},{value:"3. \u6df7\u5408\u68c0\u7d22",id:"3-\u6df7\u5408\u68c0\u7d22",level:3},{value:"4. \u5b50\u95ee\u9898\u67e5\u8be2",id:"4-\u5b50\u95ee\u9898\u67e5\u8be2",level:3},{value:"5. \u9012\u5f52\u68c0\u7d22",id:"5-\u9012\u5f52\u68c0\u7d22",level:3},{value:"Chat Engine",id:"chat-engine",level:2},{value:"Agent",id:"agent",level:2},{value:"\u5411\u91cf\u6570\u636e\u5e93\u96c6\u6210",id:"\u5411\u91cf\u6570\u636e\u5e93\u96c6\u6210",level:2},{value:"Chroma",id:"chroma",level:3},{value:"Milvus",id:"milvus",level:3},{value:"\u8bc4\u4f30",id:"\u8bc4\u4f30",level:2},{value:"\u6700\u4f73\u5b9e\u8df5",id:"\u6700\u4f73\u5b9e\u8df5",level:2},{value:"\u5ef6\u4f38\u9605\u8bfb",id:"\u5ef6\u4f38\u9605\u8bfb",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"llamaindex-\u6846\u67b6",children:"LlamaIndex \u6846\u67b6"})}),"\n",(0,t.jsx)(n.p,{children:"LlamaIndex \u662f\u4e13\u6ce8\u4e8e\u6570\u636e\u7d22\u5f15\u548c\u68c0\u7d22\u7684 LLM \u5e94\u7528\u6846\u67b6\uff0c\u7279\u522b\u64c5\u957f RAG \u573a\u666f\u3002\u76f8\u6bd4 LangChain\uff0c\u5b83\u5728\u6570\u636e\u5904\u7406\u548c\u68c0\u7d22\u4f18\u5316\u65b9\u9762\u66f4\u52a0\u4e13\u4e1a\u3002"}),"\n",(0,t.jsx)(n.h2,{id:"llamaindex-vs-langchain",children:"LlamaIndex vs LangChain"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"\u7279\u6027"}),(0,t.jsx)(n.th,{children:"LlamaIndex"}),(0,t.jsx)(n.th,{children:"LangChain"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"\u5b9a\u4f4d"})}),(0,t.jsx)(n.td,{children:"\u6570\u636e\u7d22\u5f15\u4e0e\u68c0\u7d22"}),(0,t.jsx)(n.td,{children:"\u901a\u7528 LLM \u5e94\u7528\u6846\u67b6"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"RAG \u4f18\u5316"})}),(0,t.jsx)(n.td,{children:"\u6df1\u5ea6\u4f18\u5316\uff0c\u5f00\u7bb1\u5373\u7528"}),(0,t.jsx)(n.td,{children:"\u9700\u8981\u66f4\u591a\u914d\u7f6e"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"\u6570\u636e\u8fde\u63a5"})}),(0,t.jsx)(n.td,{children:"\u4e30\u5bcc\u7684\u6570\u636e\u52a0\u8f7d\u5668"}),(0,t.jsx)(n.td,{children:"\u76f8\u5bf9\u8f83\u5c11"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"\u7d22\u5f15\u7c7b\u578b"})}),(0,t.jsx)(n.td,{children:"\u591a\u79cd\u4e13\u4e1a\u7d22\u5f15"}),(0,t.jsx)(n.td,{children:"\u4e3b\u8981\u4f9d\u8d56\u5411\u91cf\u7d22\u5f15"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"\u5b66\u4e60\u66f2\u7ebf"})}),(0,t.jsx)(n.td,{children:"\u76f8\u5bf9\u7b80\u5355"}),(0,t.jsx)(n.td,{children:"\u6982\u5ff5\u8f83\u591a"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"\u7075\u6d3b\u6027"})}),(0,t.jsx)(n.td,{children:"RAG \u573a\u666f\u7075\u6d3b"}),(0,t.jsx)(n.td,{children:"\u901a\u7528\u573a\u666f\u66f4\u7075\u6d3b"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"\u5b89\u88c5",children:"\u5b89\u88c5"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"pip install llama-index\npip install llama-index-llms-openai\npip install llama-index-embeddings-openai\n"})}),"\n",(0,t.jsx)(n.h2,{id:"\u5feb\u901f\u5f00\u59cb",children:"\u5feb\u901f\u5f00\u59cb"}),"\n",(0,t.jsx)(n.h3,{id:"5-\u5206\u949f\u6784\u5efa-rag",children:"5 \u5206\u949f\u6784\u5efa RAG"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'from llama_index.core import VectorStoreIndex, SimpleDirectoryReader\nfrom llama_index.llms.openai import OpenAI\nfrom llama_index.embeddings.openai import OpenAIEmbedding\nfrom llama_index.core import Settings\n\n# \u914d\u7f6e\u6a21\u578b\nSettings.llm = OpenAI(model="gpt-4o", temperature=0)\nSettings.embed_model = OpenAIEmbedding(model="text-embedding-3-small")\n\n# \u52a0\u8f7d\u6587\u6863\ndocuments = SimpleDirectoryReader("./data").load_data()\n\n# \u521b\u5efa\u7d22\u5f15\nindex = VectorStoreIndex.from_documents(documents)\n\n# \u67e5\u8be2\nquery_engine = index.as_query_engine()\nresponse = query_engine.query("\u6587\u6863\u7684\u4e3b\u8981\u5185\u5bb9\u662f\u4ec0\u4e48\uff1f")\nprint(response)\n'})}),"\n",(0,t.jsx)(n.h3,{id:"\u6301\u4e45\u5316\u7d22\u5f15",children:"\u6301\u4e45\u5316\u7d22\u5f15"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'from llama_index.core import StorageContext, load_index_from_storage\n\n# \u4fdd\u5b58\u7d22\u5f15\nindex.storage_context.persist(persist_dir="./storage")\n\n# \u52a0\u8f7d\u7d22\u5f15\nstorage_context = StorageContext.from_defaults(persist_dir="./storage")\nindex = load_index_from_storage(storage_context)\n'})}),"\n",(0,t.jsx)(n.h2,{id:"\u6838\u5fc3\u6982\u5ff5",children:"\u6838\u5fc3\u6982\u5ff5"}),"\n",(0,t.jsx)(n.h3,{id:"1-document-\u548c-node",children:"1. Document \u548c Node"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'from llama_index.core import Document\nfrom llama_index.core.node_parser import SentenceSplitter\n\n# \u521b\u5efa\u6587\u6863\ndoc = Document(\n    text="\u8fd9\u662f\u6587\u6863\u5185\u5bb9...",\n    metadata={"source": "wiki", "author": "\u5f20\u4e09"}\n)\n\n# \u5207\u5206\u4e3a\u8282\u70b9\nparser = SentenceSplitter(chunk_size=1024, chunk_overlap=200)\nnodes = parser.get_nodes_from_documents([doc])\n\nfor node in nodes:\n    print(f"Node ID: {node.node_id}")\n    print(f"Content: {node.text[:100]}...")\n    print(f"Metadata: {node.metadata}")\n'})}),"\n",(0,t.jsx)(n.h3,{id:"2-\u7d22\u5f15\u7c7b\u578b",children:"2. \u7d22\u5f15\u7c7b\u578b"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"from llama_index.core import (\n    VectorStoreIndex,\n    SummaryIndex,\n    TreeIndex,\n    KeywordTableIndex\n)\n\n# \u5411\u91cf\u7d22\u5f15 - \u8bed\u4e49\u641c\u7d22\nvector_index = VectorStoreIndex.from_documents(documents)\n\n# \u6458\u8981\u7d22\u5f15 - \u904d\u5386\u6240\u6709\u8282\u70b9\nsummary_index = SummaryIndex.from_documents(documents)\n\n# \u6811\u5f62\u7d22\u5f15 - \u5c42\u6b21\u5316\u6458\u8981\ntree_index = TreeIndex.from_documents(documents)\n\n# \u5173\u952e\u8bcd\u7d22\u5f15 - \u5173\u952e\u8bcd\u5339\u914d\nkeyword_index = KeywordTableIndex.from_documents(documents)\n"})}),"\n",(0,t.jsx)(n.h3,{id:"3-\u68c0\u7d22\u5668",children:"3. \u68c0\u7d22\u5668"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'from llama_index.core.retrievers import VectorIndexRetriever\n\n# \u57fa\u7840\u68c0\u7d22\u5668\nretriever = index.as_retriever(similarity_top_k=5)\nnodes = retriever.retrieve("\u67e5\u8be2\u5185\u5bb9")\n\n# \u81ea\u5b9a\u4e49\u68c0\u7d22\u5668\nretriever = VectorIndexRetriever(\n    index=index,\n    similarity_top_k=10,\n    filters={"source": "wiki"}  # \u5143\u6570\u636e\u8fc7\u6ee4\n)\n'})}),"\n",(0,t.jsx)(n.h3,{id:"4-\u67e5\u8be2\u5f15\u64ce",children:"4. \u67e5\u8be2\u5f15\u64ce"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'from llama_index.core.query_engine import RetrieverQueryEngine\nfrom llama_index.core.response_synthesizers import get_response_synthesizer\n\n# \u81ea\u5b9a\u4e49\u67e5\u8be2\u5f15\u64ce\nretriever = index.as_retriever(similarity_top_k=5)\nresponse_synthesizer = get_response_synthesizer(\n    response_mode="compact"  # tree_summarize, refine, compact, simple\n)\n\nquery_engine = RetrieverQueryEngine(\n    retriever=retriever,\n    response_synthesizer=response_synthesizer\n)\n\nresponse = query_engine.query("\u95ee\u9898")\n'})}),"\n",(0,t.jsx)(n.h2,{id:"\u6570\u636e\u52a0\u8f7d\u5668",children:"\u6570\u636e\u52a0\u8f7d\u5668"}),"\n",(0,t.jsx)(n.h3,{id:"\u5185\u7f6e\u52a0\u8f7d\u5668",children:"\u5185\u7f6e\u52a0\u8f7d\u5668"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'from llama_index.core import SimpleDirectoryReader\n\n# \u81ea\u52a8\u8bc6\u522b\u6587\u4ef6\u7c7b\u578b\ndocuments = SimpleDirectoryReader(\n    input_dir="./data",\n    recursive=True,\n    required_exts=[".pdf", ".docx", ".txt", ".md"]\n).load_data()\n'})}),"\n",(0,t.jsx)(n.h3,{id:"llamahub-\u52a0\u8f7d\u5668",children:"LlamaHub \u52a0\u8f7d\u5668"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'# \u5b89\u88c5\u7279\u5b9a\u52a0\u8f7d\u5668\n# pip install llama-index-readers-web\n\nfrom llama_index.readers.web import SimpleWebPageReader\n\n# \u7f51\u9875\u52a0\u8f7d\nloader = SimpleWebPageReader()\ndocuments = loader.load_data(urls=["https://example.com"])\n\n# \u66f4\u591a\u52a0\u8f7d\u5668\uff1ahttps://llamahub.ai/\n# - NotionPageReader\n# - SlackReader\n# - GoogleDocsReader\n# - DatabaseReader\n'})}),"\n",(0,t.jsx)(n.h3,{id:"\u81ea\u5b9a\u4e49\u52a0\u8f7d\u5668",children:"\u81ea\u5b9a\u4e49\u52a0\u8f7d\u5668"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"from llama_index.core.readers.base import BaseReader\nfrom llama_index.core import Document\n\nclass CustomReader(BaseReader):\n    def load_data(self, file_path: str) -> list[Document]:\n        with open(file_path, 'r') as f:\n            content = f.read()\n        \n        return [Document(\n            text=content,\n            metadata={\"source\": file_path}\n        )]\n"})}),"\n",(0,t.jsx)(n.h2,{id:"\u9ad8\u7ea7-rag-\u6280\u672f",children:"\u9ad8\u7ea7 RAG \u6280\u672f"}),"\n",(0,t.jsx)(n.h3,{id:"1-\u67e5\u8be2\u8f6c\u6362",children:"1. \u67e5\u8be2\u8f6c\u6362"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'from llama_index.core.indices.query.query_transform import HyDEQueryTransform\nfrom llama_index.core.query_engine import TransformQueryEngine\n\n# HyDE: \u5047\u8bbe\u6587\u6863\u5d4c\u5165\nhyde = HyDEQueryTransform(include_original=True)\nquery_engine = index.as_query_engine()\nhyde_query_engine = TransformQueryEngine(query_engine, hyde)\n\nresponse = hyde_query_engine.query("\u4ec0\u4e48\u662f\u673a\u5668\u5b66\u4e60\uff1f")\n'})}),"\n",(0,t.jsx)(n.h3,{id:"2-\u91cd\u6392\u5e8f",children:"2. \u91cd\u6392\u5e8f"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'from llama_index.core.postprocessor import SentenceTransformerRerank\n\n# \u4f7f\u7528\u91cd\u6392\u5e8f\u6a21\u578b\nreranker = SentenceTransformerRerank(\n    model="cross-encoder/ms-marco-MiniLM-L-6-v2",\n    top_n=3\n)\n\nquery_engine = index.as_query_engine(\n    similarity_top_k=10,\n    node_postprocessors=[reranker]\n)\n'})}),"\n",(0,t.jsx)(n.h3,{id:"3-\u6df7\u5408\u68c0\u7d22",children:"3. \u6df7\u5408\u68c0\u7d22"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'from llama_index.core.retrievers import BM25Retriever\nfrom llama_index.core.retrievers import QueryFusionRetriever\n\n# BM25 \u68c0\u7d22\u5668\nbm25_retriever = BM25Retriever.from_defaults(\n    nodes=nodes,\n    similarity_top_k=5\n)\n\n# \u5411\u91cf\u68c0\u7d22\u5668\nvector_retriever = index.as_retriever(similarity_top_k=5)\n\n# \u878d\u5408\u68c0\u7d22\u5668\nfusion_retriever = QueryFusionRetriever(\n    retrievers=[bm25_retriever, vector_retriever],\n    similarity_top_k=5,\n    num_queries=1,\n    mode="reciprocal_rerank"  # \u5012\u6570\u6392\u540d\u878d\u5408\n)\n'})}),"\n",(0,t.jsx)(n.h3,{id:"4-\u5b50\u95ee\u9898\u67e5\u8be2",children:"4. \u5b50\u95ee\u9898\u67e5\u8be2"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'from llama_index.core.tools import QueryEngineTool\nfrom llama_index.core.query_engine import SubQuestionQueryEngine\n\n# \u521b\u5efa\u591a\u4e2a\u67e5\u8be2\u5f15\u64ce\u5de5\u5177\ntools = [\n    QueryEngineTool.from_defaults(\n        query_engine=index1.as_query_engine(),\n        name="financial_data",\n        description="\u8d22\u52a1\u6570\u636e\u67e5\u8be2"\n    ),\n    QueryEngineTool.from_defaults(\n        query_engine=index2.as_query_engine(),\n        name="product_info",\n        description="\u4ea7\u54c1\u4fe1\u606f\u67e5\u8be2"\n    )\n]\n\n# \u5b50\u95ee\u9898\u67e5\u8be2\u5f15\u64ce\nquery_engine = SubQuestionQueryEngine.from_defaults(\n    query_engine_tools=tools\n)\n\n# \u590d\u6742\u95ee\u9898\u4f1a\u88ab\u5206\u89e3\u4e3a\u5b50\u95ee\u9898\nresponse = query_engine.query("\u6bd4\u8f83\u4ea7\u54c1A\u548c\u4ea7\u54c1B\u7684\u8d22\u52a1\u8868\u73b0")\n'})}),"\n",(0,t.jsx)(n.h3,{id:"5-\u9012\u5f52\u68c0\u7d22",children:"5. \u9012\u5f52\u68c0\u7d22"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'from llama_index.core.retrievers import RecursiveRetriever\nfrom llama_index.core.query_engine import RetrieverQueryEngine\n\n# \u6587\u6863 -> \u6458\u8981 -> \u8be6\u7ec6\u5185\u5bb9\u7684\u9012\u5f52\u68c0\u7d22\nrecursive_retriever = RecursiveRetriever(\n    "vector",\n    retriever_dict={"vector": vector_retriever},\n    node_dict=all_nodes_dict,\n    verbose=True\n)\n\nquery_engine = RetrieverQueryEngine.from_args(recursive_retriever)\n'})}),"\n",(0,t.jsx)(n.h2,{id:"chat-engine",children:"Chat Engine"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'from llama_index.core.memory import ChatMemoryBuffer\n\n# \u521b\u5efa\u804a\u5929\u5f15\u64ce\nmemory = ChatMemoryBuffer.from_defaults(token_limit=3000)\n\nchat_engine = index.as_chat_engine(\n    chat_mode="context",  # context, condense_question, react\n    memory=memory,\n    system_prompt="\u4f60\u662f\u4e00\u4e2a\u6709\u5e2e\u52a9\u7684\u52a9\u624b\u3002"\n)\n\n# \u591a\u8f6e\u5bf9\u8bdd\nresponse = chat_engine.chat("\u4f60\u597d")\nprint(response)\n\nresponse = chat_engine.chat("\u7ee7\u7eed\u4e0a\u9762\u7684\u8bdd\u9898")\nprint(response)\n\n# \u91cd\u7f6e\u5bf9\u8bdd\nchat_engine.reset()\n'})}),"\n",(0,t.jsx)(n.h2,{id:"agent",children:"Agent"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'from llama_index.core.agent import ReActAgent\nfrom llama_index.core.tools import FunctionTool\n\n# \u5b9a\u4e49\u5de5\u5177\ndef multiply(a: int, b: int) -> int:\n    """\u4e24\u6570\u76f8\u4e58"""\n    return a * b\n\ndef add(a: int, b: int) -> int:\n    """\u4e24\u6570\u76f8\u52a0"""\n    return a + b\n\nmultiply_tool = FunctionTool.from_defaults(fn=multiply)\nadd_tool = FunctionTool.from_defaults(fn=add)\n\n# \u521b\u5efa Agent\nagent = ReActAgent.from_tools(\n    tools=[multiply_tool, add_tool],\n    llm=Settings.llm,\n    verbose=True\n)\n\nresponse = agent.chat("\u8ba1\u7b97 (3 + 5) * 2")\nprint(response)\n'})}),"\n",(0,t.jsx)(n.h2,{id:"\u5411\u91cf\u6570\u636e\u5e93\u96c6\u6210",children:"\u5411\u91cf\u6570\u636e\u5e93\u96c6\u6210"}),"\n",(0,t.jsx)(n.h3,{id:"chroma",children:"Chroma"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import chromadb\nfrom llama_index.vector_stores.chroma import ChromaVectorStore\nfrom llama_index.core import VectorStoreIndex, StorageContext\n\n# \u521b\u5efa Chroma \u5ba2\u6237\u7aef\nchroma_client = chromadb.PersistentClient(path="./chroma_db")\nchroma_collection = chroma_client.get_or_create_collection("documents")\n\n# \u521b\u5efa\u5411\u91cf\u5b58\u50a8\nvector_store = ChromaVectorStore(chroma_collection=chroma_collection)\nstorage_context = StorageContext.from_defaults(vector_store=vector_store)\n\n# \u521b\u5efa\u7d22\u5f15\nindex = VectorStoreIndex.from_documents(\n    documents,\n    storage_context=storage_context\n)\n'})}),"\n",(0,t.jsx)(n.h3,{id:"milvus",children:"Milvus"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'from llama_index.vector_stores.milvus import MilvusVectorStore\n\nvector_store = MilvusVectorStore(\n    uri="http://localhost:19530",\n    collection_name="documents",\n    dim=1536\n)\n\nstorage_context = StorageContext.from_defaults(vector_store=vector_store)\nindex = VectorStoreIndex.from_documents(documents, storage_context=storage_context)\n'})}),"\n",(0,t.jsx)(n.h2,{id:"\u8bc4\u4f30",children:"\u8bc4\u4f30"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'from llama_index.core.evaluation import (\n    FaithfulnessEvaluator,\n    RelevancyEvaluator,\n    CorrectnessEvaluator\n)\n\n# \u5fe0\u5b9e\u5ea6\u8bc4\u4f30\nfaithfulness_evaluator = FaithfulnessEvaluator()\nresult = faithfulness_evaluator.evaluate_response(\n    query="\u95ee\u9898",\n    response=response\n)\nprint(f"\u5fe0\u5b9e\u5ea6: {result.passing}")\n\n# \u76f8\u5173\u6027\u8bc4\u4f30\nrelevancy_evaluator = RelevancyEvaluator()\nresult = relevancy_evaluator.evaluate_response(\n    query="\u95ee\u9898",\n    response=response\n)\nprint(f"\u76f8\u5173\u6027: {result.passing}")\n'})}),"\n",(0,t.jsx)(n.h2,{id:"\u6700\u4f73\u5b9e\u8df5",children:"\u6700\u4f73\u5b9e\u8df5"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u9009\u62e9\u5408\u9002\u7684\u7d22\u5f15"}),"\uff1a\u7b80\u5355\u573a\u666f\u7528 VectorStoreIndex\uff0c\u590d\u6742\u573a\u666f\u8003\u8651\u7ec4\u5408\u7d22\u5f15"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u4f18\u5316\u5207\u5206\u7b56\u7565"}),"\uff1a\u6839\u636e\u6587\u6863\u7c7b\u578b\u8c03\u6574 chunk_size \u548c overlap"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u4f7f\u7528\u91cd\u6392\u5e8f"}),"\uff1a\u63d0\u9ad8\u68c0\u7d22\u7cbe\u5ea6"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u6dfb\u52a0\u5143\u6570\u636e"}),"\uff1a\u4fbf\u4e8e\u8fc7\u6ee4\u548c\u8ffd\u6eaf"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u6301\u4e45\u5316\u7d22\u5f15"}),"\uff1a\u907f\u514d\u91cd\u590d\u6784\u5efa"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"\u5ef6\u4f38\u9605\u8bfb",children:"\u5ef6\u4f38\u9605\u8bfb"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://docs.llamaindex.ai/",children:"LlamaIndex \u5b98\u65b9\u6587\u6863"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://llamahub.ai/",children:"LlamaHub \u6570\u636e\u52a0\u8f7d\u5668"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/run-llama/llama_index",children:"LlamaIndex GitHub"})}),"\n"]})]})}function m(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},48885:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>a});var i=r(99378);const t={},l=i.createContext(t);function o(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);