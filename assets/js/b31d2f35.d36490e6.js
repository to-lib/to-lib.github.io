"use strict";(globalThis.webpackChunkto_lib_github_io=globalThis.webpackChunkto_lib_github_io||[]).push([[82533],{7360:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>a,contentTitle:()=>d,default:()=>t,frontMatter:()=>c,metadata:()=>l,toc:()=>h});const l=JSON.parse('{"id":"springcloud-alibaba/faq","title":"\u5e38\u89c1\u95ee\u9898\u89e3\u7b54 (FAQ)","description":"[!NOTE]","source":"@site/docs/springcloud-alibaba/faq.md","sourceDirName":"springcloud-alibaba","slug":"/springcloud-alibaba/faq","permalink":"/docs/springcloud-alibaba/faq","draft":false,"unlisted":false,"editUrl":"https://github.com/to-lib/to-lib.github.io/tree/main/docs/springcloud-alibaba/faq.md","tags":[],"version":"current","sidebarPosition":14,"frontMatter":{"id":"faq","title":"\u5e38\u89c1\u95ee\u9898\u89e3\u7b54 (FAQ)","sidebar_label":"FAQ","sidebar_position":14},"sidebar":"springcloudAlibaba","previous":{"title":"\u5feb\u901f\u53c2\u8003","permalink":"/docs/springcloud-alibaba/quick-reference"}}');var r=s(22714),i=s(48885);const c={id:"faq",title:"\u5e38\u89c1\u95ee\u9898\u89e3\u7b54 (FAQ)",sidebar_label:"FAQ",sidebar_position:14},d="Spring Cloud Alibaba \u5e38\u89c1\u95ee\u9898\u89e3\u7b54",a={},h=[{value:"Nacos \u5e38\u89c1\u95ee\u9898",id:"nacos-\u5e38\u89c1\u95ee\u9898",level:2},{value:"1. \u670d\u52a1\u6ce8\u518c\u5931\u8d25",id:"1-\u670d\u52a1\u6ce8\u518c\u5931\u8d25",level:3},{value:"2. \u914d\u7f6e\u4e0d\u751f\u6548",id:"2-\u914d\u7f6e\u4e0d\u751f\u6548",level:3},{value:"3. Nacos \u96c6\u7fa4\u540c\u6b65\u95ee\u9898",id:"3-nacos-\u96c6\u7fa4\u540c\u6b65\u95ee\u9898",level:3},{value:"Sentinel \u5e38\u89c1\u95ee\u9898",id:"sentinel-\u5e38\u89c1\u95ee\u9898",level:2},{value:"4. \u63a7\u5236\u53f0\u770b\u4e0d\u5230\u5e94\u7528",id:"4-\u63a7\u5236\u53f0\u770b\u4e0d\u5230\u5e94\u7528",level:3},{value:"5. \u9650\u6d41\u89c4\u5219\u4e0d\u751f\u6548",id:"5-\u9650\u6d41\u89c4\u5219\u4e0d\u751f\u6548",level:3},{value:"6. \u89c4\u5219\u6301\u4e45\u5316\u540e\u542f\u52a8\u5931\u8d25",id:"6-\u89c4\u5219\u6301\u4e45\u5316\u540e\u542f\u52a8\u5931\u8d25",level:3},{value:"Seata \u5e38\u89c1\u95ee\u9898",id:"seata-\u5e38\u89c1\u95ee\u9898",level:2},{value:"7. \u4e8b\u52a1\u4e0d\u56de\u6eda",id:"7-\u4e8b\u52a1\u4e0d\u56de\u6eda",level:3},{value:"8. Seata Server \u8fde\u63a5\u5931\u8d25",id:"8-seata-server-\u8fde\u63a5\u5931\u8d25",level:3},{value:"RocketMQ \u5e38\u89c1\u95ee\u9898",id:"rocketmq-\u5e38\u89c1\u95ee\u9898",level:2},{value:"9. \u6d88\u606f\u53d1\u9001\u5931\u8d25",id:"9-\u6d88\u606f\u53d1\u9001\u5931\u8d25",level:3},{value:"10. \u6d88\u606f\u91cd\u590d\u6d88\u8d39",id:"10-\u6d88\u606f\u91cd\u590d\u6d88\u8d39",level:3},{value:"11. \u6d88\u606f\u5806\u79ef",id:"11-\u6d88\u606f\u5806\u79ef",level:3},{value:"Dubbo \u5e38\u89c1\u95ee\u9898",id:"dubbo-\u5e38\u89c1\u95ee\u9898",level:2},{value:"12. \u670d\u52a1\u8c03\u7528\u8d85\u65f6",id:"12-\u670d\u52a1\u8c03\u7528\u8d85\u65f6",level:3},{value:"13. No provider available",id:"13-no-provider-available",level:3},{value:"Spring Cloud Gateway \u5e38\u89c1\u95ee\u9898",id:"spring-cloud-gateway-\u5e38\u89c1\u95ee\u9898",level:2},{value:"14. \u8def\u7531\u4e0d\u751f\u6548",id:"14-\u8def\u7531\u4e0d\u751f\u6548",level:3},{value:"15. \u8de8\u57df\u95ee\u9898",id:"15-\u8de8\u57df\u95ee\u9898",level:3},{value:"\u901a\u7528\u95ee\u9898",id:"\u901a\u7528\u95ee\u9898",level:2},{value:"16. \u4f9d\u8d56\u51b2\u7a81",id:"16-\u4f9d\u8d56\u51b2\u7a81",level:3},{value:"17. \u7248\u672c\u517c\u5bb9\u6027\u95ee\u9898",id:"17-\u7248\u672c\u517c\u5bb9\u6027\u95ee\u9898",level:3},{value:"18. \u5185\u5b58\u6ea2\u51fa (OOM)",id:"18-\u5185\u5b58\u6ea2\u51fa-oom",level:3},{value:"19. \u7ebf\u7a0b\u6c60\u8017\u5c3d",id:"19-\u7ebf\u7a0b\u6c60\u8017\u5c3d",level:3},{value:"20. \u5faa\u73af\u4f9d\u8d56",id:"20-\u5faa\u73af\u4f9d\u8d56",level:3},{value:"\u6027\u80fd\u95ee\u9898",id:"\u6027\u80fd\u95ee\u9898",level:2},{value:"21. \u54cd\u5e94\u65f6\u95f4\u8fc7\u957f",id:"21-\u54cd\u5e94\u65f6\u95f4\u8fc7\u957f",level:3},{value:"22. QPS \u4e0a\u4e0d\u53bb",id:"22-qps-\u4e0a\u4e0d\u53bb",level:3},{value:"\u8c03\u8bd5\u6280\u5de7",id:"\u8c03\u8bd5\u6280\u5de7",level:2},{value:"\u67e5\u770b\u670d\u52a1\u8be6\u60c5",id:"\u67e5\u770b\u670d\u52a1\u8be6\u60c5",level:3},{value:"\u52a8\u6001\u65e5\u5fd7\u7ea7\u522b",id:"\u52a8\u6001\u65e5\u5fd7\u7ea7\u522b",level:3}];function o(n){const e={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"spring-cloud-alibaba-\u5e38\u89c1\u95ee\u9898\u89e3\u7b54",children:"Spring Cloud Alibaba \u5e38\u89c1\u95ee\u9898\u89e3\u7b54"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsxs)(e.p,{children:["[!NOTE]\n",(0,r.jsx)(e.strong,{children:"\u5feb\u901f\u89e3\u51b3\u95ee\u9898"}),": \u6c47\u603b Spring Cloud Alibaba \u5f00\u53d1\u548c\u8fd0\u7ef4\u4e2d\u7684\u5e38\u89c1\u95ee\u9898\u53ca\u89e3\u51b3\u65b9\u6848\u3002"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"nacos-\u5e38\u89c1\u95ee\u9898",children:"Nacos \u5e38\u89c1\u95ee\u9898"}),"\n",(0,r.jsx)(e.h3,{id:"1-\u670d\u52a1\u6ce8\u518c\u5931\u8d25",children:"1. \u670d\u52a1\u6ce8\u518c\u5931\u8d25"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u95ee\u9898\u73b0\u8c61"}),":"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u670d\u52a1\u542f\u52a8\u540e\u5728 Nacos \u63a7\u5236\u53f0\u770b\u4e0d\u5230"}),"\n",(0,r.jsx)(e.li,{children:"\u65e5\u5fd7\u63d0\u793a\u8fde\u63a5\u5931\u8d25"}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u6392\u67e5\u6b65\u9aa4"}),":"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# 1. \u68c0\u67e5 Nacos Server \u662f\u5426\u542f\u52a8\nps -ef | grep nacos\n\n# 2. \u68c0\u67e5\u7aef\u53e3\u662f\u5426\u76d1\u542c\nnetstat -an | grep 8848\n\n# 3. \u68c0\u67e5\u7f51\u7edc\u8fde\u901a\u6027\ntelnet localhost 8848\n"})}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u5e38\u89c1\u539f\u56e0"}),":"]}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Nacos Server \u672a\u542f\u52a8"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"cd nacos/bin\nsh startup.sh -m standalone\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u914d\u7f6e\u5730\u5740\u9519\u8bef"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-yaml",children:"spring:\n  cloud:\n    nacos:\n      discovery:\n        server-addr: localhost:8848  # \u786e\u8ba4\u5730\u5740\u6b63\u786e\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Namespace \u4e0d\u5339\u914d"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-yaml",children:"# \u786e\u4fdd namespace \u5b58\u5728\u4e14\u914d\u7f6e\u6b63\u786e\nspring:\n  cloud:\n    nacos:\n      discovery:\n        namespace: dev  # \u9700\u5728\u63a7\u5236\u53f0\u521b\u5efa\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"2-\u914d\u7f6e\u4e0d\u751f\u6548",children:"2. \u914d\u7f6e\u4e0d\u751f\u6548"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u95ee\u9898"}),": Nacos \u914d\u7f6e\u4e2d\u5fc3\u7684\u914d\u7f6e\u4e0d\u751f\u6548"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"checklist"}),":"]}),"\n",(0,r.jsxs)(e.ul,{className:"contains-task-list",children:["\n",(0,r.jsxs)(e.li,{className:"task-list-item",children:[(0,r.jsx)(e.input,{type:"checkbox",disabled:!0})," ","Data ID \u547d\u540d\u662f\u5426\u6b63\u786e (",(0,r.jsx)(e.code,{children:"${spring.application.name}.${file-extension}"}),")"]}),"\n",(0,r.jsxs)(e.li,{className:"task-list-item",children:[(0,r.jsx)(e.input,{type:"checkbox",disabled:!0})," ","Namespace \u548c Group \u662f\u5426\u5339\u914d"]}),"\n",(0,r.jsxs)(e.li,{className:"task-list-item",children:[(0,r.jsx)(e.input,{type:"checkbox",disabled:!0})," ","\u662f\u5426\u6dfb\u52a0\u4e86 ",(0,r.jsx)(e.code,{children:"@RefreshScope"})," \u6ce8\u89e3"]}),"\n",(0,r.jsxs)(e.li,{className:"task-list-item",children:[(0,r.jsx)(e.input,{type:"checkbox",disabled:!0})," ","\u662f\u5426\u5f15\u5165\u4e86 ",(0,r.jsx)(e.code,{children:"nacos-config"})," \u4f9d\u8d56"]}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u793a\u4f8b"}),":"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-yaml",children:"# bootstrap.yml (\u6ce8\u610f\u662f bootstrap \u4e0d\u662f application)\nspring:\n  application:\n    name: user-service\n  cloud:\n    nacos:\n      config:\n        server-addr: localhost:8848\n        file-extension: yaml\n        namespace: dev\n        group: DEFAULT_GROUP\n"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",children:'@RestController\n@RefreshScope  // \u5fc5\u987b\u6dfb\u52a0\u6b64\u6ce8\u89e3\npublic class ConfigController {\n    @Value("${config.value}")\n    private String configValue;\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"3-nacos-\u96c6\u7fa4\u540c\u6b65\u95ee\u9898",children:"3. Nacos \u96c6\u7fa4\u540c\u6b65\u95ee\u9898"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u95ee\u9898"}),": \u96c6\u7fa4\u8282\u70b9\u4e4b\u95f4\u6570\u636e\u4e0d\u4e00\u81f4"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u89e3\u51b3\u65b9\u6848"}),":"]}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u68c0\u67e5\u96c6\u7fa4\u914d\u7f6e"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-properties",children:"# conf/cluster.conf\n192.168.1.101:8848\n192.168.1.102:8848\n192.168.1.103:8848\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u68c0\u67e5\u6570\u636e\u5e93\u914d\u7f6e"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-properties",children:"# conf/application.properties\nspring.datasource.platform=mysql\ndb.num=1\ndb.url.0=jdbc:mysql://localhost:3306/nacos?characterEncoding=utf8\ndb.user.0=nacos\ndb.password.0=nacos\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u68c0\u67e5\u7f51\u7edc\u8fde\u901a\u6027"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# \u8282\u70b9\u4e4b\u95f4\u80fd\u5426\u4e92\u76f8\u8bbf\u95ee\nping 192.168.1.101\nping 192.168.1.102\nping 192.168.1.103\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"sentinel-\u5e38\u89c1\u95ee\u9898",children:"Sentinel \u5e38\u89c1\u95ee\u9898"}),"\n",(0,r.jsx)(e.h3,{id:"4-\u63a7\u5236\u53f0\u770b\u4e0d\u5230\u5e94\u7528",children:"4. \u63a7\u5236\u53f0\u770b\u4e0d\u5230\u5e94\u7528"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u95ee\u9898"}),": Sentinel Dashboard \u4e2d\u770b\u4e0d\u5230\u5e94\u7528"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u539f\u56e0"}),": Sentinel \u91c7\u7528\u61d2\u52a0\u8f7d,\u5e94\u7528\u542f\u52a8\u540e\u9700\u8981\u6709\u8bf7\u6c42\u624d\u4f1a\u6ce8\u518c\u5230\u63a7\u5236\u53f0"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u89e3\u51b3\u65b9\u6848"}),":"]}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u5f00\u542f\u9965\u997f\u52a0\u8f7d"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-yaml",children:"spring:\n  cloud:\n    sentinel:\n      eager: true  # \u542f\u52a8\u65f6\u7acb\u5373\u8fde\u63a5\u63a7\u5236\u53f0\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u624b\u52a8\u89e6\u53d1\u8bf7\u6c42"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# \u8bbf\u95ee\u4efb\u610f\u63a5\u53e3\ncurl http://localhost:8081/users/1\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u68c0\u67e5\u914d\u7f6e"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-yaml",children:"spring:\n  cloud:\n    sentinel:\n      transport:\n        dashboard: localhost:8080\n        port: 8719  # \u4e0e\u63a7\u5236\u53f0\u901a\u4fe1\u7684\u7aef\u53e3\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"5-\u9650\u6d41\u89c4\u5219\u4e0d\u751f\u6548",children:"5. \u9650\u6d41\u89c4\u5219\u4e0d\u751f\u6548"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"checklist"}),":"]}),"\n",(0,r.jsxs)(e.ul,{className:"contains-task-list",children:["\n",(0,r.jsxs)(e.li,{className:"task-list-item",children:[(0,r.jsx)(e.input,{type:"checkbox",disabled:!0})," ","\u662f\u5426\u914d\u7f6e\u4e86 ",(0,r.jsx)(e.code,{children:"@SentinelResource"})," \u6ce8\u89e3"]}),"\n",(0,r.jsxs)(e.li,{className:"task-list-item",children:[(0,r.jsx)(e.input,{type:"checkbox",disabled:!0})," ","\u8d44\u6e90\u540d\u662f\u5426\u4e0e\u89c4\u5219\u914d\u7f6e\u4e00\u81f4"]}),"\n",(0,r.jsxs)(e.li,{className:"task-list-item",children:[(0,r.jsx)(e.input,{type:"checkbox",disabled:!0})," ","\u89c4\u5219\u662f\u5426\u6b63\u786e\u4fdd\u5b58"]}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u793a\u4f8b"}),":"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",children:'@SentinelResource(\n    value = "getUser",  // \u8d44\u6e90\u540d\u8981\u4e0e\u63a7\u5236\u53f0\u914d\u7f6e\u4e00\u81f4\n    blockHandler = "handleBlock"\n)\npublic User getUser(Long id) {\n    return userRepository.findById(id);\n}\n\npublic User handleBlock(Long id, BlockException ex) {\n    return new User(id, "\u9650\u6d41", "");\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"6-\u89c4\u5219\u6301\u4e45\u5316\u540e\u542f\u52a8\u5931\u8d25",children:"6. \u89c4\u5219\u6301\u4e45\u5316\u540e\u542f\u52a8\u5931\u8d25"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u95ee\u9898"}),": \u4f7f\u7528 Nacos \u6301\u4e45\u5316\u89c4\u5219\u540e,\u5e94\u7528\u542f\u52a8\u5931\u8d25"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u89e3\u51b3\u65b9\u6848"}),":"]}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u68c0\u67e5\u89c4\u5219\u683c\u5f0f"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-json",children:'[\n  {\n    "resource": "getUser",\n    "grade": 1,\n    "count": 10,\n    "strategy": 0,\n    "controlBehavior": 0\n  }\n]\n'})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u68c0\u67e5\u4f9d\u8d56"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-xml",children:"<dependency>\n    <groupId>com.alibaba.csp</groupId>\n    <artifactId>sentinel-datasource-nacos</artifactId>\n</dependency>\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"seata-\u5e38\u89c1\u95ee\u9898",children:"Seata \u5e38\u89c1\u95ee\u9898"}),"\n",(0,r.jsx)(e.h3,{id:"7-\u4e8b\u52a1\u4e0d\u56de\u6eda",children:"7. \u4e8b\u52a1\u4e0d\u56de\u6eda"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u95ee\u9898"}),": \u5206\u652f\u4e8b\u52a1\u5931\u8d25\u4f46\u6ca1\u6709\u56de\u6eda"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u6392\u67e5\u6b65\u9aa4"}),":"]}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u68c0\u67e5 XID \u4f20\u64ad"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",children:'// \u786e\u4fdd\u5168\u5c40\u4e8b\u52a1 ID \u6b63\u786e\u4f20\u64ad\nString xid = RootContext.getXID();\nlog.info("XID: {}", xid);  // \u4e0d\u5e94\u4e3a null\n'})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u68c0\u67e5\u5f02\u5e38\u7c7b\u578b"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",children:"@GlobalTransactional(\n    rollbackFor = Exception.class  // \u786e\u4fdd\u5f02\u5e38\u4f1a\u89e6\u53d1\u56de\u6eda\n)\npublic void createOrder() {\n    // ...\n}\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u68c0\u67e5 undo_log \u8868"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-sql",children:"-- \u6bcf\u4e2a\u4e1a\u52a1\u6570\u636e\u5e93\u90fd\u9700\u8981\u6b64\u8868\nSELECT * FROM undo_log;\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u67e5\u770b Seata Server \u65e5\u5fd7"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"tail -f ${seata.home}/logs/seata.log\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"8-seata-server-\u8fde\u63a5\u5931\u8d25",children:"8. Seata Server \u8fde\u63a5\u5931\u8d25"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u95ee\u9898"}),": \u5e94\u7528\u65e0\u6cd5\u8fde\u63a5 Seata Server"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"checklist"}),":"]}),"\n",(0,r.jsxs)(e.ul,{className:"contains-task-list",children:["\n",(0,r.jsxs)(e.li,{className:"task-list-item",children:[(0,r.jsx)(e.input,{type:"checkbox",disabled:!0})," ","Seata Server \u662f\u5426\u542f\u52a8"]}),"\n",(0,r.jsxs)(e.li,{className:"task-list-item",children:[(0,r.jsx)(e.input,{type:"checkbox",disabled:!0})," ","\u6ce8\u518c\u4e2d\u5fc3\u914d\u7f6e\u662f\u5426\u6b63\u786e"]}),"\n",(0,r.jsxs)(e.li,{className:"task-list-item",children:[(0,r.jsx)(e.input,{type:"checkbox",disabled:!0})," ","\u4e8b\u52a1\u5206\u7ec4\u914d\u7f6e\u662f\u5426\u6b63\u786e"]}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u914d\u7f6e\u793a\u4f8b"}),":"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-yaml",children:'seata:\n  application-id: order-service\n  tx-service-group: default_tx_group  # \u4e8b\u52a1\u5206\u7ec4\n  registry:\n    type: nacos\n    nacos:\n      server-addr: localhost:8848\n      namespace: ""\n      group: SEATA_GROUP\n      application: seata-server\n'})}),"\n",(0,r.jsx)(e.h2,{id:"rocketmq-\u5e38\u89c1\u95ee\u9898",children:"RocketMQ \u5e38\u89c1\u95ee\u9898"}),"\n",(0,r.jsx)(e.h3,{id:"9-\u6d88\u606f\u53d1\u9001\u5931\u8d25",children:"9. \u6d88\u606f\u53d1\u9001\u5931\u8d25"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u95ee\u9898"}),": \u6d88\u606f\u53d1\u9001\u5931\u8d25,\u63d0\u793a\u8fde\u63a5\u8d85\u65f6"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u6392\u67e5\u6b65\u9aa4"}),":"]}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u68c0\u67e5 NameServer"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# \u68c0\u67e5 NameServer \u662f\u5426\u542f\u52a8\njps | grep NamesrvStartup\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u68c0\u67e5 Broker"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# \u68c0\u67e5 Broker \u662f\u5426\u542f\u52a8\njps | grep BrokerStartup\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u68c0\u67e5\u914d\u7f6e"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-yaml",children:"rocketmq:\n  name-server: localhost:9876  # \u786e\u8ba4\u5730\u5740\u6b63\u786e\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u6d4b\u8bd5\u8fde\u901a\u6027"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"telnet localhost 9876\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"10-\u6d88\u606f\u91cd\u590d\u6d88\u8d39",children:"10. \u6d88\u606f\u91cd\u590d\u6d88\u8d39"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u95ee\u9898"}),": \u540c\u4e00\u6d88\u606f\u88ab\u91cd\u590d\u6d88\u8d39"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u539f\u56e0"}),": RocketMQ \u4fdd\u8bc1\u81f3\u5c11\u4e00\u6b21\u6d88\u8d39,\u53ef\u80fd\u91cd\u590d"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u89e3\u51b3\u65b9\u6848"}),": \u5b9e\u73b0\u5e42\u7b49\u6027"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",children:'@Service\n@RocketMQMessageListener(topic = "order-topic", consumerGroup = "order-group")\npublic class OrderConsumer implements RocketMQListener<Order> {\n\n    @Autowired\n    private RedisTemplate redisTemplate;\n\n    @Override\n    public void onMessage(Order order) {\n        String msgId = order.getMsgId();\n        \n        // \u4f7f\u7528 Redis \u5b9e\u73b0\u5e42\u7b49\n        Boolean success = redisTemplate.opsForValue()\n            .setIfAbsent("msg:" + msgId, "1", 24, TimeUnit.HOURS);\n        \n        if (Boolean.FALSE.equals(success)) {\n            log.info("\u6d88\u606f\u5df2\u5904\u7406\u8fc7,msgId={}", msgId);\n            return;\n        }\n        \n        // \u5904\u7406\u4e1a\u52a1\n        processOrder(order);\n    }\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"11-\u6d88\u606f\u5806\u79ef",children:"11. \u6d88\u606f\u5806\u79ef"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u95ee\u9898"}),": \u6d88\u8d39\u901f\u5ea6\u8ddf\u4e0d\u4e0a,\u6d88\u606f\u5927\u91cf\u5806\u79ef"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u89e3\u51b3\u65b9\u6848"}),":"]}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u589e\u52a0\u6d88\u8d39\u8005\u5b9e\u4f8b"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-yaml",children:"# \u6269\u5bb9\u6d88\u8d39\u8005\nkubectl scale deployment order-consumer --replicas=5\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u589e\u52a0\u6d88\u8d39\u7ebf\u7a0b"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-yaml",children:"rocketmq:\n  consumer:\n    listeners:\n      order-listener:\n        consume-thread-min: 20\n        consume-thread-max: 64\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u6279\u91cf\u6d88\u8d39"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",children:'@RocketMQMessageListener(\n    topic = "order-topic",\n    consumerGroup = "order-group",\n    consumeMode = ConsumeMode.CONCURRENTLY,\n    messageModel = MessageModel.CLUSTERING\n)\npublic class BatchConsumer implements RocketMQListener<List<Order>> {\n    @Override\n    public void onMessage(List<Order> orders) {\n        // \u6279\u91cf\u5904\u7406\n        batchProcess(orders);\n    }\n}\n'})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"dubbo-\u5e38\u89c1\u95ee\u9898",children:"Dubbo \u5e38\u89c1\u95ee\u9898"}),"\n",(0,r.jsx)(e.h3,{id:"12-\u670d\u52a1\u8c03\u7528\u8d85\u65f6",children:"12. \u670d\u52a1\u8c03\u7528\u8d85\u65f6"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u95ee\u9898"}),": Dubbo \u670d\u52a1\u8c03\u7528\u8d85\u65f6"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u6392\u67e5\u6b65\u9aa4"}),":"]}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u68c0\u67e5\u63d0\u4f9b\u8005\u662f\u5426\u6b63\u5e38"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# \u68c0\u67e5\u670d\u52a1\u662f\u5426\u6ce8\u518c\n# \u5728 Nacos \u63a7\u5236\u53f0\u67e5\u770b\u670d\u52a1\u5b9e\u4f8b\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u68c0\u67e5\u7f51\u7edc"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# \u6d4b\u8bd5\u7f51\u7edc\u8fde\u901a\u6027\nping provider-ip\ntelnet provider-ip provider-port\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u8c03\u6574\u8d85\u65f6\u65f6\u95f4"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",children:"@DubboReference(\n    timeout = 5000,  // \u8c03\u6574\u8d85\u65f6\u65f6\u95f4\n    retries = 2\n)\nprivate UserService userService;\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u67e5\u770b\u63d0\u4f9b\u8005\u65e5\u5fd7"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# \u68c0\u67e5\u662f\u5426\u6709\u5f02\u5e38\u6216\u6162\u67e5\u8be2\ntail -f application.log\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"13-no-provider-available",children:"13. No provider available"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u95ee\u9898"}),': \u8c03\u7528\u670d\u52a1\u65f6\u63d0\u793a "No provider available"']}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u5e38\u89c1\u539f\u56e0"}),":"]}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u670d\u52a1\u672a\u542f\u52a8\u6216\u672a\u6ce8\u518c"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u7248\u672c\u4e0d\u5339\u914d"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",children:'// Provider\n@DubboService(version = "1.0.0")\n\n// Consumer\n@DubboReference(version = "1.0.0")  // \u786e\u4fdd\u7248\u672c\u4e00\u81f4\n'})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"Group \u4e0d\u5339\u914d"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",children:'// Provider\n@DubboService(group = "default")\n\n// Consumer\n@DubboReference(group = "default")  // \u786e\u4fdd\u5206\u7ec4\u4e00\u81f4\n'})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"spring-cloud-gateway-\u5e38\u89c1\u95ee\u9898",children:"Spring Cloud Gateway \u5e38\u89c1\u95ee\u9898"}),"\n",(0,r.jsx)(e.h3,{id:"14-\u8def\u7531\u4e0d\u751f\u6548",children:"14. \u8def\u7531\u4e0d\u751f\u6548"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u95ee\u9898"}),": \u914d\u7f6e\u4e86\u8def\u7531\u4f46\u8bf7\u6c42 404"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"checklist"}),":"]}),"\n",(0,r.jsxs)(e.ul,{className:"contains-task-list",children:["\n",(0,r.jsxs)(e.li,{className:"task-list-item",children:[(0,r.jsx)(e.input,{type:"checkbox",disabled:!0})," ","\u8def\u7531\u914d\u7f6e\u662f\u5426\u6b63\u786e"]}),"\n",(0,r.jsxs)(e.li,{className:"task-list-item",children:[(0,r.jsx)(e.input,{type:"checkbox",disabled:!0})," ","\u670d\u52a1\u540d\u662f\u5426\u6b63\u786e"]}),"\n",(0,r.jsxs)(e.li,{className:"task-list-item",children:[(0,r.jsx)(e.input,{type:"checkbox",disabled:!0})," ","\u8def\u5f84\u662f\u5426\u5339\u914d"]}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u8c03\u8bd5\u65b9\u6cd5"}),":"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-yaml",children:"logging:\n  level:\n    org.springframework.cloud.gateway: DEBUG  # \u5f00\u542f Debug \u65e5\u5fd7\n"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# \u67e5\u770b\u65e5\u5fd7,\u68c0\u67e5\u8def\u7531\u5339\u914d\u60c5\u51b5\ntail -f application.log | grep RouteDefinitionRouteLocator\n"})}),"\n",(0,r.jsx)(e.h3,{id:"15-\u8de8\u57df\u95ee\u9898",children:"15. \u8de8\u57df\u95ee\u9898"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u95ee\u9898"}),": \u524d\u7aef\u8bf7\u6c42\u7f51\u5173\u65f6\u63d0\u793a\u8de8\u57df\u9519\u8bef"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u89e3\u51b3\u65b9\u6848"}),":"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-yaml",children:'spring:\n  cloud:\n    gateway:\n      globalcors:\n        cors-configurations:\n          \'[/**]\':\n            allowed-origins: "*"\n            allowed-methods:\n              - GET\n              - POST\n              - PUT\n              - DELETE\n              - OPTIONS\n            allowed-headers: "*"\n            allow-credentials: true\n            max-age: 3600\n'})}),"\n",(0,r.jsx)(e.h2,{id:"\u901a\u7528\u95ee\u9898",children:"\u901a\u7528\u95ee\u9898"}),"\n",(0,r.jsx)(e.h3,{id:"16-\u4f9d\u8d56\u51b2\u7a81",children:"16. \u4f9d\u8d56\u51b2\u7a81"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u95ee\u9898"}),": \u542f\u52a8\u65f6\u63d0\u793a\u7c7b\u627e\u4e0d\u5230\u6216\u65b9\u6cd5\u4e0d\u5b58\u5728"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u89e3\u51b3\u65b9\u6848"}),":"]}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u67e5\u770b\u4f9d\u8d56\u6811"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"mvn dependency:tree\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u6392\u9664\u51b2\u7a81\u4f9d\u8d56"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-xml",children:"<dependency>\n    <groupId>com.alibaba.cloud</groupId>\n    <artifactId>spring-cloud-starter-alibaba-nacos-discovery</artifactId>\n    <exclusions>\n        <exclusion>\n            <groupId>com.google.guava</groupId>\n            <artifactId>guava</artifactId>\n        </exclusion>\n    </exclusions>\n</dependency>\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u7edf\u4e00\u7248\u672c\u7ba1\u7406"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-xml",children:"<dependencyManagement>\n    <dependencies>\n        <dependency>\n            <groupId>com.alibaba.cloud</groupId>\n            <artifactId>spring-cloud-alibaba-dependencies</artifactId>\n            <version>2023.0.0.0</version>\n            <type>pom</type>\n            <scope>import</scope>\n        </dependency>\n    </dependencies>\n</dependencyManagement>\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"17-\u7248\u672c\u517c\u5bb9\u6027\u95ee\u9898",children:"17. \u7248\u672c\u517c\u5bb9\u6027\u95ee\u9898"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u95ee\u9898"}),": \u7ec4\u4ef6\u4e4b\u95f4\u7248\u672c\u4e0d\u517c\u5bb9"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u89e3\u51b3\u65b9\u6848"}),": \u4f7f\u7528\u5b98\u65b9\u63a8\u8350\u7684\u7248\u672c\u7ec4\u5408"]}),"\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"Spring Cloud Alibaba"}),(0,r.jsx)(e.th,{children:"Spring Cloud"}),(0,r.jsx)(e.th,{children:"Spring Boot"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"2023.0.0.0"}),(0,r.jsx)(e.td,{children:"2023.0.x"}),(0,r.jsx)(e.td,{children:"3.2.x"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"2022.0.0.0"}),(0,r.jsx)(e.td,{children:"2022.0.x"}),(0,r.jsx)(e.td,{children:"3.0.x"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"2021.0.5.0"}),(0,r.jsx)(e.td,{children:"2021.0.x"}),(0,r.jsx)(e.td,{children:"2.6.x"})]})]})]}),"\n",(0,r.jsx)(e.h3,{id:"18-\u5185\u5b58\u6ea2\u51fa-oom",children:"18. \u5185\u5b58\u6ea2\u51fa (OOM)"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u95ee\u9898"}),": \u5e94\u7528\u8fd0\u884c\u4e00\u6bb5\u65f6\u95f4\u540e OOM"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u6392\u67e5\u6b65\u9aa4"}),":"]}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u751f\u6210 Heap Dump"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"jmap -dump:live,format=b,file=heap.hprof <pid>\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u5206\u6790 Heap Dump"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u4f7f\u7528 MAT (Eclipse Memory Analyzer)"}),"\n",(0,r.jsx)(e.li,{children:"\u6216\u8005 VisualVM"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u68c0\u67e5\u5e38\u89c1\u539f\u56e0"})}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u5185\u5b58\u6cc4\u6f0f"}),"\n",(0,r.jsx)(e.li,{children:"\u7f13\u5b58\u672a\u8bbe\u7f6e\u8fc7\u671f\u65f6\u95f4"}),"\n",(0,r.jsx)(e.li,{children:"\u5927\u5bf9\u8c61\u672a\u53ca\u65f6\u91ca\u653e"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u8c03\u6574 JVM \u53c2\u6570"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"java -Xms2g -Xmx4g \\\n     -XX:+HeapDumpOnOutOfMemoryError \\\n     -XX:HeapDumpPath=/tmp \\\n     -jar app.jar\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"19-\u7ebf\u7a0b\u6c60\u8017\u5c3d",children:"19. \u7ebf\u7a0b\u6c60\u8017\u5c3d"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u95ee\u9898"}),": \u5e94\u7528\u65e0\u54cd\u5e94,\u7ebf\u7a0bdump\u663e\u793a\u7ebf\u7a0b\u6c60\u6ee1"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u89e3\u51b3\u65b9\u6848"}),":"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-yaml",children:"# \u8c03\u6574\u7ebf\u7a0b\u6c60\u914d\u7f6e\nserver:\n  tomcat:\n    threads:\n      max: 500\n      min-spare: 50\n\n# Dubbo \u7ebf\u7a0b\u6c60\ndubbo:\n  protocol:\n    threads: 200\n"})}),"\n",(0,r.jsx)(e.h3,{id:"20-\u5faa\u73af\u4f9d\u8d56",children:"20. \u5faa\u73af\u4f9d\u8d56"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u95ee\u9898"}),": \u542f\u52a8\u65f6\u63d0\u793a\u5faa\u73af\u4f9d\u8d56"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u89e3\u51b3\u65b9\u6848"}),":"]}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u4f7f\u7528 @Lazy \u6ce8\u89e3"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",children:"@Autowired\n@Lazy\nprivate BService bService;\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u4f7f\u7528 Setter \u6ce8\u5165"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-java",children:"private BService bService;\n\n@Autowired\npublic void setBService(BService bService) {\n    this.bService = bService;\n}\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u91cd\u6784\u4ee3\u7801\u6d88\u9664\u5faa\u73af\u4f9d\u8d56"})," (\u63a8\u8350)"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"\u6027\u80fd\u95ee\u9898",children:"\u6027\u80fd\u95ee\u9898"}),"\n",(0,r.jsx)(e.h3,{id:"21-\u54cd\u5e94\u65f6\u95f4\u8fc7\u957f",children:"21. \u54cd\u5e94\u65f6\u95f4\u8fc7\u957f"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u6392\u67e5\u6b65\u9aa4"}),":"]}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.strong,{children:"\u67e5\u770b\u94fe\u8def\u8ffd\u8e2a"})," (Zipkin)"]}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.strong,{children:"\u5206\u6790\u6162 SQL"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.strong,{children:"\u68c0\u67e5\u7f51\u7edc\u5ef6\u8fdf"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.strong,{children:"\u68c0\u67e5\u662f\u5426\u6709\u5faa\u73af\u8c03\u7528"})}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u4f18\u5316\u65b9\u6848"}),":"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u6dfb\u52a0\u7f13\u5b58"}),"\n",(0,r.jsx)(e.li,{children:"\u6570\u636e\u5e93\u7d22\u5f15\u4f18\u5316"}),"\n",(0,r.jsx)(e.li,{children:"\u5f02\u6b65\u5904\u7406"}),"\n",(0,r.jsx)(e.li,{children:"\u6279\u91cf\u64cd\u4f5c"}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"22-qps-\u4e0a\u4e0d\u53bb",children:"22. QPS \u4e0a\u4e0d\u53bb"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u53ef\u80fd\u539f\u56e0"}),":"]}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u592a\u5c0f"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-yaml",children:"spring:\n  datasource:\n    hikari:\n      maximum-pool-size: 50\n"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u7ebf\u7a0b\u6c60\u592a\u5c0f"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"\u6709\u963b\u585e\u64cd\u4f5c"})}),"\n"]}),"\n",(0,r.jsxs)(e.li,{children:["\n",(0,r.jsx)(e.p,{children:(0,r.jsx)(e.strong,{children:"GC \u9891\u7e41"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"\u8c03\u8bd5\u6280\u5de7",children:"\u8c03\u8bd5\u6280\u5de7"}),"\n",(0,r.jsx)(e.h3,{id:"\u67e5\u770b\u670d\u52a1\u8be6\u60c5",children:"\u67e5\u770b\u670d\u52a1\u8be6\u60c5"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# Nacos \u670d\u52a1\u8be6\u60c5\ncurl http://localhost:8848/nacos/v1/ns/instance/list?serviceName=user-service\n\n# Sentinel \u89c4\u5219\ncurl http://localhost:8719/getRules?type=flow\n"})}),"\n",(0,r.jsx)(e.h3,{id:"\u52a8\u6001\u65e5\u5fd7\u7ea7\u522b",children:"\u52a8\u6001\u65e5\u5fd7\u7ea7\u522b"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# \u52a8\u6001\u4fee\u6539\u65e5\u5fd7\u7ea7\u522b\ncurl -X POST \\\n  http://localhost:8081/actuator/loggers/com.example.user \\\n  -H 'Content-Type: application/json' \\\n  -d '{\"configuredLevel\": \"DEBUG\"}'\n"})}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u63d0\u793a"}),":"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u9047\u5230\u95ee\u9898\u5148\u67e5\u65e5\u5fd7"}),"\n",(0,r.jsx)(e.li,{children:"\u5584\u7528\u5b98\u65b9\u6587\u6863"}),"\n",(0,r.jsx)(e.li,{children:"\u52a0\u5165\u793e\u533a\u5bfb\u6c42\u5e2e\u52a9"}),"\n"]}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u76f8\u5173\u8d44\u6599"}),":"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://nacos.io/zh-cn/docs/faq.html",children:"Nacos FAQ"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://sentinelguard.io/zh-cn/docs/faq.html",children:"Sentinel FAQ"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://seata.io/zh-cn/docs/overview/faq.html",children:"Seata FAQ"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://rocketmq.apache.org/docs/faq/",children:"RocketMQ FAQ"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://dubbo.apache.org/zh/docs/references/faq/",children:"Dubbo FAQ"})}),"\n"]})]})}function t(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(o,{...n})}):o(n)}},48885:(n,e,s)=>{s.d(e,{R:()=>c,x:()=>d});var l=s(99378);const r={},i=l.createContext(r);function c(n){const e=l.useContext(i);return l.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function d(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:c(n.components),l.createElement(i.Provider,{value:e},n.children)}}}]);