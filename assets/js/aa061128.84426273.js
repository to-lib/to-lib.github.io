"use strict";(globalThis.webpackChunkto_lib_github_io=globalThis.webpackChunkto_lib_github_io||[]).push([[603],{48885:(n,e,i)=>{i.d(e,{R:()=>t,x:()=>s});var l=i(99378);const a={},r=l.createContext(a);function t(n){const e=l.useContext(r);return l.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(a):n.components||a:t(n.components),l.createElement(r.Provider,{value:e},n.children)}},68832:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>o,contentTitle:()=>s,default:()=>p,frontMatter:()=>t,metadata:()=>l,toc:()=>c});const l=JSON.parse('{"id":"flink/quick-start","title":"\u5feb\u901f\u5f00\u59cb","description":"\u5feb\u901f\u642d\u5efa\u548c\u8fd0\u884c Apache Flink \u5e94\u7528","source":"@site/docs/flink/quick-start.md","sourceDirName":"flink","slug":"/flink/quick-start","permalink":"/docs/flink/quick-start","draft":false,"unlisted":false,"editUrl":"https://github.com/to-lib/to-lib.github.io/tree/main/docs/flink/quick-start.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"title":"\u5feb\u901f\u5f00\u59cb","description":"\u5feb\u901f\u642d\u5efa\u548c\u8fd0\u884c Apache Flink \u5e94\u7528"},"sidebar":"flink","previous":{"title":"\u6838\u5fc3\u6982\u5ff5","permalink":"/docs/flink/core-concepts"},"next":{"title":"DataStream API","permalink":"/docs/flink/datastream-api"}}');var a=i(22714),r=i(48885);const t={sidebar_position:4,title:"\u5feb\u901f\u5f00\u59cb",description:"\u5feb\u901f\u642d\u5efa\u548c\u8fd0\u884c Apache Flink \u5e94\u7528"},s="Flink \u5feb\u901f\u5f00\u59cb",o={},c=[{value:"\u73af\u5883\u51c6\u5907",id:"\u73af\u5883\u51c6\u5907",level:2},{value:"\u7cfb\u7edf\u8981\u6c42",id:"\u7cfb\u7edf\u8981\u6c42",level:3},{value:"\u5b89\u88c5 Flink",id:"\u5b89\u88c5-flink",level:3},{value:"\u4e0b\u8f7d Flink",id:"\u4e0b\u8f7d-flink",level:4},{value:"\u542f\u52a8\u672c\u5730\u96c6\u7fa4",id:"\u542f\u52a8\u672c\u5730\u96c6\u7fa4",level:4},{value:"\u521b\u5efa Maven \u9879\u76ee",id:"\u521b\u5efa-maven-\u9879\u76ee",level:2},{value:"pom.xml \u914d\u7f6e",id:"pomxml-\u914d\u7f6e",level:3},{value:"\u7b2c\u4e00\u4e2a Flink \u7a0b\u5e8f",id:"\u7b2c\u4e00\u4e2a-flink-\u7a0b\u5e8f",level:2},{value:"WordCount \u793a\u4f8b",id:"wordcount-\u793a\u4f8b",level:3},{value:"\u8fd0\u884c\u7ed3\u679c",id:"\u8fd0\u884c\u7ed3\u679c",level:3},{value:"Socket \u6d41\u5904\u7406\u793a\u4f8b",id:"socket-\u6d41\u5904\u7406\u793a\u4f8b",level:2},{value:"\u542f\u52a8 Socket \u670d\u52a1",id:"\u542f\u52a8-socket-\u670d\u52a1",level:3},{value:"Socket WordCount",id:"socket-wordcount",level:3},{value:"\u63d0\u4ea4\u5230\u96c6\u7fa4",id:"\u63d0\u4ea4\u5230\u96c6\u7fa4",level:2},{value:"\u6253\u5305",id:"\u6253\u5305",level:3},{value:"\u63d0\u4ea4\u4f5c\u4e1a",id:"\u63d0\u4ea4\u4f5c\u4e1a",level:3},{value:"\u67e5\u770b\u548c\u7ba1\u7406\u4f5c\u4e1a",id:"\u67e5\u770b\u548c\u7ba1\u7406\u4f5c\u4e1a",level:3},{value:"\u505c\u6b62\u96c6\u7fa4",id:"\u505c\u6b62\u96c6\u7fa4",level:2},{value:"\u5e38\u89c1\u95ee\u9898",id:"\u5e38\u89c1\u95ee\u9898",level:2},{value:"\u5185\u5b58\u4e0d\u8db3",id:"\u5185\u5b58\u4e0d\u8db3",level:3},{value:"\u7c7b\u627e\u4e0d\u5230",id:"\u7c7b\u627e\u4e0d\u5230",level:3},{value:"\u4e0b\u4e00\u6b65",id:"\u4e0b\u4e00\u6b65",level:2}];function d(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...n.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e.header,{children:(0,a.jsx)(e.h1,{id:"flink-\u5feb\u901f\u5f00\u59cb",children:"Flink \u5feb\u901f\u5f00\u59cb"})}),"\n",(0,a.jsx)(e.h2,{id:"\u73af\u5883\u51c6\u5907",children:"\u73af\u5883\u51c6\u5907"}),"\n",(0,a.jsx)(e.h3,{id:"\u7cfb\u7edf\u8981\u6c42",children:"\u7cfb\u7edf\u8981\u6c42"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"Java 8 \u6216 Java 11\uff08\u63a8\u8350 Java 11\uff09"}),"\n",(0,a.jsx)(e.li,{children:"Maven 3.x \u6216 Gradle"}),"\n",(0,a.jsx)(e.li,{children:"Linux\u3001macOS \u6216 Windows"}),"\n"]}),"\n",(0,a.jsx)(e.h3,{id:"\u5b89\u88c5-flink",children:"\u5b89\u88c5 Flink"}),"\n",(0,a.jsx)(e.h4,{id:"\u4e0b\u8f7d-flink",children:"\u4e0b\u8f7d Flink"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"# \u4e0b\u8f7d Flink 1.17\nwget https://archive.apache.org/dist/flink/flink-1.17.1/flink-1.17.1-bin-scala_2.12.tgz\n\n# \u89e3\u538b\ntar -xzf flink-1.17.1-bin-scala_2.12.tgz\ncd flink-1.17.1\n"})}),"\n",(0,a.jsx)(e.h4,{id:"\u542f\u52a8\u672c\u5730\u96c6\u7fa4",children:"\u542f\u52a8\u672c\u5730\u96c6\u7fa4"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"# \u542f\u52a8\u96c6\u7fa4\n./bin/start-cluster.sh\n\n# \u67e5\u770b\u8fdb\u7a0b\njps\n# \u5e94\u8be5\u770b\u5230 StandaloneSessionClusterEntrypoint \u548c TaskManagerRunner\n\n# \u8bbf\u95ee Web UI: http://localhost:8081\n"})}),"\n",(0,a.jsx)(e.h2,{id:"\u521b\u5efa-maven-\u9879\u76ee",children:"\u521b\u5efa Maven \u9879\u76ee"}),"\n",(0,a.jsx)(e.h3,{id:"pomxml-\u914d\u7f6e",children:"pom.xml \u914d\u7f6e"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-xml",children:'<?xml version="1.0" encoding="UTF-8"?>\n<project xmlns="http://maven.apache.org/POM/4.0.0"\n         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0\n         http://maven.apache.org/xsd/maven-4.0.0.xsd">\n    <modelVersion>4.0.0</modelVersion>\n\n    <groupId>com.example</groupId>\n    <artifactId>flink-quickstart</artifactId>\n    <version>1.0-SNAPSHOT</version>\n\n    <properties>\n        <flink.version>1.17.1</flink.version>\n        <java.version>11</java.version>\n        <maven.compiler.source>${java.version}</maven.compiler.source>\n        <maven.compiler.target>${java.version}</maven.compiler.target>\n    </properties>\n\n    <dependencies>\n        \x3c!-- Flink \u6838\u5fc3\u4f9d\u8d56 --\x3e\n        <dependency>\n            <groupId>org.apache.flink</groupId>\n            <artifactId>flink-streaming-java</artifactId>\n            <version>${flink.version}</version>\n            <scope>provided</scope>\n        </dependency>\n\n        \x3c!-- Flink \u5ba2\u6237\u7aef --\x3e\n        <dependency>\n            <groupId>org.apache.flink</groupId>\n            <artifactId>flink-clients</artifactId>\n            <version>${flink.version}</version>\n            <scope>provided</scope>\n        </dependency>\n\n        \x3c!-- \u672c\u5730\u8fd0\u884c\u9700\u8981 --\x3e\n        <dependency>\n            <groupId>org.apache.flink</groupId>\n            <artifactId>flink-runtime-web</artifactId>\n            <version>${flink.version}</version>\n            <scope>provided</scope>\n        </dependency>\n    </dependencies>\n\n    <build>\n        <plugins>\n            <plugin>\n                <groupId>org.apache.maven.plugins</groupId>\n                <artifactId>maven-shade-plugin</artifactId>\n                <version>3.4.1</version>\n                <executions>\n                    <execution>\n                        <phase>package</phase>\n                        <goals>\n                            <goal>shade</goal>\n                        </goals>\n                        <configuration>\n                            <transformers>\n                                <transformer implementation="org.apache.maven.plugins.shade.resource.ManifestResourceTransformer">\n                                    <mainClass>com.example.WordCount</mainClass>\n                                </transformer>\n                            </transformers>\n                        </configuration>\n                    </execution>\n                </executions>\n            </plugin>\n        </plugins>\n    </build>\n</project>\n'})}),"\n",(0,a.jsx)(e.h2,{id:"\u7b2c\u4e00\u4e2a-flink-\u7a0b\u5e8f",children:"\u7b2c\u4e00\u4e2a Flink \u7a0b\u5e8f"}),"\n",(0,a.jsx)(e.h3,{id:"wordcount-\u793a\u4f8b",children:"WordCount \u793a\u4f8b"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:'package com.example;\n\nimport org.apache.flink.api.common.functions.FlatMapFunction;\nimport org.apache.flink.api.java.tuple.Tuple2;\nimport org.apache.flink.streaming.api.datastream.DataStream;\nimport org.apache.flink.streaming.api.environment.StreamExecutionEnvironment;\nimport org.apache.flink.util.Collector;\n\npublic class WordCount {\n\n    public static void main(String[] args) throws Exception {\n        // 1. \u521b\u5efa\u6267\u884c\u73af\u5883\n        final StreamExecutionEnvironment env =\n            StreamExecutionEnvironment.getExecutionEnvironment();\n\n        // 2. \u8bfb\u53d6\u6570\u636e\u6e90\n        DataStream<String> text = env.fromElements(\n            "Hello World",\n            "Hello Flink",\n            "Hello Streaming"\n        );\n\n        // 3. \u8f6c\u6362\u5904\u7406\n        DataStream<Tuple2<String, Integer>> counts = text\n            .flatMap(new Tokenizer())\n            .keyBy(value -> value.f0)\n            .sum(1);\n\n        // 4. \u8f93\u51fa\u7ed3\u679c\n        counts.print();\n\n        // 5. \u6267\u884c\u4f5c\u4e1a\n        env.execute("WordCount Example");\n    }\n\n    public static class Tokenizer\n            implements FlatMapFunction<String, Tuple2<String, Integer>> {\n\n        @Override\n        public void flatMap(String value, Collector<Tuple2<String, Integer>> out) {\n            String[] words = value.toLowerCase().split("\\\\s+");\n            for (String word : words) {\n                if (word.length() > 0) {\n                    out.collect(new Tuple2<>(word, 1));\n                }\n            }\n        }\n    }\n}\n'})}),"\n",(0,a.jsx)(e.h3,{id:"\u8fd0\u884c\u7ed3\u679c",children:"\u8fd0\u884c\u7ed3\u679c"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:"(hello,1)\n(world,1)\n(hello,2)\n(flink,1)\n(hello,3)\n(streaming,1)\n"})}),"\n",(0,a.jsx)(e.h2,{id:"socket-\u6d41\u5904\u7406\u793a\u4f8b",children:"Socket \u6d41\u5904\u7406\u793a\u4f8b"}),"\n",(0,a.jsx)(e.h3,{id:"\u542f\u52a8-socket-\u670d\u52a1",children:"\u542f\u52a8 Socket \u670d\u52a1"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"# \u7ec8\u7aef 1\uff1a\u542f\u52a8 netcat\nnc -lk 9999\n"})}),"\n",(0,a.jsx)(e.h3,{id:"socket-wordcount",children:"Socket WordCount"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:'public class SocketWordCount {\n\n    public static void main(String[] args) throws Exception {\n        StreamExecutionEnvironment env =\n            StreamExecutionEnvironment.getExecutionEnvironment();\n\n        // \u4ece Socket \u8bfb\u53d6\u6570\u636e\n        DataStream<String> text = env.socketTextStream("localhost", 9999);\n\n        DataStream<Tuple2<String, Integer>> counts = text\n            .flatMap(new Tokenizer())\n            .keyBy(value -> value.f0)\n            .sum(1);\n\n        counts.print();\n\n        env.execute("Socket WordCount");\n    }\n}\n'})}),"\n",(0,a.jsx)(e.h2,{id:"\u63d0\u4ea4\u5230\u96c6\u7fa4",children:"\u63d0\u4ea4\u5230\u96c6\u7fa4"}),"\n",(0,a.jsx)(e.h3,{id:"\u6253\u5305",children:"\u6253\u5305"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"mvn clean package -DskipTests\n"})}),"\n",(0,a.jsx)(e.h3,{id:"\u63d0\u4ea4\u4f5c\u4e1a",children:"\u63d0\u4ea4\u4f5c\u4e1a"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"# \u63d0\u4ea4\u5230\u672c\u5730\u96c6\u7fa4\n./bin/flink run target/flink-quickstart-1.0-SNAPSHOT.jar\n\n# \u6307\u5b9a\u5e76\u884c\u5ea6\n./bin/flink run -p 4 target/flink-quickstart-1.0-SNAPSHOT.jar\n\n# \u540e\u53f0\u8fd0\u884c\n./bin/flink run -d target/flink-quickstart-1.0-SNAPSHOT.jar\n"})}),"\n",(0,a.jsx)(e.h3,{id:"\u67e5\u770b\u548c\u7ba1\u7406\u4f5c\u4e1a",children:"\u67e5\u770b\u548c\u7ba1\u7406\u4f5c\u4e1a"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"# \u5217\u51fa\u8fd0\u884c\u4e2d\u7684\u4f5c\u4e1a\n./bin/flink list\n\n# \u53d6\u6d88\u4f5c\u4e1a\n./bin/flink cancel <jobId>\n\n# \u521b\u5efa\u4fdd\u5b58\u70b9\n./bin/flink savepoint <jobId> /path/to/savepoints\n"})}),"\n",(0,a.jsx)(e.h2,{id:"\u505c\u6b62\u96c6\u7fa4",children:"\u505c\u6b62\u96c6\u7fa4"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"./bin/stop-cluster.sh\n"})}),"\n",(0,a.jsx)(e.h2,{id:"\u5e38\u89c1\u95ee\u9898",children:"\u5e38\u89c1\u95ee\u9898"}),"\n",(0,a.jsx)(e.h3,{id:"\u5185\u5b58\u4e0d\u8db3",children:"\u5185\u5b58\u4e0d\u8db3"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"# \u4fee\u6539 conf/flink-conf.yaml\ntaskmanager.memory.process.size: 2048m\njobmanager.memory.process.size: 1024m\n"})}),"\n",(0,a.jsx)(e.h3,{id:"\u7c7b\u627e\u4e0d\u5230",children:"\u7c7b\u627e\u4e0d\u5230"}),"\n",(0,a.jsx)(e.p,{children:"\u786e\u4fdd\u4f9d\u8d56\u7684 scope \u8bbe\u7f6e\u6b63\u786e\uff1a"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"provided"}),"\uff1a\u96c6\u7fa4\u5df2\u6709\u7684\u4f9d\u8d56"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"compile"}),"\uff1a\u9700\u8981\u6253\u5305\u7684\u4f9d\u8d56"]}),"\n"]}),"\n",(0,a.jsx)(e.h2,{id:"\u4e0b\u4e00\u6b65",children:"\u4e0b\u4e00\u6b65"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:["\ud83d\udcbb ",(0,a.jsx)(e.a,{href:"/docs/flink/datastream-api",children:"DataStream API"})," - \u6df1\u5165\u5b66\u4e60\u6d41\u5904\u7406 API"]}),"\n",(0,a.jsxs)(e.li,{children:["\ud83d\udcca ",(0,a.jsx)(e.a,{href:"/docs/flink/table-sql",children:"Table API & SQL"})," - \u4f7f\u7528 SQL \u8fdb\u884c\u6570\u636e\u5904\u7406"]}),"\n",(0,a.jsxs)(e.li,{children:["\ud83c\udfaf ",(0,a.jsx)(e.a,{href:"/docs/flink/core-concepts",children:"\u6838\u5fc3\u6982\u5ff5"})," - \u7406\u89e3 Flink \u7684\u6838\u5fc3\u6982\u5ff5"]}),"\n"]})]})}function p(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,a.jsx)(e,{...n,children:(0,a.jsx)(d,{...n})}):d(n)}}}]);