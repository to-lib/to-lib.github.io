"use strict";(globalThis.webpackChunkto_lib_github_io=globalThis.webpackChunkto_lib_github_io||[]).push([[9375],{48885:(e,n,r)=>{r.d(n,{R:()=>i,x:()=>s});var l=r(99378);const a={},c=l.createContext(a);function i(e){const n=l.useContext(c);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),l.createElement(c.Provider,{value:n},e.children)}},65637:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>s,default:()=>h,frontMatter:()=>i,metadata:()=>l,toc:()=>o});const l=JSON.parse('{"id":"rust/cargo-guide","title":"Cargo \u4f7f\u7528\u6307\u5357","description":"Cargo \u662f Rust \u7684\u5305\u7ba1\u7406\u5668\u548c\u6784\u5efa\u7cfb\u7edf\uff0c\u63d0\u4f9b\u4e86\u9879\u76ee\u7ba1\u7406\u3001\u4f9d\u8d56\u7ba1\u7406\u3001\u6784\u5efa\u548c\u53d1\u5e03\u7b49\u529f\u80fd\u3002","source":"@site/docs/rust/cargo-guide.md","sourceDirName":"rust","slug":"/rust/cargo-guide","permalink":"/docs/rust/cargo-guide","draft":false,"unlisted":false,"editUrl":"https://github.com/to-lib/to-lib.github.io/tree/main/docs/rust/cargo-guide.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6,"title":"Cargo \u4f7f\u7528\u6307\u5357"},"sidebar":"rust","previous":{"title":"\u9879\u76ee\u7ec4\u7ec7\u4e0e\u4ee3\u7801\u5206\u6587\u4ef6","permalink":"/docs/rust/project-structure"},"next":{"title":"\u9519\u8bef\u5904\u7406","permalink":"/docs/rust/error-handling"}}');var a=r(22714),c=r(48885);const i={sidebar_position:6,title:"Cargo \u4f7f\u7528\u6307\u5357"},s="Cargo \u4f7f\u7528\u6307\u5357",d={},o=[{value:"Cargo \u57fa\u7840",id:"cargo-\u57fa\u7840",level:2},{value:"\u5b89\u88c5 Cargo",id:"\u5b89\u88c5-cargo",level:3},{value:"\u521b\u5efa\u9879\u76ee",id:"\u521b\u5efa\u9879\u76ee",level:3},{value:"\u9879\u76ee\u7ed3\u6784",id:"\u9879\u76ee\u7ed3\u6784",level:3},{value:"Cargo.toml \u914d\u7f6e",id:"cargotoml-\u914d\u7f6e",level:2},{value:"\u57fa\u672c\u914d\u7f6e",id:"\u57fa\u672c\u914d\u7f6e",level:3},{value:"\u4f9d\u8d56\u7ba1\u7406",id:"\u4f9d\u8d56\u7ba1\u7406",level:3},{value:"\u7248\u672c\u6307\u5b9a",id:"\u7248\u672c\u6307\u5b9a",level:3},{value:"Features \u7279\u6027",id:"features-\u7279\u6027",level:3},{value:"\u6784\u5efa\u914d\u7f6e",id:"\u6784\u5efa\u914d\u7f6e",level:3},{value:"Cargo \u547d\u4ee4",id:"cargo-\u547d\u4ee4",level:2},{value:"\u6784\u5efa\u547d\u4ee4",id:"\u6784\u5efa\u547d\u4ee4",level:3},{value:"\u8fd0\u884c\u547d\u4ee4",id:"\u8fd0\u884c\u547d\u4ee4",level:3},{value:"\u6d4b\u8bd5\u547d\u4ee4",id:"\u6d4b\u8bd5\u547d\u4ee4",level:3},{value:"\u6587\u6863\u547d\u4ee4",id:"\u6587\u6863\u547d\u4ee4",level:3},{value:"\u53d1\u5e03\u547d\u4ee4",id:"\u53d1\u5e03\u547d\u4ee4",level:3},{value:"\u5de5\u4f5c\u7a7a\u95f4 (Workspace)",id:"\u5de5\u4f5c\u7a7a\u95f4-workspace",level:2},{value:"\u521b\u5efa\u5de5\u4f5c\u7a7a\u95f4",id:"\u521b\u5efa\u5de5\u4f5c\u7a7a\u95f4",level:3},{value:"\u5de5\u4f5c\u7a7a\u95f4\u6210\u5458\u914d\u7f6e",id:"\u5de5\u4f5c\u7a7a\u95f4\u6210\u5458\u914d\u7f6e",level:3},{value:"\u5de5\u4f5c\u7a7a\u95f4\u547d\u4ee4",id:"\u5de5\u4f5c\u7a7a\u95f4\u547d\u4ee4",level:3},{value:"\u5e38\u7528\u63d2\u4ef6",id:"\u5e38\u7528\u63d2\u4ef6",level:2},{value:"cargo-edit",id:"cargo-edit",level:3},{value:"cargo-watch",id:"cargo-watch",level:3},{value:"cargo-expand",id:"cargo-expand",level:3},{value:"cargo-tree",id:"cargo-tree",level:3},{value:"cargo-audit",id:"cargo-audit",level:3},{value:"cargo-outdated",id:"cargo-outdated",level:3},{value:"cargo-criterion",id:"cargo-criterion",level:3},{value:"\u6784\u5efa\u811a\u672c",id:"\u6784\u5efa\u811a\u672c",level:2},{value:"build.rs",id:"buildrs",level:3},{value:"\u5e38\u7528\u6307\u4ee4",id:"\u5e38\u7528\u6307\u4ee4",level:3},{value:"\u914d\u7f6e\u6587\u4ef6",id:"\u914d\u7f6e\u6587\u4ef6",level:2},{value:".cargo/config.toml",id:"cargoconfigtoml",level:3},{value:"\u53d1\u5e03\u5230 crates.io",id:"\u53d1\u5e03\u5230-cratesio",level:2},{value:"\u51c6\u5907\u53d1\u5e03",id:"\u51c6\u5907\u53d1\u5e03",level:3},{value:"\u53d1\u5e03\u68c0\u67e5\u6e05\u5355",id:"\u53d1\u5e03\u68c0\u67e5\u6e05\u5355",level:3},{value:"\u6700\u4f73\u5b9e\u8df5",id:"\u6700\u4f73\u5b9e\u8df5",level:2},{value:"1. \u4f7f\u7528\u5de5\u4f5c\u7a7a\u95f4",id:"1-\u4f7f\u7528\u5de5\u4f5c\u7a7a\u95f4",level:3},{value:"2. \u9501\u5b9a\u4f9d\u8d56\u7248\u672c",id:"2-\u9501\u5b9a\u4f9d\u8d56\u7248\u672c",level:3},{value:"3. \u4f7f\u7528 features \u63a7\u5236\u529f\u80fd",id:"3-\u4f7f\u7528-features-\u63a7\u5236\u529f\u80fd",level:3},{value:"4. \u4f7f\u7528 dev-dependencies",id:"4-\u4f7f\u7528-dev-dependencies",level:3},{value:"5. \u5b9a\u671f\u66f4\u65b0\u4f9d\u8d56",id:"5-\u5b9a\u671f\u66f4\u65b0\u4f9d\u8d56",level:3},{value:"6. \u4f7f\u7528 clippy \u68c0\u67e5\u4ee3\u7801",id:"6-\u4f7f\u7528-clippy-\u68c0\u67e5\u4ee3\u7801",level:3},{value:"7. \u4f7f\u7528 rustfmt \u683c\u5f0f\u5316",id:"7-\u4f7f\u7528-rustfmt-\u683c\u5f0f\u5316",level:3},{value:"\u5e38\u89c1\u95ee\u9898",id:"\u5e38\u89c1\u95ee\u9898",level:2},{value:"\u4f9d\u8d56\u51b2\u7a81",id:"\u4f9d\u8d56\u51b2\u7a81",level:3},{value:"\u6784\u5efa\u7f13\u5b58",id:"\u6784\u5efa\u7f13\u5b58",level:3},{value:"\u7f16\u8bd1\u901f\u5ea6\u4f18\u5316",id:"\u7f16\u8bd1\u901f\u5ea6\u4f18\u5316",level:3},{value:"\u4ea4\u53c9\u7f16\u8bd1",id:"\u4ea4\u53c9\u7f16\u8bd1",level:3},{value:"\u603b\u7ed3",id:"\u603b\u7ed3",level:2}];function t(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,c.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"cargo-\u4f7f\u7528\u6307\u5357",children:"Cargo \u4f7f\u7528\u6307\u5357"})}),"\n",(0,a.jsx)(n.p,{children:"Cargo \u662f Rust \u7684\u5305\u7ba1\u7406\u5668\u548c\u6784\u5efa\u7cfb\u7edf\uff0c\u63d0\u4f9b\u4e86\u9879\u76ee\u7ba1\u7406\u3001\u4f9d\u8d56\u7ba1\u7406\u3001\u6784\u5efa\u548c\u53d1\u5e03\u7b49\u529f\u80fd\u3002"}),"\n",(0,a.jsx)(n.h2,{id:"cargo-\u57fa\u7840",children:"Cargo \u57fa\u7840"}),"\n",(0,a.jsx)(n.h3,{id:"\u5b89\u88c5-cargo",children:"\u5b89\u88c5 Cargo"}),"\n",(0,a.jsx)(n.p,{children:"Cargo \u968f Rust \u4e00\u8d77\u5b89\u88c5\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# \u9a8c\u8bc1\u5b89\u88c5\ncargo --version\n"})}),"\n",(0,a.jsx)(n.h3,{id:"\u521b\u5efa\u9879\u76ee",children:"\u521b\u5efa\u9879\u76ee"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# \u521b\u5efa\u4e8c\u8fdb\u5236\u9879\u76ee\ncargo new my_project\n\n# \u521b\u5efa\u5e93\u9879\u76ee\ncargo new my_lib --lib\n\n# \u5728\u5f53\u524d\u76ee\u5f55\u521b\u5efa\ncargo init\n"})}),"\n",(0,a.jsx)(n.h3,{id:"\u9879\u76ee\u7ed3\u6784",children:"\u9879\u76ee\u7ed3\u6784"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"my_project/\n\u251c\u2500\u2500 Cargo.toml       # \u9879\u76ee\u914d\u7f6e\n\u251c\u2500\u2500 Cargo.lock       # \u4f9d\u8d56\u9501\u5b9a\uff08\u81ea\u52a8\u751f\u6210\uff09\n\u251c\u2500\u2500 src/\n\u2502   \u2514\u2500\u2500 main.rs      # \u4e8c\u8fdb\u5236\u5165\u53e3\n\u2514\u2500\u2500 target/          # \u6784\u5efa\u8f93\u51fa\uff08\u81ea\u52a8\u751f\u6210\uff09\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u5e93\u9879\u76ee\u7ed3\u6784\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"my_lib/\n\u251c\u2500\u2500 Cargo.toml\n\u251c\u2500\u2500 src/\n\u2502   \u2514\u2500\u2500 lib.rs       # \u5e93\u5165\u53e3\n\u2514\u2500\u2500 tests/           # \u96c6\u6210\u6d4b\u8bd5\n"})}),"\n",(0,a.jsx)(n.h2,{id:"cargotoml-\u914d\u7f6e",children:"Cargo.toml \u914d\u7f6e"}),"\n",(0,a.jsx)(n.h3,{id:"\u57fa\u672c\u914d\u7f6e",children:"\u57fa\u672c\u914d\u7f6e"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-toml",children:'[package]\nname = "my_project"\nversion = "0.1.0"\nedition = "2021"\nauthors = ["Your Name <you@example.com>"]\ndescription = "A short description"\nlicense = "MIT"\nrepository = "https://github.com/username/repo"\nkeywords = ["cli", "tool"]\ncategories = ["command-line-utilities"]\n'})}),"\n",(0,a.jsx)(n.h3,{id:"\u4f9d\u8d56\u7ba1\u7406",children:"\u4f9d\u8d56\u7ba1\u7406"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-toml",children:'[dependencies]\nserde = "1.0"                          # \u6700\u65b0 1.x \u7248\u672c\ntokio = "1.28.0"                       # \u7cbe\u786e\u5230\u8865\u4e01\u7248\u672c\nrand = "0.8.5"                         # \u517c\u5bb9\u8303\u56f4\n\n# \u4ece git \u4ed3\u5e93\nreqwest = { git = "https://github.com/seanmonstar/reqwest" }\n\n# \u672c\u5730\u8def\u5f84\nmy_lib = { path = "../my_lib" }\n\n# \u6307\u5b9a features\ntokio = { version = "1", features = ["full"] }\nserde = { version = "1.0", features = ["derive"] }\n\n# \u53ef\u9009\u4f9d\u8d56\nclap = { version = "4", optional = true }\n\n[dev-dependencies]\n# \u4ec5\u7528\u4e8e\u6d4b\u8bd5\u548c\u57fa\u51c6\u6d4b\u8bd5\ncriterion = "0.5"\n\n[build-dependencies]\n# \u7528\u4e8e\u6784\u5efa\u811a\u672c\ncc = "1.0"\n'})}),"\n",(0,a.jsx)(n.h3,{id:"\u7248\u672c\u6307\u5b9a",children:"\u7248\u672c\u6307\u5b9a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-toml",children:'# \u63d2\u5165\u7b26\u53f7\uff08\u9ed8\u8ba4\uff09\nserde = "^1.0"     # >= 1.0.0, < 2.0.0\nserde = "^1.2"     # >= 1.2.0, < 2.0.0\n\n# \u6ce2\u6d6a\u53f7\nserde = "~1.2.3"   # >= 1.2.3, < 1.3.0\n\n# \u901a\u914d\u7b26\nserde = "1.*"      # >= 1.0.0, < 2.0.0\n\n# \u6bd4\u8f83\u8fd0\u7b97\u7b26\nserde = ">= 1.0, < 2.0"\n\n# \u7cbe\u786e\u7248\u672c\nserde = "= 1.0.0"\n'})}),"\n",(0,a.jsx)(n.h3,{id:"features-\u7279\u6027",children:"Features \u7279\u6027"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-toml",children:'[features]\ndefault = ["std"]              # \u9ed8\u8ba4\u7279\u6027\nstd = []                       # \u6807\u51c6\u5e93\u652f\u6301\nadvanced = ["dep:tokio"]       # \u542f\u7528\u53ef\u9009\u4f9d\u8d56\n\n[dependencies]\ntokio = { version = "1", optional = true }\n'})}),"\n",(0,a.jsx)(n.p,{children:"\u4f7f\u7528\u7279\u6027\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'# \u4f7f\u7528\u9ed8\u8ba4\u7279\u6027\ncargo build\n\n# \u4e0d\u4f7f\u7528\u9ed8\u8ba4\u7279\u6027\ncargo build --no-default-features\n\n# \u6307\u5b9a\u7279\u6027\ncargo build --features "advanced"\n'})}),"\n",(0,a.jsx)(n.h3,{id:"\u6784\u5efa\u914d\u7f6e",children:"\u6784\u5efa\u914d\u7f6e"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-toml",children:"[profile.dev]\nopt-level = 0           # \u65e0\u4f18\u5316\uff08\u5feb\u901f\u7f16\u8bd1\uff09\n\n[profile.release]\nopt-level = 3           # \u6700\u5927\u4f18\u5316\nlto = true              # \u94fe\u63a5\u65f6\u4f18\u5316\ncodegen-units = 1       # \u5355\u7ebf\u7a0b\u4ee3\u7801\u751f\u6210\uff08\u66f4\u597d\u4f18\u5316\uff09\nstrip = true            # \u79fb\u9664\u7b26\u53f7\u4fe1\u606f\n\n[profile.test]\nopt-level = 1           # \u6d4b\u8bd5\u65f6\u8f7b\u5fae\u4f18\u5316\n"})}),"\n",(0,a.jsx)(n.h2,{id:"cargo-\u547d\u4ee4",children:"Cargo \u547d\u4ee4"}),"\n",(0,a.jsx)(n.h3,{id:"\u6784\u5efa\u547d\u4ee4",children:"\u6784\u5efa\u547d\u4ee4"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# \u7f16\u8bd1\u9879\u76ee\ncargo build\n\n# \u53d1\u5e03\u6784\u5efa\uff08\u4f18\u5316\uff09\ncargo build --release\n\n# \u68c0\u67e5\u4ee3\u7801\uff08\u4e0d\u751f\u6210\u53ef\u6267\u884c\u6587\u4ef6\uff09\ncargo check\n\n# \u6e05\u7406\u6784\u5efa\u4ea7\u7269\ncargo clean\n"})}),"\n",(0,a.jsx)(n.h3,{id:"\u8fd0\u884c\u547d\u4ee4",children:"\u8fd0\u884c\u547d\u4ee4"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# \u8fd0\u884c\u9879\u76ee\ncargo run\n\n# \u8fd0\u884c\u5e76\u4f20\u9012\u53c2\u6570\ncargo run -- arg1 arg2\n\n# \u8fd0\u884c\u793a\u4f8b\ncargo run --example example_name\n\n# \u53d1\u5e03\u6a21\u5f0f\u8fd0\u884c\ncargo run --release\n"})}),"\n",(0,a.jsx)(n.h3,{id:"\u6d4b\u8bd5\u547d\u4ee4",children:"\u6d4b\u8bd5\u547d\u4ee4"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# \u8fd0\u884c\u6240\u6709\u6d4b\u8bd5\ncargo test\n\n# \u8fd0\u884c\u7279\u5b9a\u6d4b\u8bd5\ncargo test test_name\n\n# \u663e\u793a\u6d4b\u8bd5\u8f93\u51fa\ncargo test -- --nocapture\n\n# \u8fd0\u884c\u5355\u4e2a\u6d4b\u8bd5\ncargo test -- --test-threads=1\n\n# \u8fd0\u884c\u6587\u6863\u6d4b\u8bd5\ncargo test --doc\n\n# \u8fd0\u884c\u96c6\u6210\u6d4b\u8bd5\ncargo test --test integration_test\n"})}),"\n",(0,a.jsx)(n.h3,{id:"\u6587\u6863\u547d\u4ee4",children:"\u6587\u6863\u547d\u4ee4"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# \u751f\u6210\u6587\u6863\ncargo doc\n\n# \u751f\u6210\u5e76\u6253\u5f00\u6587\u6863\ncargo doc --open\n\n# \u5305\u542b\u6240\u6709\u4f9d\u8d56\u7684\u6587\u6863\ncargo doc --no-deps\n"})}),"\n",(0,a.jsx)(n.h3,{id:"\u53d1\u5e03\u547d\u4ee4",children:"\u53d1\u5e03\u547d\u4ee4"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# \u6253\u5305\u9879\u76ee\ncargo package\n\n# \u53d1\u5e03\u5230 crates.io\ncargo publish\n\n# \u64a4\u56de\u5df2\u53d1\u5e03\u7248\u672c\ncargo yank --vers 1.0.1\n\n# \u68c0\u67e5\u662f\u5426\u53ef\u4ee5\u53d1\u5e03\ncargo publish --dry-run\n"})}),"\n",(0,a.jsx)(n.h2,{id:"\u5de5\u4f5c\u7a7a\u95f4-workspace",children:"\u5de5\u4f5c\u7a7a\u95f4 (Workspace)"}),"\n",(0,a.jsx)(n.h3,{id:"\u521b\u5efa\u5de5\u4f5c\u7a7a\u95f4",children:"\u521b\u5efa\u5de5\u4f5c\u7a7a\u95f4"}),"\n",(0,a.jsxs)(n.p,{children:["\u9879\u76ee\u6839\u76ee\u5f55\u7684 ",(0,a.jsx)(n.code,{children:"Cargo.toml"}),"\uff1a"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-toml",children:'[workspace]\nmembers = [\n    "crate1",\n    "crate2",\n    "crate3",\n]\n\n[workspace.dependencies]\nserde = "1.0"\ntokio = { version = "1", features = ["full"] }\n'})}),"\n",(0,a.jsx)(n.p,{children:"\u76ee\u5f55\u7ed3\u6784\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"workspace/\n\u251c\u2500\u2500 Cargo.toml\n\u251c\u2500\u2500 Cargo.lock\n\u251c\u2500\u2500 crate1/\n\u2502   \u251c\u2500\u2500 Cargo.toml\n\u2502   \u2514\u2500\u2500 src/\n\u251c\u2500\u2500 crate2/\n\u2502   \u251c\u2500\u2500 Cargo.toml\n\u2502   \u2514\u2500\u2500 src/\n\u2514\u2500\u2500 target/\n"})}),"\n",(0,a.jsx)(n.h3,{id:"\u5de5\u4f5c\u7a7a\u95f4\u6210\u5458\u914d\u7f6e",children:"\u5de5\u4f5c\u7a7a\u95f4\u6210\u5458\u914d\u7f6e"}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.code,{children:"crate1/Cargo.toml"}),"\uff1a"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-toml",children:'[package]\nname = "crate1"\nversion = "0.1.0"\nedition = "2021"\n\n[dependencies]\nserde = { workspace = true }\ncrate2 = { path = "../crate2" }\n'})}),"\n",(0,a.jsx)(n.h3,{id:"\u5de5\u4f5c\u7a7a\u95f4\u547d\u4ee4",children:"\u5de5\u4f5c\u7a7a\u95f4\u547d\u4ee4"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# \u6784\u5efa\u6240\u6709\u6210\u5458\ncargo build\n\n# \u6784\u5efa\u7279\u5b9a\u6210\u5458\ncargo build -p crate1\n\n# \u8fd0\u884c\u7279\u5b9a\u6210\u5458\ncargo run -p crate1\n\n# \u6d4b\u8bd5\u6240\u6709\u6210\u5458\ncargo test\n\n# \u6d4b\u8bd5\u7279\u5b9a\u6210\u5458\ncargo test -p crate2\n"})}),"\n",(0,a.jsx)(n.h2,{id:"\u5e38\u7528\u63d2\u4ef6",children:"\u5e38\u7528\u63d2\u4ef6"}),"\n",(0,a.jsx)(n.h3,{id:"cargo-edit",children:"cargo-edit"}),"\n",(0,a.jsx)(n.p,{children:"\u7ba1\u7406\u4f9d\u8d56\u7684\u5de5\u5177\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# \u5b89\u88c5\ncargo install cargo-edit\n\n# \u6dfb\u52a0\u4f9d\u8d56\ncargo add serde\n\n# \u6dfb\u52a0\u5f00\u53d1\u4f9d\u8d56\ncargo add --dev tokio-test\n\n# \u5220\u9664\u4f9d\u8d56\ncargo rm serde\n\n# \u5347\u7ea7\u4f9d\u8d56\ncargo upgrade\n"})}),"\n",(0,a.jsx)(n.h3,{id:"cargo-watch",children:"cargo-watch"}),"\n",(0,a.jsx)(n.p,{children:"\u81ea\u52a8\u6784\u5efa\u548c\u6d4b\u8bd5\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# \u5b89\u88c5\ncargo install cargo-watch\n\n# \u81ea\u52a8\u91cd\u65b0\u6784\u5efa\ncargo watch\n\n# \u81ea\u52a8\u8fd0\u884c\u6d4b\u8bd5\ncargo watch -x test\n\n# \u81ea\u52a8\u8fd0\u884c\u7a0b\u5e8f\ncargo watch -x run\n"})}),"\n",(0,a.jsx)(n.h3,{id:"cargo-expand",children:"cargo-expand"}),"\n",(0,a.jsx)(n.p,{children:"\u5c55\u5f00\u5b8f\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# \u5b89\u88c5\ncargo install cargo-expand\n\n# \u5c55\u5f00\u5b8f\ncargo expand\n"})}),"\n",(0,a.jsx)(n.h3,{id:"cargo-tree",children:"cargo-tree"}),"\n",(0,a.jsx)(n.p,{children:"\u663e\u793a\u4f9d\u8d56\u6811\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# \u663e\u793a\u4f9d\u8d56\u6811\ncargo tree\n\n# \u663e\u793a\u7279\u5b9a\u5305\u7684\u4f9d\u8d56\ncargo tree -p serde\n\n# \u53cd\u5411\u4f9d\u8d56\ncargo tree -i serde\n"})}),"\n",(0,a.jsx)(n.h3,{id:"cargo-audit",children:"cargo-audit"}),"\n",(0,a.jsx)(n.p,{children:"\u5b89\u5168\u5ba1\u8ba1\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# \u5b89\u88c5\ncargo install cargo-audit\n\n# \u68c0\u67e5\u4f9d\u8d56\u6f0f\u6d1e\ncargo audit\n"})}),"\n",(0,a.jsx)(n.h3,{id:"cargo-outdated",children:"cargo-outdated"}),"\n",(0,a.jsx)(n.p,{children:"\u68c0\u67e5\u8fc7\u65f6\u4f9d\u8d56\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# \u5b89\u88c5\ncargo install cargo-outdated\n\n# \u68c0\u67e5\u8fc7\u65f6\u4f9d\u8d56\ncargo outdated\n"})}),"\n",(0,a.jsx)(n.h3,{id:"cargo-criterion",children:"cargo-criterion"}),"\n",(0,a.jsx)(n.p,{children:"\u6027\u80fd\u57fa\u51c6\u6d4b\u8bd5\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# \u5b89\u88c5\ncargo install cargo-criterion\n\n# \u8fd0\u884c\u57fa\u51c6\u6d4b\u8bd5\ncargo criterion\n"})}),"\n",(0,a.jsx)(n.h2,{id:"\u6784\u5efa\u811a\u672c",children:"\u6784\u5efa\u811a\u672c"}),"\n",(0,a.jsx)(n.h3,{id:"buildrs",children:"build.rs"}),"\n",(0,a.jsxs)(n.p,{children:["\u9879\u76ee\u6839\u76ee\u5f55\u521b\u5efa ",(0,a.jsx)(n.code,{children:"build.rs"}),"\uff1a"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-rust",children:'fn main() {\n    println!("cargo:rerun-if-changed=src/hello.c");\n\n    // \u7f16\u8bd1 C \u4ee3\u7801\n    cc::Build::new()\n        .file("src/hello.c")\n        .compile("hello");\n\n    // \u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\n    println!("cargo:rustc-env=BUILD_TIME={}", chrono::Utc::now());\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"\u5e38\u7528\u6307\u4ee4",children:"\u5e38\u7528\u6307\u4ee4"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-rust",children:'// \u94fe\u63a5\u5e93\nprintln!("cargo:rustc-link-lib=sqlite3");\n\n// \u641c\u7d22\u8def\u5f84\nprintln!("cargo:rustc-link-search=/path/to/lib");\n\n// \u4f20\u9012\u7ed9 rustc \u7684\u53c2\u6570\nprintln!("cargo:rustc-cfg=feature=\\"custom\\"");\n\n// \u91cd\u65b0\u8fd0\u884c\u6761\u4ef6\nprintln!("cargo:rerun-if-changed=build.rs");\nprintln!("cargo:rerun-if-env-changed=CC");\n'})}),"\n",(0,a.jsx)(n.h2,{id:"\u914d\u7f6e\u6587\u4ef6",children:"\u914d\u7f6e\u6587\u4ef6"}),"\n",(0,a.jsx)(n.h3,{id:"cargoconfigtoml",children:".cargo/config.toml"}),"\n",(0,a.jsx)(n.p,{children:"\u9879\u76ee\u6216\u7528\u6237\u7ea7\u914d\u7f6e\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-toml",children:'# \u6784\u5efa\u914d\u7f6e\n[build]\ntarget = "x86_64-unknown-linux-musl"\njobs = 4\n\n# \u76ee\u6807\u914d\u7f6e\n[target.x86_64-unknown-linux-gnu]\nlinker = "clang"\n\n# \u522b\u540d\n[alias]\nb = "build"\nt = "test"\nr = "run"\nbr = "build --release"\n\n# \u73af\u5883\u53d8\u91cf\n[env]\nRUST_BACKTRACE = "1"\n\n# \u6ce8\u518c\u8868\u955c\u50cf\n[source.crates-io]\nreplace-with = "tuna"\n\n[source.tuna]\nregistry = "https://mirrors.tuna.tsinghua.edu.cn/git/crates.io-index.git"\n'})}),"\n",(0,a.jsx)(n.h2,{id:"\u53d1\u5e03\u5230-cratesio",children:"\u53d1\u5e03\u5230 crates.io"}),"\n",(0,a.jsx)(n.h3,{id:"\u51c6\u5907\u53d1\u5e03",children:"\u51c6\u5907\u53d1\u5e03"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["\u5b8c\u5584 ",(0,a.jsx)(n.code,{children:"Cargo.toml"}),"\uff1a"]}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-toml",children:'[package]\nname = "my_crate"\nversion = "0.1.0"\nedition = "2021"\nauthors = ["Your Name <you@example.com>"]\nlicense = "MIT OR Apache-2.0"\ndescription = "A useful crate"\nrepository = "https://github.com/username/my_crate"\ndocumentation = "https://docs.rs/my_crate"\nreadme = "README.md"\nkeywords = ["cli", "utility"]\ncategories = ["command-line-utilities"]\n'})}),"\n",(0,a.jsxs)(n.ol,{start:"2",children:["\n",(0,a.jsx)(n.li,{children:"\u767b\u5f55 crates.io\uff1a"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"cargo login <your-api-token>\n"})}),"\n",(0,a.jsxs)(n.ol,{start:"3",children:["\n",(0,a.jsx)(n.li,{children:"\u53d1\u5e03\uff1a"}),"\n"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# \u68c0\u67e5\ncargo publish --dry-run\n\n# \u53d1\u5e03\ncargo publish\n"})}),"\n",(0,a.jsx)(n.h3,{id:"\u53d1\u5e03\u68c0\u67e5\u6e05\u5355",children:"\u53d1\u5e03\u68c0\u67e5\u6e05\u5355"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"\u2705 README.md \u5b58\u5728\u4e14\u5b8c\u5584"}),"\n",(0,a.jsx)(n.li,{children:"\u2705 \u8bb8\u53ef\u8bc1\u6587\u4ef6"}),"\n",(0,a.jsx)(n.li,{children:"\u2705 \u6587\u6863\u6ce8\u91ca\u5b8c\u6574"}),"\n",(0,a.jsx)(n.li,{children:"\u2705 \u6240\u6709\u6d4b\u8bd5\u901a\u8fc7"}),"\n",(0,a.jsx)(n.li,{children:"\u2705 \u7248\u672c\u53f7\u7b26\u5408\u8bed\u4e49\u5316\u7248\u672c"}),"\n",(0,a.jsx)(n.li,{children:"\u2705 \u793a\u4f8b\u4ee3\u7801\u53ef\u8fd0\u884c"}),"\n",(0,a.jsx)(n.li,{children:"\u2705 \u4f9d\u8d56\u7248\u672c\u5408\u7406"}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"\u6700\u4f73\u5b9e\u8df5",children:"\u6700\u4f73\u5b9e\u8df5"}),"\n",(0,a.jsx)(n.h3,{id:"1-\u4f7f\u7528\u5de5\u4f5c\u7a7a\u95f4",children:"1. \u4f7f\u7528\u5de5\u4f5c\u7a7a\u95f4"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-toml",children:'# \u5927\u578b\u9879\u76ee\u4f7f\u7528\u5de5\u4f5c\u7a7a\u95f4\n[workspace]\nmembers = ["core", "cli", "server"]\n'})}),"\n",(0,a.jsx)(n.h3,{id:"2-\u9501\u5b9a\u4f9d\u8d56\u7248\u672c",children:"2. \u9501\u5b9a\u4f9d\u8d56\u7248\u672c"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'# \u63d0\u4ea4 Cargo.lock\uff08\u4e8c\u8fdb\u5236\u9879\u76ee\uff09\ngit add Cargo.lock\n\n# \u4e0d\u63d0\u4ea4 Cargo.lock\uff08\u5e93\u9879\u76ee\uff09\necho "Cargo.lock" >> .gitignore\n'})}),"\n",(0,a.jsx)(n.h3,{id:"3-\u4f7f\u7528-features-\u63a7\u5236\u529f\u80fd",children:"3. \u4f7f\u7528 features \u63a7\u5236\u529f\u80fd"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-toml",children:'[features]\ndefault = ["std"]\nstd = []\nno_std = []\nexperimental = []\n'})}),"\n",(0,a.jsx)(n.h3,{id:"4-\u4f7f\u7528-dev-dependencies",children:"4. \u4f7f\u7528 dev-dependencies"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-toml",children:'[dev-dependencies]\n# \u4ec5\u6d4b\u8bd5\u65f6\u9700\u8981\nproptest = "1.0"\n'})}),"\n",(0,a.jsx)(n.h3,{id:"5-\u5b9a\u671f\u66f4\u65b0\u4f9d\u8d56",children:"5. \u5b9a\u671f\u66f4\u65b0\u4f9d\u8d56"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"cargo update\ncargo audit\ncargo outdated\n"})}),"\n",(0,a.jsx)(n.h3,{id:"6-\u4f7f\u7528-clippy-\u68c0\u67e5\u4ee3\u7801",children:"6. \u4f7f\u7528 clippy \u68c0\u67e5\u4ee3\u7801"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"cargo clippy\ncargo clippy -- -D warnings\n"})}),"\n",(0,a.jsx)(n.h3,{id:"7-\u4f7f\u7528-rustfmt-\u683c\u5f0f\u5316",children:"7. \u4f7f\u7528 rustfmt \u683c\u5f0f\u5316"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"cargo fmt\ncargo fmt -- --check\n"})}),"\n",(0,a.jsx)(n.h2,{id:"\u5e38\u89c1\u95ee\u9898",children:"\u5e38\u89c1\u95ee\u9898"}),"\n",(0,a.jsx)(n.h3,{id:"\u4f9d\u8d56\u51b2\u7a81",children:"\u4f9d\u8d56\u51b2\u7a81"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# \u67e5\u770b\u4f9d\u8d56\u6811\ncargo tree\n\n# \u66f4\u65b0\u4f9d\u8d56\ncargo update -p package_name\n"})}),"\n",(0,a.jsx)(n.h3,{id:"\u6784\u5efa\u7f13\u5b58",children:"\u6784\u5efa\u7f13\u5b58"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# \u6e05\u7406\u7f13\u5b58\ncargo clean\n\n# \u6e05\u7406\u7279\u5b9a target\nrm -rf target/debug\n"})}),"\n",(0,a.jsx)(n.h3,{id:"\u7f16\u8bd1\u901f\u5ea6\u4f18\u5316",children:"\u7f16\u8bd1\u901f\u5ea6\u4f18\u5316"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-toml",children:'# Cargo.toml\n[profile.dev]\nincremental = true\n\n[profile.dev.package."*"]\nopt-level = 0\ndebug = false\n'})}),"\n",(0,a.jsx)(n.h3,{id:"\u4ea4\u53c9\u7f16\u8bd1",children:"\u4ea4\u53c9\u7f16\u8bd1"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# \u6dfb\u52a0\u76ee\u6807\nrustup target add x86_64-pc-windows-gnu\n\n# \u6784\u5efa\ncargo build --target x86_64-pc-windows-gnu\n"})}),"\n",(0,a.jsx)(n.h2,{id:"\u603b\u7ed3",children:"\u603b\u7ed3"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"\u2705 Cargo \u662f Rust \u7684\u6838\u5fc3\u5de5\u5177"}),"\n",(0,a.jsx)(n.li,{children:"\u2705 Cargo.toml \u914d\u7f6e\u9879\u76ee\u4fe1\u606f\u548c\u4f9d\u8d56"}),"\n",(0,a.jsx)(n.li,{children:"\u2705 \u5de5\u4f5c\u7a7a\u95f4\u7ba1\u7406\u591a\u4e2a\u5305"}),"\n",(0,a.jsx)(n.li,{children:"\u2705 \u4e30\u5bcc\u7684\u63d2\u4ef6\u751f\u6001"}),"\n",(0,a.jsx)(n.li,{children:"\u2705 \u652f\u6301\u6784\u5efa\u811a\u672c\u81ea\u5b9a\u4e49\u6784\u5efa"}),"\n",(0,a.jsx)(n.li,{children:"\u2705 \u53d1\u5e03\u5230 crates.io \u5f88\u7b80\u5355"}),"\n",(0,a.jsx)(n.li,{children:"\u2705 \u4f7f\u7528 features \u63a7\u5236\u53ef\u9009\u529f\u80fd"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"\u638c\u63e1 Cargo\uff0c\u80fd\u5927\u5927\u63d0\u5347 Rust \u5f00\u53d1\u6548\u7387\uff01"})]})}function h(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(t,{...e})}):t(e)}}}]);