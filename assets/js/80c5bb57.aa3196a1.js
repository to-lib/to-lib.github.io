"use strict";(globalThis.webpackChunkto_lib_github_io=globalThis.webpackChunkto_lib_github_io||[]).push([[61471],{48885:(n,e,t)=>{t.d(e,{R:()=>d,x:()=>s});var c=t(99378);const r={},i=c.createContext(r);function d(n){const e=c.useContext(i);return c.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:d(n.components),c.createElement(i.Provider,{value:e},n.children)}},76121:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>l,contentTitle:()=>s,default:()=>h,frontMatter:()=>d,metadata:()=>c,toc:()=>o});const c=JSON.parse('{"id":"react/strict-mode","title":"\u4e25\u683c\u6a21\u5f0f","description":"[!TIP]","source":"@site/docs/react/strict-mode.md","sourceDirName":"react","slug":"/react/strict-mode","permalink":"/docs/react/strict-mode","draft":false,"unlisted":false,"editUrl":"https://github.com/to-lib/to-lib.github.io/tree/main/docs/react/strict-mode.md","tags":[],"version":"current","sidebarPosition":19,"frontMatter":{"sidebar_position":19,"title":"\u4e25\u683c\u6a21\u5f0f"}}');var r=t(22714),i=t(48885);const d={sidebar_position:19,title:"\u4e25\u683c\u6a21\u5f0f"},s="React \u4e25\u683c\u6a21\u5f0f (StrictMode)",l={},o=[{value:"\ud83c\udfaf \u4ec0\u4e48\u662f StrictMode\uff1f",id:"-\u4ec0\u4e48\u662f-strictmode",level:2},{value:"\ud83d\udd04 \u53cc\u91cd\u6e32\u67d3\u68c0\u6d4b",id:"-\u53cc\u91cd\u6e32\u67d3\u68c0\u6d4b",level:2},{value:"\u4e3a\u4ec0\u4e48\u53cc\u91cd\u6e32\u67d3\uff1f",id:"\u4e3a\u4ec0\u4e48\u53cc\u91cd\u6e32\u67d3",level:3},{value:"\u5e38\u89c1\u95ee\u9898\u573a\u666f",id:"\u5e38\u89c1\u95ee\u9898\u573a\u666f",level:3},{value:"\ud83d\udd01 Effect \u53cc\u91cd\u6267\u884c",id:"-effect-\u53cc\u91cd\u6267\u884c",level:2},{value:"\u4e3a\u4ec0\u4e48\u8fd9\u6837\u505a\uff1f",id:"\u4e3a\u4ec0\u4e48\u8fd9\u6837\u505a",level:3},{value:"\u5904\u7406\u53cc\u91cd\u6267\u884c",id:"\u5904\u7406\u53cc\u91cd\u6267\u884c",level:3},{value:"\u26a0\ufe0f \u5e9f\u5f03 API \u8b66\u544a",id:"\ufe0f-\u5e9f\u5f03-api-\u8b66\u544a",level:2},{value:"React 19 \u4e2d\u5df2\u79fb\u9664\u7684 API",id:"react-19-\u4e2d\u5df2\u79fb\u9664\u7684-api",level:3},{value:"\ud83d\udce6 \u5c40\u90e8\u4f7f\u7528",id:"-\u5c40\u90e8\u4f7f\u7528",level:2},{value:"\ud83d\udee0\ufe0f \u5e38\u89c1\u95ee\u9898\u89e3\u7b54",id:"\ufe0f-\u5e38\u89c1\u95ee\u9898\u89e3\u7b54",level:2},{value:"\u4e3a\u4ec0\u4e48\u6211\u7684\u7ec4\u4ef6\u6e32\u67d3\u4e86\u4e24\u6b21\uff1f",id:"\u4e3a\u4ec0\u4e48\u6211\u7684\u7ec4\u4ef6\u6e32\u67d3\u4e86\u4e24\u6b21",level:3},{value:"\u4e3a\u4ec0\u4e48\u6211\u7684 useEffect \u6267\u884c\u4e86\u4e24\u6b21\uff1f",id:"\u4e3a\u4ec0\u4e48\u6211\u7684-useeffect-\u6267\u884c\u4e86\u4e24\u6b21",level:3},{value:"\u5982\u4f55\u5173\u95ed\u53cc\u91cd\u6e32\u67d3\uff1f",id:"\u5982\u4f55\u5173\u95ed\u53cc\u91cd\u6e32\u67d3",level:3},{value:"\u751f\u4ea7\u73af\u5883\u6709\u5f71\u54cd\u5417\uff1f",id:"\u751f\u4ea7\u73af\u5883\u6709\u5f71\u54cd\u5417",level:3},{value:"\ud83d\udca1 \u6700\u4f73\u5b9e\u8df5",id:"-\u6700\u4f73\u5b9e\u8df5",level:2},{value:"1. \u5728\u6839\u7ec4\u4ef6\u542f\u7528",id:"1-\u5728\u6839\u7ec4\u4ef6\u542f\u7528",level:3},{value:"2. \u786e\u4fdd Effect \u53ef\u91cd\u590d\u6267\u884c",id:"2-\u786e\u4fdd-effect-\u53ef\u91cd\u590d\u6267\u884c",level:3},{value:"3. \u907f\u514d\u6e32\u67d3\u671f\u95f4\u7684\u526f\u4f5c\u7528",id:"3-\u907f\u514d\u6e32\u67d3\u671f\u95f4\u7684\u526f\u4f5c\u7528",level:3},{value:"\ud83d\udd17 \u76f8\u5173\u8d44\u6e90",id:"-\u76f8\u5173\u8d44\u6e90",level:2}];function a(n){const e={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"react-\u4e25\u683c\u6a21\u5f0f-strictmode",children:"React \u4e25\u683c\u6a21\u5f0f (StrictMode)"})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsx)(e.p,{children:"[!TIP]\nStrictMode \u662f\u4e00\u4e2a\u7528\u4e8e\u7a81\u51fa\u663e\u793a\u5e94\u7528\u7a0b\u5e8f\u4e2d\u6f5c\u5728\u95ee\u9898\u7684\u5de5\u5177\u3002\u5b83\u4e0d\u4f1a\u6e32\u67d3\u4efb\u4f55\u53ef\u89c1\u7684 UI\uff0c\u53ea\u662f\u4e3a\u5176\u540e\u4ee3\u5143\u7d20\u89e6\u53d1\u989d\u5916\u7684\u68c0\u67e5\u548c\u8b66\u544a\u3002"}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"-\u4ec0\u4e48\u662f-strictmode",children:"\ud83c\udfaf \u4ec0\u4e48\u662f StrictMode\uff1f"}),"\n",(0,r.jsx)(e.p,{children:"StrictMode \u662f\u4e00\u4e2a\u5f00\u53d1\u8f85\u52a9\u5de5\u5177\uff0c\u5e2e\u52a9\u4f60\uff1a"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u8bc6\u522b\u4e0d\u5b89\u5168\u7684\u751f\u547d\u5468\u671f\u65b9\u6cd5"}),"\n",(0,r.jsx)(e.li,{children:"\u68c0\u6d4b\u610f\u5916\u7684\u526f\u4f5c\u7528"}),"\n",(0,r.jsx)(e.li,{children:"\u53d1\u73b0\u5e9f\u5f03\u7684 API \u4f7f\u7528"}),"\n",(0,r.jsx)(e.li,{children:"\u786e\u4fdd\u7ec4\u4ef6\u7b26\u5408\u5e76\u53d1\u6e32\u67d3\u8981\u6c42"}),"\n"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-jsx",children:'import { StrictMode } from "react";\n\nfunction App() {\n  return (\n    <StrictMode>\n      <MyApp />\n    </StrictMode>\n  );\n}\n'})}),"\n",(0,r.jsxs)(e.blockquote,{children:["\n",(0,r.jsxs)(e.p,{children:["[!IMPORTANT]\nStrictMode ",(0,r.jsx)(e.strong,{children:"\u4ec5\u5728\u5f00\u53d1\u6a21\u5f0f"}),"\u4e0b\u8fd0\u884c\uff0c\u4e0d\u4f1a\u5f71\u54cd\u751f\u4ea7\u6784\u5efa\u3002"]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"-\u53cc\u91cd\u6e32\u67d3\u68c0\u6d4b",children:"\ud83d\udd04 \u53cc\u91cd\u6e32\u67d3\u68c0\u6d4b"}),"\n",(0,r.jsxs)(e.p,{children:["StrictMode \u4f1a\u6545\u610f",(0,r.jsx)(e.strong,{children:"\u53cc\u91cd\u8c03\u7528"}),"\u4ee5\u4e0b\u51fd\u6570\u6765\u68c0\u6d4b\u526f\u4f5c\u7528\uff1a"]}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u7ec4\u4ef6\u51fd\u6570\u4f53"}),"\n",(0,r.jsx)(e.li,{children:"useState\u3001useMemo\u3001useReducer \u7684\u521d\u59cb\u5316\u51fd\u6570"}),"\n",(0,r.jsx)(e.li,{children:"\u7c7b\u7ec4\u4ef6\u7684 constructor\u3001render\u3001shouldComponentUpdate \u7b49"}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"\u4e3a\u4ec0\u4e48\u53cc\u91cd\u6e32\u67d3",children:"\u4e3a\u4ec0\u4e48\u53cc\u91cd\u6e32\u67d3\uff1f"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-jsx",children:'function Counter() {\n  const [count, setCount] = useState(0);\n\n  // \u274c \u95ee\u9898\uff1a\u6bcf\u6b21\u6e32\u67d3\u90fd\u4f1a\u6267\u884c\u526f\u4f5c\u7528\n  console.log("Rendered!"); // StrictMode \u4e0b\u4f1a\u6253\u5370\u4e24\u6b21\n\n  // \u2705 \u6b63\u786e\uff1a\u526f\u4f5c\u7528\u5e94\u8be5\u5728 useEffect \u4e2d\n  useEffect(() => {\n    console.log("Effect ran!");\n  }, []);\n\n  return <button onClick={() => setCount(count + 1)}>{count}</button>;\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u5e38\u89c1\u95ee\u9898\u573a\u666f",children:"\u5e38\u89c1\u95ee\u9898\u573a\u666f"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-jsx",children:"// \u274c \u95ee\u9898\uff1a\u6e32\u67d3\u671f\u95f4\u4fee\u6539\u5916\u90e8\u53d8\u91cf\nlet externalCount = 0;\n\nfunction BadComponent() {\n  externalCount++; // \u53cc\u91cd\u6e32\u67d3\u4f1a\u5bfc\u81f4\u8ba1\u6570\u4e0d\u51c6\u786e\n  return <div>{externalCount}</div>;\n}\n\n// \u2705 \u6b63\u786e\uff1a\u4f7f\u7528 state \u7ba1\u7406\nfunction GoodComponent() {\n  const [count, setCount] = useState(0);\n  return <div>{count}</div>;\n}\n"})}),"\n",(0,r.jsx)(e.h2,{id:"-effect-\u53cc\u91cd\u6267\u884c",children:"\ud83d\udd01 Effect \u53cc\u91cd\u6267\u884c"}),"\n",(0,r.jsxs)(e.p,{children:["React 18+ \u7684 StrictMode \u4f1a",(0,r.jsx)(e.strong,{children:"\u6a21\u62df\u7ec4\u4ef6\u5378\u8f7d\u518d\u91cd\u65b0\u6302\u8f7d"}),"\uff0c\u8fd9\u610f\u5473\u7740\uff1a"]}),"\n",(0,r.jsxs)(e.ol,{children:["\n",(0,r.jsx)(e.li,{children:"\u7ec4\u4ef6\u6302\u8f7d"}),"\n",(0,r.jsx)(e.li,{children:"Effect \u6267\u884c"}),"\n",(0,r.jsx)(e.li,{children:"\u6e05\u7406\u51fd\u6570\u6267\u884c\uff08\u6a21\u62df\u5378\u8f7d\uff09"}),"\n",(0,r.jsx)(e.li,{children:"Effect \u518d\u6b21\u6267\u884c\uff08\u6a21\u62df\u91cd\u65b0\u6302\u8f7d\uff09"}),"\n"]}),"\n",(0,r.jsx)(e.h3,{id:"\u4e3a\u4ec0\u4e48\u8fd9\u6837\u505a",children:"\u4e3a\u4ec0\u4e48\u8fd9\u6837\u505a\uff1f"}),"\n",(0,r.jsx)(e.p,{children:"\u8fd9\u5e2e\u52a9\u4f60\u53d1\u73b0 Effect \u6e05\u7406\u4e0d\u5f53\u7684\u95ee\u9898\uff1a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-jsx",children:"// \u274c \u95ee\u9898\uff1a\u6ca1\u6709\u6e05\u7406\u8ba2\u9605\nfunction ChatRoom({ roomId }) {\n  useEffect(() => {\n    const connection = createConnection(roomId);\n    connection.connect();\n    // \u7f3a\u5c11\u6e05\u7406\u51fd\u6570\uff01\n  }, [roomId]);\n}\n\n// \u2705 \u6b63\u786e\uff1a\u6b63\u786e\u6e05\u7406\nfunction ChatRoom({ roomId }) {\n  useEffect(() => {\n    const connection = createConnection(roomId);\n    connection.connect();\n\n    return () => {\n      connection.disconnect(); // \u6e05\u7406\u8fde\u63a5\n    };\n  }, [roomId]);\n}\n"})}),"\n",(0,r.jsx)(e.h3,{id:"\u5904\u7406\u53cc\u91cd\u6267\u884c",children:"\u5904\u7406\u53cc\u91cd\u6267\u884c"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-jsx",children:'function DataFetcher({ url }) {\n  const [data, setData] = useState(null);\n\n  useEffect(() => {\n    let cancelled = false; // \u53d6\u6d88\u6807\u5fd7\n\n    fetch(url)\n      .then((res) => res.json())\n      .then((result) => {\n        if (!cancelled) {\n          // \u68c0\u67e5\u662f\u5426\u5df2\u53d6\u6d88\n          setData(result);\n        }\n      });\n\n    return () => {\n      cancelled = true; // \u53d6\u6d88\u8bf7\u6c42\n    };\n  }, [url]);\n\n  return <div>{data ? JSON.stringify(data) : "Loading..."}</div>;\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"\ufe0f-\u5e9f\u5f03-api-\u8b66\u544a",children:"\u26a0\ufe0f \u5e9f\u5f03 API \u8b66\u544a"}),"\n",(0,r.jsx)(e.p,{children:"StrictMode \u4f1a\u8b66\u544a\u4f7f\u7528\u5df2\u5e9f\u5f03\u7684 API\uff1a"}),"\n",(0,r.jsx)(e.h3,{id:"react-19-\u4e2d\u5df2\u79fb\u9664\u7684-api",children:"React 19 \u4e2d\u5df2\u79fb\u9664\u7684 API"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"\u5e9f\u5f03 API"}),(0,r.jsx)(e.th,{children:"\u66ff\u4ee3\u65b9\u6848"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"findDOMNode"})}),(0,r.jsxs)(e.td,{children:["\u4f7f\u7528 ",(0,r.jsx)(e.code,{children:"ref"})]})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"\u5b57\u7b26\u4e32 refs"}),(0,r.jsxs)(e.td,{children:["\u4f7f\u7528 ",(0,r.jsx)(e.code,{children:"useRef"})," \u6216 ",(0,r.jsx)(e.code,{children:"createRef"})]})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:"Legacy Context"}),(0,r.jsxs)(e.td,{children:["\u4f7f\u7528 ",(0,r.jsx)(e.code,{children:"createContext"})]})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsxs)(e.td,{children:[(0,r.jsx)(e.code,{children:"UNSAFE_"})," \u751f\u547d\u5468\u671f"]}),(0,r.jsx)(e.td,{children:"\u4f7f\u7528 Hooks"})]})]})]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-jsx",children:'// \u274c \u5e9f\u5f03\uff1a\u5b57\u7b26\u4e32 ref\nclass OldComponent extends React.Component {\n  componentDidMount() {\n    this.refs.myInput.focus(); // \u5e9f\u5f03\n  }\n\n  render() {\n    return <input ref="myInput" />;\n  }\n}\n\n// \u2705 \u63a8\u8350\uff1a\u4f7f\u7528 useRef\nfunction NewComponent() {\n  const inputRef = useRef(null);\n\n  useEffect(() => {\n    inputRef.current.focus();\n  }, []);\n\n  return <input ref={inputRef} />;\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"-\u5c40\u90e8\u4f7f\u7528",children:"\ud83d\udce6 \u5c40\u90e8\u4f7f\u7528"}),"\n",(0,r.jsx)(e.p,{children:"\u4f60\u53ef\u4ee5\u53ea\u5bf9\u90e8\u5206\u7ec4\u4ef6\u6811\u542f\u7528 StrictMode\uff1a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-jsx",children:"function App() {\n  return (\n    <div>\n      <Header /> {/* \u4e0d\u53d7 StrictMode \u5f71\u54cd */}\n      <StrictMode>\n        <main>\n          <NewFeature /> {/* \u53d7 StrictMode \u68c0\u67e5 */}\n        </main>\n      </StrictMode>\n      <Footer /> {/* \u4e0d\u53d7 StrictMode \u5f71\u54cd */}\n    </div>\n  );\n}\n"})}),"\n",(0,r.jsx)(e.h2,{id:"\ufe0f-\u5e38\u89c1\u95ee\u9898\u89e3\u7b54",children:"\ud83d\udee0\ufe0f \u5e38\u89c1\u95ee\u9898\u89e3\u7b54"}),"\n",(0,r.jsx)(e.h3,{id:"\u4e3a\u4ec0\u4e48\u6211\u7684\u7ec4\u4ef6\u6e32\u67d3\u4e86\u4e24\u6b21",children:"\u4e3a\u4ec0\u4e48\u6211\u7684\u7ec4\u4ef6\u6e32\u67d3\u4e86\u4e24\u6b21\uff1f"}),"\n",(0,r.jsx)(e.p,{children:"\u8fd9\u662f StrictMode \u7684\u6b63\u5e38\u884c\u4e3a\uff0c\u7528\u4e8e\u68c0\u6d4b\u526f\u4f5c\u7528\u95ee\u9898\u3002\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u53ea\u4f1a\u6e32\u67d3\u4e00\u6b21\u3002"}),"\n",(0,r.jsx)(e.h3,{id:"\u4e3a\u4ec0\u4e48\u6211\u7684-useeffect-\u6267\u884c\u4e86\u4e24\u6b21",children:"\u4e3a\u4ec0\u4e48\u6211\u7684 useEffect \u6267\u884c\u4e86\u4e24\u6b21\uff1f"}),"\n",(0,r.jsx)(e.p,{children:"StrictMode \u6a21\u62df\u5378\u8f7d\u518d\u6302\u8f7d\uff0c\u786e\u4fdd\u4f60\u7684 Effect \u6b63\u786e\u6e05\u7406\u3002\u8fd9\u5e2e\u52a9\u53d1\u73b0\u5185\u5b58\u6cc4\u6f0f\u7b49\u95ee\u9898\u3002"}),"\n",(0,r.jsx)(e.h3,{id:"\u5982\u4f55\u5173\u95ed\u53cc\u91cd\u6e32\u67d3",children:"\u5982\u4f55\u5173\u95ed\u53cc\u91cd\u6e32\u67d3\uff1f"}),"\n",(0,r.jsx)(e.p,{children:"\u4e0d\u5efa\u8bae\u5173\u95ed\uff0c\u56e0\u4e3a\u5b83\u5e2e\u52a9\u53d1\u73b0\u6f5c\u5728\u95ee\u9898\u3002\u5982\u679c\u67d0\u4e2a\u7ec4\u4ef6\u786e\u5b9e\u6709\u95ee\u9898\uff0c\u5e94\u8be5\u4fee\u590d\u7ec4\u4ef6\u800c\u4e0d\u662f\u5173\u95ed StrictMode\u3002"}),"\n",(0,r.jsx)(e.h3,{id:"\u751f\u4ea7\u73af\u5883\u6709\u5f71\u54cd\u5417",children:"\u751f\u4ea7\u73af\u5883\u6709\u5f71\u54cd\u5417\uff1f"}),"\n",(0,r.jsx)(e.p,{children:"\u6ca1\u6709\u3002StrictMode \u7684\u6240\u6709\u68c0\u67e5\u53ea\u5728\u5f00\u53d1\u6a21\u5f0f\u4e0b\u8fd0\u884c\u3002"}),"\n",(0,r.jsx)(e.h2,{id:"-\u6700\u4f73\u5b9e\u8df5",children:"\ud83d\udca1 \u6700\u4f73\u5b9e\u8df5"}),"\n",(0,r.jsx)(e.h3,{id:"1-\u5728\u6839\u7ec4\u4ef6\u542f\u7528",children:"1. \u5728\u6839\u7ec4\u4ef6\u542f\u7528"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-jsx",children:'// main.jsx\nimport { StrictMode } from "react";\nimport { createRoot } from "react-dom/client";\nimport App from "./App";\n\ncreateRoot(document.getElementById("root")).render(\n  <StrictMode>\n    <App />\n  </StrictMode>\n);\n'})}),"\n",(0,r.jsx)(e.h3,{id:"2-\u786e\u4fdd-effect-\u53ef\u91cd\u590d\u6267\u884c",children:"2. \u786e\u4fdd Effect \u53ef\u91cd\u590d\u6267\u884c"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-jsx",children:"function Timer() {\n  const [seconds, setSeconds] = useState(0);\n\n  useEffect(() => {\n    const id = setInterval(() => {\n      setSeconds((s) => s + 1);\n    }, 1000);\n\n    return () => clearInterval(id); // \u5fc5\u987b\u6e05\u7406\n  }, []);\n\n  return <div>{seconds}</div>;\n}\n"})}),"\n",(0,r.jsx)(e.h3,{id:"3-\u907f\u514d\u6e32\u67d3\u671f\u95f4\u7684\u526f\u4f5c\u7528",children:"3. \u907f\u514d\u6e32\u67d3\u671f\u95f4\u7684\u526f\u4f5c\u7528"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-jsx",children:'// \u274c \u907f\u514d\nfunction Bad() {\n  localStorage.setItem("rendered", "true"); // \u6e32\u67d3\u671f\u95f4\u4ea7\u751f\u526f\u4f5c\u7528\n  return <div>...</div>;\n}\n\n// \u2705 \u63a8\u8350\nfunction Good() {\n  useEffect(() => {\n    localStorage.setItem("rendered", "true"); // \u5728 Effect \u4e2d\n  }, []);\n  return <div>...</div>;\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"-\u76f8\u5173\u8d44\u6e90",children:"\ud83d\udd17 \u76f8\u5173\u8d44\u6e90"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"/docs/react/concurrent-rendering",children:"\u5e76\u53d1\u6e32\u67d3"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"/docs/react/hooks",children:"Hooks \u8be6\u89e3"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"/docs/react/react19-features",children:"React 19 \u65b0\u7279\u6027"})}),"\n"]}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.strong,{children:"\u4e0b\u4e00\u6b65"}),"\uff1a\u4e86\u89e3 ",(0,r.jsx)(e.a,{href:"/docs/react/devtools",children:"React DevTools"})," \u8fdb\u884c\u7ec4\u4ef6\u8c03\u8bd5\u548c\u6027\u80fd\u5206\u6790\u3002"]})]})}function h(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(a,{...n})}):a(n)}}}]);