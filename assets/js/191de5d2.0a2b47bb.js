"use strict";(globalThis.webpackChunkto_lib_github_io=globalThis.webpackChunkto_lib_github_io||[]).push([[390],{48885:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>o});var r=s(99378);const t={},a=r.createContext(t);function i(e){const n=r.useContext(a);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),r.createElement(a.Provider,{value:n},e.children)}},60788:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"frontend/javascript/async","title":"\u5f02\u6b65\u7f16\u7a0b","description":"[!TIP]","source":"@site/docs/frontend/javascript/async.md","sourceDirName":"frontend/javascript","slug":"/frontend/javascript/async","permalink":"/docs/frontend/javascript/async","draft":false,"unlisted":false,"editUrl":"https://github.com/to-lib/to-lib.github.io/tree/main/docs/frontend/javascript/async.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"title":"\u5f02\u6b65\u7f16\u7a0b"},"sidebar":"frontend","previous":{"title":"ES6+","permalink":"/docs/frontend/javascript/es6"},"next":{"title":"\u95ed\u5305\u4e0e\u4f5c\u7528\u57df","permalink":"/docs/frontend/javascript/closure"}}');var t=s(22714),a=s(48885);const i={sidebar_position:4,title:"\u5f02\u6b65\u7f16\u7a0b"},o="JavaScript \u5f02\u6b65\u7f16\u7a0b",c={},l=[{value:"\ud83c\udfaf \u5f02\u6b65\u6982\u5ff5",id:"-\u5f02\u6b65\u6982\u5ff5",level:2},{value:"\u540c\u6b65 vs \u5f02\u6b65",id:"\u540c\u6b65-vs-\u5f02\u6b65",level:3},{value:"\u23f1\ufe0f \u5b9a\u65f6\u5668",id:"\ufe0f-\u5b9a\u65f6\u5668",level:2},{value:"\ud83e\udd1d Promise",id:"-promise",level:2},{value:"\u57fa\u7840\u7528\u6cd5",id:"\u57fa\u7840\u7528\u6cd5",level:3},{value:"Promise \u72b6\u6001",id:"promise-\u72b6\u6001",level:3},{value:"\u94fe\u5f0f\u8c03\u7528",id:"\u94fe\u5f0f\u8c03\u7528",level:3},{value:"Promise \u65b9\u6cd5",id:"promise-\u65b9\u6cd5",level:3},{value:"\u26a1 async/await",id:"-asyncawait",level:2},{value:"\u57fa\u7840\u7528\u6cd5",id:"\u57fa\u7840\u7528\u6cd5-1",level:3},{value:"\u9519\u8bef\u5904\u7406",id:"\u9519\u8bef\u5904\u7406",level:3},{value:"\u5e76\u884c\u6267\u884c",id:"\u5e76\u884c\u6267\u884c",level:3},{value:"\ud83c\udf10 Fetch API",id:"-fetch-api",level:2},{value:"GET \u8bf7\u6c42",id:"get-\u8bf7\u6c42",level:3},{value:"POST \u8bf7\u6c42",id:"post-\u8bf7\u6c42",level:3},{value:"\u5b8c\u6574\u793a\u4f8b",id:"\u5b8c\u6574\u793a\u4f8b",level:3},{value:"\u5176\u4ed6\u8bf7\u6c42\u65b9\u6cd5",id:"\u5176\u4ed6\u8bf7\u6c42\u65b9\u6cd5",level:3},{value:"\ud83c\udfae \u5b9e\u7528\u793a\u4f8b",id:"-\u5b9e\u7528\u793a\u4f8b",level:2},{value:"\u52a0\u8f7d\u6570\u636e\u5e76\u6e32\u67d3",id:"\u52a0\u8f7d\u6570\u636e\u5e76\u6e32\u67d3",level:3},{value:"\u9632\u6296\u641c\u7d22",id:"\u9632\u6296\u641c\u7d22",level:3},{value:"\ud83d\udd17 \u76f8\u5173\u8d44\u6e90",id:"-\u76f8\u5173\u8d44\u6e90",level:2}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"javascript-\u5f02\u6b65\u7f16\u7a0b",children:"JavaScript \u5f02\u6b65\u7f16\u7a0b"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"[!TIP]\n\u5f02\u6b65\u7f16\u7a0b\u8ba9 JavaScript \u80fd\u591f\u5904\u7406\u8017\u65f6\u64cd\u4f5c\uff08\u5982\u7f51\u7edc\u8bf7\u6c42\uff09\u800c\u4e0d\u963b\u585e\u9875\u9762\u3002"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"-\u5f02\u6b65\u6982\u5ff5",children:"\ud83c\udfaf \u5f02\u6b65\u6982\u5ff5"}),"\n",(0,t.jsx)(n.h3,{id:"\u540c\u6b65-vs-\u5f02\u6b65",children:"\u540c\u6b65 vs \u5f02\u6b65"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:'// \u540c\u6b65\uff1a\u6309\u987a\u5e8f\u6267\u884c\uff0c\u4f1a\u963b\u585e\nconsole.log("1");\nconsole.log("2");\nconsole.log("3");\n// \u8f93\u51fa: 1, 2, 3\n\n// \u5f02\u6b65\uff1a\u4e0d\u963b\u585e\u540e\u7eed\u4ee3\u7801\nconsole.log("1");\nsetTimeout(() => console.log("2"), 0);\nconsole.log("3");\n// \u8f93\u51fa: 1, 3, 2\n'})}),"\n",(0,t.jsx)(n.h2,{id:"\ufe0f-\u5b9a\u65f6\u5668",children:"\u23f1\ufe0f \u5b9a\u65f6\u5668"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:'// \u5ef6\u8fdf\u6267\u884c\nconst timeoutId = setTimeout(() => {\n  console.log("3\u79d2\u540e\u6267\u884c");\n}, 3000);\n\n// \u53d6\u6d88\nclearTimeout(timeoutId);\n\n// \u91cd\u590d\u6267\u884c\nconst intervalId = setInterval(() => {\n  console.log("\u6bcf\u79d2\u6267\u884c");\n}, 1000);\n\n// \u53d6\u6d88\nclearInterval(intervalId);\n'})}),"\n",(0,t.jsx)(n.h2,{id:"-promise",children:"\ud83e\udd1d Promise"}),"\n",(0,t.jsx)(n.h3,{id:"\u57fa\u7840\u7528\u6cd5",children:"\u57fa\u7840\u7528\u6cd5"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:'// \u521b\u5efa Promise\nconst promise = new Promise((resolve, reject) => {\n  setTimeout(() => {\n    const success = true;\n    if (success) {\n      resolve("\u6210\u529f");\n    } else {\n      reject("\u5931\u8d25");\n    }\n  }, 1000);\n});\n\n// \u4f7f\u7528 Promise\npromise\n  .then((result) => console.log(result))\n  .catch((error) => console.error(error))\n  .finally(() => console.log("\u5b8c\u6210"));\n'})}),"\n",(0,t.jsx)(n.h3,{id:"promise-\u72b6\u6001",children:"Promise \u72b6\u6001"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"pending \u2192 fulfilled (resolve)\n       \u2192 rejected  (reject)\n"})}),"\n",(0,t.jsx)(n.h3,{id:"\u94fe\u5f0f\u8c03\u7528",children:"\u94fe\u5f0f\u8c03\u7528"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:'fetch("/api/user")\n  .then((response) => response.json())\n  .then((user) => fetch(`/api/posts/${user.id}`))\n  .then((response) => response.json())\n  .then((posts) => console.log(posts))\n  .catch((error) => console.error(error));\n'})}),"\n",(0,t.jsx)(n.h3,{id:"promise-\u65b9\u6cd5",children:"Promise \u65b9\u6cd5"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"// \u5168\u90e8\u6210\u529f\nPromise.all([p1, p2, p3]).then((results) => console.log(results)); // [r1, r2, r3]\n\n// \u4efb\u4e00\u6210\u529f\nPromise.race([p1, p2, p3]).then((result) => console.log(result)); // \u6700\u5feb\u7684\u7ed3\u679c\n\n// \u5168\u90e8\u5b8c\u6210\uff08\u4e0d\u7ba1\u6210\u529f\u5931\u8d25\uff09\nPromise.allSettled([p1, p2, p3]).then((results) => console.log(results));\n\n// \u4efb\u4e00\u6210\u529f\uff08\u5ffd\u7565\u5931\u8d25\uff09\nPromise.any([p1, p2, p3]).then((result) => console.log(result));\n"})}),"\n",(0,t.jsx)(n.h2,{id:"-asyncawait",children:"\u26a1 async/await"}),"\n",(0,t.jsx)(n.h3,{id:"\u57fa\u7840\u7528\u6cd5-1",children:"\u57fa\u7840\u7528\u6cd5"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:'async function fetchUser() {\n  try {\n    const response = await fetch("/api/user");\n    const user = await response.json();\n    return user;\n  } catch (error) {\n    console.error("\u83b7\u53d6\u5931\u8d25:", error);\n  }\n}\n\n// \u8c03\u7528\nconst user = await fetchUser();\n'})}),"\n",(0,t.jsx)(n.h3,{id:"\u9519\u8bef\u5904\u7406",children:"\u9519\u8bef\u5904\u7406"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:'// try-catch\nasync function getData() {\n  try {\n    const data = await fetch("/api/data");\n    return await data.json();\n  } catch (error) {\n    console.error(error);\n    return null;\n  }\n}\n\n// \u6216\u4f7f\u7528 .catch()\nconst data = await fetch("/api/data").catch((e) => null);\n'})}),"\n",(0,t.jsx)(n.h3,{id:"\u5e76\u884c\u6267\u884c",children:"\u5e76\u884c\u6267\u884c"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"// \u987a\u5e8f\u6267\u884c\uff08\u8f83\u6162\uff09\nconst user = await fetchUser();\nconst posts = await fetchPosts();\n\n// \u5e76\u884c\u6267\u884c\uff08\u66f4\u5feb\uff09\nconst [user, posts] = await Promise.all([fetchUser(), fetchPosts()]);\n"})}),"\n",(0,t.jsx)(n.h2,{id:"-fetch-api",children:"\ud83c\udf10 Fetch API"}),"\n",(0,t.jsx)(n.h3,{id:"get-\u8bf7\u6c42",children:"GET \u8bf7\u6c42"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:'// \u57fa\u7840\u8bf7\u6c42\nconst response = await fetch("/api/users");\nconst users = await response.json();\n\n// \u5e26\u53c2\u6570\nconst response = await fetch("/api/users?page=1&limit=10");\n\n// \u68c0\u67e5\u72b6\u6001\nif (!response.ok) {\n  throw new Error(`HTTP error! status: ${response.status}`);\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"post-\u8bf7\u6c42",children:"POST \u8bf7\u6c42"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:'const response = await fetch("/api/users", {\n  method: "POST",\n  headers: {\n    "Content-Type": "application/json",\n  },\n  body: JSON.stringify({\n    name: "Alice",\n    email: "alice@example.com",\n  }),\n});\n\nconst result = await response.json();\n'})}),"\n",(0,t.jsx)(n.h3,{id:"\u5b8c\u6574\u793a\u4f8b",children:"\u5b8c\u6574\u793a\u4f8b"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:'async function createUser(userData) {\n  try {\n    const response = await fetch("/api/users", {\n      method: "POST",\n      headers: {\n        "Content-Type": "application/json",\n        Authorization: `Bearer ${token}`,\n      },\n      body: JSON.stringify(userData),\n    });\n\n    if (!response.ok) {\n      throw new Error(`Error: ${response.status}`);\n    }\n\n    return await response.json();\n  } catch (error) {\n    console.error("\u521b\u5efa\u7528\u6237\u5931\u8d25:", error);\n    throw error;\n  }\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"\u5176\u4ed6\u8bf7\u6c42\u65b9\u6cd5",children:"\u5176\u4ed6\u8bf7\u6c42\u65b9\u6cd5"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:'// PUT\nawait fetch("/api/users/1", {\n  method: "PUT",\n  body: JSON.stringify(data),\n});\n\n// PATCH\nawait fetch("/api/users/1", {\n  method: "PATCH",\n  body: JSON.stringify({ name: "New Name" }),\n});\n\n// DELETE\nawait fetch("/api/users/1", {\n  method: "DELETE",\n});\n'})}),"\n",(0,t.jsx)(n.h2,{id:"-\u5b9e\u7528\u793a\u4f8b",children:"\ud83c\udfae \u5b9e\u7528\u793a\u4f8b"}),"\n",(0,t.jsx)(n.h3,{id:"\u52a0\u8f7d\u6570\u636e\u5e76\u6e32\u67d3",children:"\u52a0\u8f7d\u6570\u636e\u5e76\u6e32\u67d3"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:'async function loadUsers() {\n  const list = document.querySelector("#user-list");\n\n  try {\n    list.innerHTML = "<li>\u52a0\u8f7d\u4e2d...</li>";\n\n    const response = await fetch("/api/users");\n    const users = await response.json();\n\n    list.innerHTML = users.map((u) => `<li>${u.name}</li>`).join("");\n  } catch (error) {\n    list.innerHTML = "<li>\u52a0\u8f7d\u5931\u8d25</li>";\n  }\n}\n\nloadUsers();\n'})}),"\n",(0,t.jsx)(n.h3,{id:"\u9632\u6296\u641c\u7d22",children:"\u9632\u6296\u641c\u7d22"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:'function debounce(fn, delay) {\n  let timer;\n  return (...args) => {\n    clearTimeout(timer);\n    timer = setTimeout(() => fn(...args), delay);\n  };\n}\n\nconst search = debounce(async (query) => {\n  const response = await fetch(`/api/search?q=${query}`);\n  const results = await response.json();\n  renderResults(results);\n}, 300);\n\ninput.addEventListener("input", (e) => {\n  search(e.target.value);\n});\n'})}),"\n",(0,t.jsx)(n.h2,{id:"-\u76f8\u5173\u8d44\u6e90",children:"\ud83d\udd17 \u76f8\u5173\u8d44\u6e90"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/docs/frontend/javascript/",children:"JavaScript \u5165\u95e8"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/docs/frontend/javascript/dom",children:"DOM \u64cd\u4f5c"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/docs/frontend/javascript/es6",children:"ES6+"})}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"\u4e0b\u4e00\u6b65"}),"\uff1a\u5b66\u4e60 ",(0,t.jsx)(n.a,{href:"/docs/frontend/javascript/es6",children:"ES6+"})," \u4e86\u89e3\u73b0\u4ee3 JavaScript \u7279\u6027\u3002"]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}}}]);