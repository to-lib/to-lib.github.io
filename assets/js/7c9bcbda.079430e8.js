"use strict";(globalThis.webpackChunkto_lib_github_io=globalThis.webpackChunkto_lib_github_io||[]).push([[8510],{48885:(e,n,r)=>{r.d(n,{R:()=>a,x:()=>l});var i=r(99378);const s={},t=i.createContext(s);function a(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),i.createElement(t.Provider,{value:n},e.children)}},65455:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"flink/monitoring","title":"\u76d1\u63a7\u4e0e\u8fd0\u7ef4","description":"Flink \u751f\u4ea7\u73af\u5883\u76d1\u63a7\u4e0e\u8fd0\u7ef4\u5b9e\u8df5","source":"@site/docs/flink/monitoring.md","sourceDirName":"flink","slug":"/flink/monitoring","permalink":"/docs/flink/monitoring","draft":false,"unlisted":false,"editUrl":"https://github.com/to-lib/to-lib.github.io/tree/main/docs/flink/monitoring.md","tags":[],"version":"current","sidebarPosition":15,"frontMatter":{"sidebar_position":15,"title":"\u76d1\u63a7\u4e0e\u8fd0\u7ef4","description":"Flink \u751f\u4ea7\u73af\u5883\u76d1\u63a7\u4e0e\u8fd0\u7ef4\u5b9e\u8df5"},"sidebar":"flink","previous":{"title":"\u90e8\u7f72\u4e0e\u8fd0\u7ef4","permalink":"/docs/flink/deployment"},"next":{"title":"\u6027\u80fd\u4f18\u5316","permalink":"/docs/flink/performance-optimization"}}');var s=r(22714),t=r(48885);const a={sidebar_position:15,title:"\u76d1\u63a7\u4e0e\u8fd0\u7ef4",description:"Flink \u751f\u4ea7\u73af\u5883\u76d1\u63a7\u4e0e\u8fd0\u7ef4\u5b9e\u8df5"},l="Flink \u76d1\u63a7\u4e0e\u8fd0\u7ef4",o={},d=[{value:"\u5185\u7f6e Metrics \u7cfb\u7edf",id:"\u5185\u7f6e-metrics-\u7cfb\u7edf",level:2},{value:"Metrics \u7c7b\u578b",id:"metrics-\u7c7b\u578b",level:3},{value:"\u81ea\u5b9a\u4e49 Metrics",id:"\u81ea\u5b9a\u4e49-metrics",level:3},{value:"Prometheus \u96c6\u6210",id:"prometheus-\u96c6\u6210",level:2},{value:"\u914d\u7f6e Metrics Reporter",id:"\u914d\u7f6e-metrics-reporter",level:3},{value:"\u6dfb\u52a0\u4f9d\u8d56",id:"\u6dfb\u52a0\u4f9d\u8d56",level:3},{value:"Grafana Dashboard",id:"grafana-dashboard",level:2},{value:"\u5173\u952e\u76d1\u63a7\u9762\u677f",id:"\u5173\u952e\u76d1\u63a7\u9762\u677f",level:3},{value:"\u4f5c\u4e1a\u6982\u89c8",id:"\u4f5c\u4e1a\u6982\u89c8",level:4},{value:"\u541e\u5410\u91cf\u76d1\u63a7",id:"\u541e\u5410\u91cf\u76d1\u63a7",level:4},{value:"\u5ef6\u8fdf\u76d1\u63a7",id:"\u5ef6\u8fdf\u76d1\u63a7",level:4},{value:"\u80cc\u538b\u76d1\u63a7",id:"\u80cc\u538b\u76d1\u63a7",level:4},{value:"Dashboard JSON \u6a21\u677f",id:"dashboard-json-\u6a21\u677f",level:3},{value:"\u544a\u8b66\u914d\u7f6e",id:"\u544a\u8b66\u914d\u7f6e",level:2},{value:"Prometheus AlertManager \u89c4\u5219",id:"prometheus-alertmanager-\u89c4\u5219",level:3},{value:"\u5e38\u89c1\u8fd0\u7ef4\u64cd\u4f5c",id:"\u5e38\u89c1\u8fd0\u7ef4\u64cd\u4f5c",level:2},{value:"\u4f5c\u4e1a\u7ba1\u7406",id:"\u4f5c\u4e1a\u7ba1\u7406",level:3},{value:"\u6269\u7f29\u5bb9",id:"\u6269\u7f29\u5bb9",level:3},{value:"\u7248\u672c\u5347\u7ea7",id:"\u7248\u672c\u5347\u7ea7",level:3},{value:"\u6545\u969c\u6392\u67e5",id:"\u6545\u969c\u6392\u67e5",level:2},{value:"\u5e38\u89c1\u95ee\u9898\u8bca\u65ad",id:"\u5e38\u89c1\u95ee\u9898\u8bca\u65ad",level:3},{value:"\u65e5\u5fd7\u5206\u6790",id:"\u65e5\u5fd7\u5206\u6790",level:3},{value:"\u5806\u8f6c\u50a8\u5206\u6790",id:"\u5806\u8f6c\u50a8\u5206\u6790",level:3},{value:"Web UI \u76d1\u63a7",id:"web-ui-\u76d1\u63a7",level:2},{value:"\u5173\u952e\u9875\u9762",id:"\u5173\u952e\u9875\u9762",level:3},{value:"REST API",id:"rest-api",level:3},{value:"\u4e0b\u4e00\u6b65",id:"\u4e0b\u4e00\u6b65",level:2}];function c(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"flink-\u76d1\u63a7\u4e0e\u8fd0\u7ef4",children:"Flink \u76d1\u63a7\u4e0e\u8fd0\u7ef4"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"\u9002\u7528\u7248\u672c\uff1aApache Flink v2.2.0"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"\u5185\u7f6e-metrics-\u7cfb\u7edf",children:"\u5185\u7f6e Metrics \u7cfb\u7edf"}),"\n",(0,s.jsx)(n.h3,{id:"metrics-\u7c7b\u578b",children:"Metrics \u7c7b\u578b"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"\u7c7b\u578b"}),(0,s.jsx)(n.th,{children:"\u63cf\u8ff0"}),(0,s.jsx)(n.th,{children:"\u793a\u4f8b"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Counter"})}),(0,s.jsx)(n.td,{children:"\u8ba1\u6570\u5668"}),(0,s.jsx)(n.td,{children:"\u5904\u7406\u8bb0\u5f55\u6570"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Gauge"})}),(0,s.jsx)(n.td,{children:"\u77ac\u65f6\u503c"}),(0,s.jsx)(n.td,{children:"\u5f53\u524d\u961f\u5217\u5927\u5c0f"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Meter"})}),(0,s.jsx)(n.td,{children:"\u901f\u7387"}),(0,s.jsx)(n.td,{children:"\u6bcf\u79d2\u5904\u7406\u8bb0\u5f55\u6570"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Histogram"})}),(0,s.jsx)(n.td,{children:"\u5206\u5e03\u7edf\u8ba1"}),(0,s.jsx)(n.td,{children:"\u5ef6\u8fdf\u5206\u5e03"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"\u81ea\u5b9a\u4e49-metrics",children:"\u81ea\u5b9a\u4e49 Metrics"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:'public class MetricsFunction extends RichMapFunction<Event, Result> {\n    private transient Counter processedCounter;\n    private transient Meter throughputMeter;\n    private transient Histogram latencyHistogram;\n\n    @Override\n    public void open(Configuration parameters) {\n        MetricGroup group = getRuntimeContext().getMetricGroup();\n\n        // \u8ba1\u6570\u5668\n        processedCounter = group.counter("processedEvents");\n\n        // \u901f\u7387\n        throughputMeter = group.meter("throughput", new MeterView(60));\n\n        // \u76f4\u65b9\u56fe\n        latencyHistogram = group.histogram("latency",\n            new DescriptiveStatisticsHistogram(1000));\n\n        // \u4eea\u8868\u76d8\n        group.gauge("queueSize", () -> getQueueSize());\n    }\n\n    @Override\n    public Result map(Event event) {\n        long start = System.currentTimeMillis();\n        Result result = process(event);\n\n        processedCounter.inc();\n        throughputMeter.markEvent();\n        latencyHistogram.update(System.currentTimeMillis() - start);\n\n        return result;\n    }\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"prometheus-\u96c6\u6210",children:"Prometheus \u96c6\u6210"}),"\n",(0,s.jsx)(n.h3,{id:"\u914d\u7f6e-metrics-reporter",children:"\u914d\u7f6e Metrics Reporter"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"# flink-conf.yaml\nmetrics.reporter.promgateway.factory.class: org.apache.flink.metrics.prometheus.PrometheusPushGatewayReporterFactory\nmetrics.reporter.promgateway.host: prometheus-pushgateway\nmetrics.reporter.promgateway.port: 9091\nmetrics.reporter.promgateway.jobName: flink-job\nmetrics.reporter.promgateway.randomJobNameSuffix: true\nmetrics.reporter.promgateway.deleteOnShutdown: false\nmetrics.reporter.promgateway.interval: 30 SECONDS\n\n# \u6216\u4f7f\u7528 Prometheus Pull \u6a21\u5f0f\nmetrics.reporter.prom.factory.class: org.apache.flink.metrics.prometheus.PrometheusReporterFactory\nmetrics.reporter.prom.port: 9999\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u6dfb\u52a0\u4f9d\u8d56",children:"\u6dfb\u52a0\u4f9d\u8d56"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:"<dependency>\n    <groupId>org.apache.flink</groupId>\n    <artifactId>flink-metrics-prometheus</artifactId>\n    <version>${flink.version}</version>\n</dependency>\n"})}),"\n",(0,s.jsx)(n.h2,{id:"grafana-dashboard",children:"Grafana Dashboard"}),"\n",(0,s.jsx)(n.h3,{id:"\u5173\u952e\u76d1\u63a7\u9762\u677f",children:"\u5173\u952e\u76d1\u63a7\u9762\u677f"}),"\n",(0,s.jsx)(n.h4,{id:"\u4f5c\u4e1a\u6982\u89c8",children:"\u4f5c\u4e1a\u6982\u89c8"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-promql",children:'# \u4f5c\u4e1a\u8fd0\u884c\u72b6\u6001\nflink_jobmanager_job_uptime{job_name="$job_name"}\n\n# \u4f5c\u4e1a\u91cd\u542f\u6b21\u6570\nflink_jobmanager_job_numRestarts{job_name="$job_name"}\n\n# \u68c0\u67e5\u70b9\u6210\u529f\u7387\nrate(flink_jobmanager_job_numberOfCompletedCheckpoints[5m]) /\nrate(flink_jobmanager_job_numberOfInProgressCheckpoints[5m])\n'})}),"\n",(0,s.jsx)(n.h4,{id:"\u541e\u5410\u91cf\u76d1\u63a7",children:"\u541e\u5410\u91cf\u76d1\u63a7"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-promql",children:"# \u6bcf\u79d2\u8f93\u5165\u8bb0\u5f55\u6570\nrate(flink_taskmanager_job_task_numRecordsIn[1m])\n\n# \u6bcf\u79d2\u8f93\u51fa\u8bb0\u5f55\u6570\nrate(flink_taskmanager_job_task_numRecordsOut[1m])\n\n# \u6bcf\u79d2\u5904\u7406\u5b57\u8282\u6570\nrate(flink_taskmanager_job_task_numBytesIn[1m])\n"})}),"\n",(0,s.jsx)(n.h4,{id:"\u5ef6\u8fdf\u76d1\u63a7",children:"\u5ef6\u8fdf\u76d1\u63a7"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-promql",children:'# \u7aef\u5230\u7aef\u5ef6\u8fdf\nflink_taskmanager_job_latency_source_id_operator_id_operator_subtask_index_latency{\n    quantile="0.99"\n}\n\n# \u6c34\u5370\u5ef6\u8fdf\ntime() * 1000 - flink_taskmanager_job_task_currentInputWatermark\n'})}),"\n",(0,s.jsx)(n.h4,{id:"\u80cc\u538b\u76d1\u63a7",children:"\u80cc\u538b\u76d1\u63a7"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-promql",children:"# \u80cc\u538b\u7387\nflink_taskmanager_job_task_isBackPressured\n\n# \u8f93\u51fa\u7f13\u51b2\u533a\u4f7f\u7528\u7387\nflink_taskmanager_job_task_buffers_outPoolUsage\n"})}),"\n",(0,s.jsx)(n.h3,{id:"dashboard-json-\u6a21\u677f",children:"Dashboard JSON \u6a21\u677f"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "title": "Flink Job Monitoring",\n  "panels": [\n    {\n      "title": "Records Throughput",\n      "type": "graph",\n      "targets": [\n        {\n          "expr": "rate(flink_taskmanager_job_task_numRecordsIn[1m])",\n          "legendFormat": "{{task_name}} - In"\n        },\n        {\n          "expr": "rate(flink_taskmanager_job_task_numRecordsOut[1m])",\n          "legendFormat": "{{task_name}} - Out"\n        }\n      ]\n    },\n    {\n      "title": "Checkpoint Duration",\n      "type": "graph",\n      "targets": [\n        {\n          "expr": "flink_jobmanager_job_lastCheckpointDuration",\n          "legendFormat": "Duration (ms)"\n        }\n      ]\n    }\n  ]\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"\u544a\u8b66\u914d\u7f6e",children:"\u544a\u8b66\u914d\u7f6e"}),"\n",(0,s.jsx)(n.h3,{id:"prometheus-alertmanager-\u89c4\u5219",children:"Prometheus AlertManager \u89c4\u5219"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:'groups:\n  - name: flink-critical\n    rules:\n      # \u4f5c\u4e1a\u5931\u8d25\u544a\u8b66\n      - alert: FlinkJobFailed\n        expr: flink_jobmanager_job_uptime == 0\n        for: 1m\n        labels:\n          severity: critical\n        annotations:\n          summary: "Flink \u4f5c\u4e1a {{ $labels.job_name }} \u5931\u8d25"\n          description: "\u4f5c\u4e1a\u5df2\u7ecf\u505c\u6b62\u8fd0\u884c\u8d85\u8fc7 1 \u5206\u949f"\n\n      # \u68c0\u67e5\u70b9\u5931\u8d25\u544a\u8b66\n      - alert: FlinkCheckpointFailed\n        expr: increase(flink_jobmanager_job_numberOfFailedCheckpoints[10m]) > 3\n        for: 1m\n        labels:\n          severity: warning\n        annotations:\n          summary: "Flink \u68c0\u67e5\u70b9\u9891\u7e41\u5931\u8d25"\n          description: "10\u5206\u949f\u5185\u68c0\u67e5\u70b9\u5931\u8d25 {{ $value }} \u6b21"\n\n      # \u68c0\u67e5\u70b9\u65f6\u95f4\u8fc7\u957f\n      - alert: FlinkCheckpointTooSlow\n        expr: flink_jobmanager_job_lastCheckpointDuration > 600000\n        for: 5m\n        labels:\n          severity: warning\n        annotations:\n          summary: "\u68c0\u67e5\u70b9\u8017\u65f6\u8fc7\u957f"\n          description: "\u68c0\u67e5\u70b9\u8017\u65f6 {{ $value }}ms\uff0c\u8d85\u8fc7 10 \u5206\u949f"\n\n  - name: flink-performance\n    rules:\n      # \u80cc\u538b\u544a\u8b66\n      - alert: FlinkHighBackpressure\n        expr: flink_taskmanager_job_task_isBackPressured > 0.5\n        for: 10m\n        labels:\n          severity: warning\n        annotations:\n          summary: "\u68c0\u6d4b\u5230\u9ad8\u80cc\u538b"\n          description: "Task {{ $labels.task_name }} \u80cc\u538b\u7387 {{ $value }}"\n\n      # \u5ef6\u8fdf\u544a\u8b66\n      - alert: FlinkHighLatency\n        expr: flink_taskmanager_job_latency_source_id_operator_id_latency{quantile="0.99"} > 10000\n        for: 5m\n        labels:\n          severity: warning\n        annotations:\n          summary: "\u7aef\u5230\u7aef\u5ef6\u8fdf\u8fc7\u9ad8"\n          description: "P99 \u5ef6\u8fdf {{ $value }}ms"\n\n      # \u6d88\u8d39\u5ef6\u8fdf\u544a\u8b66\n      - alert: FlinkKafkaLag\n        expr: flink_taskmanager_job_task_operator_KafkaSourceReader_KafkaConsumer_records_lag_max > 100000\n        for: 10m\n        labels:\n          severity: warning\n        annotations:\n          summary: "Kafka \u6d88\u8d39\u5ef6\u8fdf\u8fc7\u5927"\n          description: "\u6d88\u8d39\u5ef6\u8fdf {{ $value }} \u6761\u6d88\u606f"\n'})}),"\n",(0,s.jsx)(n.h2,{id:"\u5e38\u89c1\u8fd0\u7ef4\u64cd\u4f5c",children:"\u5e38\u89c1\u8fd0\u7ef4\u64cd\u4f5c"}),"\n",(0,s.jsx)(n.h3,{id:"\u4f5c\u4e1a\u7ba1\u7406",children:"\u4f5c\u4e1a\u7ba1\u7406"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# \u67e5\u770b\u4f5c\u4e1a\u5217\u8868\nflink list\n\n# \u67e5\u770b\u4f5c\u4e1a\u8be6\u60c5\nflink info <job-id>\n\n# \u53d6\u6d88\u4f5c\u4e1a\nflink cancel <job-id>\n\n# \u521b\u5efa\u4fdd\u5b58\u70b9\nflink savepoint <job-id> hdfs:///savepoints\n\n# \u4ece\u4fdd\u5b58\u70b9\u6062\u590d\nflink run -s hdfs:///savepoints/savepoint-xxx job.jar\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u6269\u7f29\u5bb9",children:"\u6269\u7f29\u5bb9"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# 1. \u521b\u5efa\u4fdd\u5b58\u70b9\nflink savepoint <job-id> hdfs:///savepoints\n\n# 2. \u53d6\u6d88\u4f5c\u4e1a\nflink cancel <job-id>\n\n# 3. \u4fee\u6539\u5e76\u884c\u5ea6\u540e\u6062\u590d\nflink run -p 8 -s hdfs:///savepoints/savepoint-xxx job.jar\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u7248\u672c\u5347\u7ea7",children:"\u7248\u672c\u5347\u7ea7"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# 1. \u521b\u5efa\u4fdd\u5b58\u70b9\nflink savepoint <job-id> hdfs:///savepoints\n\n# 2. \u505c\u6b62\u65e7\u7248\u672c\u4f5c\u4e1a\nflink cancel <job-id>\n\n# 3. \u90e8\u7f72\u65b0\u7248\u672c\nflink run -s hdfs:///savepoints/savepoint-xxx new-job.jar\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u6545\u969c\u6392\u67e5",children:"\u6545\u969c\u6392\u67e5"}),"\n",(0,s.jsx)(n.h3,{id:"\u5e38\u89c1\u95ee\u9898\u8bca\u65ad",children:"\u5e38\u89c1\u95ee\u9898\u8bca\u65ad"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"\u95ee\u9898"}),(0,s.jsx)(n.th,{children:"\u8bca\u65ad\u65b9\u6cd5"}),(0,s.jsx)(n.th,{children:"\u89e3\u51b3\u65b9\u6848"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"OOM"}),(0,s.jsx)(n.td,{children:"\u67e5\u770b GC \u65e5\u5fd7\u3001\u5806\u8f6c\u50a8"}),(0,s.jsx)(n.td,{children:"\u589e\u52a0\u5185\u5b58\u3001\u4f18\u5316\u72b6\u6001"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"\u80cc\u538b"}),(0,s.jsx)(n.td,{children:"Web UI \u80cc\u538b\u6307\u6807"}),(0,s.jsx)(n.td,{children:"\u589e\u52a0\u5e76\u884c\u5ea6\u3001\u4f18\u5316\u7b97\u5b50"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"\u68c0\u67e5\u70b9\u8d85\u65f6"}),(0,s.jsx)(n.td,{children:"\u68c0\u67e5\u70b9\u65e5\u5fd7"}),(0,s.jsx)(n.td,{children:"\u4f7f\u7528\u589e\u91cf\u68c0\u67e5\u70b9\u3001\u589e\u5927\u8d85\u65f6"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Kafka \u5ef6\u8fdf"}),(0,s.jsx)(n.td,{children:"Consumer Lag"}),(0,s.jsx)(n.td,{children:"\u589e\u52a0\u5e76\u884c\u5ea6\u3001\u68c0\u67e5\u7f51\u7edc"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"\u65e5\u5fd7\u5206\u6790",children:"\u65e5\u5fd7\u5206\u6790"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# \u67e5\u770b JobManager \u65e5\u5fd7\ntail -f log/flink-*-jobmanager-*.log\n\n# \u67e5\u770b TaskManager \u65e5\u5fd7\ntail -f log/flink-*-taskmanager-*.log\n\n# \u641c\u7d22\u5f02\u5e38\ngrep -r "Exception" log/\n\n# \u641c\u7d22\u68c0\u67e5\u70b9\u65e5\u5fd7\ngrep -r "Checkpoint" log/flink-*-jobmanager-*.log\n'})}),"\n",(0,s.jsx)(n.h3,{id:"\u5806\u8f6c\u50a8\u5206\u6790",children:"\u5806\u8f6c\u50a8\u5206\u6790"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# \u751f\u6210\u5806\u8f6c\u50a8\njmap -dump:format=b,file=heap.hprof <pid>\n\n# \u4f7f\u7528 MAT \u6216 VisualVM \u5206\u6790\n"})}),"\n",(0,s.jsx)(n.h2,{id:"web-ui-\u76d1\u63a7",children:"Web UI \u76d1\u63a7"}),"\n",(0,s.jsx)(n.h3,{id:"\u5173\u952e\u9875\u9762",children:"\u5173\u952e\u9875\u9762"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"\u9875\u9762"}),(0,s.jsx)(n.th,{children:"\u7528\u9014"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Overview"}),(0,s.jsx)(n.td,{children:"\u96c6\u7fa4\u6982\u89c8\u3001\u8d44\u6e90\u4f7f\u7528"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Jobs"}),(0,s.jsx)(n.td,{children:"\u4f5c\u4e1a\u5217\u8868\u3001\u8fd0\u884c\u72b6\u6001"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Job Details"}),(0,s.jsx)(n.td,{children:"\u7b97\u5b50\u62d3\u6251\u3001\u5404\u7b97\u5b50\u72b6\u6001"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Checkpoints"}),(0,s.jsx)(n.td,{children:"\u68c0\u67e5\u70b9\u5386\u53f2\u3001\u8017\u65f6"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Metrics"}),(0,s.jsx)(n.td,{children:"\u8be6\u7ec6\u6307\u6807\u67e5\u770b"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Backpressure"}),(0,s.jsx)(n.td,{children:"\u80cc\u538b\u72b6\u6001\u5206\u6790"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"rest-api",children:"REST API"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# \u83b7\u53d6\u4f5c\u4e1a\u5217\u8868\ncurl http://localhost:8081/jobs\n\n# \u83b7\u53d6\u4f5c\u4e1a\u8be6\u60c5\ncurl http://localhost:8081/jobs/<job-id>\n\n# \u83b7\u53d6\u68c0\u67e5\u70b9\u7edf\u8ba1\ncurl http://localhost:8081/jobs/<job-id>/checkpoints\n\n# \u89e6\u53d1\u4fdd\u5b58\u70b9\ncurl -X POST http://localhost:8081/jobs/<job-id>/savepoints \\\n  -d \'{"target-directory": "hdfs:///savepoints"}\'\n'})}),"\n",(0,s.jsx)(n.h2,{id:"\u4e0b\u4e00\u6b65",children:"\u4e0b\u4e00\u6b65"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\ud83d\ude80 ",(0,s.jsx)(n.a,{href:"/docs/flink/performance-optimization",children:"\u6027\u80fd\u4f18\u5316"})," - \u8c03\u4f18\u6307\u5357"]}),"\n",(0,s.jsxs)(n.li,{children:["\ud83d\udccb ",(0,s.jsx)(n.a,{href:"/docs/flink/best-practices",children:"\u6700\u4f73\u5b9e\u8df5"})," - \u5f00\u53d1\u89c4\u8303"]}),"\n",(0,s.jsxs)(n.li,{children:["\ud83d\udd27 ",(0,s.jsx)(n.a,{href:"/docs/flink/deployment",children:"\u90e8\u7f72\u4e0e\u8fd0\u7ef4"})," - \u90e8\u7f72\u914d\u7f6e"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}}}]);