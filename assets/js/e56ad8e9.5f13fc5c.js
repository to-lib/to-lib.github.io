"use strict";(globalThis.webpackChunkto_lib_github_io=globalThis.webpackChunkto_lib_github_io||[]).push([[93372],{6107:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>h,contentTitle:()=>c,default:()=>a,frontMatter:()=>d,metadata:()=>l,toc:()=>x});const l=JSON.parse('{"id":"redis/faq","title":"\u5e38\u89c1\u95ee\u9898 FAQ","description":"\u57fa\u7840\u95ee\u9898","source":"@site/docs/redis/faq.md","sourceDirName":"redis","slug":"/redis/faq","permalink":"/docs/redis/faq","draft":false,"unlisted":false,"editUrl":"https://github.com/to-lib/to-lib.github.io/tree/main/docs/redis/faq.md","tags":[],"version":"current","sidebarPosition":21,"frontMatter":{"sidebar_position":21,"title":"\u5e38\u89c1\u95ee\u9898 FAQ"},"sidebar":"redis","previous":{"title":"\u5feb\u901f\u53c2\u8003","permalink":"/docs/redis/quick-reference"},"next":{"title":"\u5b9e\u6218\u6848\u4f8b","permalink":"/docs/redis/practical-examples"}}');var i=s(22714),r=s(48885);const d={sidebar_position:21,title:"\u5e38\u89c1\u95ee\u9898 FAQ"},c="Redis \u5e38\u89c1\u95ee\u9898",h={},x=[{value:"\u57fa\u7840\u95ee\u9898",id:"\u57fa\u7840\u95ee\u9898",level:2},{value:"Q: Redis \u662f\u4ec0\u4e48\uff1f",id:"q-redis-\u662f\u4ec0\u4e48",level:3},{value:"Q: Redis \u4e3a\u4ec0\u4e48\u8fd9\u4e48\u5feb\uff1f",id:"q-redis-\u4e3a\u4ec0\u4e48\u8fd9\u4e48\u5feb",level:3},{value:"Q: Redis \u5355\u7ebf\u7a0b\u4e3a\u4ec0\u4e48\u8fd8\u8fd9\u4e48\u5feb\uff1f",id:"q-redis-\u5355\u7ebf\u7a0b\u4e3a\u4ec0\u4e48\u8fd8\u8fd9\u4e48\u5feb",level:3},{value:"Q: Redis \u652f\u6301\u54ea\u4e9b\u6570\u636e\u7c7b\u578b\uff1f",id:"q-redis-\u652f\u6301\u54ea\u4e9b\u6570\u636e\u7c7b\u578b",level:3},{value:"Q: String \u548c Hash \u4ec0\u4e48\u65f6\u5019\u7528\uff1f",id:"q-string-\u548c-hash-\u4ec0\u4e48\u65f6\u5019\u7528",level:3},{value:"\u6301\u4e45\u5316\u95ee\u9898",id:"\u6301\u4e45\u5316\u95ee\u9898",level:2},{value:"Q: RDB \u548c AOF \u6709\u4ec0\u4e48\u533a\u522b\uff1f",id:"q-rdb-\u548c-aof-\u6709\u4ec0\u4e48\u533a\u522b",level:3},{value:"Q: \u5982\u4f55\u9009\u62e9\u6301\u4e45\u5316\u7b56\u7565\uff1f",id:"q-\u5982\u4f55\u9009\u62e9\u6301\u4e45\u5316\u7b56\u7565",level:3},{value:"Q: AOF \u6587\u4ef6\u592a\u5927\u600e\u4e48\u529e\uff1f",id:"q-aof-\u6587\u4ef6\u592a\u5927\u600e\u4e48\u529e",level:3},{value:"\u7f13\u5b58\u95ee\u9898",id:"\u7f13\u5b58\u95ee\u9898",level:2},{value:"Q: \u4ec0\u4e48\u662f\u7f13\u5b58\u7a7f\u900f\uff1f\u5982\u4f55\u89e3\u51b3\uff1f",id:"q-\u4ec0\u4e48\u662f\u7f13\u5b58\u7a7f\u900f\u5982\u4f55\u89e3\u51b3",level:3},{value:"Q: \u4ec0\u4e48\u662f\u7f13\u5b58\u51fb\u7a7f\uff1f\u5982\u4f55\u89e3\u51b3\uff1f",id:"q-\u4ec0\u4e48\u662f\u7f13\u5b58\u51fb\u7a7f\u5982\u4f55\u89e3\u51b3",level:3},{value:"Q: \u4ec0\u4e48\u662f\u7f13\u5b58\u96ea\u5d29\uff1f\u5982\u4f55\u89e3\u51b3\uff1f",id:"q-\u4ec0\u4e48\u662f\u7f13\u5b58\u96ea\u5d29\u5982\u4f55\u89e3\u51b3",level:3},{value:"\u6027\u80fd\u95ee\u9898",id:"\u6027\u80fd\u95ee\u9898",level:2},{value:"Q: \u5982\u4f55\u63d0\u5347 Redis \u6027\u80fd\uff1f",id:"q-\u5982\u4f55\u63d0\u5347-redis-\u6027\u80fd",level:3},{value:"Q: KEYS \u547d\u4ee4\u4e3a\u4ec0\u4e48\u7981\u7528\uff1f",id:"q-keys-\u547d\u4ee4\u4e3a\u4ec0\u4e48\u7981\u7528",level:3},{value:"Q: \u5982\u4f55\u5206\u6790\u6162\u67e5\u8be2\uff1f",id:"q-\u5982\u4f55\u5206\u6790\u6162\u67e5\u8be2",level:3},{value:"\u96c6\u7fa4\u95ee\u9898",id:"\u96c6\u7fa4\u95ee\u9898",level:2},{value:"Q: \u4e3b\u4ece\u3001\u54e8\u5175\u3001\u96c6\u7fa4\u6709\u4ec0\u4e48\u533a\u522b\uff1f",id:"q-\u4e3b\u4ece\u54e8\u5175\u96c6\u7fa4\u6709\u4ec0\u4e48\u533a\u522b",level:3},{value:"Q: \u5982\u4f55\u4fdd\u8bc1\u4e3b\u4ece\u6570\u636e\u4e00\u81f4\u6027\uff1f",id:"q-\u5982\u4f55\u4fdd\u8bc1\u4e3b\u4ece\u6570\u636e\u4e00\u81f4\u6027",level:3},{value:"Q: \u96c6\u7fa4\u5982\u4f55\u6269\u5bb9\uff1f",id:"q-\u96c6\u7fa4\u5982\u4f55\u6269\u5bb9",level:3},{value:"\u5185\u5b58\u95ee\u9898",id:"\u5185\u5b58\u95ee\u9898",level:2},{value:"Q: Redis \u5185\u5b58\u6ee1\u4e86\u600e\u4e48\u529e\uff1f",id:"q-redis-\u5185\u5b58\u6ee1\u4e86\u600e\u4e48\u529e",level:3},{value:"Q: \u5982\u4f55\u4f18\u5316\u5185\u5b58\u4f7f\u7528\uff1f",id:"q-\u5982\u4f55\u4f18\u5316\u5185\u5b58\u4f7f\u7528",level:3},{value:"\u5b89\u5168\u95ee\u9898",id:"\u5b89\u5168\u95ee\u9898",level:2},{value:"Q: \u5982\u4f55\u4fdd\u8bc1 Redis \u5b89\u5168\uff1f",id:"q-\u5982\u4f55\u4fdd\u8bc1-redis-\u5b89\u5168",level:3},{value:"Q: Redis \u88ab\u653b\u51fb\u4e86\u600e\u4e48\u529e\uff1f",id:"q-redis-\u88ab\u653b\u51fb\u4e86\u600e\u4e48\u529e",level:3},{value:"\u5f00\u53d1\u95ee\u9898",id:"\u5f00\u53d1\u95ee\u9898",level:2},{value:"Q: Jedis vs Lettuce\uff1f",id:"q-jedis-vs-lettuce",level:3},{value:"Q: \u5982\u4f55\u6d4b\u8bd5 Redis\uff1f",id:"q-\u5982\u4f55\u6d4b\u8bd5-redis",level:3},{value:"\u603b\u7ed3",id:"\u603b\u7ed3",level:2}];function j(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.header,{children:(0,i.jsx)(e.h1,{id:"redis-\u5e38\u89c1\u95ee\u9898",children:"Redis \u5e38\u89c1\u95ee\u9898"})}),"\n",(0,i.jsx)(e.h2,{id:"\u57fa\u7840\u95ee\u9898",children:"\u57fa\u7840\u95ee\u9898"}),"\n",(0,i.jsx)(e.h3,{id:"q-redis-\u662f\u4ec0\u4e48",children:"Q: Redis \u662f\u4ec0\u4e48\uff1f"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"A:"})," Redis\uff08Remote Dictionary Server\uff09\u662f\u4e00\u4e2a\u5f00\u6e90\u7684\u5185\u5b58\u6570\u636e\u5b58\u50a8\u7cfb\u7edf\uff0c\u53ef\u7528\u4f5c\u6570\u636e\u5e93\u3001\u7f13\u5b58\u3001\u6d88\u606f\u961f\u5217\u7b49\u3002"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u7279\u70b9\uff1a"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5185\u5b58\u5b58\u50a8\uff0c\u901f\u5ea6\u5feb"}),"\n",(0,i.jsx)(e.li,{children:"\u652f\u6301\u591a\u79cd\u6570\u636e\u7c7b\u578b"}),"\n",(0,i.jsx)(e.li,{children:"\u652f\u6301\u6301\u4e45\u5316"}),"\n",(0,i.jsx)(e.li,{children:"\u9ad8\u53ef\u7528\uff08\u4e3b\u4ece\u3001\u54e8\u5175\u3001\u96c6\u7fa4\uff09"}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"q-redis-\u4e3a\u4ec0\u4e48\u8fd9\u4e48\u5feb",children:"Q: Redis \u4e3a\u4ec0\u4e48\u8fd9\u4e48\u5feb\uff1f"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"A:"})}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u5185\u5b58\u64cd\u4f5c"})," - \u6570\u636e\u5b58\u50a8\u5728\u5185\u5b58\u4e2d"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u5355\u7ebf\u7a0b\u6a21\u578b"})," - \u907f\u514d\u7ebf\u7a0b\u5207\u6362\u548c\u9501\u7ade\u4e89"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"\u9ad8\u6548\u6570\u636e\u7ed3\u6784"})," - \u9488\u5bf9\u6027\u4f18\u5316\u7684\u6570\u636e\u7ed3\u6784"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"I/O \u591a\u8def\u590d\u7528"})," - epoll \u7b49\u9ad8\u6548 I/O \u6a21\u578b"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"q-redis-\u5355\u7ebf\u7a0b\u4e3a\u4ec0\u4e48\u8fd8\u8fd9\u4e48\u5feb",children:"Q: Redis \u5355\u7ebf\u7a0b\u4e3a\u4ec0\u4e48\u8fd8\u8fd9\u4e48\u5feb\uff1f"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"A:"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"CPU \u4e0d\u662f\u74f6\u9888\uff0c\u5185\u5b58\u548c\u7f51\u7edc\u624d\u662f"}),"\n",(0,i.jsx)(e.li,{children:"\u907f\u514d\u4e86\u591a\u7ebf\u7a0b\u7684\u4e0a\u4e0b\u6587\u5207\u6362"}),"\n",(0,i.jsx)(e.li,{children:"\u907f\u514d\u4e86\u9501\u673a\u5236"}),"\n",(0,i.jsx)(e.li,{children:"\u4f7f\u7528 I/O \u591a\u8def\u590d\u7528\u5904\u7406\u5e76\u53d1\u8fde\u63a5"}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"q-redis-\u652f\u6301\u54ea\u4e9b\u6570\u636e\u7c7b\u578b",children:"Q: Redis \u652f\u6301\u54ea\u4e9b\u6570\u636e\u7c7b\u578b\uff1f"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"A:"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u57fa\u672c\u7c7b\u578b\uff1a"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"String\uff08\u5b57\u7b26\u4e32\uff09"}),"\n",(0,i.jsx)(e.li,{children:"List\uff08\u5217\u8868\uff09"}),"\n",(0,i.jsx)(e.li,{children:"Set\uff08\u96c6\u5408\uff09"}),"\n",(0,i.jsx)(e.li,{children:"Hash\uff08\u54c8\u5e0c\uff09"}),"\n",(0,i.jsx)(e.li,{children:"Sorted Set\uff08\u6709\u5e8f\u96c6\u5408\uff09"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u9ad8\u7ea7\u7c7b\u578b\uff1a"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Bitmap\uff08\u4f4d\u56fe\uff09"}),"\n",(0,i.jsx)(e.li,{children:"HyperLogLog\uff08\u57fa\u6570\u7edf\u8ba1\uff09"}),"\n",(0,i.jsx)(e.li,{children:"Geo\uff08\u5730\u7406\u4f4d\u7f6e\uff09"}),"\n",(0,i.jsx)(e.li,{children:"Stream\uff08\u6570\u636e\u6d41\uff09"}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"q-string-\u548c-hash-\u4ec0\u4e48\u65f6\u5019\u7528",children:"Q: String \u548c Hash \u4ec0\u4e48\u65f6\u5019\u7528\uff1f"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"A:"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"String \u9002\u5408\uff1a"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:'# \u7b80\u5355\u952e\u503c\u5bf9\nSET counter 100\nSET cache:user:1001 "user data json"\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Hash \u9002\u5408\uff1a"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:'# \u5bf9\u8c61\u5b58\u50a8\nHSET user:1001 name "Alice" age "25" email "alice@example.com"\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u9009\u62e9\u5efa\u8bae\uff1a"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u5355\u4e2a\u503c\u7528 String"}),"\n",(0,i.jsx)(e.li,{children:"\u5bf9\u8c61/\u591a\u5b57\u6bb5\u7528 Hash"}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"\u6301\u4e45\u5316\u95ee\u9898",children:"\u6301\u4e45\u5316\u95ee\u9898"}),"\n",(0,i.jsx)(e.h3,{id:"q-rdb-\u548c-aof-\u6709\u4ec0\u4e48\u533a\u522b",children:"Q: RDB \u548c AOF \u6709\u4ec0\u4e48\u533a\u522b\uff1f"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"A:"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"\u7279\u6027"}),(0,i.jsx)(e.th,{children:"RDB"}),(0,i.jsx)(e.th,{children:"AOF"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u6587\u4ef6\u5927\u5c0f"}),(0,i.jsx)(e.td,{children:"\u5c0f"}),(0,i.jsx)(e.td,{children:"\u5927"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u6062\u590d\u901f\u5ea6"}),(0,i.jsx)(e.td,{children:"\u5feb"}),(0,i.jsx)(e.td,{children:"\u6162"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u6570\u636e\u5b89\u5168"}),(0,i.jsx)(e.td,{children:"\u53ef\u80fd\u4e22\u5931\u6570\u636e"}),(0,i.jsx)(e.td,{children:"\u5b89\u5168\u6027\u9ad8"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u6027\u80fd\u5f71\u54cd"}),(0,i.jsx)(e.td,{children:"\u5c0f"}),(0,i.jsx)(e.td,{children:"\u76f8\u5bf9\u5927"})]})]})]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\u5efa\u8bae\uff1a"})," \u540c\u65f6\u5f00\u542f RDB \u548c AOF"]}),"\n",(0,i.jsx)(e.h3,{id:"q-\u5982\u4f55\u9009\u62e9\u6301\u4e45\u5316\u7b56\u7565",children:"Q: \u5982\u4f55\u9009\u62e9\u6301\u4e45\u5316\u7b56\u7565\uff1f"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"A:"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"# \u5bf9\u6570\u636e\u5b89\u5168\u6027\u8981\u6c42\u9ad8\nappendonly yes\nappendfsync everysec\n\n# \u5bf9\u6027\u80fd\u8981\u6c42\u9ad8\uff0c\u53ef\u5bb9\u5fcd\u5c11\u91cf\u6570\u636e\u4e22\u5931\nsave 900 1\nsave 300 10\nappendonly no\n"})}),"\n",(0,i.jsx)(e.h3,{id:"q-aof-\u6587\u4ef6\u592a\u5927\u600e\u4e48\u529e",children:"Q: AOF \u6587\u4ef6\u592a\u5927\u600e\u4e48\u529e\uff1f"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"A:"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"# \u624b\u52a8\u91cd\u5199\nBGREWRITEAOF\n\n# \u81ea\u52a8\u91cd\u5199\u914d\u7f6e\nauto-aof-rewrite-percentage 100\nauto-aof-rewrite-min-size 64mb\n"})}),"\n",(0,i.jsx)(e.h2,{id:"\u7f13\u5b58\u95ee\u9898",children:"\u7f13\u5b58\u95ee\u9898"}),"\n",(0,i.jsx)(e.h3,{id:"q-\u4ec0\u4e48\u662f\u7f13\u5b58\u7a7f\u900f\u5982\u4f55\u89e3\u51b3",children:"Q: \u4ec0\u4e48\u662f\u7f13\u5b58\u7a7f\u900f\uff1f\u5982\u4f55\u89e3\u51b3\uff1f"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"A:"})," \u67e5\u8be2\u4e0d\u5b58\u5728\u7684\u6570\u636e\uff0c\u6bcf\u6b21\u90fd\u6253\u5230\u6570\u636e\u5e93\u3002"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u89e3\u51b3\u65b9\u6848\uff1a"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. \u7f13\u5b58\u7a7a\u5bf9\u8c61"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'String value = redis.get(key);\nif (value == null) {\n    value = db.query(key);\n    if (value == null) {\n        redis.setex(key, 60, "NULL");  // \u7f13\u5b58\u7a7a\u503c\n    }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2. \u5e03\u9686\u8fc7\u6ee4\u5668"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"if (!bloomFilter.mightContain(key)) {\n    return null;  // \u76f4\u63a5\u8fd4\u56de\n}\n"})}),"\n",(0,i.jsx)(e.h3,{id:"q-\u4ec0\u4e48\u662f\u7f13\u5b58\u51fb\u7a7f\u5982\u4f55\u89e3\u51b3",children:"Q: \u4ec0\u4e48\u662f\u7f13\u5b58\u51fb\u7a7f\uff1f\u5982\u4f55\u89e3\u51b3\uff1f"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"A:"})," \u70ed\u70b9 key \u7a81\u7136\u5931\u6548\uff0c\u5927\u91cf\u8bf7\u6c42\u6253\u5230\u6570\u636e\u5e93\u3002"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u89e3\u51b3\u65b9\u6848\uff1a"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. \u6c38\u4e0d\u8fc7\u671f"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"SET hotkey value\n# \u4e0d\u8bbe\u7f6e\u8fc7\u671f\u65f6\u95f4\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2. \u4e92\u65a5\u9501"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'String value = redis.get(key);\nif (value == null) {\n    if (redis.setnx("lock:" + key, "1", 10)) {\n        value = db.query(key);\n        redis.setex(key, 3600, value);\n        redis.del("lock:" + key);\n    } else {\n        // \u7b49\u5f85\u91cd\u8bd5\n        Thread.sleep(100);\n        return redis.get(key);\n    }\n}\n'})}),"\n",(0,i.jsx)(e.h3,{id:"q-\u4ec0\u4e48\u662f\u7f13\u5b58\u96ea\u5d29\u5982\u4f55\u89e3\u51b3",children:"Q: \u4ec0\u4e48\u662f\u7f13\u5b58\u96ea\u5d29\uff1f\u5982\u4f55\u89e3\u51b3\uff1f"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"A:"})," \u5927\u91cf key \u540c\u65f6\u5931\u6548\uff0c\u8bf7\u6c42\u538b\u57ae\u6570\u636e\u5e93\u3002"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u89e3\u51b3\u65b9\u6848\uff1a"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. \u8fc7\u671f\u65f6\u95f4\u52a0\u968f\u673a\u503c"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"int ttl = 3600 + new Random().nextInt(300);\nredis.setex(key, ttl, value);\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2. \u4e92\u65a5\u9501"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"// \u540c\u7f13\u5b58\u51fb\u7a7f\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"3. \u591a\u7ea7\u7f13\u5b58"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"// Redis + \u672c\u5730\u7f13\u5b58\n// Nginx + Redis + DB\n"})}),"\n",(0,i.jsx)(e.h2,{id:"\u6027\u80fd\u95ee\u9898",children:"\u6027\u80fd\u95ee\u9898"}),"\n",(0,i.jsx)(e.h3,{id:"q-\u5982\u4f55\u63d0\u5347-redis-\u6027\u80fd",children:"Q: \u5982\u4f55\u63d0\u5347 Redis \u6027\u80fd\uff1f"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"A:"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. \u4f7f\u7528 Pipeline"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'Pipeline p = jedis.pipelined();\nfor (int i = 0; i < 10000; i++) {\n    p.set("k" + i, "v" + i);\n}\np.sync();\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2. \u907f\u514d\u5927 key"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"# \u4e0d\u597d\nHSET big_hash f1 v1 ... # 100\u4e07\u4e2a\u5b57\u6bb5\n\n# \u597d\uff1a\u62c6\u5206\nHSET hash:0 f1 v1\nHSET hash:1 f1000000 v1000000\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"3. \u5408\u7406\u4f7f\u7528\u6570\u636e\u7ed3\u6784"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"4. \u8bbe\u7f6e\u5408\u7406\u7684\u8fc7\u671f\u65f6\u95f4"})}),"\n",(0,i.jsx)(e.h3,{id:"q-keys-\u547d\u4ee4\u4e3a\u4ec0\u4e48\u7981\u7528",children:"Q: KEYS \u547d\u4ee4\u4e3a\u4ec0\u4e48\u7981\u7528\uff1f"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"A:"})," ",(0,i.jsx)(e.code,{children:"KEYS *"})," \u4f1a\u963b\u585e Redis\uff0c\u751f\u4ea7\u73af\u5883\u7981\u7528\u3002"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u66ff\u4ee3\u65b9\u6848\uff1a"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"# \u4f7f\u7528 SCAN\nSCAN 0 MATCH user:* COUNT 100\n"})}),"\n",(0,i.jsx)(e.h3,{id:"q-\u5982\u4f55\u5206\u6790\u6162\u67e5\u8be2",children:"Q: \u5982\u4f55\u5206\u6790\u6162\u67e5\u8be2\uff1f"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"A:"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. \u67e5\u770b\u6162\u67e5\u8be2\u65e5\u5fd7"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"SLOWLOG GET 100\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2. \u914d\u7f6e\u6162\u67e5\u8be2\u9608\u503c"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"# redis.conf\nslowlog-log-slower-than 10000  # 10ms\nslowlog-max-len 128\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"3. \u5206\u6790\u548c\u4f18\u5316"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u907f\u514d\u4f7f\u7528 KEYS"}),"\n",(0,i.jsx)(e.li,{children:"\u51cf\u5c11\u5927 key"}),"\n",(0,i.jsx)(e.li,{children:"\u4f18\u5316 Lua \u811a\u672c"}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"\u96c6\u7fa4\u95ee\u9898",children:"\u96c6\u7fa4\u95ee\u9898"}),"\n",(0,i.jsx)(e.h3,{id:"q-\u4e3b\u4ece\u54e8\u5175\u96c6\u7fa4\u6709\u4ec0\u4e48\u533a\u522b",children:"Q: \u4e3b\u4ece\u3001\u54e8\u5175\u3001\u96c6\u7fa4\u6709\u4ec0\u4e48\u533a\u522b\uff1f"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"A:"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u4e3b\u4ece\u590d\u5236\uff1a"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6570\u636e\u5907\u4efd"}),"\n",(0,i.jsx)(e.li,{children:"\u8bfb\u5199\u5206\u79bb"}),"\n",(0,i.jsx)(e.li,{children:"\u4e3b\u8282\u70b9\u6545\u969c\u9700\u8981\u624b\u52a8\u5207\u6362"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u54e8\u5175\u6a21\u5f0f\uff1a"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u57fa\u4e8e\u4e3b\u4ece"}),"\n",(0,i.jsx)(e.li,{children:"\u81ea\u52a8\u6545\u969c\u8f6c\u79fb"}),"\n",(0,i.jsx)(e.li,{children:"\u76d1\u63a7\u548c\u901a\u77e5"}),"\n",(0,i.jsx)(e.li,{children:"\u9002\u5408\u4e2d\u5c0f\u89c4\u6a21"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Redis \u96c6\u7fa4\uff1a"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u6570\u636e\u5206\u7247"}),"\n",(0,i.jsx)(e.li,{children:"\u6a2a\u5411\u6269\u5c55"}),"\n",(0,i.jsx)(e.li,{children:"\u9ad8\u53ef\u7528"}),"\n",(0,i.jsx)(e.li,{children:"\u9002\u5408\u5927\u89c4\u6a21"}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"q-\u5982\u4f55\u4fdd\u8bc1\u4e3b\u4ece\u6570\u636e\u4e00\u81f4\u6027",children:"Q: \u5982\u4f55\u4fdd\u8bc1\u4e3b\u4ece\u6570\u636e\u4e00\u81f4\u6027\uff1f"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"A:"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. \u540c\u6b65\u590d\u5236\uff08\u4e0d\u63a8\u8350\uff09"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"wait 1 1000  # \u7b49\u5f851\u4e2a\u4ece\u8282\u70b9\u786e\u8ba4\uff0c\u8d85\u65f61\u79d2\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2. \u5f02\u6b65\u590d\u5236+\u91cd\u8bd5"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:"// \u5e94\u7528\u5c42\u4fdd\u8bc1\u6700\u7ec8\u4e00\u81f4\u6027\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"3. \u76d1\u63a7\u4e3b\u4ece\u5ef6\u8fdf"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"INFO replication\n# master_repl_offset\n# slave_repl_offset\n"})}),"\n",(0,i.jsx)(e.h3,{id:"q-\u96c6\u7fa4\u5982\u4f55\u6269\u5bb9",children:"Q: \u96c6\u7fa4\u5982\u4f55\u6269\u5bb9\uff1f"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"A:"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"# 1. \u6dfb\u52a0\u65b0\u8282\u70b9\nredis-cli --cluster add-node new_ip:6379 existing_ip:6379\n\n# 2. \u5206\u914d\u69fd\u4f4d\nredis-cli --cluster reshard existing_ip:6379\n"})}),"\n",(0,i.jsx)(e.h2,{id:"\u5185\u5b58\u95ee\u9898",children:"\u5185\u5b58\u95ee\u9898"}),"\n",(0,i.jsx)(e.h3,{id:"q-redis-\u5185\u5b58\u6ee1\u4e86\u600e\u4e48\u529e",children:"Q: Redis \u5185\u5b58\u6ee1\u4e86\u600e\u4e48\u529e\uff1f"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"A:"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. \u67e5\u770b\u5185\u5b58\u4f7f\u7528"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"INFO memory\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2. \u8bbe\u7f6e\u6dd8\u6c70\u7b56\u7565"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"maxmemory 2gb\nmaxmemory-policy allkeys-lru\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"3. \u5206\u6790\u5927 key"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"redis-cli --bigkeys\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"4. \u6e05\u7406\u8fc7\u671f key"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"# \u81ea\u52a8\u6e05\u7406\nlazyfree-lazy-eviction yes\n"})}),"\n",(0,i.jsx)(e.h3,{id:"q-\u5982\u4f55\u4f18\u5316\u5185\u5b58\u4f7f\u7528",children:"Q: \u5982\u4f55\u4f18\u5316\u5185\u5b58\u4f7f\u7528\uff1f"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"A:"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. \u4f7f\u7528 Hash \u5b58\u50a8\u5bf9\u8c61"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:'# \u4e0d\u597d\nSET user:1001:name "Alice"\nSET user:1001:age "25"\n\n# \u597d\nHSET user:1001 name "Alice" age "25"\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2. \u8bbe\u7f6e\u8fc7\u671f\u65f6\u95f4"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"SETEX key 3600 value\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"3. \u542f\u7528\u538b\u7f29"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"hash-max-ziplist-entries 512\nhash-max-ziplist-value 64\n"})}),"\n",(0,i.jsx)(e.h2,{id:"\u5b89\u5168\u95ee\u9898",children:"\u5b89\u5168\u95ee\u9898"}),"\n",(0,i.jsx)(e.h3,{id:"q-\u5982\u4f55\u4fdd\u8bc1-redis-\u5b89\u5168",children:"Q: \u5982\u4f55\u4fdd\u8bc1 Redis \u5b89\u5168\uff1f"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"A:"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. \u8bbe\u7f6e\u5bc6\u7801"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"requirepass your_password\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2. \u7981\u7528\u5371\u9669\u547d\u4ee4"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:'rename-command FLUSHALL ""\nrename-command CONFIG ""\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"3. \u7ed1\u5b9a IP"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"bind 127.0.0.1 192.168.1.100\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"4. \u4f7f\u7528\u9632\u706b\u5899"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"# \u53ea\u5141\u8bb8\u5e94\u7528\u670d\u52a1\u5668\u8bbf\u95ee\n"})}),"\n",(0,i.jsx)(e.h3,{id:"q-redis-\u88ab\u653b\u51fb\u4e86\u600e\u4e48\u529e",children:"Q: Redis \u88ab\u653b\u51fb\u4e86\u600e\u4e48\u529e\uff1f"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"A:"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"1. \u7acb\u5373\u4fee\u6539\u5bc6\u7801"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"CONFIG SET requirepass new_password\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"2. \u68c0\u67e5\u6570\u636e"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"KEYS *\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"3. \u6062\u590d\u6570\u636e"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"# \u4ece\u5907\u4efd\u6062\u590d\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"4. \u52a0\u5f3a\u5b89\u5168\u63aa\u65bd"})}),"\n",(0,i.jsx)(e.h2,{id:"\u5f00\u53d1\u95ee\u9898",children:"\u5f00\u53d1\u95ee\u9898"}),"\n",(0,i.jsx)(e.h3,{id:"q-jedis-vs-lettuce",children:"Q: Jedis vs Lettuce\uff1f"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"A:"})}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"\u7279\u6027"}),(0,i.jsx)(e.th,{children:"Jedis"}),(0,i.jsx)(e.th,{children:"Lettuce"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u7ebf\u7a0b\u5b89\u5168"}),(0,i.jsx)(e.td,{children:"\u274c"}),(0,i.jsx)(e.td,{children:"\u2705"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u5f02\u6b65\u652f\u6301"}),(0,i.jsx)(e.td,{children:"\u274c"}),(0,i.jsx)(e.td,{children:"\u2705"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"\u8fde\u63a5\u6c60"}),(0,i.jsx)(e.td,{children:"\u9700\u8981"}),(0,i.jsx)(e.td,{children:"\u53ef\u9009"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"Spring Boot"}),(0,i.jsx)(e.td,{children:"2.x \u4e0d\u63a8\u8350"}),(0,i.jsx)(e.td,{children:"2.x \u9ed8\u8ba4"})]})]})]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"\u5efa\u8bae\uff1a"})," \u65b0\u9879\u76ee\u7528 Lettuce"]}),"\n",(0,i.jsx)(e.h3,{id:"q-\u5982\u4f55\u6d4b\u8bd5-redis",children:"Q: \u5982\u4f55\u6d4b\u8bd5 Redis\uff1f"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"A:"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u5355\u5143\u6d4b\u8bd5\uff1a"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@Test\npublic void testRedis() {\n    Jedis jedis = new Jedis("localhost", 6379);\n    jedis.set("test", "value");\n    assertEquals("value", jedis.get("test"));\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"\u96c6\u6210\u6d4b\u8bd5\uff1a"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-java",children:'@SpringBootTest\n@AutoConfigureDataRedis\npublic class RedisIntegrationTest {\n    @Autowired\n    private RedisTemplate<String, String> redisTemplate;\n\n    @Test\n    public void test() {\n        redisTemplate.opsForValue().set("key", "value");\n    }\n}\n'})}),"\n",(0,i.jsx)(e.h2,{id:"\u603b\u7ed3",children:"\u603b\u7ed3"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"\u2705 Redis \u662f\u9ad8\u6027\u80fd\u7684\u5185\u5b58\u6570\u636e\u5e93"}),"\n",(0,i.jsx)(e.li,{children:"\u2705 \u7406\u89e3\u4e0d\u540c\u6570\u636e\u7c7b\u578b\u7684\u9002\u7528\u573a\u666f"}),"\n",(0,i.jsx)(e.li,{children:"\u2705 \u5408\u7406\u914d\u7f6e\u6301\u4e45\u5316\u7b56\u7565"}),"\n",(0,i.jsx)(e.li,{children:"\u2705 \u638c\u63e1\u7f13\u5b58\u5e38\u89c1\u95ee\u9898\u7684\u89e3\u51b3\u65b9\u6848"}),"\n",(0,i.jsx)(e.li,{children:"\u2705 \u5173\u6ce8\u6027\u80fd\u548c\u5b89\u5168"}),"\n",(0,i.jsx)(e.li,{children:"\u2705 \u9009\u62e9\u5408\u9002\u7684\u9ad8\u53ef\u7528\u67b6\u6784"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"\u9047\u5230\u95ee\u9898\u5148\u67e5\u6587\u6863\uff0c\u5408\u7406\u4f7f\u7528 Redis\uff01"})]})}function a(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(j,{...n})}):j(n)}},48885:(n,e,s)=>{s.d(e,{R:()=>d,x:()=>c});var l=s(99378);const i={},r=l.createContext(i);function d(n){const e=l.useContext(r);return l.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:d(n.components),l.createElement(r.Provider,{value:e},n.children)}}}]);