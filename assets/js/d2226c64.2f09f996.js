"use strict";(globalThis.webpackChunkto_lib_github_io=globalThis.webpackChunkto_lib_github_io||[]).push([[96178],{46899:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>t,contentTitle:()=>o,default:()=>p,frontMatter:()=>c,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"spring/dependency-injection","title":"\u4f9d\u8d56\u6ce8\u5165\u8be6\u89e3","description":"[!TIP]","source":"@site/docs/spring/dependency-injection.md","sourceDirName":"spring","slug":"/spring/dependency-injection","permalink":"/docs/spring/dependency-injection","draft":false,"unlisted":false,"editUrl":"https://github.com/to-lib/to-lib.github.io/tree/main/docs/spring/dependency-injection.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"id":"dependency-injection","title":"\u4f9d\u8d56\u6ce8\u5165\u8be6\u89e3","sidebar_label":"\u4f9d\u8d56\u6ce8\u5165","sidebar_position":3},"sidebar":"spring","previous":{"title":"\u6838\u5fc3\u6982\u5ff5","permalink":"/docs/spring/core-concepts"},"next":{"title":"Bean\u7ba1\u7406","permalink":"/docs/spring/bean-management"}}');var s=i(22714),l=i(48885);const c={id:"dependency-injection",title:"\u4f9d\u8d56\u6ce8\u5165\u8be6\u89e3",sidebar_label:"\u4f9d\u8d56\u6ce8\u5165",sidebar_position:3},o="\u4f9d\u8d56\u6ce8\u5165",t={},a=[{value:"1. \u4f9d\u8d56\u6ce8\u5165\u7684\u4e09\u79cd\u65b9\u5f0f",id:"1-\u4f9d\u8d56\u6ce8\u5165\u7684\u4e09\u79cd\u65b9\u5f0f",level:2},{value:"1.1 \u6784\u9020\u51fd\u6570\u6ce8\u5165\uff08\u63a8\u8350\uff09",id:"11-\u6784\u9020\u51fd\u6570\u6ce8\u5165\u63a8\u8350",level:3},{value:"1.2 Setter\u6ce8\u5165",id:"12-setter\u6ce8\u5165",level:3},{value:"1.3 \u5b57\u6bb5\u6ce8\u5165",id:"13-\u5b57\u6bb5\u6ce8\u5165",level:3},{value:"2. \u63a8\u8350\u6700\u4f73\u5b9e\u8df5",id:"2-\u63a8\u8350\u6700\u4f73\u5b9e\u8df5",level:2},{value:"2.1 \u4f9d\u8d56\u6ce8\u5165\u4f18\u5148\u7ea7",id:"21-\u4f9d\u8d56\u6ce8\u5165\u4f18\u5148\u7ea7",level:3},{value:"2.2 \u5b9e\u6218\u793a\u4f8b - \u5b8c\u6574\u7684\u6700\u4f73\u5b9e\u8df5",id:"22-\u5b9e\u6218\u793a\u4f8b---\u5b8c\u6574\u7684\u6700\u4f73\u5b9e\u8df5",level:3},{value:"2.3 \u5904\u7406\u53ef\u9009\u4f9d\u8d56",id:"23-\u5904\u7406\u53ef\u9009\u4f9d\u8d56",level:3},{value:"3. \u591a\u4e2a\u5b9e\u73b0\u7684\u5904\u7406",id:"3-\u591a\u4e2a\u5b9e\u73b0\u7684\u5904\u7406",level:2},{value:"3.1 \u4f7f\u7528@Qualifier",id:"31-\u4f7f\u7528qualifier",level:3},{value:"3.2 \u4f7f\u7528@Primary",id:"32-\u4f7f\u7528primary",level:3},{value:"3.3 \u6ce8\u5165\u6240\u6709\u5b9e\u73b0",id:"33-\u6ce8\u5165\u6240\u6709\u5b9e\u73b0",level:3},{value:"3.4 \u4f7f\u7528Map\u6ce8\u5165",id:"34-\u4f7f\u7528map\u6ce8\u5165",level:3},{value:"4. \u5faa\u73af\u4f9d\u8d56",id:"4-\u5faa\u73af\u4f9d\u8d56",level:2},{value:"4.1 \u95ee\u9898\u793a\u4f8b",id:"41-\u95ee\u9898\u793a\u4f8b",level:3},{value:"4.2 \u89e3\u51b3\u65b9\u6848",id:"42-\u89e3\u51b3\u65b9\u6848",level:3},{value:"5. \u6cdb\u578b\u4f9d\u8d56\u6ce8\u5165",id:"5-\u6cdb\u578b\u4f9d\u8d56\u6ce8\u5165",level:2},{value:"6. ObjectProvider\u7684\u9ad8\u7ea7\u7528\u6cd5",id:"6-objectprovider\u7684\u9ad8\u7ea7\u7528\u6cd5",level:2},{value:"7. \u6ce8\u5165\u914d\u7f6e\u503c",id:"7-\u6ce8\u5165\u914d\u7f6e\u503c",level:2},{value:"7.1 @Value\u6ce8\u5165",id:"71-value\u6ce8\u5165",level:3},{value:"7.2 @ConfigurationProperties",id:"72-configurationproperties",level:3},{value:"8. \u603b\u7ed3",id:"8-\u603b\u7ed3",level:2}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"\u4f9d\u8d56\u6ce8\u5165",children:"\u4f9d\u8d56\u6ce8\u5165"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["[!TIP]\n",(0,s.jsx)(n.strong,{children:"DI \u6700\u4f73\u5b9e\u8df5"}),": \u4f18\u5148\u4f7f\u7528\u6784\u9020\u5668\u6ce8\u5165,\u907f\u514d\u5b57\u6bb5\u6ce8\u5165\u3002\u4f7f\u7528 @Autowired \u65f6\u6ce8\u610f\u5faa\u73af\u4f9d\u8d56\u95ee\u9898\u3002\u8be6\u89e3"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"1-\u4f9d\u8d56\u6ce8\u5165\u7684\u4e09\u79cd\u65b9\u5f0f",children:"1. \u4f9d\u8d56\u6ce8\u5165\u7684\u4e09\u79cd\u65b9\u5f0f"}),"\n",(0,s.jsx)(n.h3,{id:"11-\u6784\u9020\u51fd\u6570\u6ce8\u5165\u63a8\u8350",children:"1.1 \u6784\u9020\u51fd\u6570\u6ce8\u5165\uff08\u63a8\u8350\uff09"}),"\n",(0,s.jsx)(n.p,{children:"\u901a\u8fc7\u6784\u9020\u51fd\u6570\u7684\u53c2\u6570\u6ce8\u5165\u4f9d\u8d56\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"@Component\npublic class UserService {\n    private final UserRepository userRepository;\n    private final EmailService emailService;\n    \n    // \u63a8\u8350\uff1a\u4f7f\u7528\u6784\u9020\u51fd\u6570\u6ce8\u5165\n    public UserService(UserRepository userRepository, EmailService emailService) {\n        this.userRepository = userRepository;\n        this.emailService = emailService;\n    }\n    \n    public void registerUser(User user) {\n        userRepository.save(user);\n        emailService.sendWelcomeEmail(user);\n    }\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u4f18\u70b9"}),"\uff1a"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u2705 \u4f9d\u8d56\u5173\u7cfb\u660e\u786e\uff0c\u5728\u6784\u9020\u65f6\u5c31\u77e5\u9053\u9700\u8981\u4ec0\u4e48"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 \u5bf9\u8c61\u521b\u5efa\u540e\u7acb\u5373\u53ef\u7528\uff0c\u4e0d\u5b58\u5728\u672a\u521d\u59cb\u5316\u7684\u72b6\u6001"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 \u6613\u4e8e\u6d4b\u8bd5\uff0c\u53ef\u4ee5\u8f7b\u677e\u4f20\u5165Mock\u5bf9\u8c61"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 \u4e0d\u53ef\u53d8\u6027\uff1a\u4f7f\u7528final\u5173\u952e\u5b57\uff0c\u7ebf\u7a0b\u5b89\u5168"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u7f3a\u70b9"}),"\uff1a"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u274c \u5982\u679c\u4f9d\u8d56\u5f88\u591a\uff0c\u6784\u9020\u51fd\u6570\u53c2\u6570\u4f1a\u5f88\u957f"}),"\n",(0,s.jsx)(n.li,{children:"\u274c \u4e0d\u80fd\u5904\u7406\u5faa\u73af\u4f9d\u8d56"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u4f7f\u7528\u573a\u666f"}),"\uff1a"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u5fc5\u9700\u7684\u4f9d\u8d56"}),"\n",(0,s.jsx)(n.li,{children:"\u4e0d\u53ef\u53d8\u7684\u5bf9\u8c61"}),"\n",(0,s.jsx)(n.li,{children:"\u6613\u4e8e\u6d4b\u8bd5\u7684\u4ee3\u7801"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"12-setter\u6ce8\u5165",children:"1.2 Setter\u6ce8\u5165"}),"\n",(0,s.jsx)(n.p,{children:"\u901a\u8fc7Setter\u65b9\u6cd5\u6ce8\u5165\u4f9d\u8d56\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"@Component\npublic class UserService {\n    private UserRepository userRepository;\n    private EmailService emailService;\n    \n    @Autowired\n    public void setUserRepository(UserRepository userRepository) {\n        this.userRepository = userRepository;\n    }\n    \n    @Autowired\n    public void setEmailService(EmailService emailService) {\n        this.emailService = emailService;\n    }\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u4f18\u70b9"}),"\uff1a"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u2705 \u4f9d\u8d56\u662f\u53ef\u9009\u7684"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 \u53ef\u4ee5\u5728\u5bf9\u8c61\u521b\u5efa\u540e\u66f4\u6539\u4f9d\u8d56"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 \u51cf\u5c11\u6784\u9020\u51fd\u6570\u53c2\u6570"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 \u53ef\u4ee5\u5904\u7406\u5faa\u73af\u4f9d\u8d56"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u7f3a\u70b9"}),"\uff1a"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u274c \u5bf9\u8c61\u521b\u5efa\u540e\u4e0d\u4e00\u5b9a\u5b8c\u5168\u521d\u59cb\u5316"}),"\n",(0,s.jsx)(n.li,{children:"\u274c \u4f9d\u8d56\u5173\u7cfb\u4e0d\u660e\u786e"}),"\n",(0,s.jsx)(n.li,{children:"\u274c \u4e0d\u6613\u4e8e\u6d4b\u8bd5"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u4f7f\u7528\u573a\u666f"}),"\uff1a"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u53ef\u9009\u7684\u4f9d\u8d56"}),"\n",(0,s.jsx)(n.li,{children:"\u9700\u8981\u5904\u7406\u5faa\u73af\u4f9d\u8d56"}),"\n",(0,s.jsx)(n.li,{children:"\u65e7\u4ee3\u7801\u6539\u9020"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"13-\u5b57\u6bb5\u6ce8\u5165",children:"1.3 \u5b57\u6bb5\u6ce8\u5165"}),"\n",(0,s.jsx)(n.p,{children:"\u76f4\u63a5\u5728\u5b57\u6bb5\u4e0a\u4f7f\u7528@Autowired\u6ce8\u89e3\u3002"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"@Component\npublic class UserService {\n    @Autowired\n    private UserRepository userRepository;\n    \n    @Autowired\n    private EmailService emailService;\n    \n    public void registerUser(User user) {\n        userRepository.save(user);\n        emailService.sendWelcomeEmail(user);\n    }\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u4f18\u70b9"}),"\uff1a"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u2705 \u4ee3\u7801\u7b80\u6d01"}),"\n",(0,s.jsx)(n.li,{children:"\u2705 \u51cf\u5c11\u6837\u677f\u4ee3\u7801"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u7f3a\u70b9"}),"\uff1a"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u274c \u65e0\u6cd5\u7528\u4e8e\u6784\u9020\u51fd\u6570\u53c2\u6570\uff08\u771f\u6b63\u7684\u4e0d\u53ef\u53d8\uff09"}),"\n",(0,s.jsx)(n.li,{children:"\u274c \u4e0d\u5229\u4e8e\u5355\u5143\u6d4b\u8bd5\uff0c\u96be\u4ee5\u6ce8\u5165Mock"}),"\n",(0,s.jsx)(n.li,{children:"\u274c \u9690\u85cf\u4e86\u771f\u5b9e\u7684\u4f9d\u8d56"}),"\n",(0,s.jsx)(n.li,{children:"\u274c \u5b57\u6bb5\u4e3anull\u65f6\u5bb9\u6613\u4ea7\u751fNullPointerException"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u4f7f\u7528\u573a\u666f"}),"\uff1a"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u5feb\u901f\u539f\u578b\u5f00\u53d1"}),"\n",(0,s.jsx)(n.li,{children:"\u4e0d\u9700\u8981\u6d4b\u8bd5\u7684\u4ee3\u7801"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"2-\u63a8\u8350\u6700\u4f73\u5b9e\u8df5",children:"2. \u63a8\u8350\u6700\u4f73\u5b9e\u8df5"}),"\n",(0,s.jsx)(n.h3,{id:"21-\u4f9d\u8d56\u6ce8\u5165\u4f18\u5148\u7ea7",children:"2.1 \u4f9d\u8d56\u6ce8\u5165\u4f18\u5148\u7ea7"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"1. \u6784\u9020\u51fd\u6570\u6ce8\u5165 (\u9996\u9009)\n   \u2193\n2. Setter\u6ce8\u5165 (\u6b21\u9009)\n   \u2193\n3. \u5b57\u6bb5\u6ce8\u5165 (\u907f\u514d)\n"})}),"\n",(0,s.jsx)(n.h3,{id:"22-\u5b9e\u6218\u793a\u4f8b---\u5b8c\u6574\u7684\u6700\u4f73\u5b9e\u8df5",children:"2.2 \u5b9e\u6218\u793a\u4f8b - \u5b8c\u6574\u7684\u6700\u4f73\u5b9e\u8df5"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:'@Component\npublic class UserService {\n    // \u4f7f\u7528final\uff0c\u4fdd\u8bc1\u4e0d\u53ef\u53d8\u6027\n    private final UserRepository userRepository;\n    private final EmailService emailService;\n    private final UserValidator userValidator;\n    \n    // \u4f7f\u7528\u6784\u9020\u51fd\u6570\u6ce8\u5165\uff0c\u4f7f\u7528@Autowired\u662f\u53ef\u9009\u7684\uff08Spring 4.3+\uff09\n    public UserService(\n        UserRepository userRepository,\n        EmailService emailService,\n        UserValidator userValidator) {\n        this.userRepository = userRepository;\n        this.emailService = emailService;\n        this.userValidator = userValidator;\n    }\n    \n    public void registerUser(User user) {\n        // \u9a8c\u8bc1\n        if (!userValidator.isValid(user)) {\n            throw new IllegalArgumentException("Invalid user");\n        }\n        \n        // \u4fdd\u5b58\n        userRepository.save(user);\n        \n        // \u53d1\u9001\u90ae\u4ef6\n        emailService.sendWelcomeEmail(user);\n    }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"23-\u5904\u7406\u53ef\u9009\u4f9d\u8d56",children:"2.3 \u5904\u7406\u53ef\u9009\u4f9d\u8d56"}),"\n",(0,s.jsx)(n.p,{children:"\u5f53\u67d0\u4e2a\u4f9d\u8d56\u662f\u53ef\u9009\u65f6\uff1a"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"@Component\npublic class NotificationService {\n    private final EmailService emailService;\n    private final Optional<SmsService> smsService;\n    \n    public NotificationService(\n        EmailService emailService,\n        Optional<SmsService> smsService) {\n        this.emailService = emailService;\n        this.smsService = smsService;\n    }\n    \n    public void notify(String message) {\n        emailService.send(message);\n        \n        // \u5982\u679cSMS\u670d\u52a1\u53ef\u7528\uff0c\u5219\u53d1\u9001\u77ed\u4fe1\n        smsService.ifPresent(service -> service.send(message));\n    }\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"3-\u591a\u4e2a\u5b9e\u73b0\u7684\u5904\u7406",children:"3. \u591a\u4e2a\u5b9e\u73b0\u7684\u5904\u7406"}),"\n",(0,s.jsx)(n.p,{children:"\u5f53\u63a5\u53e3\u6709\u591a\u4e2a\u5b9e\u73b0\u7c7b\u65f6\uff0c\u5904\u7406\u65b9\u5f0f\uff1a"}),"\n",(0,s.jsx)(n.h3,{id:"31-\u4f7f\u7528qualifier",children:"3.1 \u4f7f\u7528@Qualifier"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:'// \u5b9e\u73b01\n@Component\n@Qualifier("mysql")\npublic class MysqlUserRepository implements UserRepository {\n}\n\n// \u5b9e\u73b02\n@Component\n@Qualifier("mongodb")\npublic class MongodbUserRepository implements UserRepository {\n}\n\n// \u6ce8\u5165\u65f6\u6307\u5b9a\n@Component\npublic class UserService {\n    private final UserRepository userRepository;\n    \n    public UserService(@Qualifier("mysql") UserRepository userRepository) {\n        this.userRepository = userRepository;\n    }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"32-\u4f7f\u7528primary",children:"3.2 \u4f7f\u7528@Primary"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"// \u6807\u8bb0\u4e3a\u4e3b\u8981\u7684\u5b9e\u73b0\n@Component\n@Primary\npublic class MysqlUserRepository implements UserRepository {\n}\n\n// \u5176\u4ed6\u5b9e\u73b0\n@Component\npublic class MongodbUserRepository implements UserRepository {\n}\n\n// \u6ce8\u5165\u65f6\uff0c\u5982\u679c\u4e0d\u6307\u5b9a\u5219\u4f7f\u7528@Primary\u6807\u8bb0\u7684\n@Component\npublic class UserService {\n    private final UserRepository userRepository;\n    \n    public UserService(UserRepository userRepository) {\n        this.userRepository = userRepository;  // \u9ed8\u8ba4\u4f7f\u7528MysqlUserRepository\n    }\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"33-\u6ce8\u5165\u6240\u6709\u5b9e\u73b0",children:"3.3 \u6ce8\u5165\u6240\u6709\u5b9e\u73b0"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"@Component\npublic class UserService {\n    private final List<UserRepository> repositories;\n    \n    public UserService(List<UserRepository> repositories) {\n        this.repositories = repositories;  // \u83b7\u53d6\u6240\u6709\u5b9e\u73b0\n    }\n    \n    public void syncToAllRepositories(User user) {\n        repositories.forEach(repo -> repo.save(user));\n    }\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"34-\u4f7f\u7528map\u6ce8\u5165",children:"3.4 \u4f7f\u7528Map\u6ce8\u5165"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"@Component\npublic class UserService {\n    private final Map<String, UserRepository> repositories;\n    \n    public UserService(Map<String, UserRepository> repositories) {\n        this.repositories = repositories;\n    }\n    \n    public void saveUser(String type, User user) {\n        UserRepository repo = repositories.get(type);\n        repo.save(user);\n    }\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"4-\u5faa\u73af\u4f9d\u8d56",children:"4. \u5faa\u73af\u4f9d\u8d56"}),"\n",(0,s.jsx)(n.h3,{id:"41-\u95ee\u9898\u793a\u4f8b",children:"4.1 \u95ee\u9898\u793a\u4f8b"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"@Component\npublic class ServiceA {\n    private final ServiceB serviceB;\n    \n    public ServiceA(ServiceB serviceB) {\n        this.serviceB = serviceB;\n    }\n}\n\n@Component\npublic class ServiceB {\n    private final ServiceA serviceA;  // \u5f62\u6210\u5faa\u73af\u4f9d\u8d56\n    \n    public ServiceB(ServiceA serviceA) {\n        this.serviceA = serviceA;\n    }\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"42-\u89e3\u51b3\u65b9\u6848",children:"4.2 \u89e3\u51b3\u65b9\u6848"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u65b9\u68481\uff1a\u6539\u53d8\u8bbe\u8ba1"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"// \u5c06\u516c\u5171\u903b\u8f91\u63d0\u53d6\u5230\u7b2c\u4e09\u4e2a\u7c7b\n@Component\npublic class CommonService {\n    public void commonMethod() {\n        // \u516c\u5171\u65b9\u6cd5\n    }\n}\n\n@Component\npublic class ServiceA {\n    private final CommonService commonService;\n    \n    public ServiceA(CommonService commonService) {\n        this.commonService = commonService;\n    }\n}\n\n@Component\npublic class ServiceB {\n    private final CommonService commonService;\n    \n    public ServiceB(CommonService commonService) {\n        this.commonService = commonService;\n    }\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u65b9\u68482\uff1a\u4f7f\u7528Setter\u6ce8\u5165\uff08\u4e34\u65f6\u65b9\u6848\uff09"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"@Component\npublic class ServiceA {\n    private ServiceB serviceB;\n    \n    @Autowired\n    public void setServiceB(ServiceB serviceB) {\n        this.serviceB = serviceB;\n    }\n}\n\n@Component\npublic class ServiceB {\n    private ServiceA serviceA;\n    \n    @Autowired\n    public void setServiceA(ServiceA serviceA) {\n        this.serviceA = serviceA;\n    }\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"\u65b9\u68483\uff1a\u5ef6\u8fdf\u521d\u59cb\u5316"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"@Component\npublic class ServiceA {\n    private final ServiceB serviceB;\n    \n    public ServiceA(ObjectProvider<ServiceB> serviceBProvider) {\n        this.serviceB = serviceBProvider.getIfAvailable();\n    }\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"5-\u6cdb\u578b\u4f9d\u8d56\u6ce8\u5165",children:"5. \u6cdb\u578b\u4f9d\u8d56\u6ce8\u5165"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:'// \u5b9a\u4e49\u6cdb\u578b\u7c7b\npublic abstract class GenericRepository<T> {\n    abstract void save(T entity);\n}\n\n@Component\npublic class UserRepository extends GenericRepository<User> {\n    @Override\n    void save(User entity) {\n        System.out.println("Saving user: " + entity);\n    }\n}\n\n// \u6ce8\u5165\u6cdb\u578b\u4f9d\u8d56\n@Component\npublic class UserService {\n    private final GenericRepository<User> userRepository;\n    \n    public UserService(GenericRepository<User> userRepository) {\n        this.userRepository = userRepository;\n    }\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"6-objectprovider\u7684\u9ad8\u7ea7\u7528\u6cd5",children:"6. ObjectProvider\u7684\u9ad8\u7ea7\u7528\u6cd5"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:"@Component\npublic class AdvancedService {\n    private final ObjectProvider<DatabaseService> databaseService;\n    \n    public AdvancedService(ObjectProvider<DatabaseService> databaseService) {\n        this.databaseService = databaseService;\n    }\n    \n    public void process() {\n        // \u5982\u679cBean\u5b58\u5728\uff0c\u5219\u4f7f\u7528\uff1b\u5426\u5219\u4f7f\u7528\u9ed8\u8ba4\u503c\n        databaseService.ifAvailable(service -> service.execute());\n        \n        // \u5982\u679c\u6709\u591a\u4e2a\u5b9e\u73b0\uff0c\u83b7\u53d6\u7b2c\u4e00\u4e2a\n        DatabaseService service = databaseService.getIfAvailable();\n        \n        // \u83b7\u53d6\u6240\u6709\u5b9e\u73b0\n        databaseService.stream().forEach(s -> s.execute());\n    }\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"7-\u6ce8\u5165\u914d\u7f6e\u503c",children:"7. \u6ce8\u5165\u914d\u7f6e\u503c"}),"\n",(0,s.jsx)(n.h3,{id:"71-value\u6ce8\u5165",children:"7.1 @Value\u6ce8\u5165"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:'@Component\npublic class DatabaseConfig {\n    @Value("${db.host:localhost}")\n    private String host;\n    \n    @Value("${db.port:5432}")\n    private int port;\n    \n    @Value("${db.username}")\n    private String username;\n    \n    // \u6ce8\u5165\u7cfb\u7edf\u5c5e\u6027\n    @Value("${java.version}")\n    private String javaVersion;\n    \n    // \u6ce8\u5165\u8868\u8fbe\u5f0f\n    @Value("#{systemProperties[\'user.timezone\']}")\n    private String timezone;\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"72-configurationproperties",children:"7.2 @ConfigurationProperties"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-java",children:'@Component\n@ConfigurationProperties(prefix = "database")\npublic class DatabaseProperties {\n    private String host;\n    private int port;\n    private String username;\n    private String password;\n    \n    // getters and setters\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"8-\u603b\u7ed3",children:"8. \u603b\u7ed3"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"\u65b9\u5f0f"}),(0,s.jsx)(n.th,{children:"\u63a8\u8350"}),(0,s.jsx)(n.th,{children:"\u8bf4\u660e"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"\u6784\u9020\u51fd\u6570\u6ce8\u5165"}),(0,s.jsx)(n.td,{children:"\u2b50\u2b50\u2b50\u2b50\u2b50"}),(0,s.jsx)(n.td,{children:"\u6700\u4f73\u5b9e\u8df5\uff0c\u4f18\u5148\u4f7f\u7528"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Setter\u6ce8\u5165"}),(0,s.jsx)(n.td,{children:"\u2b50\u2b50\u2b50"}),(0,s.jsx)(n.td,{children:"\u7528\u4e8e\u53ef\u9009\u4f9d\u8d56\u6216\u5faa\u73af\u4f9d\u8d56"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"\u5b57\u6bb5\u6ce8\u5165"}),(0,s.jsx)(n.td,{children:"\u2b50"}),(0,s.jsx)(n.td,{children:"\u5c3d\u91cf\u907f\u514d\u4f7f\u7528"})]})]})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u5173\u952e\u539f\u5219"}),"\uff1a"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"\u4f18\u5148\u4f7f\u7528\u6784\u9020\u51fd\u6570\u6ce8\u5165"}),"\n",(0,s.jsx)(n.li,{children:"\u4f9d\u8d56\u5e94\u8be5\u4f7f\u7528final\u4fee\u9970\u7b26"}),"\n",(0,s.jsx)(n.li,{children:"\u907f\u514d\u5faa\u73af\u4f9d\u8d56\uff0c\u901a\u8fc7\u91cd\u65b0\u8bbe\u8ba1\u89e3\u51b3"}),"\n",(0,s.jsx)(n.li,{children:"\u5145\u5206\u5229\u7528Optional\u548cObjectProvider\u5904\u7406\u53ef\u9009\u4f9d\u8d56"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"\u4e0b\u4e00\u6b65"}),"\uff1a\u5b66\u4e60",(0,s.jsx)(n.a,{href:"/docs/spring/bean-management",children:"Bean\u7ba1\u7406"})]})]})}function p(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},48885:(e,n,i)=>{i.d(n,{R:()=>c,x:()=>o});var r=i(99378);const s={},l=r.createContext(s);function c(e){const n=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);