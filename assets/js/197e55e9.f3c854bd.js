"use strict";(globalThis.webpackChunkto_lib_github_io=globalThis.webpackChunkto_lib_github_io||[]).push([[11269],{48885:(n,e,i)=>{i.d(e,{R:()=>t,x:()=>r});var l=i(99378);const s={},a=l.createContext(s);function t(n){const e=l.useContext(a);return l.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function r(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:t(n.components),l.createElement(a.Provider,{value:e},n.children)}},90045:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>c,contentTitle:()=>r,default:()=>p,frontMatter:()=>t,metadata:()=>l,toc:()=>d});const l=JSON.parse('{"id":"cpp/polymorphism","title":"\u591a\u6001","description":"\u591a\u6001\u5141\u8bb8\u901a\u8fc7\u57fa\u7c7b\u6307\u9488\u6216\u5f15\u7528\u8c03\u7528\u6d3e\u751f\u7c7b\u7684\u65b9\u6cd5\uff0c\u5b9e\u73b0\u8fd0\u884c\u65f6\u52a8\u6001\u7ed1\u5b9a\u3002","source":"@site/docs/cpp/polymorphism.md","sourceDirName":"cpp","slug":"/cpp/polymorphism","permalink":"/docs/cpp/polymorphism","draft":false,"unlisted":false,"editUrl":"https://github.com/to-lib/to-lib.github.io/tree/main/docs/cpp/polymorphism.md","tags":[],"version":"current","sidebarPosition":10,"frontMatter":{"sidebar_position":10,"title":"\u591a\u6001"},"sidebar":"cpp","previous":{"title":"\u7ee7\u627f","permalink":"/docs/cpp/inheritance"},"next":{"title":"\u5c01\u88c5","permalink":"/docs/cpp/encapsulation"}}');var s=i(22714),a=i(48885);const t={sidebar_position:10,title:"\u591a\u6001"},r="C++ \u591a\u6001",c={},d=[{value:"\ud83c\udfaf \u865a\u51fd\u6570",id:"-\u865a\u51fd\u6570",level:2},{value:"\ud83d\udd37 \u7eaf\u865a\u51fd\u6570\u4e0e\u62bd\u8c61\u7c7b",id:"-\u7eaf\u865a\u51fd\u6570\u4e0e\u62bd\u8c61\u7c7b",level:2},{value:"\ud83c\udfad \u63a5\u53e3",id:"-\u63a5\u53e3",level:2},{value:"\ud83d\udd04 \u8fd0\u884c\u65f6\u7c7b\u578b\u4fe1\u606f (RTTI)",id:"-\u8fd0\u884c\u65f6\u7c7b\u578b\u4fe1\u606f-rtti",level:2},{value:"\ud83d\udeab final \u5173\u952e\u5b57",id:"-final-\u5173\u952e\u5b57",level:2},{value:"\u26a1 \u6700\u4f73\u5b9e\u8df5",id:"-\u6700\u4f73\u5b9e\u8df5",level:2}];function o(n){const e={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,a.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"c-\u591a\u6001",children:"C++ \u591a\u6001"})}),"\n",(0,s.jsx)(e.p,{children:"\u591a\u6001\u5141\u8bb8\u901a\u8fc7\u57fa\u7c7b\u6307\u9488\u6216\u5f15\u7528\u8c03\u7528\u6d3e\u751f\u7c7b\u7684\u65b9\u6cd5\uff0c\u5b9e\u73b0\u8fd0\u884c\u65f6\u52a8\u6001\u7ed1\u5b9a\u3002"}),"\n",(0,s.jsx)(e.h2,{id:"-\u865a\u51fd\u6570",children:"\ud83c\udfaf \u865a\u51fd\u6570"}),"\n",(0,s.jsx)(e.mermaid,{value:"classDiagram\n    class Shape {\n        +draw()\n    }\n    class Circle {\n        +draw()\n    }\n    class Rectangle {\n        +draw()\n    }\n\n    Shape <|-- Circle\n    Shape <|-- Rectangle"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-cpp",children:'#include <iostream>\n\nclass Shape {\npublic:\n    virtual void draw() const {\n        std::cout << "\u7ed8\u5236\u56fe\u5f62" << std::endl;\n    }\n\n    virtual ~Shape() = default;  // \u865a\u6790\u6784\u51fd\u6570\n};\n\nclass Circle : public Shape {\npublic:\n    void draw() const override {  // override \u660e\u786e\u91cd\u5199\n        std::cout << "\u7ed8\u5236\u5706\u5f62 \u25cb" << std::endl;\n    }\n};\n\nclass Rectangle : public Shape {\npublic:\n    void draw() const override {\n        std::cout << "\u7ed8\u5236\u77e9\u5f62 \u25a1" << std::endl;\n    }\n};\n\nint main() {\n    Shape* shapes[] = {new Circle(), new Rectangle()};\n\n    for (auto shape : shapes) {\n        shape->draw();  // \u52a8\u6001\u7ed1\u5b9a\n    }\n\n    for (auto shape : shapes) delete shape;\n    return 0;\n}\n'})}),"\n",(0,s.jsx)(e.h2,{id:"-\u7eaf\u865a\u51fd\u6570\u4e0e\u62bd\u8c61\u7c7b",children:"\ud83d\udd37 \u7eaf\u865a\u51fd\u6570\u4e0e\u62bd\u8c61\u7c7b"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-cpp",children:'// \u62bd\u8c61\u7c7b\uff08\u4e0d\u80fd\u5b9e\u4f8b\u5316\uff09\nclass Animal {\npublic:\n    virtual void speak() const = 0;  // \u7eaf\u865a\u51fd\u6570\n    virtual ~Animal() = default;\n};\n\nclass Dog : public Animal {\npublic:\n    void speak() const override {\n        std::cout << "\u6c6a\u6c6a" << std::endl;\n    }\n};\n\nclass Cat : public Animal {\npublic:\n    void speak() const override {\n        std::cout << "\u55b5\u55b5" << std::endl;\n    }\n};\n\nint main() {\n    // Animal a;  // \u9519\u8bef\uff1a\u4e0d\u80fd\u5b9e\u4f8b\u5316\u62bd\u8c61\u7c7b\n\n    Animal* animals[] = {new Dog(), new Cat()};\n    for (auto a : animals) {\n        a->speak();\n    }\n    for (auto a : animals) delete a;\n    return 0;\n}\n'})}),"\n",(0,s.jsx)(e.h2,{id:"-\u63a5\u53e3",children:"\ud83c\udfad \u63a5\u53e3"}),"\n",(0,s.jsx)(e.mermaid,{value:"classDiagram\n    class Drawable {\n        <<interface>>\n        +draw()\n    }\n    class Printable {\n        <<interface>>\n        +print()\n    }\n    class Document {\n        +draw()\n        +print()\n    }\n\n    Drawable <|.. Document\n    Printable <|.. Document"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-cpp",children:'// \u7eaf\u63a5\u53e3\uff08\u53ea\u6709\u7eaf\u865a\u51fd\u6570\uff09\nclass Drawable {\npublic:\n    virtual void draw() const = 0;\n    virtual ~Drawable() = default;\n};\n\nclass Printable {\npublic:\n    virtual void print() const = 0;\n    virtual ~Printable() = default;\n};\n\n// \u5b9e\u73b0\u591a\u4e2a\u63a5\u53e3\nclass Document : public Drawable, public Printable {\npublic:\n    void draw() const override {\n        std::cout << "\u7ed8\u5236\u6587\u6863" << std::endl;\n    }\n\n    void print() const override {\n        std::cout << "\u6253\u5370\u6587\u6863" << std::endl;\n    }\n};\n'})}),"\n",(0,s.jsx)(e.h2,{id:"-\u8fd0\u884c\u65f6\u7c7b\u578b\u4fe1\u606f-rtti",children:"\ud83d\udd04 \u8fd0\u884c\u65f6\u7c7b\u578b\u4fe1\u606f (RTTI)"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-cpp",children:'#include <typeinfo>\n\nclass Base {\npublic:\n    virtual ~Base() = default;\n};\n\nclass Derived : public Base {};\n\nint main() {\n    Base* ptr = new Derived();\n\n    // typeid\n    std::cout << typeid(*ptr).name() << std::endl;\n\n    // dynamic_cast\n    if (Derived* d = dynamic_cast<Derived*>(ptr)) {\n        std::cout << "\u6210\u529f\u8f6c\u6362\u4e3a Derived" << std::endl;\n    }\n\n    delete ptr;\n    return 0;\n}\n'})}),"\n",(0,s.jsx)(e.h2,{id:"-final-\u5173\u952e\u5b57",children:"\ud83d\udeab final \u5173\u952e\u5b57"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-cpp",children:"class Base {\npublic:\n    virtual void foo() final {}  // \u4e0d\u80fd\u88ab\u91cd\u5199\n};\n\nclass FinalClass final {};       // \u4e0d\u80fd\u88ab\u7ee7\u627f\n\n// class Derived : public FinalClass {};  // \u9519\u8bef\n"})}),"\n",(0,s.jsx)(e.h2,{id:"-\u6700\u4f73\u5b9e\u8df5",children:"\u26a1 \u6700\u4f73\u5b9e\u8df5"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"\u57fa\u7c7b\u9700\u8981\u865a\u6790\u6784\u51fd\u6570"})," - \u786e\u4fdd\u6b63\u786e\u91ca\u653e\u6d3e\u751f\u7c7b\u8d44\u6e90"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"\u4f7f\u7528 override"})," - \u660e\u786e\u8868\u793a\u91cd\u5199\u610f\u56fe"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"\u4f7f\u7528 final"})," - \u9632\u6b62\u4e0d\u5e0c\u671b\u7684\u7ee7\u627f\u6216\u91cd\u5199"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"\u63a5\u53e3\u4f7f\u7528\u7eaf\u865a\u51fd\u6570"})," - \u5b9a\u4e49\u5951\u7ea6"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"\u8c28\u614e\u4f7f\u7528 RTTI"})," - \u4f18\u5148\u8003\u8651\u591a\u6001\u8bbe\u8ba1"]}),"\n"]})]})}function p(n={}){const{wrapper:e}={...(0,a.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(o,{...n})}):o(n)}}}]);