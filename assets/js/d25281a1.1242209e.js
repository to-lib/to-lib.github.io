"use strict";(globalThis.webpackChunkto_lib_github_io=globalThis.webpackChunkto_lib_github_io||[]).push([[26791],{20732:(n,e,d)=>{d.r(e),d.d(e,{assets:()=>t,contentTitle:()=>c,default:()=>a,frontMatter:()=>l,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"podman/quick-reference","title":"\u5feb\u901f\u53c2\u8003","description":"Podman \u547d\u4ee4\u5feb\u901f\u53c2\u8003","source":"@site/docs/podman/quick-reference.md","sourceDirName":"podman","slug":"/podman/quick-reference","permalink":"/docs/podman/quick-reference","draft":false,"unlisted":false,"editUrl":"https://github.com/to-lib/to-lib.github.io/tree/main/docs/podman/quick-reference.md","tags":[],"version":"current","sidebarPosition":12,"frontMatter":{"sidebar_position":12,"title":"\u5feb\u901f\u53c2\u8003","description":"Podman \u547d\u4ee4\u5feb\u901f\u53c2\u8003"},"sidebar":"podman","previous":{"title":"\u6700\u4f73\u5b9e\u8df5","permalink":"/docs/podman/best-practices"},"next":{"title":"\u5e38\u89c1\u95ee\u9898","permalink":"/docs/podman/faq"}}');var r=d(22714),i=d(48885);const l={sidebar_position:12,title:"\u5feb\u901f\u53c2\u8003",description:"Podman \u547d\u4ee4\u5feb\u901f\u53c2\u8003"},c="Podman \u5feb\u901f\u53c2\u8003",t={},o=[{value:"\u5bb9\u5668\u751f\u547d\u5468\u671f",id:"\u5bb9\u5668\u751f\u547d\u5468\u671f",level:2},{value:"\u5bb9\u5668\u8fd0\u884c",id:"\u5bb9\u5668\u8fd0\u884c",level:2},{value:"\u955c\u50cf\u7ba1\u7406",id:"\u955c\u50cf\u7ba1\u7406",level:2},{value:"Pod \u7ba1\u7406",id:"pod-\u7ba1\u7406",level:2},{value:"\u7f51\u7edc\u7ba1\u7406",id:"\u7f51\u7edc\u7ba1\u7406",level:2},{value:"\u5377\u7ba1\u7406",id:"\u5377\u7ba1\u7406",level:2},{value:"Systemd \u96c6\u6210",id:"systemd-\u96c6\u6210",level:2},{value:"Rootless \u914d\u7f6e",id:"rootless-\u914d\u7f6e",level:2},{value:"\u8c03\u8bd5\u547d\u4ee4",id:"\u8c03\u8bd5\u547d\u4ee4",level:2},{value:"\u7cfb\u7edf\u7ba1\u7406",id:"\u7cfb\u7edf\u7ba1\u7406",level:2},{value:"Buildah \u5e38\u7528",id:"buildah-\u5e38\u7528",level:2},{value:"Skopeo \u5e38\u7528",id:"skopeo-\u5e38\u7528",level:2},{value:"Docker \u517c\u5bb9",id:"docker-\u517c\u5bb9",level:2},{value:"\u5b89\u5168\u8fd0\u884c",id:"\u5b89\u5168\u8fd0\u884c",level:2},{value:"Kubernetes \u96c6\u6210",id:"kubernetes-\u96c6\u6210",level:2}];function h(n){const e={code:"code",h1:"h1",h2:"h2",header:"header",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"podman-\u5feb\u901f\u53c2\u8003",children:"Podman \u5feb\u901f\u53c2\u8003"})}),"\n",(0,r.jsx)(e.h2,{id:"\u5bb9\u5668\u751f\u547d\u5468\u671f",children:"\u5bb9\u5668\u751f\u547d\u5468\u671f"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"\u547d\u4ee4"}),(0,r.jsx)(e.th,{children:"\u8bf4\u660e"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"podman run -d -p 80:80 nginx"})}),(0,r.jsx)(e.td,{children:"\u8fd0\u884c\u5bb9\u5668"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"podman run -it alpine sh"})}),(0,r.jsx)(e.td,{children:"\u4ea4\u4e92\u5f0f\u8fd0\u884c"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"podman ps -a"})}),(0,r.jsx)(e.td,{children:"\u5217\u51fa\u6240\u6709\u5bb9\u5668"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"podman start/stop/restart <id>"})}),(0,r.jsx)(e.td,{children:"\u542f\u52a8/\u505c\u6b62/\u91cd\u542f"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"podman rm <id>"})}),(0,r.jsx)(e.td,{children:"\u5220\u9664\u5bb9\u5668"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"podman rm -f $(podman ps -aq)"})}),(0,r.jsx)(e.td,{children:"\u5220\u9664\u6240\u6709\u5bb9\u5668"})]})]})]}),"\n",(0,r.jsx)(e.h2,{id:"\u5bb9\u5668\u8fd0\u884c",children:"\u5bb9\u5668\u8fd0\u884c"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"podman run -d \\\n  --name myapp \\\n  -p 8080:80 \\\n  -v /data:/data \\\n  -e KEY=value \\\n  --network mynet \\\n  --memory=512m \\\n  --cpus=0.5 \\\n  nginx\n"})}),"\n",(0,r.jsx)(e.h2,{id:"\u955c\u50cf\u7ba1\u7406",children:"\u955c\u50cf\u7ba1\u7406"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"\u547d\u4ee4"}),(0,r.jsx)(e.th,{children:"\u8bf4\u660e"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"podman images"})}),(0,r.jsx)(e.td,{children:"\u5217\u51fa\u955c\u50cf"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"podman pull nginx"})}),(0,r.jsx)(e.td,{children:"\u62c9\u53d6\u955c\u50cf"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"podman build -t app ."})}),(0,r.jsx)(e.td,{children:"\u6784\u5efa\u955c\u50cf"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"podman push app registry/app"})}),(0,r.jsx)(e.td,{children:"\u63a8\u9001\u955c\u50cf"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"podman save -o app.tar app"})}),(0,r.jsx)(e.td,{children:"\u4fdd\u5b58\u955c\u50cf"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"podman load -i app.tar"})}),(0,r.jsx)(e.td,{children:"\u52a0\u8f7d\u955c\u50cf"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"podman rmi <id>"})}),(0,r.jsx)(e.td,{children:"\u5220\u9664\u955c\u50cf"})]})]})]}),"\n",(0,r.jsx)(e.h2,{id:"pod-\u7ba1\u7406",children:"Pod \u7ba1\u7406"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# \u521b\u5efa Pod\npodman pod create --name mypod -p 8080:80\n\n# \u5728 Pod \u4e2d\u8fd0\u884c\npodman run -d --pod mypod nginx\n\n# \u5217\u51fa/\u7ba1\u7406 Pod\npodman pod ls\npodman pod start/stop mypod\npodman pod rm mypod\n"})}),"\n",(0,r.jsx)(e.h2,{id:"\u7f51\u7edc\u7ba1\u7406",children:"\u7f51\u7edc\u7ba1\u7406"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"\u547d\u4ee4"}),(0,r.jsx)(e.th,{children:"\u8bf4\u660e"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"podman network create mynet"})}),(0,r.jsx)(e.td,{children:"\u521b\u5efa\u7f51\u7edc"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"podman network ls"})}),(0,r.jsx)(e.td,{children:"\u5217\u51fa\u7f51\u7edc"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"podman network connect mynet <id>"})}),(0,r.jsx)(e.td,{children:"\u8fde\u63a5\u7f51\u7edc"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"podman network disconnect mynet <id>"})}),(0,r.jsx)(e.td,{children:"\u65ad\u5f00\u7f51\u7edc"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"podman network rm mynet"})}),(0,r.jsx)(e.td,{children:"\u5220\u9664\u7f51\u7edc"})]})]})]}),"\n",(0,r.jsx)(e.h2,{id:"\u5377\u7ba1\u7406",children:"\u5377\u7ba1\u7406"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"\u547d\u4ee4"}),(0,r.jsx)(e.th,{children:"\u8bf4\u660e"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"podman volume create mydata"})}),(0,r.jsx)(e.td,{children:"\u521b\u5efa\u5377"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"podman volume ls"})}),(0,r.jsx)(e.td,{children:"\u5217\u51fa\u5377"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"podman volume inspect mydata"})}),(0,r.jsx)(e.td,{children:"\u67e5\u770b\u8be6\u60c5"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"podman volume rm mydata"})}),(0,r.jsx)(e.td,{children:"\u5220\u9664\u5377"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"podman volume prune"})}),(0,r.jsx)(e.td,{children:"\u6e05\u7406\u672a\u4f7f\u7528"})]})]})]}),"\n",(0,r.jsx)(e.h2,{id:"systemd-\u96c6\u6210",children:"Systemd \u96c6\u6210"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# \u751f\u6210\u670d\u52a1\npodman generate systemd --new --name web > web.service\n\n# \u7528\u6237\u670d\u52a1\nsystemctl --user enable --now web\nloginctl enable-linger $USER\n\n# Quadlet (Podman 4.4+)\n# \u521b\u5efa ~/.config/containers/systemd/web.container\n"})}),"\n",(0,r.jsx)(e.h2,{id:"rootless-\u914d\u7f6e",children:"Rootless \u914d\u7f6e"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# \u914d\u7f6e subuid/subgid\nsudo usermod --add-subuids 100000-165535 $USER\nsudo usermod --add-subgids 100000-165535 $USER\npodman system migrate\n"})}),"\n",(0,r.jsx)(e.h2,{id:"\u8c03\u8bd5\u547d\u4ee4",children:"\u8c03\u8bd5\u547d\u4ee4"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,r.jsxs)(e.table,{children:[(0,r.jsx)(e.thead,{children:(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.th,{children:"\u547d\u4ee4"}),(0,r.jsx)(e.th,{children:"\u8bf4\u660e"})]})}),(0,r.jsxs)(e.tbody,{children:[(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"podman exec -it <id> sh"})}),(0,r.jsx)(e.td,{children:"\u8fdb\u5165\u5bb9\u5668"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"podman logs -f <id>"})}),(0,r.jsx)(e.td,{children:"\u67e5\u770b\u65e5\u5fd7"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"podman top <id>"})}),(0,r.jsx)(e.td,{children:"\u67e5\u770b\u8fdb\u7a0b"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"podman stats"})}),(0,r.jsx)(e.td,{children:"\u8d44\u6e90\u4f7f\u7528"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"podman inspect <id>"})}),(0,r.jsx)(e.td,{children:"\u8be6\u7ec6\u4fe1\u606f"})]}),(0,r.jsxs)(e.tr,{children:[(0,r.jsx)(e.td,{children:(0,r.jsx)(e.code,{children:"podman port <id>"})}),(0,r.jsx)(e.td,{children:"\u7aef\u53e3\u6620\u5c04"})]})]})]}),"\n",(0,r.jsx)(e.h2,{id:"\u7cfb\u7edf\u7ba1\u7406",children:"\u7cfb\u7edf\u7ba1\u7406"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"podman system prune -a     # \u6e05\u7406\u6240\u6709\npodman system df           # \u67e5\u770b\u7a7a\u95f4\npodman system reset        # \u91cd\u7f6e Podman\npodman info                # \u7cfb\u7edf\u4fe1\u606f\n"})}),"\n",(0,r.jsx)(e.h2,{id:"buildah-\u5e38\u7528",children:"Buildah \u5e38\u7528"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"buildah from alpine        # \u521b\u5efa\u5bb9\u5668\nbuildah run $ctr cmd       # \u8fd0\u884c\u547d\u4ee4\nbuildah copy $ctr src dst  # \u590d\u5236\u6587\u4ef6\nbuildah commit $ctr img    # \u63d0\u4ea4\u955c\u50cf\n"})}),"\n",(0,r.jsx)(e.h2,{id:"skopeo-\u5e38\u7528",children:"Skopeo \u5e38\u7528"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"skopeo inspect docker://nginx        # \u68c0\u67e5\u955c\u50cf\nskopeo copy docker://a docker://b    # \u590d\u5236\u955c\u50cf\nskopeo list-tags docker://nginx      # \u5217\u51fa\u6807\u7b7e\n"})}),"\n",(0,r.jsx)(e.h2,{id:"docker-\u517c\u5bb9",children:"Docker \u517c\u5bb9"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"alias docker=podman\n# \u6216\nsudo dnf install podman-docker\n\n# Socket \u517c\u5bb9\nsystemctl --user enable --now podman.socket\nexport DOCKER_HOST=unix://$XDG_RUNTIME_DIR/podman/podman.sock\n"})}),"\n",(0,r.jsx)(e.h2,{id:"\u5b89\u5168\u8fd0\u884c",children:"\u5b89\u5168\u8fd0\u884c"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"podman run -d \\\n  --read-only \\\n  --cap-drop=all \\\n  --security-opt=no-new-privileges \\\n  --user 1000:1000 \\\n  nginx\n"})}),"\n",(0,r.jsx)(e.h2,{id:"kubernetes-\u96c6\u6210",children:"Kubernetes \u96c6\u6210"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"# \u751f\u6210 YAML\npodman generate kube mypod > pod.yaml\n\n# \u4ece YAML \u8fd0\u884c\npodman play kube pod.yaml\n\n# \u5220\u9664\npodman play kube --down pod.yaml\n"})})]})}function a(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(h,{...n})}):h(n)}},48885:(n,e,d)=>{d.d(e,{R:()=>l,x:()=>c});var s=d(99378);const r={},i=s.createContext(r);function l(n){const e=s.useContext(i);return s.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:l(n.components),s.createElement(i.Provider,{value:e},n.children)}}}]);