"use strict";(globalThis.webpackChunkto_lib_github_io=globalThis.webpackChunkto_lib_github_io||[]).push([[55451],{48885:(n,i,e)=>{e.d(i,{R:()=>d,x:()=>s});var t=e(99378);const r={},p=t.createContext(r);function d(n){const i=t.useContext(p);return t.useMemo(function(){return"function"==typeof n?n(i):{...i,...n}},[i,n])}function s(n){let i;return i=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:d(n.components),t.createElement(p.Provider,{value:i},n.children)}},69212:(n,i,e)=>{e.r(i),e.d(i,{assets:()=>c,contentTitle:()=>s,default:()=>o,frontMatter:()=>d,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"c/pointers","title":"\u6307\u9488","description":"\u6307\u9488\u662f C \u8bed\u8a00\u6700\u5f3a\u5927\u4e5f\u6700\u5177\u6311\u6218\u6027\u7684\u7279\u6027\uff0c\u5b83\u5b58\u50a8\u53d8\u91cf\u7684\u5185\u5b58\u5730\u5740\u3002","source":"@site/docs/c/pointers.md","sourceDirName":"c","slug":"/c/pointers","permalink":"/docs/c/pointers","draft":false,"unlisted":false,"editUrl":"https://github.com/to-lib/to-lib.github.io/tree/main/docs/c/pointers.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6,"title":"\u6307\u9488"},"sidebar":"c","previous":{"title":"\u6570\u7ec4\u548c\u5b57\u7b26\u4e32","permalink":"/docs/c/arrays-strings"},"next":{"title":"\u9ad8\u7ea7\u6307\u9488","permalink":"/docs/c/advanced-pointers"}}');var r=e(22714),p=e(48885);const d={sidebar_position:6,title:"\u6307\u9488"},s="\u6307\u9488",c={},a=[{value:"\u6307\u9488\u57fa\u7840",id:"\u6307\u9488\u57fa\u7840",level:2},{value:"\u4ec0\u4e48\u662f\u6307\u9488",id:"\u4ec0\u4e48\u662f\u6307\u9488",level:3},{value:"\u6307\u9488\u8fd0\u7b97",id:"\u6307\u9488\u8fd0\u7b97",level:3},{value:"\u6307\u9488\u548c\u6570\u7ec4",id:"\u6307\u9488\u548c\u6570\u7ec4",level:2},{value:"\u6307\u9488\u548c\u5b57\u7b26\u4e32",id:"\u6307\u9488\u548c\u5b57\u7b26\u4e32",level:2},{value:"\u591a\u7ea7\u6307\u9488",id:"\u591a\u7ea7\u6307\u9488",level:2},{value:"\u6307\u9488\u6570\u7ec4\u548c\u6570\u7ec4\u6307\u9488",id:"\u6307\u9488\u6570\u7ec4\u548c\u6570\u7ec4\u6307\u9488",level:2},{value:"\u51fd\u6570\u6307\u9488",id:"\u51fd\u6570\u6307\u9488",level:2},{value:"void \u6307\u9488",id:"void-\u6307\u9488",level:2},{value:"const \u4e0e\u6307\u9488",id:"const-\u4e0e\u6307\u9488",level:2},{value:"\u5e38\u89c1\u9519\u8bef",id:"\u5e38\u89c1\u9519\u8bef",level:2}];function l(n){const i={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,p.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.header,{children:(0,r.jsx)(i.h1,{id:"\u6307\u9488",children:"\u6307\u9488"})}),"\n",(0,r.jsx)(i.p,{children:"\u6307\u9488\u662f C \u8bed\u8a00\u6700\u5f3a\u5927\u4e5f\u6700\u5177\u6311\u6218\u6027\u7684\u7279\u6027\uff0c\u5b83\u5b58\u50a8\u53d8\u91cf\u7684\u5185\u5b58\u5730\u5740\u3002"}),"\n",(0,r.jsx)(i.h2,{id:"\u6307\u9488\u57fa\u7840",children:"\u6307\u9488\u57fa\u7840"}),"\n",(0,r.jsx)(i.h3,{id:"\u4ec0\u4e48\u662f\u6307\u9488",children:"\u4ec0\u4e48\u662f\u6307\u9488"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-c",children:'#include <stdio.h>\n\nint main(void) {\n    int x = 10;\n    int *p = &x;  // p \u5b58\u50a8 x \u7684\u5730\u5740\n\n    printf("x \u7684\u503c: %d\\n", x);\n    printf("x \u7684\u5730\u5740: %p\\n", (void*)&x);\n    printf("p \u5b58\u50a8\u7684\u5730\u5740: %p\\n", (void*)p);\n    printf("p \u6307\u5411\u7684\u503c: %d\\n", *p);  // \u89e3\u5f15\u7528\n\n    // \u901a\u8fc7\u6307\u9488\u4fee\u6539\u503c\n    *p = 20;\n    printf("\u4fee\u6539\u540e x = %d\\n", x);\n\n    return 0;\n}\n'})}),"\n",(0,r.jsx)(i.h3,{id:"\u6307\u9488\u8fd0\u7b97",children:"\u6307\u9488\u8fd0\u7b97"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-c",children:'#include <stdio.h>\n\nint main(void) {\n    int arr[] = {10, 20, 30, 40, 50};\n    int *p = arr;  // \u6570\u7ec4\u540d\u662f\u9996\u5143\u7d20\u5730\u5740\n\n    printf("*p = %d\\n", *p);          // 10\n    printf("*(p+1) = %d\\n", *(p+1));  // 20\n    printf("*(p+2) = %d\\n", *(p+2));  // 30\n\n    // \u6307\u9488\u81ea\u589e\n    p++;\n    printf("p++ \u540e *p = %d\\n", *p);   // 20\n\n    // \u6307\u9488\u76f8\u51cf\n    int *q = &arr[4];\n    printf("q - p = %ld\\n", q - p);   // 3\n\n    return 0;\n}\n'})}),"\n",(0,r.jsx)(i.h2,{id:"\u6307\u9488\u548c\u6570\u7ec4",children:"\u6307\u9488\u548c\u6570\u7ec4"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-c",children:'#include <stdio.h>\n\nint main(void) {\n    int arr[] = {1, 2, 3, 4, 5};\n    int *p = arr;\n    int n = sizeof(arr) / sizeof(arr[0]);\n\n    // \u4e09\u79cd\u7b49\u4ef7\u7684\u8bbf\u95ee\u65b9\u5f0f\n    printf("arr[2] = %d\\n", arr[2]);\n    printf("*(arr+2) = %d\\n", *(arr + 2));\n    printf("*(p+2) = %d\\n", *(p + 2));\n    printf("p[2] = %d\\n", p[2]);\n\n    // \u4f7f\u7528\u6307\u9488\u904d\u5386\u6570\u7ec4\n    printf("\u6570\u7ec4\u5143\u7d20: ");\n    for (int *ptr = arr; ptr < arr + n; ptr++) {\n        printf("%d ", *ptr);\n    }\n    printf("\\n");\n\n    return 0;\n}\n'})}),"\n",(0,r.jsx)(i.h2,{id:"\u6307\u9488\u548c\u5b57\u7b26\u4e32",children:"\u6307\u9488\u548c\u5b57\u7b26\u4e32"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-c",children:'#include <stdio.h>\n\nint main(void) {\n    // \u5b57\u7b26\u4e32\u6307\u9488\n    const char *str = "Hello, World!";\n\n    // \u904d\u5386\u5b57\u7b26\u4e32\n    const char *p = str;\n    while (*p != \'\\0\') {\n        printf("%c", *p);\n        p++;\n    }\n    printf("\\n");\n\n    // \u5b57\u7b26\u4e32\u957f\u5ea6\uff08\u624b\u52a8\u5b9e\u73b0\uff09\n    int len = 0;\n    for (const char *s = str; *s; s++) {\n        len++;\n    }\n    printf("\u957f\u5ea6: %d\\n", len);\n\n    return 0;\n}\n'})}),"\n",(0,r.jsx)(i.h2,{id:"\u591a\u7ea7\u6307\u9488",children:"\u591a\u7ea7\u6307\u9488"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-c",children:'#include <stdio.h>\n\nint main(void) {\n    int x = 10;\n    int *p = &x;      // \u4e00\u7ea7\u6307\u9488\n    int **pp = &p;    // \u4e8c\u7ea7\u6307\u9488\n    int ***ppp = &pp; // \u4e09\u7ea7\u6307\u9488\n\n    printf("x = %d\\n", x);\n    printf("*p = %d\\n", *p);\n    printf("**pp = %d\\n", **pp);\n    printf("***ppp = %d\\n", ***ppp);\n\n    // \u4fee\u6539\u503c\n    ***ppp = 100;\n    printf("x = %d\\n", x);  // 100\n\n    return 0;\n}\n'})}),"\n",(0,r.jsx)(i.h2,{id:"\u6307\u9488\u6570\u7ec4\u548c\u6570\u7ec4\u6307\u9488",children:"\u6307\u9488\u6570\u7ec4\u548c\u6570\u7ec4\u6307\u9488"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-c",children:'#include <stdio.h>\n\nint main(void) {\n    // \u6307\u9488\u6570\u7ec4\uff1a\u5b58\u50a8\u6307\u9488\u7684\u6570\u7ec4\n    const char *fruits[] = {"Apple", "Banana", "Cherry"};\n    for (int i = 0; i < 3; i++) {\n        printf("%s\\n", fruits[i]);\n    }\n\n    // \u6570\u7ec4\u6307\u9488\uff1a\u6307\u5411\u6570\u7ec4\u7684\u6307\u9488\n    int arr[3][4] = {\n        {1, 2, 3, 4},\n        {5, 6, 7, 8},\n        {9, 10, 11, 12}\n    };\n\n    int (*p)[4] = arr;  // p \u6307\u5411\u5305\u542b4\u4e2aint\u7684\u6570\u7ec4\n\n    printf("\\n\u4e8c\u7ef4\u6570\u7ec4:\\n");\n    for (int i = 0; i < 3; i++) {\n        for (int j = 0; j < 4; j++) {\n            printf("%3d ", p[i][j]);\n        }\n        printf("\\n");\n    }\n\n    return 0;\n}\n'})}),"\n",(0,r.jsx)(i.h2,{id:"\u51fd\u6570\u6307\u9488",children:"\u51fd\u6570\u6307\u9488"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-c",children:'#include <stdio.h>\n\nint add(int a, int b) { return a + b; }\nint sub(int a, int b) { return a - b; }\nint mul(int a, int b) { return a * b; }\n\nint main(void) {\n    // \u58f0\u660e\u51fd\u6570\u6307\u9488\n    int (*op)(int, int);\n\n    op = add;\n    printf("add(5, 3) = %d\\n", op(5, 3));\n\n    op = mul;\n    printf("mul(5, 3) = %d\\n", op(5, 3));\n\n    // \u51fd\u6570\u6307\u9488\u6570\u7ec4\n    int (*ops[])(int, int) = {add, sub, mul};\n    const char *names[] = {"+", "-", "*"};\n\n    for (int i = 0; i < 3; i++) {\n        printf("10 %s 3 = %d\\n", names[i], ops[i](10, 3));\n    }\n\n    return 0;\n}\n'})}),"\n",(0,r.jsx)(i.h2,{id:"void-\u6307\u9488",children:"void \u6307\u9488"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-c",children:"#include <stdio.h>\n\nvoid printValue(void *ptr, char type) {\n    switch (type) {\n        case 'i':\n            printf(\"%d\\n\", *(int*)ptr);\n            break;\n        case 'f':\n            printf(\"%f\\n\", *(float*)ptr);\n            break;\n        case 'c':\n            printf(\"%c\\n\", *(char*)ptr);\n            break;\n    }\n}\n\nint main(void) {\n    int i = 42;\n    float f = 3.14f;\n    char c = 'A';\n\n    printValue(&i, 'i');\n    printValue(&f, 'f');\n    printValue(&c, 'c');\n\n    return 0;\n}\n"})}),"\n",(0,r.jsx)(i.h2,{id:"const-\u4e0e\u6307\u9488",children:"const \u4e0e\u6307\u9488"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-c",children:'#include <stdio.h>\n\nint main(void) {\n    int x = 10, y = 20;\n\n    // 1. \u6307\u5411\u5e38\u91cf\u7684\u6307\u9488\uff08\u4e0d\u80fd\u901a\u8fc7\u6307\u9488\u4fee\u6539\u503c\uff09\n    const int *p1 = &x;\n    // *p1 = 100;  // \u9519\u8bef\n    p1 = &y;       // \u53ef\u4ee5\u6539\u53d8\u6307\u5411\n\n    // 2. \u5e38\u91cf\u6307\u9488\uff08\u4e0d\u80fd\u6539\u53d8\u6307\u5411\uff09\n    int *const p2 = &x;\n    *p2 = 100;     // \u53ef\u4ee5\u4fee\u6539\u503c\n    // p2 = &y;    // \u9519\u8bef\n\n    // 3. \u6307\u5411\u5e38\u91cf\u7684\u5e38\u91cf\u6307\u9488\uff08\u90fd\u4e0d\u80fd\u6539\uff09\n    const int *const p3 = &x;\n    // *p3 = 100;  // \u9519\u8bef\n    // p3 = &y;    // \u9519\u8bef\n\n    printf("x = %d\\n", x);\n\n    return 0;\n}\n'})}),"\n",(0,r.jsx)(i.h2,{id:"\u5e38\u89c1\u9519\u8bef",children:"\u5e38\u89c1\u9519\u8bef"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-c",children:"#include <stdio.h>\n#include <stdlib.h>\n\nint main(void) {\n    // 1. \u7a7a\u6307\u9488\u89e3\u5f15\u7528\n    int *p1 = NULL;\n    // *p1 = 10;  // \u6bb5\u9519\u8bef\uff01\n\n    // \u6b63\u786e\u505a\u6cd5\uff1a\u68c0\u67e5\u6307\u9488\n    if (p1 != NULL) {\n        *p1 = 10;\n    }\n\n    // 2. \u91ce\u6307\u9488\uff08\u672a\u521d\u59cb\u5316\uff09\n    int *p2;  // \u6307\u5411\u672a\u77e5\u4f4d\u7f6e\n    // *p2 = 10;  // \u672a\u5b9a\u4e49\u884c\u4e3a\uff01\n\n    // \u6b63\u786e\u505a\u6cd5\uff1a\u521d\u59cb\u5316\u4e3a NULL \u6216\u6709\u6548\u5730\u5740\n    int *p3 = NULL;\n\n    // 3. \u60ac\u7a7a\u6307\u9488\uff08\u6307\u5411\u5df2\u91ca\u653e\u7684\u5185\u5b58\uff09\n    int *p4 = malloc(sizeof(int));\n    *p4 = 10;\n    free(p4);\n    // *p4 = 20;  // \u60ac\u7a7a\u6307\u9488\u8bbf\u95ee\uff01\n    p4 = NULL;  // \u6b63\u786e\u505a\u6cd5\uff1a\u91ca\u653e\u540e\u7f6e\u7a7a\n\n    return 0;\n}\n"})}),"\n",(0,r.jsx)(i.p,{children:"\u638c\u63e1\u6307\u9488\u540e\uff0c\u5c31\u53ef\u4ee5\u7ee7\u7eed\u5b66\u4e60\u5185\u5b58\u7ba1\u7406\u4e86\uff01"})]})}function o(n={}){const{wrapper:i}={...(0,p.R)(),...n.components};return i?(0,r.jsx)(i,{...n,children:(0,r.jsx)(l,{...n})}):l(n)}}}]);