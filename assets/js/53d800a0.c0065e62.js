"use strict";(globalThis.webpackChunkto_lib_github_io=globalThis.webpackChunkto_lib_github_io||[]).push([[26876],{48885:(n,e,t)=>{t.d(e,{R:()=>i,x:()=>c});var s=t(99378);const o={},r=s.createContext(o);function i(n){const e=s.useContext(r);return s.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:i(n.components),s.createElement(r.Provider,{value:e},n.children)}},81043:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>a,contentTitle:()=>c,default:()=>d,frontMatter:()=>i,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"react/hooks","title":"Hooks \u8be6\u89e3","description":"[!TIP]","source":"@site/docs/react/hooks.md","sourceDirName":"react","slug":"/react/hooks","permalink":"/docs/react/hooks","draft":false,"unlisted":false,"editUrl":"https://github.com/to-lib/to-lib.github.io/tree/main/docs/react/hooks.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6,"title":"Hooks \u8be6\u89e3"},"sidebar":"react","previous":{"title":"\u751f\u547d\u5468\u671f","permalink":"/docs/react/lifecycle"},"next":{"title":"\u6570\u636e\u83b7\u53d6\uff08TanStack Query\uff09","permalink":"/docs/react/data-fetching"}}');var o=t(22714),r=t(48885);const i={sidebar_position:6,title:"Hooks \u8be6\u89e3"},c="React Hooks \u8be6\u89e3",a={},l=[{value:"\ud83d\udcda \u4ec0\u4e48\u662f Hooks\uff1f",id:"-\u4ec0\u4e48\u662f-hooks",level:2},{value:"Hooks \u89c4\u5219",id:"hooks-\u89c4\u5219",level:3},{value:"useState - \u72b6\u6001\u7ba1\u7406",id:"usestate---\u72b6\u6001\u7ba1\u7406",level:2},{value:"\u57fa\u7840\u7528\u6cd5",id:"\u57fa\u7840\u7528\u6cd5",level:3},{value:"\u591a\u4e2a\u72b6\u6001",id:"\u591a\u4e2a\u72b6\u6001",level:3},{value:"\u5bf9\u8c61\u72b6\u6001",id:"\u5bf9\u8c61\u72b6\u6001",level:3},{value:"\u51fd\u6570\u5f0f\u66f4\u65b0",id:"\u51fd\u6570\u5f0f\u66f4\u65b0",level:3},{value:"\u26a1 useEffect - \u526f\u4f5c\u7528\u5904\u7406",id:"-useeffect---\u526f\u4f5c\u7528\u5904\u7406",level:2},{value:"\u57fa\u7840\u7528\u6cd5",id:"\u57fa\u7840\u7528\u6cd5-1",level:3},{value:"\u4f9d\u8d56\u6570\u7ec4",id:"\u4f9d\u8d56\u6570\u7ec4",level:3},{value:"\u6e05\u7406\u51fd\u6570",id:"\u6e05\u7406\u51fd\u6570",level:3},{value:"\u5e38\u89c1\u573a\u666f",id:"\u5e38\u89c1\u573a\u666f",level:3},{value:"\ud83c\udfa3 useContext - \u8de8\u7ec4\u4ef6\u5171\u4eab\u72b6\u6001",id:"-usecontext---\u8de8\u7ec4\u4ef6\u5171\u4eab\u72b6\u6001",level:2},{value:"\ud83d\ude80 useReducer - \u590d\u6742\u72b6\u6001\u7ba1\u7406",id:"-usereducer---\u590d\u6742\u72b6\u6001\u7ba1\u7406",level:2},{value:"\u590d\u6742\u793a\u4f8b\uff1a\u8d2d\u7269\u8f66",id:"\u590d\u6742\u793a\u4f8b\u8d2d\u7269\u8f66",level:3},{value:"\u26a1 useMemo - \u6027\u80fd\u4f18\u5316",id:"-usememo---\u6027\u80fd\u4f18\u5316",level:2},{value:"\u7f13\u5b58\u8ba1\u7b97\u7ed3\u679c",id:"\u7f13\u5b58\u8ba1\u7b97\u7ed3\u679c",level:3},{value:"\ud83d\udd04 useCallback - \u7f13\u5b58\u51fd\u6570",id:"-usecallback---\u7f13\u5b58\u51fd\u6570",level:2},{value:"\ud83c\udfaf useRef - \u5f15\u7528 DOM \u548c\u4fdd\u5b58\u503c",id:"-useref---\u5f15\u7528-dom-\u548c\u4fdd\u5b58\u503c",level:2},{value:"\u8bbf\u95ee DOM",id:"\u8bbf\u95ee-dom",level:3},{value:"\u4fdd\u5b58\u53ef\u53d8\u503c",id:"\u4fdd\u5b58\u53ef\u53d8\u503c",level:3},{value:"\ud83c\udd95 React 19 \u65b0 Hooks",id:"-react-19-\u65b0-hooks",level:2},{value:"use() - \u8bfb\u53d6 Promise \u548c Context",id:"use---\u8bfb\u53d6-promise-\u548c-context",level:3},{value:"useFormStatus - \u8868\u5355\u72b6\u6001",id:"useformstatus---\u8868\u5355\u72b6\u6001",level:3},{value:"useOptimistic - \u4e50\u89c2\u66f4\u65b0",id:"useoptimistic---\u4e50\u89c2\u66f4\u65b0",level:3},{value:"useActionState - \u7ba1\u7406 Action \u72b6\u6001",id:"useactionstate---\u7ba1\u7406-action-\u72b6\u6001",level:3},{value:"useTransition - \u6807\u8bb0\u975e\u7d27\u6025\u66f4\u65b0",id:"usetransition---\u6807\u8bb0\u975e\u7d27\u6025\u66f4\u65b0",level:3},{value:"useDeferredValue - \u5ef6\u8fdf\u503c\u66f4\u65b0",id:"usedeferredvalue---\u5ef6\u8fdf\u503c\u66f4\u65b0",level:3},{value:"useId - \u751f\u6210\u552f\u4e00 ID",id:"useid---\u751f\u6210\u552f\u4e00-id",level:3},{value:"\ud83d\udee0\ufe0f \u81ea\u5b9a\u4e49 Hook",id:"\ufe0f-\u81ea\u5b9a\u4e49-hook",level:2},{value:"\u57fa\u7840\u793a\u4f8b",id:"\u57fa\u7840\u793a\u4f8b",level:3},{value:"\u5b9e\u7528 Hook\uff1auseLocalStorage",id:"\u5b9e\u7528-hookuselocalstorage",level:3},{value:"\u5b9e\u7528 Hook\uff1auseFetch",id:"\u5b9e\u7528-hookusefetch",level:3},{value:"\ud83d\udcca Hooks \u5bf9\u6bd4\u8868",id:"-hooks-\u5bf9\u6bd4\u8868",level:2},{value:"\ud83d\udca1 \u6700\u4f73\u5b9e\u8df5",id:"-\u6700\u4f73\u5b9e\u8df5",level:2},{value:"1. \u5408\u7406\u4f7f\u7528 useEffect \u4f9d\u8d56",id:"1-\u5408\u7406\u4f7f\u7528-useeffect-\u4f9d\u8d56",level:3},{value:"2. \u907f\u514d\u4e0d\u5fc5\u8981\u7684\u6e32\u67d3",id:"2-\u907f\u514d\u4e0d\u5fc5\u8981\u7684\u6e32\u67d3",level:3},{value:"3. \u81ea\u5b9a\u4e49 Hook \u547d\u540d\u89c4\u8303",id:"3-\u81ea\u5b9a\u4e49-hook-\u547d\u540d\u89c4\u8303",level:3}];function u(n){const e={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.header,{children:(0,o.jsx)(e.h1,{id:"react-hooks-\u8be6\u89e3",children:"React Hooks \u8be6\u89e3"})}),"\n",(0,o.jsxs)(e.blockquote,{children:["\n",(0,o.jsx)(e.p,{children:"[!TIP]\nHooks \u662f React 16.8 \u5f15\u5165\u7684\u9769\u547d\u6027\u7279\u6027\uff0c\u8ba9\u51fd\u6570\u7ec4\u4ef6\u4e5f\u80fd\u4f7f\u7528 state \u548c\u751f\u547d\u5468\u671f\u7b49\u529f\u80fd\u3002React 19 \u8fdb\u4e00\u6b65\u589e\u5f3a\u4e86 Hooks \u7684\u80fd\u529b\u3002"}),"\n"]}),"\n",(0,o.jsx)(e.h2,{id:"-\u4ec0\u4e48\u662f-hooks",children:"\ud83d\udcda \u4ec0\u4e48\u662f Hooks\uff1f"}),"\n",(0,o.jsx)(e.p,{children:'Hooks \u662f\u7279\u6b8a\u7684\u51fd\u6570\uff0c\u8ba9\u4f60\u5728\u51fd\u6570\u7ec4\u4ef6\u4e2d"\u94a9\u5165" React \u7279\u6027\u3002'}),"\n",(0,o.jsx)(e.h3,{id:"hooks-\u89c4\u5219",children:"Hooks \u89c4\u5219"}),"\n",(0,o.jsxs)(e.ol,{children:["\n",(0,o.jsx)(e.li,{children:"\u2705 \u53ea\u5728\u51fd\u6570\u7ec4\u4ef6\u6216\u81ea\u5b9a\u4e49 Hook \u4e2d\u8c03\u7528"}),"\n",(0,o.jsx)(e.li,{children:"\u2705 \u53ea\u5728\u51fd\u6570\u9876\u5c42\u8c03\u7528\uff0c\u4e0d\u8981\u5728\u5faa\u73af\u3001\u6761\u4ef6\u6216\u5d4c\u5957\u51fd\u6570\u4e2d\u8c03\u7528"}),"\n",(0,o.jsx)(e.li,{children:"\u2705 Hook \u7684\u8c03\u7528\u987a\u5e8f\u5fc5\u987b\u4fdd\u6301\u4e00\u81f4"}),"\n"]}),"\n",(0,o.jsx)(e.h2,{id:"usestate---\u72b6\u6001\u7ba1\u7406",children:"useState - \u72b6\u6001\u7ba1\u7406"}),"\n",(0,o.jsx)(e.h3,{id:"\u57fa\u7840\u7528\u6cd5",children:"\u57fa\u7840\u7528\u6cd5"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-jsx",children:'import { useState } from "react";\n\nfunction Counter() {\n  const [count, setCount] = useState(0);\n\n  return (\n    <div>\n      <p>Count: {count}</p>\n      <button onClick={() => setCount(count + 1)}>+1</button>\n    </div>\n  );\n}\n'})}),"\n",(0,o.jsx)(e.h3,{id:"\u591a\u4e2a\u72b6\u6001",children:"\u591a\u4e2a\u72b6\u6001"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-jsx",children:'function UserProfile() {\n  const [name, setName] = useState("");\n  const [age, setAge] = useState(0);\n  const [email, setEmail] = useState("");\n\n  return (\n    <form>\n      <input value={name} onChange={(e) => setName(e.target.value)} />\n      <input\n        type="number"\n        value={age}\n        onChange={(e) => setAge(e.target.value)}\n      />\n      <input value={email} onChange={(e) => setEmail(e.target.value)} />\n    </form>\n  );\n}\n'})}),"\n",(0,o.jsx)(e.h3,{id:"\u5bf9\u8c61\u72b6\u6001",children:"\u5bf9\u8c61\u72b6\u6001"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-jsx",children:'function Form() {\n  const [formData, setFormData] = useState({\n    username: "",\n    password: "",\n  });\n\n  const handleChange = (e) => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value,\n    });\n  };\n\n  return (\n    <form>\n      <input\n        name="username"\n        value={formData.username}\n        onChange={handleChange}\n      />\n      <input\n        name="password"\n        type="password"\n        value={formData.password}\n        onChange={handleChange}\n      />\n    </form>\n  );\n}\n'})}),"\n",(0,o.jsx)(e.h3,{id:"\u51fd\u6570\u5f0f\u66f4\u65b0",children:"\u51fd\u6570\u5f0f\u66f4\u65b0"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-jsx",children:"function Counter() {\n  const [count, setCount] = useState(0);\n\n  const increment = () => {\n    // \u2717 \u4e0d\u63a8\u8350\uff1a\u57fa\u4e8e\u5f53\u524dstate\n    setCount(count + 1);\n\n    // \u2713 \u63a8\u8350\uff1a\u4f7f\u7528\u51fd\u6570\u5f0f\u66f4\u65b0\n    setCount((prevCount) => prevCount + 1);\n  };\n\n  return <button onClick={increment}>Count: {count}</button>;\n}\n"})}),"\n",(0,o.jsx)(e.h2,{id:"-useeffect---\u526f\u4f5c\u7528\u5904\u7406",children:"\u26a1 useEffect - \u526f\u4f5c\u7528\u5904\u7406"}),"\n",(0,o.jsx)(e.h3,{id:"\u57fa\u7840\u7528\u6cd5-1",children:"\u57fa\u7840\u7528\u6cd5"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-jsx",children:'import { useState, useEffect } from "react";\n\nfunction App() {\n  const [count, setCount] = useState(0);\n\n  // \u6bcf\u6b21\u6e32\u67d3\u540e\u6267\u884c\n  useEffect(() => {\n    document.title = `You clicked ${count} times`;\n  });\n\n  return <button onClick={() => setCount(count + 1)}>Click me</button>;\n}\n'})}),"\n",(0,o.jsx)(e.h3,{id:"\u4f9d\u8d56\u6570\u7ec4",children:"\u4f9d\u8d56\u6570\u7ec4"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-jsx",children:"function UserProfile({ userId }) {\n  const [user, setUser] = useState(null);\n\n  useEffect(() => {\n    // \u53ea\u5728 userId \u53d8\u5316\u65f6\u6267\u884c\n    fetch(`/api/users/${userId}`)\n      .then((res) => res.json())\n      .then((data) => setUser(data));\n  }, [userId]); // \u4f9d\u8d56\u6570\u7ec4\n\n  return user ? <div>{user.name}</div> : <div>Loading...</div>;\n}\n"})}),"\n",(0,o.jsx)(e.h3,{id:"\u6e05\u7406\u51fd\u6570",children:"\u6e05\u7406\u51fd\u6570"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-jsx",children:"function Timer() {\n  const [seconds, setSeconds] = useState(0);\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setSeconds((s) => s + 1);\n    }, 1000);\n\n    // \u6e05\u7406\u51fd\u6570\uff1a\u7ec4\u4ef6\u5378\u8f7d\u65f6\u6267\u884c\n    return () => clearInterval(interval);\n  }, []);\n\n  return <div>Seconds: {seconds}</div>;\n}\n"})}),"\n",(0,o.jsx)(e.h3,{id:"\u5e38\u89c1\u573a\u666f",children:"\u5e38\u89c1\u573a\u666f"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-jsx",children:'function Component() {\n  // \u53ea\u5728\u6302\u8f7d\u65f6\u6267\u884c\u4e00\u6b21\n  useEffect(() => {\n    console.log("Component mounted");\n    return () => console.log("Component unmounted");\n  }, []);\n\n  // \u76d1\u542c\u591a\u4e2a\u4f9d\u8d56\n  useEffect(() => {\n    console.log("prop1 or prop2 changed");\n  }, [prop1, prop2]);\n\n  // \u6bcf\u6b21\u6e32\u67d3\u90fd\u6267\u884c\uff08\u8c28\u614e\u4f7f\u7528\uff09\n  useEffect(() => {\n    console.log("Component rendered");\n  });\n}\n'})}),"\n",(0,o.jsx)(e.h2,{id:"-usecontext---\u8de8\u7ec4\u4ef6\u5171\u4eab\u72b6\u6001",children:"\ud83c\udfa3 useContext - \u8de8\u7ec4\u4ef6\u5171\u4eab\u72b6\u6001"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-jsx",children:'import { createContext, useContext, useState } from "react";\n\n// \u521b\u5efa Context\nconst ThemeContext = createContext();\n\nfunction App() {\n  const [theme, setTheme] = useState("light");\n\n  return (\n    <ThemeContext.Provider value={{ theme, setTheme }}>\n      <Toolbar />\n    </ThemeContext.Provider>\n  );\n}\n\nfunction Toolbar() {\n  return (\n    <div>\n      <ThemedButton />\n    </div>\n  );\n}\n\nfunction ThemedButton() {\n  // \u4f7f\u7528 Context\n  const { theme, setTheme } = useContext(ThemeContext);\n\n  return (\n    <button\n      style={{\n        background: theme === "dark" ? "#333" : "#FFF",\n        color: theme === "dark" ? "#FFF" : "#333",\n      }}\n      onClick={() => setTheme(theme === "dark" ? "light" : "dark")}\n    >\n      Toggle Theme (Current: {theme})\n    </button>\n  );\n}\n'})}),"\n",(0,o.jsx)(e.h2,{id:"-usereducer---\u590d\u6742\u72b6\u6001\u7ba1\u7406",children:"\ud83d\ude80 useReducer - \u590d\u6742\u72b6\u6001\u7ba1\u7406"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-jsx",children:'import { useReducer } from "react";\n\n// \u5b9a\u4e49 reducer\nfunction counterReducer(state, action) {\n  switch (action.type) {\n    case "increment":\n      return { count: state.count + 1 };\n    case "decrement":\n      return { count: state.count - 1 };\n    case "reset":\n      return { count: 0 };\n    default:\n      throw new Error(`Unknown action: ${action.type}`);\n  }\n}\n\nfunction Counter() {\n  const [state, dispatch] = useReducer(counterReducer, { count: 0 });\n\n  return (\n    <div>\n      <p>Count: {state.count}</p>\n      <button onClick={() => dispatch({ type: "increment" })}>+1</button>\n      <button onClick={() => dispatch({ type: "decrement" })}>-1</button>\n      <button onClick={() => dispatch({ type: "reset" })}>Reset</button>\n    </div>\n  );\n}\n'})}),"\n",(0,o.jsx)(e.h3,{id:"\u590d\u6742\u793a\u4f8b\u8d2d\u7269\u8f66",children:"\u590d\u6742\u793a\u4f8b\uff1a\u8d2d\u7269\u8f66"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-jsx",children:'const cartReducer = (state, action) => {\n  switch (action.type) {\n    case "ADD_ITEM":\n      return {\n        ...state,\n        items: [...state.items, action.payload],\n      };\n    case "REMOVE_ITEM":\n      return {\n        ...state,\n        items: state.items.filter((item) => item.id !== action.payload),\n      };\n    case "UPDATE_QUANTITY":\n      return {\n        ...state,\n        items: state.items.map((item) =>\n          item.id === action.payload.id\n            ? { ...item, quantity: action.payload.quantity }\n            : item\n        ),\n      };\n    default:\n      return state;\n  }\n};\n\nfunction ShoppingCart() {\n  const [cart, dispatch] = useReducer(cartReducer, { items: [] });\n\n  const addItem = (product) => {\n    dispatch({ type: "ADD_ITEM", payload: product });\n  };\n\n  return (\n    <div>\n      {cart.items.map((item) => (\n        <div key={item.id}>\n          {item.name} x {item.quantity}\n          <button\n            onClick={() =>\n              dispatch({\n                type: "REMOVE_ITEM",\n                payload: item.id,\n              })\n            }\n          >\n            Remove\n          </button>\n        </div>\n      ))}\n    </div>\n  );\n}\n'})}),"\n",(0,o.jsx)(e.h2,{id:"-usememo---\u6027\u80fd\u4f18\u5316",children:"\u26a1 useMemo - \u6027\u80fd\u4f18\u5316"}),"\n",(0,o.jsx)(e.h3,{id:"\u7f13\u5b58\u8ba1\u7b97\u7ed3\u679c",children:"\u7f13\u5b58\u8ba1\u7b97\u7ed3\u679c"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-jsx",children:'import { useState, useMemo } from "react";\n\nfunction ExpensiveComponent({ items }) {\n  const [filter, setFilter] = useState("");\n\n  // \u53ea\u5728 items \u6216 filter \u6539\u53d8\u65f6\u91cd\u65b0\u8ba1\u7b97\n  const filteredItems = useMemo(() => {\n    console.log("Filtering...");\n    return items.filter((item) =>\n      item.name.toLowerCase().includes(filter.toLowerCase())\n    );\n  }, [items, filter]);\n\n  return (\n    <div>\n      <input value={filter} onChange={(e) => setFilter(e.target.value)} />\n      {filteredItems.map((item) => (\n        <div key={item.id}>{item.name}</div>\n      ))}\n    </div>\n  );\n}\n'})}),"\n",(0,o.jsx)(e.h2,{id:"-usecallback---\u7f13\u5b58\u51fd\u6570",children:"\ud83d\udd04 useCallback - \u7f13\u5b58\u51fd\u6570"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-jsx",children:'import { useState, useCallback } from "react";\n\nfunction Parent() {\n  const [count, setCount] = useState(0);\n\n  // \u7f13\u5b58\u51fd\u6570\uff0c\u907f\u514d\u6bcf\u6b21\u6e32\u67d3\u90fd\u521b\u5efa\u65b0\u51fd\u6570\n  const handleClick = useCallback(() => {\n    console.log("Button clicked");\n  }, []); // \u7a7a\u4f9d\u8d56\u6570\u7ec4\uff0c\u51fd\u6570\u6c38\u8fdc\u4e0d\u53d8\n\n  return (\n    <div>\n      <p>Count: {count}</p>\n      <button onClick={() => setCount(count + 1)}>Increment</button>\n      <Child onClick={handleClick} />\n    </div>\n  );\n}\n\n// \u4f7f\u7528 memo \u4f18\u5316\u5b50\u7ec4\u4ef6\nconst Child = React.memo(({ onClick }) => {\n  console.log("Child rendered");\n  return <button onClick={onClick}>Click Me</button>;\n});\n'})}),"\n",(0,o.jsx)(e.h2,{id:"-useref---\u5f15\u7528-dom-\u548c\u4fdd\u5b58\u503c",children:"\ud83c\udfaf useRef - \u5f15\u7528 DOM \u548c\u4fdd\u5b58\u503c"}),"\n",(0,o.jsx)(e.h3,{id:"\u8bbf\u95ee-dom",children:"\u8bbf\u95ee DOM"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-jsx",children:'import { useRef } from "react";\n\nfunction TextInput() {\n  const inputRef = useRef(null);\n\n  const focusInput = () => {\n    inputRef.current.focus();\n  };\n\n  return (\n    <div>\n      <input ref={inputRef} />\n      <button onClick={focusInput}>Focus Input</button>\n    </div>\n  );\n}\n'})}),"\n",(0,o.jsx)(e.h3,{id:"\u4fdd\u5b58\u53ef\u53d8\u503c",children:"\u4fdd\u5b58\u53ef\u53d8\u503c"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-jsx",children:"function Timer() {\n  const [seconds, setSeconds] = useState(0);\n  const intervalRef = useRef(null);\n\n  const start = () => {\n    if (!intervalRef.current) {\n      intervalRef.current = setInterval(() => {\n        setSeconds((s) => s + 1);\n      }, 1000);\n    }\n  };\n\n  const stop = () => {\n    clearInterval(intervalRef.current);\n    intervalRef.current = null;\n  };\n\n  return (\n    <div>\n      <p>Seconds: {seconds}</p>\n      <button onClick={start}>Start</button>\n      <button onClick={stop}>Stop</button>\n    </div>\n  );\n}\n"})}),"\n",(0,o.jsx)(e.h2,{id:"-react-19-\u65b0-hooks",children:"\ud83c\udd95 React 19 \u65b0 Hooks"}),"\n",(0,o.jsx)(e.h3,{id:"use---\u8bfb\u53d6-promise-\u548c-context",children:"use() - \u8bfb\u53d6 Promise \u548c Context"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-jsx",children:'import { use } from "react";\n\nfunction UserProfile({ userPromise }) {\n  // \u76f4\u63a5\u8bfb\u53d6 Promise\n  const user = use(userPromise);\n\n  return <div>{user.name}</div>;\n}\n\n// \u6216\u8bfb\u53d6 Context\nfunction ThemedComponent() {\n  const theme = use(ThemeContext);\n  return <div>Theme: {theme}</div>;\n}\n'})}),"\n",(0,o.jsx)(e.h3,{id:"useformstatus---\u8868\u5355\u72b6\u6001",children:"useFormStatus - \u8868\u5355\u72b6\u6001"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-jsx",children:'import { useFormStatus } from "react-dom";\n\nfunction SubmitButton() {\n  const { pending } = useFormStatus();\n\n  return (\n    <button type="submit" disabled={pending}>\n      {pending ? "Submitting..." : "Submit"}\n    </button>\n  );\n}\n'})}),"\n",(0,o.jsx)(e.h3,{id:"useoptimistic---\u4e50\u89c2\u66f4\u65b0",children:"useOptimistic - \u4e50\u89c2\u66f4\u65b0"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-jsx",children:'import { useOptimistic } from "react";\n\nfunction TodoList({ todos }) {\n  const [optimisticTodos, addOptimisticTodo] = useOptimistic(\n    todos,\n    (state, newTodo) => [...state, newTodo]\n  );\n\n  async function addTodo(formData) {\n    const newTodo = { id: Date.now(), text: formData.get("text") };\n    addOptimisticTodo(newTodo); // \u7acb\u5373\u663e\u793a\n\n    await saveTodo(newTodo); // \u540e\u53f0\u4fdd\u5b58\n  }\n\n  return (\n    <form action={addTodo}>\n      <input name="text" />\n      <button type="submit">Add</button>\n      <ul>\n        {optimisticTodos.map((todo) => (\n          <li key={todo.id}>{todo.text}</li>\n        ))}\n      </ul>\n    </form>\n  );\n}\n'})}),"\n",(0,o.jsx)(e.h3,{id:"useactionstate---\u7ba1\u7406-action-\u72b6\u6001",children:"useActionState - \u7ba1\u7406 Action \u72b6\u6001"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-jsx",children:'import { useActionState } from "react";\n\nfunction TodoForm() {\n  async function createTodo(prevState, formData) {\n    const title = formData.get("title");\n\n    if (!title) {\n      return { error: "\u8bf7\u8f93\u5165\u6807\u9898" };\n    }\n\n    await saveTodo({ title });\n    return { success: true };\n  }\n\n  const [state, formAction, isPending] = useActionState(createTodo, {});\n\n  return (\n    <form action={formAction}>\n      <input name="title" placeholder="\u65b0\u5f85\u529e\u4e8b\u9879" />\n      <button type="submit" disabled={isPending}>\n        {isPending ? "\u6dfb\u52a0\u4e2d..." : "\u6dfb\u52a0"}\n      </button>\n      {state.error && <p style={{ color: "red" }}>{state.error}</p>}\n    </form>\n  );\n}\n'})}),"\n",(0,o.jsx)(e.h3,{id:"usetransition---\u6807\u8bb0\u975e\u7d27\u6025\u66f4\u65b0",children:"useTransition - \u6807\u8bb0\u975e\u7d27\u6025\u66f4\u65b0"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-jsx",children:'import { useState, useTransition } from "react";\n\nfunction SearchPage() {\n  const [query, setQuery] = useState("");\n  const [results, setResults] = useState([]);\n  const [isPending, startTransition] = useTransition();\n\n  function handleChange(e) {\n    const value = e.target.value;\n    setQuery(value); // \u7d27\u6025\u66f4\u65b0\n\n    startTransition(() => {\n      // \u975e\u7d27\u6025\u66f4\u65b0\uff0c\u53ef\u88ab\u4e2d\u65ad\n      setResults(filterLargeList(value));\n    });\n  }\n\n  return (\n    <div>\n      <input value={query} onChange={handleChange} />\n      {isPending && <span>\u641c\u7d22\u4e2d...</span>}\n      <ul style={{ opacity: isPending ? 0.7 : 1 }}>\n        {results.map((item) => (\n          <li key={item.id}>{item.name}</li>\n        ))}\n      </ul>\n    </div>\n  );\n}\n'})}),"\n",(0,o.jsx)(e.h3,{id:"usedeferredvalue---\u5ef6\u8fdf\u503c\u66f4\u65b0",children:"useDeferredValue - \u5ef6\u8fdf\u503c\u66f4\u65b0"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-jsx",children:'import { useState, useDeferredValue, useMemo } from "react";\n\nfunction SearchResults({ query }) {\n  const deferredQuery = useDeferredValue(query);\n  const isStale = query !== deferredQuery;\n\n  const results = useMemo(() => searchDatabase(deferredQuery), [deferredQuery]);\n\n  return (\n    <div style={{ opacity: isStale ? 0.7 : 1 }}>\n      {results.map((item) => (\n        <div key={item.id}>{item.title}</div>\n      ))}\n    </div>\n  );\n}\n'})}),"\n",(0,o.jsx)(e.h3,{id:"useid---\u751f\u6210\u552f\u4e00-id",children:"useId - \u751f\u6210\u552f\u4e00 ID"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-jsx",children:'import { useId } from "react";\n\nfunction FormField({ label }) {\n  const id = useId();\n\n  return (\n    <div>\n      <label htmlFor={id}>{label}</label>\n      <input id={id} type="text" />\n    </div>\n  );\n}\n\n// \u591a\u4e2a\u76f8\u5173 ID\nfunction PasswordField() {\n  const id = useId();\n\n  return (\n    <div>\n      <label htmlFor={`${id}-password`}>\u5bc6\u7801</label>\n      <input\n        id={`${id}-password`}\n        type="password"\n        aria-describedby={`${id}-hint`}\n      />\n      <p id={`${id}-hint`}>\u5bc6\u7801\u81f3\u5c11 8 \u4e2a\u5b57\u7b26</p>\n    </div>\n  );\n}\n'})}),"\n",(0,o.jsx)(e.h2,{id:"\ufe0f-\u81ea\u5b9a\u4e49-hook",children:"\ud83d\udee0\ufe0f \u81ea\u5b9a\u4e49 Hook"}),"\n",(0,o.jsx)(e.h3,{id:"\u57fa\u7840\u793a\u4f8b",children:"\u57fa\u7840\u793a\u4f8b"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-jsx",children:"// useCounter.js\nfunction useCounter(initialValue = 0) {\n  const [count, setCount] = useState(initialValue);\n\n  const increment = () => setCount((c) => c + 1);\n  const decrement = () => setCount((c) => c - 1);\n  const reset = () => setCount(initialValue);\n\n  return { count, increment, decrement, reset };\n}\n\n// \u4f7f\u7528\nfunction Counter() {\n  const { count, increment, decrement, reset } = useCounter(0);\n\n  return (\n    <div>\n      <p>Count: {count}</p>\n      <button onClick={increment}>+</button>\n      <button onClick={decrement}>-</button>\n      <button onClick={reset}>Reset</button>\n    </div>\n  );\n}\n"})}),"\n",(0,o.jsx)(e.h3,{id:"\u5b9e\u7528-hookuselocalstorage",children:"\u5b9e\u7528 Hook\uff1auseLocalStorage"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-jsx",children:'function useLocalStorage(key, initialValue) {\n  const [value, setValue] = useState(() => {\n    try {\n      const item = window.localStorage.getItem(key);\n      return item ? JSON.parse(item) : initialValue;\n    } catch (error) {\n      return initialValue;\n    }\n  });\n\n  const setStoredValue = (newValue) => {\n    try {\n      setValue(newValue);\n      window.localStorage.setItem(key, JSON.stringify(newValue));\n    } catch (error) {\n      console.error(error);\n    }\n  };\n\n  return [value, setStoredValue];\n}\n\n// \u4f7f\u7528\nfunction App() {\n  const [name, setName] = useLocalStorage("name", "");\n\n  return <input value={name} onChange={(e) => setName(e.target.value)} />;\n}\n'})}),"\n",(0,o.jsx)(e.h3,{id:"\u5b9e\u7528-hookusefetch",children:"\u5b9e\u7528 Hook\uff1auseFetch"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-jsx",children:'function useFetch(url) {\n  const [data, setData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    setLoading(true);\n    fetch(url)\n      .then((res) => res.json())\n      .then((data) => {\n        setData(data);\n        setError(null);\n      })\n      .catch((err) => setError(err))\n      .finally(() => setLoading(false));\n  }, [url]);\n\n  return { data, loading, error };\n}\n\n// \u4f7f\u7528\nfunction UserList() {\n  const { data: users, loading, error } = useFetch("/api/users");\n\n  if (loading) return <div>Loading...</div>;\n  if (error) return <div>Error: {error.message}</div>;\n\n  return (\n    <ul>\n      {users.map((user) => (\n        <li key={user.id}>{user.name}</li>\n      ))}\n    </ul>\n  );\n}\n'})}),"\n",(0,o.jsx)(e.h2,{id:"-hooks-\u5bf9\u6bd4\u8868",children:"\ud83d\udcca Hooks \u5bf9\u6bd4\u8868"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,o.jsxs)(e.table,{children:[(0,o.jsx)(e.thead,{children:(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.th,{children:"Hook"}),(0,o.jsx)(e.th,{children:"\u7528\u9014"}),(0,o.jsx)(e.th,{children:"\u8fd4\u56de\u503c"})]})}),(0,o.jsxs)(e.tbody,{children:[(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:"useState"}),(0,o.jsx)(e.td,{children:"\u72b6\u6001\u7ba1\u7406"}),(0,o.jsx)(e.td,{children:"[state, setState]"})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:"useEffect"}),(0,o.jsx)(e.td,{children:"\u526f\u4f5c\u7528\u5904\u7406"}),(0,o.jsx)(e.td,{children:"undefined"})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:"useContext"}),(0,o.jsx)(e.td,{children:"\u8bfb\u53d6 Context"}),(0,o.jsx)(e.td,{children:"context value"})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:"useReducer"}),(0,o.jsx)(e.td,{children:"\u590d\u6742\u72b6\u6001\u7ba1\u7406"}),(0,o.jsx)(e.td,{children:"[state, dispatch]"})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:"useMemo"}),(0,o.jsx)(e.td,{children:"\u7f13\u5b58\u8ba1\u7b97\u7ed3\u679c"}),(0,o.jsx)(e.td,{children:"memoized value"})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:"useCallback"}),(0,o.jsx)(e.td,{children:"\u7f13\u5b58\u51fd\u6570"}),(0,o.jsx)(e.td,{children:"memoized function"})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:"useRef"}),(0,o.jsx)(e.td,{children:"DOM \u5f15\u7528/\u4fdd\u5b58\u503c"}),(0,o.jsx)(e.td,{children:(0,o.jsx)(e.code,{children:"{ current: value }"})})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:"use"}),(0,o.jsx)(e.td,{children:"\u8bfb\u53d6 Promise/Context"}),(0,o.jsx)(e.td,{children:"resolved value"})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:"useActionState"}),(0,o.jsx)(e.td,{children:"\u7ba1\u7406 Action \u72b6\u6001"}),(0,o.jsx)(e.td,{children:"[state, action, pending]"})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:"useOptimistic"}),(0,o.jsx)(e.td,{children:"\u4e50\u89c2\u66f4\u65b0"}),(0,o.jsx)(e.td,{children:"[optimisticState, addOptimistic]"})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:"useFormStatus"}),(0,o.jsx)(e.td,{children:"\u8868\u5355\u72b6\u6001"}),(0,o.jsx)(e.td,{children:"{ pending, data, method, action }"})]})]})]}),"\n",(0,o.jsx)(e.h2,{id:"-\u6700\u4f73\u5b9e\u8df5",children:"\ud83d\udca1 \u6700\u4f73\u5b9e\u8df5"}),"\n",(0,o.jsx)(e.h3,{id:"1-\u5408\u7406\u4f7f\u7528-useeffect-\u4f9d\u8d56",children:"1. \u5408\u7406\u4f7f\u7528 useEffect \u4f9d\u8d56"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-jsx",children:"// \u2717 \u7f3a\u5c11\u4f9d\u8d56\nuseEffect(() => {\n  console.log(count);\n}, []); // count \u6539\u53d8\u4e0d\u4f1a\u89e6\u53d1\n\n// \u2713 \u6b63\u786e\u7684\u4f9d\u8d56\nuseEffect(() => {\n  console.log(count);\n}, [count]);\n"})}),"\n",(0,o.jsx)(e.h3,{id:"2-\u907f\u514d\u4e0d\u5fc5\u8981\u7684\u6e32\u67d3",children:"2. \u907f\u514d\u4e0d\u5fc5\u8981\u7684\u6e32\u67d3"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-jsx",children:'// \u2717 \u6bcf\u6b21\u90fd\u521b\u5efa\u65b0\u51fd\u6570\nfunction Parent() {\n  return <Child onClick={() => console.log("click")} />;\n}\n\n// \u2713 \u4f7f\u7528 useCallback\nfunction Parent() {\n  const handleClick = useCallback(() => {\n    console.log("click");\n  }, []);\n\n  return <Child onClick={handleClick} />;\n}\n'})}),"\n",(0,o.jsx)(e.h3,{id:"3-\u81ea\u5b9a\u4e49-hook-\u547d\u540d\u89c4\u8303",children:"3. \u81ea\u5b9a\u4e49 Hook \u547d\u540d\u89c4\u8303"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-jsx",children:"// \u2713 \u4ee5 use \u5f00\u5934\nfunction useWindowSize() {}\nfunction useAuth() {}\n\n// \u2717 \u4e0d\u4ee5 use \u5f00\u5934\nfunction getWindowSize() {} // \u4e0d\u662f Hook\n"})}),"\n",(0,o.jsx)(e.hr,{}),"\n",(0,o.jsxs)(e.p,{children:[(0,o.jsx)(e.strong,{children:"\u4e0b\u4e00\u6b65"}),": \u67e5\u770b ",(0,o.jsx)(e.a,{href:"/docs/react/react19-features",children:"React 19 \u65b0\u7279\u6027"})," \u4e86\u89e3\u6700\u65b0\u7684 Hook \u529f\u80fd\uff0c\u6216\u6d4f\u89c8 ",(0,o.jsx)(e.a,{href:"/docs/interview/react-interview-questions",children:"\u9762\u8bd5\u9898\u7cbe\u9009"})," \u5de9\u56fa\u77e5\u8bc6\u3002"]})]})}function d(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(u,{...n})}):u(n)}}}]);