"use strict";(globalThis.webpackChunkto_lib_github_io=globalThis.webpackChunkto_lib_github_io||[]).push([[39355],{48885:(e,n,i)=>{i.d(n,{R:()=>d,x:()=>c});var r=i(99378);const s={},l=r.createContext(s);function d(e){const n=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),r.createElement(l.Provider,{value:n},e.children)}},54170:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>a,frontMatter:()=>d,metadata:()=>r,toc:()=>h});const r=JSON.parse('{"id":"rocketmq/troubleshooting","title":"\u6392\u969c\u624b\u518c","description":"RocketMQ \u5e38\u89c1\u6545\u969c\u5b9a\u4f4d\u601d\u8def\u3001\u6392\u969c\u547d\u4ee4\u4e0e\u5e94\u6025\u5904\u7406","source":"@site/docs/rocketmq/troubleshooting.md","sourceDirName":"rocketmq","slug":"/rocketmq/troubleshooting","permalink":"/docs/rocketmq/troubleshooting","draft":false,"unlisted":false,"editUrl":"https://github.com/to-lib/to-lib.github.io/tree/main/docs/rocketmq/troubleshooting.md","tags":[],"version":"current","sidebarPosition":16,"frontMatter":{"sidebar_position":16,"title":"\u6392\u969c\u624b\u518c","description":"RocketMQ \u5e38\u89c1\u6545\u969c\u5b9a\u4f4d\u601d\u8def\u3001\u6392\u969c\u547d\u4ee4\u4e0e\u5e94\u6025\u5904\u7406"},"sidebar":"rocketmq","previous":{"title":"\u5b89\u5168\u4e0e ACL","permalink":"/docs/rocketmq/security"},"next":{"title":"\u6700\u4f73\u5b9e\u8df5","permalink":"/docs/rocketmq/best-practices"}}');var s=i(22714),l=i(48885);const d={sidebar_position:16,title:"\u6392\u969c\u624b\u518c",description:"RocketMQ \u5e38\u89c1\u6545\u969c\u5b9a\u4f4d\u601d\u8def\u3001\u6392\u969c\u547d\u4ee4\u4e0e\u5e94\u6025\u5904\u7406"},c="RocketMQ \u6392\u969c\u624b\u518c",o={},h=[{value:"\u6392\u969c\u603b\u539f\u5219",id:"\u6392\u969c\u603b\u539f\u5219",level:2},{value:"\u5feb\u901f\u4f53\u68c0\uff083 \u5206\u949f\uff09",id:"\u5feb\u901f\u4f53\u68c03-\u5206\u949f",level:2},{value:"1. NameServer / Broker \u662f\u5426\u5b58\u6d3b",id:"1-nameserver--broker-\u662f\u5426\u5b58\u6d3b",level:3},{value:"2. \u96c6\u7fa4\u89c6\u89d2\u786e\u8ba4",id:"2-\u96c6\u7fa4\u89c6\u89d2\u786e\u8ba4",level:3},{value:"3. Topic \u8def\u7531\u662f\u5426\u6b63\u5e38",id:"3-topic-\u8def\u7531\u662f\u5426\u6b63\u5e38",level:3},{value:"4. \u6d88\u8d39\u8fdb\u5ea6/\u5806\u79ef",id:"4-\u6d88\u8d39\u8fdb\u5ea6\u5806\u79ef",level:3},{value:"\u5e38\u89c1\u73b0\u8c61\u4e0e\u5b9a\u4f4d",id:"\u5e38\u89c1\u73b0\u8c61\u4e0e\u5b9a\u4f4d",level:2},{value:"\u73b0\u8c61 1\uff1aProducer \u53d1\u9001\u5931\u8d25 / \u8d85\u65f6",id:"\u73b0\u8c61-1producer-\u53d1\u9001\u5931\u8d25--\u8d85\u65f6",level:2},{value:"\u5e38\u89c1\u62a5\u9519",id:"\u5e38\u89c1\u62a5\u9519",level:3},{value:"\u6392\u67e5\u8def\u5f84",id:"\u6392\u67e5\u8def\u5f84",level:3},{value:"\u5e38\u7528\u547d\u4ee4",id:"\u5e38\u7528\u547d\u4ee4",level:3},{value:"\u5904\u7406\u5efa\u8bae",id:"\u5904\u7406\u5efa\u8bae",level:3},{value:"\u73b0\u8c61 2\uff1a<code>No route info of this topic</code>",id:"\u73b0\u8c61-2no-route-info-of-this-topic",level:2},{value:"\u5e38\u89c1\u539f\u56e0",id:"\u5e38\u89c1\u539f\u56e0",level:3},{value:"\u6392\u67e5\u547d\u4ee4",id:"\u6392\u67e5\u547d\u4ee4",level:3},{value:"\u5904\u7406\u5efa\u8bae",id:"\u5904\u7406\u5efa\u8bae-1",level:3},{value:"\u73b0\u8c61 3\uff1aConsumer \u6536\u4e0d\u5230\u6d88\u606f",id:"\u73b0\u8c61-3consumer-\u6536\u4e0d\u5230\u6d88\u606f",level:2},{value:"\u6392\u67e5\u8def\u5f84",id:"\u6392\u67e5\u8def\u5f84-1",level:3},{value:"\u5e38\u7528\u547d\u4ee4",id:"\u5e38\u7528\u547d\u4ee4-1",level:3},{value:"\u5904\u7406\u5efa\u8bae",id:"\u5904\u7406\u5efa\u8bae-2",level:3},{value:"\u73b0\u8c61 4\uff1a\u6d88\u606f\u5806\u79ef\uff08Backlog/Diff \u6301\u7eed\u589e\u957f\uff09",id:"\u73b0\u8c61-4\u6d88\u606f\u5806\u79efbacklogdiff-\u6301\u7eed\u589e\u957f",level:2},{value:"\u6392\u67e5\u8def\u5f84",id:"\u6392\u67e5\u8def\u5f84-2",level:3},{value:"\u5e38\u7528\u547d\u4ee4",id:"\u5e38\u7528\u547d\u4ee4-2",level:3},{value:"\u5e94\u6025\u5904\u7406\uff08\u4ece\u4f4e\u98ce\u9669\u5230\u9ad8\u98ce\u9669\uff09",id:"\u5e94\u6025\u5904\u7406\u4ece\u4f4e\u98ce\u9669\u5230\u9ad8\u98ce\u9669",level:3},{value:"\u73b0\u8c61 5\uff1aBroker \u78c1\u76d8\u5360\u7528\u8fc7\u9ad8 / \u5199\u5165\u5931\u8d25",id:"\u73b0\u8c61-5broker-\u78c1\u76d8\u5360\u7528\u8fc7\u9ad8--\u5199\u5165\u5931\u8d25",level:2},{value:"\u5178\u578b\u75c7\u72b6",id:"\u5178\u578b\u75c7\u72b6",level:3},{value:"\u6392\u67e5\u8def\u5f84",id:"\u6392\u67e5\u8def\u5f84-3",level:3},{value:"\u5904\u7406\u5efa\u8bae",id:"\u5904\u7406\u5efa\u8bae-3",level:3},{value:"\u73b0\u8c61 6\uff1a\u987a\u5e8f\u6d88\u8d39\u5361\u4f4f",id:"\u73b0\u8c61-6\u987a\u5e8f\u6d88\u8d39\u5361\u4f4f",level:2},{value:"\u5178\u578b\u539f\u56e0",id:"\u5178\u578b\u539f\u56e0",level:3},{value:"\u5904\u7406\u5efa\u8bae",id:"\u5904\u7406\u5efa\u8bae-4",level:3},{value:"\u73b0\u8c61 7\uff1a\u5f00\u542f ACL \u540e\u5927\u91cf <code>permission denied</code>",id:"\u73b0\u8c61-7\u5f00\u542f-acl-\u540e\u5927\u91cf-permission-denied",level:2},{value:"\u65e5\u5fd7\u5b9a\u4f4d\u6307\u5357",id:"\u65e5\u5fd7\u5b9a\u4f4d\u6307\u5357",level:2},{value:"\u9ed8\u8ba4\u65e5\u5fd7\u4f4d\u7f6e",id:"\u9ed8\u8ba4\u65e5\u5fd7\u4f4d\u7f6e",level:3},{value:"\u5e38\u7528 grep",id:"\u5e38\u7528-grep",level:3},{value:"\u5e38\u7528\u5e94\u6025\u64cd\u4f5c\uff08\u8c28\u614e\uff09",id:"\u5e38\u7528\u5e94\u6025\u64cd\u4f5c\u8c28\u614e",level:2},{value:"\u91cd\u7f6e\u6d88\u8d39\u4f4d\u70b9",id:"\u91cd\u7f6e\u6d88\u8d39\u4f4d\u70b9",level:3},{value:"\u4e0b\u4e00\u6b65",id:"\u4e0b\u4e00\u6b65",level:2}];function t(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"rocketmq-\u6392\u969c\u624b\u518c",children:"RocketMQ \u6392\u969c\u624b\u518c"})}),"\n",(0,s.jsx)(n.p,{children:"\u672c\u6587\u6309\u201c\u73b0\u8c61 -> \u6392\u67e5\u8def\u5f84 -> \u5e38\u7528\u547d\u4ee4/\u65e5\u5fd7 -> \u5904\u7406\u5efa\u8bae\u201d\u7684\u65b9\u5f0f\u6574\u7406 RocketMQ \u751f\u4ea7\u5e38\u89c1\u95ee\u9898\u3002"}),"\n",(0,s.jsx)(n.h2,{id:"\u6392\u969c\u603b\u539f\u5219",children:"\u6392\u969c\u603b\u539f\u5219"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u5148\u786e\u8ba4\u8303\u56f4"}),"\uff1a\u662f\u5355\u4e2a\u5e94\u7528\u95ee\u9898\uff08Producer/Consumer\uff09\u8fd8\u662f\u96c6\u7fa4\u95ee\u9898\uff08NameServer/Broker\uff09"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u5148\u786e\u8ba4\u94fe\u8def"}),"\uff1a\u7f51\u7edc\u53ef\u8fbe -> \u8def\u7531\u53ef\u89c1 -> Topic/Group \u6b63\u786e -> \u6743\u9650\u901a\u8fc7 -> \u53d1\u9001/\u6d88\u8d39\u7ebf\u7a0b\u6c60\u5065\u5eb7"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u5148\u770b\u6570\u636e"}),"\uff1a\u5806\u79ef\u91cf\u3001TPS\u3001\u5931\u8d25\u6570\u3001\u78c1\u76d8/\u5185\u5b58\u6c34\u4f4d"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u907f\u514d\u201c\u76f2\u76ee\u91cd\u542f\u201d"}),"\uff1a\u91cd\u542f\u4f1a\u63a9\u76d6\u6839\u56e0\uff0c\u4f18\u5148\u57fa\u4e8e\u65e5\u5fd7\u548c\u6307\u6807\u5b9a\u4f4d"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"\u5feb\u901f\u4f53\u68c03-\u5206\u949f",children:"\u5feb\u901f\u4f53\u68c0\uff083 \u5206\u949f\uff09"}),"\n",(0,s.jsx)(n.h3,{id:"1-nameserver--broker-\u662f\u5426\u5b58\u6d3b",children:"1. NameServer / Broker \u662f\u5426\u5b58\u6d3b"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# NameServer/Broker \u8fdb\u7a0b\njps | grep -E "NamesrvStartup|BrokerStartup"\n\n# \u7aef\u53e3\n# NameServer: 9876\n# Broker: 10911 (\u670d\u52a1\u7aef\u53e3), 10909 (VIP)\nnetstat -an | grep -E "9876|10911|10909"\n'})}),"\n",(0,s.jsx)(n.h3,{id:"2-\u96c6\u7fa4\u89c6\u89d2\u786e\u8ba4",children:"2. \u96c6\u7fa4\u89c6\u89d2\u786e\u8ba4"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sh bin/mqadmin clusterList -n <namesrv>\nsh bin/mqadmin brokerStatus -n <namesrv> -b <brokerAddr>\n"})}),"\n",(0,s.jsx)(n.h3,{id:"3-topic-\u8def\u7531\u662f\u5426\u6b63\u5e38",children:"3. Topic \u8def\u7531\u662f\u5426\u6b63\u5e38"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sh bin/mqadmin topicList -n <namesrv>\nsh bin/mqadmin topicRoute -n <namesrv> -t <topic>\nsh bin/mqadmin topicStatus -n <namesrv> -t <topic>\n"})}),"\n",(0,s.jsx)(n.h3,{id:"4-\u6d88\u8d39\u8fdb\u5ea6\u5806\u79ef",children:"4. \u6d88\u8d39\u8fdb\u5ea6/\u5806\u79ef"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sh bin/mqadmin consumerProgress -n <namesrv> -g <consumerGroup>\nsh bin/mqadmin consumerConnection -n <namesrv> -g <consumerGroup>\n"})}),"\n",(0,s.jsx)(n.h2,{id:"\u5e38\u89c1\u73b0\u8c61\u4e0e\u5b9a\u4f4d",children:"\u5e38\u89c1\u73b0\u8c61\u4e0e\u5b9a\u4f4d"}),"\n",(0,s.jsx)(n.h2,{id:"\u73b0\u8c61-1producer-\u53d1\u9001\u5931\u8d25--\u8d85\u65f6",children:"\u73b0\u8c61 1\uff1aProducer \u53d1\u9001\u5931\u8d25 / \u8d85\u65f6"}),"\n",(0,s.jsx)(n.h3,{id:"\u5e38\u89c1\u62a5\u9519",children:"\u5e38\u89c1\u62a5\u9519"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"Send [xx] times, still failed, cost [xx]ms"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"No route info of this topic"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"connect to <broker> failed"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"the broker does not exist"})}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u6392\u67e5\u8def\u5f84",children:"\u6392\u67e5\u8def\u5f84"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u7f51\u7edc"}),"\uff1aProducer -> NameServer\u3001Producer -> Broker \u662f\u5426\u53ef\u8fbe"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u8def\u7531"}),"\uff1aTopic \u662f\u5426\u5b58\u5728\u3001\u8def\u7531\u662f\u5426\u6b63\u786e\u3001NameServer \u662f\u5426\u6709\u8be5 Broker \u4fe1\u606f"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Broker \u538b\u529b"}),"\uff1a\u7ebf\u7a0b\u6c60\u6ee1\u3001\u78c1\u76d8\u6ee1\u3001PageCache \u538b\u529b\u3001GC"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u6743\u9650"}),"\uff1a\u5f00\u542f ACL \u540e AK/SK \u662f\u5426\u6b63\u786e"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u5e38\u7528\u547d\u4ee4",children:"\u5e38\u7528\u547d\u4ee4"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# \u8def\u7531\nsh bin/mqadmin topicRoute -n <namesrv> -t <topic>\n\n# Broker \u72b6\u6001\nsh bin/mqadmin brokerStatus -n <namesrv> -b <brokerAddr>\n\n# Topic \u662f\u5426\u5b58\u5728\nsh bin/mqadmin topicList -n <namesrv> | grep <topic>\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u5904\u7406\u5efa\u8bae",children:"\u5904\u7406\u5efa\u8bae"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u4e34\u65f6\u7f13\u89e3"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u9002\u5f53\u589e\u52a0 ",(0,s.jsx)(n.code,{children:"sendMsgTimeout"})]}),"\n",(0,s.jsx)(n.li,{children:"\u53d1\u9001\u7aef\u5f00\u542f\u5f02\u6b65\u3001\u6279\u91cf\u53d1\u9001\uff08\u6ce8\u610f 4MB \u9650\u5236\uff09"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u6839\u56e0\u5904\u7406"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Broker \u5199\u5165\u7ebf\u7a0b\u6c60/\u78c1\u76d8/\u5185\u5b58\u74f6\u9888\uff1a\u53c2\u8003 ",(0,s.jsx)(n.a,{href:"/docs/rocketmq/performance-optimization",children:"\u6027\u80fd\u4f18\u5316"})]}),"\n",(0,s.jsx)(n.li,{children:"\u8def\u7531\u7f3a\u5931\uff1a\u786e\u8ba4 Broker \u662f\u5426\u6210\u529f\u6ce8\u518c\u5230\u6240\u6709 NameServer"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.h2,{id:"\u73b0\u8c61-2no-route-info-of-this-topic",children:["\u73b0\u8c61 2\uff1a",(0,s.jsx)(n.code,{children:"No route info of this topic"})]}),"\n",(0,s.jsx)(n.h3,{id:"\u5e38\u89c1\u539f\u56e0",children:"\u5e38\u89c1\u539f\u56e0"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Topic \u672a\u521b\u5efa"}),"\n",(0,s.jsx)(n.li,{children:"Broker \u672a\u5728 NameServer \u6ce8\u518c\uff08NameServer \u5730\u5740\u914d\u7f6e\u9519\u8bef / \u90e8\u5206 NameServer \u4e0d\u53ef\u7528\uff09"}),"\n",(0,s.jsx)(n.li,{children:"Topic \u5728\u67d0\u4e2a\u96c6\u7fa4/\u67d0\u4e2a Broker \u4e0a\u521b\u5efa\u4e86\uff0c\u4f46\u5ba2\u6237\u7aef\u67e5\u7684 NameServer \u4e0d\u4e00\u81f4"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u6392\u67e5\u547d\u4ee4",children:"\u6392\u67e5\u547d\u4ee4"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sh bin/mqadmin topicList -n <namesrv>\nsh bin/mqadmin topicRoute -n <namesrv> -t <topic>\nsh bin/mqadmin clusterList -n <namesrv>\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u5904\u7406\u5efa\u8bae-1",children:"\u5904\u7406\u5efa\u8bae"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u7528 ",(0,s.jsx)(n.code,{children:"mqadmin updateTopic"})," \u5728\u76ee\u6807\u96c6\u7fa4\u521b\u5efa Topic\uff08\u6ce8\u610f\u8bfb\u5199\u961f\u5217\u6570\uff09"]}),"\n",(0,s.jsx)(n.li,{children:"\u5ba2\u6237\u7aef\u914d\u7f6e\u591a\u4e2a NameServer\uff08\u81f3\u5c11 2 \u4e2a\uff09\u5e76\u786e\u4fdd\u5730\u5740\u4e00\u81f4"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"\u73b0\u8c61-3consumer-\u6536\u4e0d\u5230\u6d88\u606f",children:"\u73b0\u8c61 3\uff1aConsumer \u6536\u4e0d\u5230\u6d88\u606f"}),"\n",(0,s.jsx)(n.h3,{id:"\u6392\u67e5\u8def\u5f84-1",children:"\u6392\u67e5\u8def\u5f84"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u8ba2\u9605\u662f\u5426\u6b63\u786e"}),"\uff1aTopic/Tag/SQL \u8fc7\u6ee4\u8868\u8fbe\u5f0f"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u6d88\u8d39\u6a21\u5f0f"}),"\uff1a\u96c6\u7fa4\u6d88\u8d39\u4e0b\u662f\u5426\u88ab\u5176\u4ed6\u5b9e\u4f8b\u6d88\u8d39\u4e86"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Offset"}),"\uff1a\u662f\u5426\u4ece\u6700\u65b0\u5f00\u59cb\u6d88\u8d39\u5bfc\u81f4\u201c\u5386\u53f2\u6d88\u606f\u770b\u4e0d\u5230\u201d"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u6d88\u8d39\u4f4d\u70b9\u5361\u4f4f"}),"\uff1a\u67d0\u4e9b\u961f\u5217\u79ef\u538b\u4e25\u91cd"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ACL"}),"\uff1a\u65e0\u8ba2\u9605\u6743\u9650/Group \u6743\u9650"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u5e38\u7528\u547d\u4ee4-1",children:"\u5e38\u7528\u547d\u4ee4"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# \u6d88\u8d39\u8005\u662f\u5426\u5728\u7ebf\nsh bin/mqadmin consumerConnection -n <namesrv> -g <consumerGroup>\n\n# \u6d88\u8d39\u8fdb\u5ea6\nsh bin/mqadmin consumerProgress -n <namesrv> -g <consumerGroup>\n\n# \u67e5\u8be2\u6d88\u606f\uff08\u6309 key \u6216 msgId\uff09\nsh bin/mqadmin queryMsgByKey -n <namesrv> -t <topic> -k <key>\nsh bin/mqadmin queryMsgById  -n <namesrv> -i <msgId>\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u5904\u7406\u5efa\u8bae-2",children:"\u5904\u7406\u5efa\u8bae"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u65b0\u6d88\u8d39\u7ec4\u9ed8\u8ba4\u901a\u5e38\u4ece\u6700\u65b0 offset \u5f00\u59cb\uff1a\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u9700\u8981\u6d88\u8d39\u5386\u53f2\u6d88\u606f\u65f6\uff0c\u8bbe\u7f6e ",(0,s.jsx)(n.code,{children:"CONSUME_FROM_FIRST_OFFSET"})," \u6216\u91cd\u7f6e offset"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\u68c0\u67e5\u8fc7\u6ee4\u6761\u4ef6\uff08Tag/SQL92\uff09\uff1a\u5148\u7528 ",(0,s.jsx)(n.code,{children:"*"})," \u653e\u5f00\u8ba2\u9605\u9a8c\u8bc1\u94fe\u8def"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"\u73b0\u8c61-4\u6d88\u606f\u5806\u79efbacklogdiff-\u6301\u7eed\u589e\u957f",children:"\u73b0\u8c61 4\uff1a\u6d88\u606f\u5806\u79ef\uff08Backlog/Diff \u6301\u7eed\u589e\u957f\uff09"}),"\n",(0,s.jsx)(n.h3,{id:"\u6392\u67e5\u8def\u5f84-2",children:"\u6392\u67e5\u8def\u5f84"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"\u751f\u4ea7 TPS > \u6d88\u8d39 TPS"})}),"\n",(0,s.jsx)(n.li,{children:"\u6d88\u8d39\u903b\u8f91\u6162\uff08\u5916\u90e8\u4f9d\u8d56\u3001DB\u3001RPC\uff09"}),"\n",(0,s.jsx)(n.li,{children:"\u6d88\u8d39\u7ebf\u7a0b\u6c60/\u6279\u91cf\u53c2\u6570\u4e0d\u5408\u7406"}),"\n",(0,s.jsx)(n.li,{children:"Queue \u6570\u91cf\u4e0d\u8db3\u5bfc\u81f4\u5e76\u884c\u5ea6\u4e0d\u591f"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u5e38\u7528\u547d\u4ee4-2",children:"\u5e38\u7528\u547d\u4ee4"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# \u5806\u79ef\u91cf\nsh bin/mqadmin consumerProgress -n <namesrv> -g <consumerGroup>\n\n# Topic \u72b6\u6001\nsh bin/mqadmin topicStatus -n <namesrv> -t <topic>\n"})}),"\n",(0,s.jsx)(n.h3,{id:"\u5e94\u6025\u5904\u7406\u4ece\u4f4e\u98ce\u9669\u5230\u9ad8\u98ce\u9669",children:"\u5e94\u6025\u5904\u7406\uff08\u4ece\u4f4e\u98ce\u9669\u5230\u9ad8\u98ce\u9669\uff09"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u589e\u52a0\u6d88\u8d39\u8005\u5b9e\u4f8b"}),"\uff08\u4e0d\u8d85\u8fc7 Queue \u6570\u91cf\u7684\u6709\u6548\u5e76\u884c\u5ea6\uff09"]}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.strong,{children:"\u63d0\u5347\u6d88\u8d39\u7ebf\u7a0b\u6570\u3001\u6279\u91cf\u62c9\u53d6/\u6279\u91cf\u6d88\u8d39\u53c2\u6570"})}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u4e34\u65f6\u589e\u52a0 Queue \u6570\u91cf"}),"\uff08\u6269\u5bb9\u524d\u8bc4\u4f30\uff0c\u907f\u514d\u9891\u7e41\u53d8\u66f4\uff09"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u8df3\u8fc7\u5806\u79ef\u6d88\u606f/\u91cd\u7f6e Offset"}),"\uff08\u9ad8\u98ce\u9669\uff0c\u9700\u4e1a\u52a1\u786e\u8ba4\uff09"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"\u73b0\u8c61-5broker-\u78c1\u76d8\u5360\u7528\u8fc7\u9ad8--\u5199\u5165\u5931\u8d25",children:"\u73b0\u8c61 5\uff1aBroker \u78c1\u76d8\u5360\u7528\u8fc7\u9ad8 / \u5199\u5165\u5931\u8d25"}),"\n",(0,s.jsx)(n.h3,{id:"\u5178\u578b\u75c7\u72b6",children:"\u5178\u578b\u75c7\u72b6"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u65e5\u5fd7\u51fa\u73b0\u78c1\u76d8\u6c34\u4f4d\u544a\u8b66"}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"putMessage"})," \u5931\u8d25"]}),"\n",(0,s.jsx)(n.li,{children:"broker \u4e0d\u518d\u63a5\u6536\u5199\u5165"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u6392\u67e5\u8def\u5f84-3",children:"\u6392\u67e5\u8def\u5f84"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"commitlog"})," \u76ee\u5f55\u662f\u5426\u66b4\u6da8"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"fileReservedTime"})," \u662f\u5426\u8fc7\u5927"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"diskMaxUsedSpaceRatio"})," \u662f\u5426\u8fc7\u4f4e\u5bfc\u81f4\u8fc7\u65e9\u4fdd\u62a4"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u5904\u7406\u5efa\u8bae-3",children:"\u5904\u7406\u5efa\u8bae"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"\u5148\u6269\u76d8/\u6e05\u7406"}),"\uff08\u786e\u4fdd\u7cfb\u7edf\u53ef\u7ee7\u7eed\u8fd0\u884c\uff09"]}),"\n",(0,s.jsxs)(n.li,{children:["\u5408\u7406\u8bbe\u7f6e\uff1a\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"fileReservedTime"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"deleteWhen"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"diskMaxUsedSpaceRatio"})}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\u7ed3\u5408\u76d1\u63a7\u63d0\u524d\u544a\u8b66\uff1a\u53c2\u8003 ",(0,s.jsx)(n.a,{href:"/docs/rocketmq/monitoring",children:"\u76d1\u63a7\u4e0e\u8fd0\u7ef4"})]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"\u73b0\u8c61-6\u987a\u5e8f\u6d88\u8d39\u5361\u4f4f",children:"\u73b0\u8c61 6\uff1a\u987a\u5e8f\u6d88\u8d39\u5361\u4f4f"}),"\n",(0,s.jsx)(n.h3,{id:"\u5178\u578b\u539f\u56e0",children:"\u5178\u578b\u539f\u56e0"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u987a\u5e8f\u6d88\u8d39\u67d0\u6761\u6d88\u606f\u6301\u7eed\u5931\u8d25\uff0c\u5bfc\u81f4\u961f\u5217\u88ab\u201c\u9501\u4f4f\u201d\uff0c\u540e\u7eed\u6d88\u606f\u65e0\u6cd5\u63a8\u8fdb\u3002"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u5904\u7406\u5efa\u8bae-4",children:"\u5904\u7406\u5efa\u8bae"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\u9488\u5bf9\u987a\u5e8f\u6d88\u8d39\uff1a\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u5bf9\u201c\u53ef\u8df3\u8fc7\u201d\u7684\u9519\u8bef\u8bbe\u7f6e\u6700\u5927\u91cd\u8bd5\u6b21\u6570\u540e\u964d\u7ea7\u5904\u7406"}),"\n",(0,s.jsx)(n.li,{children:"\u5c06\u5f02\u5e38\u6d88\u606f\u843d\u5e93/\u544a\u8b66\u540e\u8fd4\u56de\u6210\u529f\uff0c\u907f\u514d\u963b\u585e\u961f\u5217"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.h2,{id:"\u73b0\u8c61-7\u5f00\u542f-acl-\u540e\u5927\u91cf-permission-denied",children:["\u73b0\u8c61 7\uff1a\u5f00\u542f ACL \u540e\u5927\u91cf ",(0,s.jsx)(n.code,{children:"permission denied"})]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u5148\u6838\u5bf9\uff1aTopic/Group \u6388\u6743\u662f\u5426\u9f50\u5168"}),"\n",(0,s.jsx)(n.li,{children:"\u518d\u6838\u5bf9\uff1a\u6765\u6e90 IP \u662f\u5426\u547d\u4e2d\u767d\u540d\u5355"}),"\n",(0,s.jsx)(n.li,{children:"\u6700\u540e\u6838\u5bf9\uff1a\u5ba2\u6237\u7aef\u662f\u5426\u6240\u6709\u5b9e\u4f8b\u90fd\u914d\u7f6e\u4e86 AK/SK\uff08\u5c24\u5176\u662f\u7070\u5ea6\u73af\u5883\uff09"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"\u8be6\u89c1\uff1a"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\ud83d\udd12 ",(0,s.jsx)(n.a,{href:"/docs/rocketmq/security",children:"\u5b89\u5168\u4e0e ACL"})]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"\u65e5\u5fd7\u5b9a\u4f4d\u6307\u5357",children:"\u65e5\u5fd7\u5b9a\u4f4d\u6307\u5357"}),"\n",(0,s.jsx)(n.h3,{id:"\u9ed8\u8ba4\u65e5\u5fd7\u4f4d\u7f6e",children:"\u9ed8\u8ba4\u65e5\u5fd7\u4f4d\u7f6e"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"~/logs/rocketmqlogs/\n"})}),"\n",(0,s.jsx)(n.p,{children:"\u5efa\u8bae\u91cd\u70b9\u5173\u6ce8\uff1a"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"namesrv.log"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"broker.log"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"store.log"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"remoting.log"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"transaction.log"})}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"\u5e38\u7528-grep",children:"\u5e38\u7528 grep"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# Broker \u9519\u8bef\ngrep -i "error\\|exception" ~/logs/rocketmqlogs/broker.log | tail -n 200\n\n# \u7f51\u7edc/\u8fde\u63a5\ngrep -i "remoting\\|connect" ~/logs/rocketmqlogs/remoting.log | tail -n 200\n'})}),"\n",(0,s.jsx)(n.h2,{id:"\u5e38\u7528\u5e94\u6025\u64cd\u4f5c\u8c28\u614e",children:"\u5e38\u7528\u5e94\u6025\u64cd\u4f5c\uff08\u8c28\u614e\uff09"}),"\n",(0,s.jsx)(n.h3,{id:"\u91cd\u7f6e\u6d88\u8d39\u4f4d\u70b9",children:"\u91cd\u7f6e\u6d88\u8d39\u4f4d\u70b9"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# \u91cd\u7f6e\u5230 now\uff08\u8df3\u8fc7\u5806\u79ef\uff09\nsh bin/mqadmin resetOffsetByTime -n <namesrv> -g <consumerGroup> -t <topic> -s now\n\n# \u91cd\u7f6e\u5230\u6307\u5b9a\u65f6\u95f4\nsh bin/mqadmin resetOffsetByTime -n <namesrv> -g <consumerGroup> -t <topic> -s "2024-01-01#00:00:00"\n'})}),"\n",(0,s.jsx)(n.h2,{id:"\u4e0b\u4e00\u6b65",children:"\u4e0b\u4e00\u6b65"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\ud83d\udcca ",(0,s.jsx)(n.a,{href:"/docs/rocketmq/monitoring",children:"\u76d1\u63a7\u4e0e\u8fd0\u7ef4"})]}),"\n",(0,s.jsxs)(n.li,{children:["\u26a1 ",(0,s.jsx)(n.a,{href:"/docs/rocketmq/performance-optimization",children:"\u6027\u80fd\u4f18\u5316"})]}),"\n",(0,s.jsxs)(n.li,{children:["\ud83d\udd12 ",(0,s.jsx)(n.a,{href:"/docs/rocketmq/security",children:"\u5b89\u5168\u4e0e ACL"})]}),"\n"]})]})}function a(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}}}]);