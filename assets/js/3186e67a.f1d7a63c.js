"use strict";(globalThis.webpackChunkto_lib_github_io=globalThis.webpackChunkto_lib_github_io||[]).push([[32012],{48885:(n,e,r)=>{r.d(e,{R:()=>t,x:()=>s});var i=r(99378);const a={},o=i.createContext(a);function t(n){const e=i.useContext(o);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(a):n.components||a:t(n.components),i.createElement(o.Provider,{value:e},n.children)}},96445:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>c,contentTitle:()=>s,default:()=>p,frontMatter:()=>t,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"springboot/transaction","title":"\u4e8b\u52a1\u7ba1\u7406","description":"[!IMPORTANT]","source":"@site/docs/springboot/transaction.md","sourceDirName":"springboot","slug":"/springboot/transaction","permalink":"/docs/springboot/transaction","draft":false,"unlisted":false,"editUrl":"https://github.com/to-lib/to-lib.github.io/tree/main/docs/springboot/transaction.md","tags":[],"version":"current","sidebarPosition":16,"frontMatter":{"sidebar_position":16},"sidebar":"springboot","previous":{"title":"\u9879\u76ee\u7ed3\u6784\u4e0e\u914d\u7f6e","permalink":"/docs/springboot/project-structure-config"},"next":{"title":"AOP \u9762\u5411\u5207\u9762\u7f16\u7a0b","permalink":"/docs/springboot/aop"}}');var a=r(22714),o=r(48885);const t={sidebar_position:16},s="\u4e8b\u52a1\u7ba1\u7406",c={},l=[{value:"\u4ec0\u4e48\u662f\u4e8b\u52a1\uff1f",id:"\u4ec0\u4e48\u662f\u4e8b\u52a1",level:2},{value:"ACID \u7279\u6027",id:"acid-\u7279\u6027",level:3},{value:"Spring \u4e8b\u52a1\u7ba1\u7406",id:"spring-\u4e8b\u52a1\u7ba1\u7406",level:2},{value:"\u542f\u7528\u4e8b\u52a1",id:"\u542f\u7528\u4e8b\u52a1",level:3},{value:"@Transactional \u57fa\u672c\u7528\u6cd5",id:"transactional-\u57fa\u672c\u7528\u6cd5",level:3},{value:"\u7c7b\u7ea7\u522b\u4e8b\u52a1",id:"\u7c7b\u7ea7\u522b\u4e8b\u52a1",level:3},{value:"\u4e8b\u52a1\u4f20\u64ad\u884c\u4e3a",id:"\u4e8b\u52a1\u4f20\u64ad\u884c\u4e3a",level:2},{value:"\u4f20\u64ad\u884c\u4e3a\u7c7b\u578b",id:"\u4f20\u64ad\u884c\u4e3a\u7c7b\u578b",level:3},{value:"\u4f20\u64ad\u884c\u4e3a\u8be6\u89e3",id:"\u4f20\u64ad\u884c\u4e3a\u8be6\u89e3",level:3},{value:"\u4f20\u64ad\u884c\u4e3a\u5b9e\u6218\u793a\u4f8b",id:"\u4f20\u64ad\u884c\u4e3a\u5b9e\u6218\u793a\u4f8b",level:3},{value:"\u4e8b\u52a1\u9694\u79bb\u7ea7\u522b",id:"\u4e8b\u52a1\u9694\u79bb\u7ea7\u522b",level:2},{value:"\u9694\u79bb\u7ea7\u522b\u7c7b\u578b",id:"\u9694\u79bb\u7ea7\u522b\u7c7b\u578b",level:3},{value:"\u5e76\u53d1\u95ee\u9898",id:"\u5e76\u53d1\u95ee\u9898",level:3},{value:"\u9694\u79bb\u7ea7\u522b\u793a\u4f8b",id:"\u9694\u79bb\u7ea7\u522b\u793a\u4f8b",level:3},{value:"\u4e8b\u52a1\u56de\u6eda",id:"\u4e8b\u52a1\u56de\u6eda",level:2},{value:"\u9ed8\u8ba4\u56de\u6eda\u89c4\u5219",id:"\u9ed8\u8ba4\u56de\u6eda\u89c4\u5219",level:3},{value:"\u81ea\u5b9a\u4e49\u56de\u6eda\u89c4\u5219",id:"\u81ea\u5b9a\u4e49\u56de\u6eda\u89c4\u5219",level:3},{value:"\u7f16\u7a0b\u5f0f\u56de\u6eda",id:"\u7f16\u7a0b\u5f0f\u56de\u6eda",level:3},{value:"\u4e8b\u52a1\u8d85\u65f6",id:"\u4e8b\u52a1\u8d85\u65f6",level:2},{value:"\u7f16\u7a0b\u5f0f\u4e8b\u52a1",id:"\u7f16\u7a0b\u5f0f\u4e8b\u52a1",level:2},{value:"TransactionTemplate",id:"transactiontemplate",level:3},{value:"PlatformTransactionManager",id:"platformtransactionmanager",level:3},{value:"\u5206\u5e03\u5f0f\u4e8b\u52a1",id:"\u5206\u5e03\u5f0f\u4e8b\u52a1",level:2},{value:"\u4ec0\u4e48\u662f\u5206\u5e03\u5f0f\u4e8b\u52a1\uff1f",id:"\u4ec0\u4e48\u662f\u5206\u5e03\u5f0f\u4e8b\u52a1",level:3},{value:"Seata \u5206\u5e03\u5f0f\u4e8b\u52a1",id:"seata-\u5206\u5e03\u5f0f\u4e8b\u52a1",level:3},{value:"\u5e38\u89c1\u95ee\u9898\u4e0e\u6700\u4f73\u5b9e\u8df5",id:"\u5e38\u89c1\u95ee\u9898\u4e0e\u6700\u4f73\u5b9e\u8df5",level:2},{value:"1. \u4e8b\u52a1\u4e0d\u751f\u6548\u7684\u539f\u56e0",id:"1-\u4e8b\u52a1\u4e0d\u751f\u6548\u7684\u539f\u56e0",level:3},{value:"2. \u5927\u4e8b\u52a1\u95ee\u9898",id:"2-\u5927\u4e8b\u52a1\u95ee\u9898",level:3},{value:"3. \u53ea\u8bfb\u4e8b\u52a1\u4f18\u5316",id:"3-\u53ea\u8bfb\u4e8b\u52a1\u4f18\u5316",level:3},{value:"4. \u4e8b\u52a1\u6700\u4f73\u5b9e\u8df5",id:"4-\u4e8b\u52a1\u6700\u4f73\u5b9e\u8df5",level:3},{value:"\u603b\u7ed3",id:"\u603b\u7ed3",level:2}];function d(n){const e={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...n.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e.header,{children:(0,a.jsx)(e.h1,{id:"\u4e8b\u52a1\u7ba1\u7406",children:"\u4e8b\u52a1\u7ba1\u7406"})}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsxs)(e.p,{children:["[!IMPORTANT]\n",(0,a.jsx)(e.strong,{children:"\u4e8b\u52a1\u7684\u91cd\u8981\u6027"}),": \u4e8b\u52a1\u662f\u4fdd\u8bc1\u6570\u636e\u4e00\u81f4\u6027\u7684\u6838\u5fc3\u673a\u5236\u3002\u7406\u89e3\u4e8b\u52a1\u7684\u4f20\u64ad\u884c\u4e3a\u3001\u9694\u79bb\u7ea7\u522b\u548c\u56de\u6eda\u673a\u5236\u5bf9\u4e8e\u5f00\u53d1\u53ef\u9760\u7684\u5e94\u7528\u81f3\u5173\u91cd\u8981\u3002"]}),"\n"]}),"\n",(0,a.jsx)(e.h2,{id:"\u4ec0\u4e48\u662f\u4e8b\u52a1",children:"\u4ec0\u4e48\u662f\u4e8b\u52a1\uff1f"}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"\u4e8b\u52a1\uff08Transaction\uff09"})," \u662f\u4e00\u7ec4\u64cd\u4f5c\u7684\u96c6\u5408\uff0c\u8fd9\u4e9b\u64cd\u4f5c\u8981\u4e48\u5168\u90e8\u6210\u529f\uff0c\u8981\u4e48\u5168\u90e8\u5931\u8d25\uff0c\u4fdd\u8bc1\u6570\u636e\u7684\u4e00\u81f4\u6027\u3002"]}),"\n",(0,a.jsx)(e.h3,{id:"acid-\u7279\u6027",children:"ACID \u7279\u6027"}),"\n",(0,a.jsx)(e.mermaid,{value:"mindmap\n  root((ACID))\n    Atomicity\n      \u539f\u5b50\u6027\n      \u5168\u90e8\u6210\u529f\u6216\u5168\u90e8\u5931\u8d25\n      \u4e0d\u53ef\u5206\u5272\n    Consistency\n      \u4e00\u81f4\u6027\n      \u6570\u636e\u5b8c\u6574\u6027\u7ea6\u675f\n      \u4e1a\u52a1\u89c4\u5219\u6ee1\u8db3\n    Isolation\n      \u9694\u79bb\u6027\n      \u5e76\u53d1\u4e8b\u52a1\u4e92\u4e0d\u5e72\u6270\n      \u9694\u79bb\u7ea7\u522b\u63a7\u5236\n    Durability\n      \u6301\u4e45\u6027\n      \u63d0\u4ea4\u540e\u6c38\u4e45\u4fdd\u5b58\n      \u5d29\u6e83\u540e\u53ef\u6062\u590d"}),"\n",(0,a.jsx)(e.h2,{id:"spring-\u4e8b\u52a1\u7ba1\u7406",children:"Spring \u4e8b\u52a1\u7ba1\u7406"}),"\n",(0,a.jsx)(e.h3,{id:"\u542f\u7528\u4e8b\u52a1",children:"\u542f\u7528\u4e8b\u52a1"}),"\n",(0,a.jsx)(e.p,{children:"Spring Boot \u81ea\u52a8\u542f\u7528\u4e8b\u52a1\u7ba1\u7406\uff0c\u65e0\u9700\u989d\u5916\u914d\u7f6e\u3002\u5982\u9700\u624b\u52a8\u542f\u7528\uff1a"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"import org.springframework.context.annotation.Configuration;\nimport org.springframework.transaction.annotation.EnableTransactionManagement;\n\n@Configuration\n@EnableTransactionManagement\npublic class TransactionConfig {\n}\n"})}),"\n",(0,a.jsx)(e.h3,{id:"transactional-\u57fa\u672c\u7528\u6cd5",children:"@Transactional \u57fa\u672c\u7528\u6cd5"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:'import org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\n\n@Service\npublic class UserService {\n    \n    @Autowired\n    private UserRepository userRepository;\n    \n    @Autowired\n    private AccountRepository accountRepository;\n    \n    // \u65b9\u6cd5\u7ea7\u522b\u7684\u4e8b\u52a1\n    @Transactional\n    public void createUser(User user) {\n        userRepository.save(user);\n        // \u4efb\u4f55\u5f02\u5e38\u90fd\u4f1a\u5bfc\u81f4\u4e8b\u52a1\u56de\u6eda\n    }\n    \n    // \u53ea\u8bfb\u4e8b\u52a1\uff08\u6027\u80fd\u4f18\u5316\uff09\n    @Transactional(readOnly = true)\n    public User findById(Long id) {\n        return userRepository.findById(id).orElse(null);\n    }\n    \n    // \u8f6c\u8d26\u793a\u4f8b - \u4e8b\u52a1\u4fdd\u8bc1\u539f\u5b50\u6027\n    @Transactional\n    public void transfer(Long fromId, Long toId, BigDecimal amount) {\n        Account fromAccount = accountRepository.findById(fromId)\n            .orElseThrow(() -> new AccountNotFoundException("\u6e90\u8d26\u6237\u4e0d\u5b58\u5728"));\n        Account toAccount = accountRepository.findById(toId)\n            .orElseThrow(() -> new AccountNotFoundException("\u76ee\u6807\u8d26\u6237\u4e0d\u5b58\u5728"));\n        \n        // \u6263\u6b3e\n        if (fromAccount.getBalance().compareTo(amount) < 0) {\n            throw new InsufficientBalanceException("\u4f59\u989d\u4e0d\u8db3");\n        }\n        fromAccount.setBalance(fromAccount.getBalance().subtract(amount));\n        accountRepository.save(fromAccount);\n        \n        // \u52a0\u6b3e\n        toAccount.setBalance(toAccount.getBalance().add(amount));\n        accountRepository.save(toAccount);\n        \n        // \u5982\u679c\u4efb\u4f55\u4e00\u6b65\u5931\u8d25\uff0c\u6574\u4e2a\u4e8b\u52a1\u56de\u6eda\n    }\n}\n'})}),"\n",(0,a.jsx)(e.h3,{id:"\u7c7b\u7ea7\u522b\u4e8b\u52a1",children:"\u7c7b\u7ea7\u522b\u4e8b\u52a1"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"@Service\n@Transactional // \u7c7b\u4e2d\u6240\u6709 public \u65b9\u6cd5\u90fd\u6709\u4e8b\u52a1\npublic class OrderService {\n    \n    public void createOrder(Order order) {\n        // \u81ea\u52a8\u6709\u4e8b\u52a1\n    }\n    \n    @Transactional(readOnly = true) // \u65b9\u6cd5\u7ea7\u522b\u7684\u6ce8\u89e3\u4f1a\u8986\u76d6\u7c7b\u7ea7\u522b\n    public Order findById(Long id) {\n        return orderRepository.findById(id).orElse(null);\n    }\n}\n"})}),"\n",(0,a.jsx)(e.h2,{id:"\u4e8b\u52a1\u4f20\u64ad\u884c\u4e3a",children:"\u4e8b\u52a1\u4f20\u64ad\u884c\u4e3a"}),"\n",(0,a.jsx)(e.h3,{id:"\u4f20\u64ad\u884c\u4e3a\u7c7b\u578b",children:"\u4f20\u64ad\u884c\u4e3a\u7c7b\u578b"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"import org.springframework.transaction.annotation.Propagation;\n\n@Service\npublic class PropagationExamples {\n    \n    // 1. REQUIRED\uff08\u9ed8\u8ba4\uff09- \u5982\u679c\u6709\u4e8b\u52a1\u5219\u52a0\u5165\uff0c\u6ca1\u6709\u5219\u521b\u5efa\u65b0\u4e8b\u52a1\n    @Transactional(propagation = Propagation.REQUIRED)\n    public void required() {\n        // \u6700\u5e38\u7528\u7684\u4f20\u64ad\u884c\u4e3a\n    }\n    \n    // 2. REQUIRES_NEW - \u603b\u662f\u521b\u5efa\u65b0\u4e8b\u52a1\uff0c\u6302\u8d77\u5f53\u524d\u4e8b\u52a1\n    @Transactional(propagation = Propagation.REQUIRES_NEW)\n    public void requiresNew() {\n        // \u72ec\u7acb\u7684\u4e8b\u52a1\uff0c\u4e0d\u53d7\u5916\u90e8\u4e8b\u52a1\u5f71\u54cd\n    }\n    \n    // 3. SUPPORTS - \u5982\u679c\u6709\u4e8b\u52a1\u5219\u52a0\u5165\uff0c\u6ca1\u6709\u5219\u4ee5\u975e\u4e8b\u52a1\u65b9\u5f0f\u6267\u884c\n    @Transactional(propagation = Propagation.SUPPORTS)\n    public void supports() {\n        // \u53ef\u9009\u4e8b\u52a1\n    }\n    \n    // 4. NOT_SUPPORTED - \u4ee5\u975e\u4e8b\u52a1\u65b9\u5f0f\u6267\u884c\uff0c\u5982\u679c\u6709\u4e8b\u52a1\u5219\u6302\u8d77\n    @Transactional(propagation = Propagation.NOT_SUPPORTED)\n    public void notSupported() {\n        // \u5f3a\u5236\u975e\u4e8b\u52a1\n    }\n    \n    // 5. MANDATORY - \u5fc5\u987b\u5728\u4e8b\u52a1\u4e2d\u6267\u884c\uff0c\u5426\u5219\u629b\u51fa\u5f02\u5e38\n    @Transactional(propagation = Propagation.MANDATORY)\n    public void mandatory() {\n        // \u5fc5\u987b\u6709\u5916\u90e8\u4e8b\u52a1\n    }\n    \n    // 6. NEVER - \u5fc5\u987b\u5728\u975e\u4e8b\u52a1\u4e2d\u6267\u884c\uff0c\u5426\u5219\u629b\u51fa\u5f02\u5e38\n    @Transactional(propagation = Propagation.NEVER)\n    public void never() {\n        // \u4e0d\u5141\u8bb8\u4e8b\u52a1\n    }\n    \n    // 7. NESTED - \u5d4c\u5957\u4e8b\u52a1\uff08\u4fdd\u5b58\u70b9\u673a\u5236\uff09\n    @Transactional(propagation = Propagation.NESTED)\n    public void nested() {\n        // \u5d4c\u5957\u4e8b\u52a1\uff0c\u53ef\u4ee5\u72ec\u7acb\u56de\u6eda\n    }\n}\n"})}),"\n",(0,a.jsx)(e.h3,{id:"\u4f20\u64ad\u884c\u4e3a\u8be6\u89e3",children:"\u4f20\u64ad\u884c\u4e3a\u8be6\u89e3"}),"\n",(0,a.jsx)(e.mermaid,{value:"sequenceDiagram\n    participant A as \u5916\u90e8\u65b9\u6cd5\n    participant B as REQUIRED\n    participant C as REQUIRES_NEW\n    participant D as NESTED\n    \n    Note over A: \u5f00\u542f\u4e8b\u52a1T1\n    A->>B: \u8c03\u7528 REQUIRED\n    Note over B: \u52a0\u5165\u4e8b\u52a1T1\n    B--\x3e>A: \u8fd4\u56de\n    \n    A->>C: \u8c03\u7528 REQUIRES_NEW\n    Note over A: \u6302\u8d77\u4e8b\u52a1T1\n    Note over C: \u521b\u5efa\u65b0\u4e8b\u52a1T2\n    C--\x3e>A: \u8fd4\u56de\n    Note over A: \u6062\u590d\u4e8b\u52a1T1\n    \n    A->>D: \u8c03\u7528 NESTED\n    Note over D: \u521b\u5efa\u4fdd\u5b58\u70b9\n    D--\x3e>A: \u8fd4\u56de\n    \n    Note over A: \u63d0\u4ea4\u4e8b\u52a1T1"}),"\n",(0,a.jsx)(e.h3,{id:"\u4f20\u64ad\u884c\u4e3a\u5b9e\u6218\u793a\u4f8b",children:"\u4f20\u64ad\u884c\u4e3a\u5b9e\u6218\u793a\u4f8b"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:'@Service\npublic class OrderService {\n    \n    @Autowired\n    private LogService logService;\n    \n    // \u5916\u90e8\u4e8b\u52a1\n    @Transactional\n    public void createOrder(Order order) {\n        // 1. \u4fdd\u5b58\u8ba2\u5355\n        orderRepository.save(order);\n        \n        // 2. \u8bb0\u5f55\u65e5\u5fd7\uff08\u4f7f\u7528 REQUIRES_NEW\uff09\n        // \u5373\u4f7f\u8ba2\u5355\u521b\u5efa\u5931\u8d25\uff0c\u65e5\u5fd7\u4e5f\u4f1a\u4fdd\u5b58\n        logService.log("\u521b\u5efa\u8ba2\u5355: " + order.getId());\n        \n        // 3. \u53d1\u9001\u901a\u77e5\uff08\u4f7f\u7528 NOT_SUPPORTED\uff09\n        // \u4e0d\u9700\u8981\u4e8b\u52a1\uff0c\u907f\u514d\u957f\u65f6\u95f4\u6301\u6709\u8fde\u63a5\n        notificationService.sendOrderConfirmation(order);\n    }\n}\n\n@Service\npublic class LogService {\n    \n    // \u72ec\u7acb\u4e8b\u52a1\uff0c\u4e0d\u53d7\u5916\u90e8\u4e8b\u52a1\u5f71\u54cd\n    @Transactional(propagation = Propagation.REQUIRES_NEW)\n    public void log(String message) {\n        AuditLog log = new AuditLog(message, LocalDateTime.now());\n        auditLogRepository.save(log);\n        // \u5373\u4f7f\u5916\u90e8\u4e8b\u52a1\u56de\u6eda\uff0c\u8fd9\u6761\u65e5\u5fd7\u4e5f\u4f1a\u4fdd\u5b58\n    }\n}\n\n@Service\npublic class NotificationService {\n    \n    // \u975e\u4e8b\u52a1\u6267\u884c\uff0c\u907f\u514d\u5360\u7528\u6570\u636e\u5e93\u8fde\u63a5\n    @Transactional(propagation = Propagation.NOT_SUPPORTED)\n    public void sendOrderConfirmation(Order order) {\n        emailService.send(order.getEmail(), "\u8ba2\u5355\u786e\u8ba4", "...");\n        // \u53d1\u9001\u90ae\u4ef6\u4e0d\u9700\u8981\u6570\u636e\u5e93\u4e8b\u52a1\n    }\n}\n'})}),"\n",(0,a.jsx)(e.h2,{id:"\u4e8b\u52a1\u9694\u79bb\u7ea7\u522b",children:"\u4e8b\u52a1\u9694\u79bb\u7ea7\u522b"}),"\n",(0,a.jsx)(e.h3,{id:"\u9694\u79bb\u7ea7\u522b\u7c7b\u578b",children:"\u9694\u79bb\u7ea7\u522b\u7c7b\u578b"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"import org.springframework.transaction.annotation.Isolation;\n\n@Service\npublic class IsolationExamples {\n    \n    // 1. DEFAULT - \u4f7f\u7528\u6570\u636e\u5e93\u9ed8\u8ba4\u9694\u79bb\u7ea7\u522b\uff08MySQL \u9ed8\u8ba4 REPEATABLE_READ\uff09\n    @Transactional(isolation = Isolation.DEFAULT)\n    public void defaultIsolation() { }\n    \n    // 2. READ_UNCOMMITTED - \u8bfb\u672a\u63d0\u4ea4\uff08\u6700\u4f4e\u7ea7\u522b\uff0c\u53ef\u80fd\u810f\u8bfb\uff09\n    @Transactional(isolation = Isolation.READ_UNCOMMITTED)\n    public void readUncommitted() { }\n    \n    // 3. READ_COMMITTED - \u8bfb\u5df2\u63d0\u4ea4\uff08Oracle \u9ed8\u8ba4\uff09\n    @Transactional(isolation = Isolation.READ_COMMITTED)\n    public void readCommitted() { }\n    \n    // 4. REPEATABLE_READ - \u53ef\u91cd\u590d\u8bfb\uff08MySQL \u9ed8\u8ba4\uff09\n    @Transactional(isolation = Isolation.REPEATABLE_READ)\n    public void repeatableRead() { }\n    \n    // 5. SERIALIZABLE - \u4e32\u884c\u5316\uff08\u6700\u9ad8\u7ea7\u522b\uff0c\u6027\u80fd\u6700\u5dee\uff09\n    @Transactional(isolation = Isolation.SERIALIZABLE)\n    public void serializable() { }\n}\n"})}),"\n",(0,a.jsx)(e.h3,{id:"\u5e76\u53d1\u95ee\u9898",children:"\u5e76\u53d1\u95ee\u9898"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,a.jsxs)(e.table,{children:[(0,a.jsx)(e.thead,{children:(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.th,{children:"\u9694\u79bb\u7ea7\u522b"}),(0,a.jsx)(e.th,{children:"\u810f\u8bfb"}),(0,a.jsx)(e.th,{children:"\u4e0d\u53ef\u91cd\u590d\u8bfb"}),(0,a.jsx)(e.th,{children:"\u5e7b\u8bfb"})]})}),(0,a.jsxs)(e.tbody,{children:[(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"READ_UNCOMMITTED"}),(0,a.jsx)(e.td,{children:"\u2717"}),(0,a.jsx)(e.td,{children:"\u2717"}),(0,a.jsx)(e.td,{children:"\u2717"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"READ_COMMITTED"}),(0,a.jsx)(e.td,{children:"\u2713"}),(0,a.jsx)(e.td,{children:"\u2717"}),(0,a.jsx)(e.td,{children:"\u2717"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"REPEATABLE_READ"}),(0,a.jsx)(e.td,{children:"\u2713"}),(0,a.jsx)(e.td,{children:"\u2713"}),(0,a.jsx)(e.td,{children:"\u2717 (MySQL InnoDB \u2713)"})]}),(0,a.jsxs)(e.tr,{children:[(0,a.jsx)(e.td,{children:"SERIALIZABLE"}),(0,a.jsx)(e.td,{children:"\u2713"}),(0,a.jsx)(e.td,{children:"\u2713"}),(0,a.jsx)(e.td,{children:"\u2713"})]})]})]}),"\n",(0,a.jsx)(e.h3,{id:"\u9694\u79bb\u7ea7\u522b\u793a\u4f8b",children:"\u9694\u79bb\u7ea7\u522b\u793a\u4f8b"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"@Service\npublic class AccountService {\n    \n    // \u8f6c\u8d26\u4f7f\u7528 REPEATABLE_READ\uff0c\u9632\u6b62\u4e0d\u53ef\u91cd\u590d\u8bfb\n    @Transactional(isolation = Isolation.REPEATABLE_READ)\n    public void transfer(Long fromId, Long toId, BigDecimal amount) {\n        // \u591a\u6b21\u8bfb\u53d6\u8d26\u6237\u4f59\u989d\uff0c\u4fdd\u8bc1\u6570\u636e\u4e00\u81f4\n        Account account = accountRepository.findById(fromId).orElseThrow();\n        // ... \u4e1a\u52a1\u903b\u8f91\n        Account accountAgain = accountRepository.findById(fromId).orElseThrow();\n        // \u4e24\u6b21\u8bfb\u53d6\u7684\u4f59\u989d\u5e94\u8be5\u76f8\u540c\n    }\n    \n    // \u7edf\u8ba1\u62a5\u8868\u4f7f\u7528 READ_COMMITTED\uff0c\u63d0\u9ad8\u5e76\u53d1\u6027\u80fd\n    @Transactional(isolation = Isolation.READ_COMMITTED, readOnly = true)\n    public BigDecimal getTotalBalance() {\n        return accountRepository.sumAllBalances();\n    }\n}\n"})}),"\n",(0,a.jsx)(e.h2,{id:"\u4e8b\u52a1\u56de\u6eda",children:"\u4e8b\u52a1\u56de\u6eda"}),"\n",(0,a.jsx)(e.h3,{id:"\u9ed8\u8ba4\u56de\u6eda\u89c4\u5219",children:"\u9ed8\u8ba4\u56de\u6eda\u89c4\u5219"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:'@Service\npublic class RollbackExamples {\n    \n    @Transactional\n    public void defaultRollback() {\n        // \u9ed8\u8ba4\u60c5\u51b5\uff1a\n        // - RuntimeException \u548c Error \u4f1a\u56de\u6eda\n        // - \u68c0\u67e5\u5f02\u5e38\uff08Checked Exception\uff09\u4e0d\u4f1a\u56de\u6eda\n        \n        throw new RuntimeException("\u4f1a\u56de\u6eda");\n        // throw new Exception("\u4e0d\u4f1a\u56de\u6eda"); // \u9700\u8981\u663e\u5f0f\u914d\u7f6e\n    }\n}\n'})}),"\n",(0,a.jsx)(e.h3,{id:"\u81ea\u5b9a\u4e49\u56de\u6eda\u89c4\u5219",children:"\u81ea\u5b9a\u4e49\u56de\u6eda\u89c4\u5219"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:'@Service\npublic class CustomRollbackService {\n    \n    // \u6307\u5b9a\u56de\u6eda\u7684\u5f02\u5e38\u7c7b\u578b\n    @Transactional(rollbackFor = Exception.class)\n    public void rollbackForAllExceptions() throws Exception {\n        // \u6240\u6709\u5f02\u5e38\u90fd\u4f1a\u56de\u6eda\n        throw new Exception("\u4f1a\u56de\u6eda");\n    }\n    \n    // \u6307\u5b9a\u4e0d\u56de\u6eda\u7684\u5f02\u5e38\u7c7b\u578b\n    @Transactional(noRollbackFor = BusinessException.class)\n    public void noRollbackForBusinessException() {\n        // BusinessException \u4e0d\u4f1a\u5bfc\u81f4\u56de\u6eda\n        throw new BusinessException("\u4e0d\u4f1a\u56de\u6eda");\n    }\n    \n    // \u7ec4\u5408\u4f7f\u7528\n    @Transactional(\n        rollbackFor = {SQLException.class, IOException.class},\n        noRollbackFor = {BusinessException.class}\n    )\n    public void combinedRollbackRules() {\n        // SQLException \u548c IOException \u56de\u6eda\n        // BusinessException \u4e0d\u56de\u6eda\n    }\n}\n'})}),"\n",(0,a.jsx)(e.h3,{id:"\u7f16\u7a0b\u5f0f\u56de\u6eda",children:"\u7f16\u7a0b\u5f0f\u56de\u6eda"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"@Service\npublic class ProgrammaticRollbackService {\n    \n    @Transactional\n    public void manualRollback() {\n        try {\n            // \u4e1a\u52a1\u903b\u8f91\n            orderRepository.save(order);\n            \n            if (someCondition) {\n                // \u624b\u52a8\u6807\u8bb0\u4e3a\u56de\u6eda\n                TransactionAspectSupport.currentTransactionStatus()\n                    .setRollbackOnly();\n            }\n        } catch (Exception e) {\n            // \u4e5f\u53ef\u4ee5\u5728 catch \u5757\u4e2d\u6807\u8bb0\u56de\u6eda\n            TransactionAspectSupport.currentTransactionStatus()\n                .setRollbackOnly();\n            throw e;\n        }\n    }\n}\n"})}),"\n",(0,a.jsx)(e.h2,{id:"\u4e8b\u52a1\u8d85\u65f6",children:"\u4e8b\u52a1\u8d85\u65f6"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"@Service\npublic class TimeoutService {\n    \n    // \u8bbe\u7f6e\u4e8b\u52a1\u8d85\u65f6\u65f6\u95f4\uff08\u79d2\uff09\n    @Transactional(timeout = 30)\n    public void operationWithTimeout() {\n        // \u5982\u679c\u4e8b\u52a1\u6267\u884c\u8d85\u8fc7 30 \u79d2\uff0c\u4f1a\u629b\u51fa\u5f02\u5e38\u5e76\u56de\u6eda\n        // \u9002\u7528\u4e8e\u9632\u6b62\u957f\u4e8b\u52a1\u5360\u7528\u8d44\u6e90\n    }\n    \n    // \u6279\u91cf\u5904\u7406\uff0c\u8bbe\u7f6e\u8f83\u957f\u7684\u8d85\u65f6\u65f6\u95f4\n    @Transactional(timeout = 300) // 5 \u5206\u949f\n    public void batchProcess(List<Order> orders) {\n        for (Order order : orders) {\n            processOrder(order);\n        }\n    }\n}\n"})}),"\n",(0,a.jsx)(e.h2,{id:"\u7f16\u7a0b\u5f0f\u4e8b\u52a1",children:"\u7f16\u7a0b\u5f0f\u4e8b\u52a1"}),"\n",(0,a.jsx)(e.h3,{id:"transactiontemplate",children:"TransactionTemplate"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"import org.springframework.transaction.support.TransactionTemplate;\n\n@Service\npublic class ProgrammaticTransactionService {\n    \n    @Autowired\n    private TransactionTemplate transactionTemplate;\n    \n    public void executeInTransaction() {\n        transactionTemplate.execute(status -> {\n            try {\n                // \u4e8b\u52a1\u5185\u7684\u64cd\u4f5c\n                userRepository.save(user);\n                accountRepository.save(account);\n                return null;\n            } catch (Exception e) {\n                // \u6807\u8bb0\u56de\u6eda\n                status.setRollbackOnly();\n                throw e;\n            }\n        });\n    }\n    \n    // \u5e26\u8fd4\u56de\u503c\u7684\u4e8b\u52a1\n    public User createUserWithTransaction(User user) {\n        return transactionTemplate.execute(status -> {\n            return userRepository.save(user);\n        });\n    }\n    \n    // \u914d\u7f6e\u4e8b\u52a1\u5c5e\u6027\n    public void customTransaction() {\n        TransactionTemplate template = new TransactionTemplate(transactionManager);\n        template.setIsolation(TransactionDefinition.ISOLATION_READ_COMMITTED);\n        template.setPropagationBehavior(TransactionDefinition.PROPAGATION_REQUIRES_NEW);\n        template.setTimeout(30);\n        \n        template.execute(status -> {\n            // \u81ea\u5b9a\u4e49\u4e8b\u52a1\u64cd\u4f5c\n            return null;\n        });\n    }\n}\n"})}),"\n",(0,a.jsx)(e.h3,{id:"platformtransactionmanager",children:"PlatformTransactionManager"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"import org.springframework.transaction.PlatformTransactionManager;\nimport org.springframework.transaction.TransactionDefinition;\nimport org.springframework.transaction.TransactionStatus;\nimport org.springframework.transaction.support.DefaultTransactionDefinition;\n\n@Service\npublic class LowLevelTransactionService {\n    \n    @Autowired\n    private PlatformTransactionManager transactionManager;\n    \n    public void manualTransaction() {\n        // \u5b9a\u4e49\u4e8b\u52a1\u5c5e\u6027\n        DefaultTransactionDefinition def = new DefaultTransactionDefinition();\n        def.setIsolationLevel(TransactionDefinition.ISOLATION_READ_COMMITTED);\n        def.setPropagationBehavior(TransactionDefinition.PROPAGATION_REQUIRED);\n        \n        // \u5f00\u542f\u4e8b\u52a1\n        TransactionStatus status = transactionManager.getTransaction(def);\n        \n        try {\n            // \u6267\u884c\u4e1a\u52a1\u903b\u8f91\n            userRepository.save(user);\n            accountRepository.save(account);\n            \n            // \u63d0\u4ea4\u4e8b\u52a1\n            transactionManager.commit(status);\n        } catch (Exception e) {\n            // \u56de\u6eda\u4e8b\u52a1\n            transactionManager.rollback(status);\n            throw e;\n        }\n    }\n}\n"})}),"\n",(0,a.jsx)(e.h2,{id:"\u5206\u5e03\u5f0f\u4e8b\u52a1",children:"\u5206\u5e03\u5f0f\u4e8b\u52a1"}),"\n",(0,a.jsx)(e.h3,{id:"\u4ec0\u4e48\u662f\u5206\u5e03\u5f0f\u4e8b\u52a1",children:"\u4ec0\u4e48\u662f\u5206\u5e03\u5f0f\u4e8b\u52a1\uff1f"}),"\n",(0,a.jsx)(e.p,{children:"\u5728\u5fae\u670d\u52a1\u67b6\u6784\u4e2d\uff0c\u4e00\u4e2a\u4e1a\u52a1\u53ef\u80fd\u6d89\u53ca\u591a\u4e2a\u670d\u52a1\u548c\u6570\u636e\u5e93\uff0c\u9700\u8981\u4fdd\u8bc1\u591a\u4e2a\u6570\u636e\u5e93\u7684\u64cd\u4f5c\u540c\u65f6\u6210\u529f\u6216\u5931\u8d25\u3002"}),"\n",(0,a.jsx)(e.mermaid,{value:"graph TB\n    Client[\u5ba2\u6237\u7aef] --\x3e OrderService[\u8ba2\u5355\u670d\u52a1]\n    OrderService --\x3e OrderDB[(\u8ba2\u5355\u6570\u636e\u5e93)]\n    OrderService --\x3e InventoryService[\u5e93\u5b58\u670d\u52a1]\n    OrderService --\x3e PaymentService[\u652f\u4ed8\u670d\u52a1]\n    InventoryService --\x3e InventoryDB[(\u5e93\u5b58\u6570\u636e\u5e93)]\n    PaymentService --\x3e PaymentDB[(\u652f\u4ed8\u6570\u636e\u5e93)]\n    \n    style OrderService fill:#e1f5ff\n    style InventoryService fill:#fff9c4\n    style PaymentService fill:#c8e6c9"}),"\n",(0,a.jsx)(e.h3,{id:"seata-\u5206\u5e03\u5f0f\u4e8b\u52a1",children:"Seata \u5206\u5e03\u5f0f\u4e8b\u52a1"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-xml",children:"<dependency>\n    <groupId>com.alibaba.cloud</groupId>\n    <artifactId>spring-cloud-starter-alibaba-seata</artifactId>\n</dependency>\n"})}),"\n",(0,a.jsx)(e.p,{children:"\u914d\u7f6e\uff1a"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-yaml",children:"seata:\n  enabled: true\n  application-id: order-service\n  tx-service-group: my-tx-group\n  service:\n    vgroup-mapping:\n      my-tx-group: default\n    grouplist:\n      default: 127.0.0.1:8091\n"})}),"\n",(0,a.jsx)(e.p,{children:"\u4f7f\u7528\uff1a"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:'import io.seata.spring.annotation.GlobalTransactional;\n\n@Service\npublic class OrderService {\n    \n    @Autowired\n    private InventoryFeignClient inventoryClient;\n    \n    @Autowired\n    private PaymentFeignClient paymentClient;\n    \n    @GlobalTransactional(name = "create-order", rollbackFor = Exception.class)\n    public void createOrder(Order order) {\n        // 1. \u521b\u5efa\u8ba2\u5355\n        orderRepository.save(order);\n        \n        // 2. \u6263\u51cf\u5e93\u5b58\uff08\u8c03\u7528\u5e93\u5b58\u670d\u52a1\uff09\n        inventoryClient.deductInventory(order.getProductId(), order.getQuantity());\n        \n        // 3. \u6263\u6b3e\uff08\u8c03\u7528\u652f\u4ed8\u670d\u52a1\uff09\n        paymentClient.deductBalance(order.getUserId(), order.getAmount());\n        \n        // \u4efb\u4f55\u4e00\u6b65\u5931\u8d25\uff0c\u6240\u6709\u670d\u52a1\u90fd\u4f1a\u56de\u6eda\n    }\n}\n'})}),"\n",(0,a.jsx)(e.h2,{id:"\u5e38\u89c1\u95ee\u9898\u4e0e\u6700\u4f73\u5b9e\u8df5",children:"\u5e38\u89c1\u95ee\u9898\u4e0e\u6700\u4f73\u5b9e\u8df5"}),"\n",(0,a.jsx)(e.h3,{id:"1-\u4e8b\u52a1\u4e0d\u751f\u6548\u7684\u539f\u56e0",children:"1. \u4e8b\u52a1\u4e0d\u751f\u6548\u7684\u539f\u56e0"}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsxs)(e.p,{children:["[!WARNING]\n",(0,a.jsx)(e.strong,{children:"\u4e8b\u52a1\u5931\u6548\u7684\u5e38\u89c1\u573a\u666f"}),"\uff1a"]}),"\n"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"@Service\npublic class TransactionIssues {\n    \n    @Autowired\n    private UserRepository userRepository;\n    \n    // \u274c \u95ee\u98981\uff1a\u65b9\u6cd5\u4e0d\u662f public\n    @Transactional\n    private void privateMethod() {\n        // \u4e8b\u52a1\u4e0d\u751f\u6548\n    }\n    \n    // \u274c \u95ee\u98982\uff1a\u65b9\u6cd5\u662f final\n    @Transactional\n    public final void finalMethod() {\n        // \u4e8b\u52a1\u4e0d\u751f\u6548\uff08JDK \u52a8\u6001\u4ee3\u7406\uff09\n    }\n    \n    // \u274c \u95ee\u98983\uff1a\u81ea\u8c03\u7528\n    public void outerMethod() {\n        this.innerMethod(); // \u4e8b\u52a1\u4e0d\u751f\u6548\n    }\n    \n    @Transactional\n    public void innerMethod() {\n        userRepository.save(user);\n    }\n    \n    // \u2713 \u89e3\u51b3\u65b9\u68481\uff1a\u6ce8\u5165\u81ea\u5df1\n    @Autowired\n    private UserService self;\n    \n    public void outerMethodFixed() {\n        self.innerMethod(); // \u901a\u8fc7\u4ee3\u7406\u8c03\u7528\uff0c\u4e8b\u52a1\u751f\u6548\n    }\n    \n    // \u2713 \u89e3\u51b3\u65b9\u68482\uff1a\u62c6\u5206\u5230\u4e0d\u540c\u7684\u7c7b\n    @Autowired\n    private UserTransactionService transactionService;\n    \n    public void outerMethod2() {\n        transactionService.innerMethod(); // \u4e8b\u52a1\u751f\u6548\n    }\n    \n    // \u274c \u95ee\u98984\uff1a\u5f02\u5e38\u88ab\u6355\u83b7\n    @Transactional\n    public void catchException() {\n        try {\n            userRepository.save(user);\n            throw new RuntimeException();\n        } catch (Exception e) {\n            // \u5f02\u5e38\u88ab\u6355\u83b7\uff0c\u4e8b\u52a1\u4e0d\u56de\u6eda\n        }\n    }\n    \n    // \u2713 \u89e3\u51b3\u65b9\u6848\uff1a\u624b\u52a8\u6807\u8bb0\u56de\u6eda\n    @Transactional\n    public void catchExceptionFixed() {\n        try {\n            userRepository.save(user);\n            throw new RuntimeException();\n        } catch (Exception e) {\n            TransactionAspectSupport.currentTransactionStatus()\n                .setRollbackOnly();\n            // \u8bb0\u5f55\u65e5\u5fd7\u7b49\n        }\n    }\n}\n"})}),"\n",(0,a.jsx)(e.h3,{id:"2-\u5927\u4e8b\u52a1\u95ee\u9898",children:"2. \u5927\u4e8b\u52a1\u95ee\u9898"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"// \u274c \u907f\u514d\uff1a\u5927\u4e8b\u52a1\n@Transactional\npublic void bigTransaction() {\n    // 1. \u67e5\u8be2\u5927\u91cf\u6570\u636e\n    List<Order> orders = orderRepository.findAll(); // \u53ef\u80fd\u51e0\u5341\u4e07\u6761\n    \n    // 2. \u590d\u6742\u8ba1\u7b97\n    for (Order order : orders) {\n        calculateOrderStatistics(order); // \u8017\u65f6\u64cd\u4f5c\n    }\n    \n    // 3. \u5916\u90e8\u8c03\u7528\n    emailService.sendEmails(orders); // \u8c03\u7528\u5916\u90e8\u670d\u52a1\n    \n    // 4. \u6279\u91cf\u66f4\u65b0\n    orderRepository.saveAll(orders);\n    \n    // \u95ee\u9898\uff1a\u4e8b\u52a1\u65f6\u95f4\u8fc7\u957f\uff0c\u5360\u7528\u6570\u636e\u5e93\u8fde\u63a5\uff0c\u53ef\u80fd\u5bfc\u81f4\u9501\u7b49\u5f85\n}\n\n// \u2713 \u4f18\u5316\uff1a\u62c6\u5206\u4e8b\u52a1\npublic void optimizedTransaction() {\n    // 1. \u67e5\u8be2\u6570\u636e\uff08\u53ea\u8bfb\uff0c\u4e0d\u9700\u8981\u4e8b\u52a1\u6216\u4f7f\u7528\u77ed\u4e8b\u52a1\uff09\n    List<Order> orders = findOrders();\n    \n    // 2. \u590d\u6742\u8ba1\u7b97\uff08\u4e0d\u9700\u8981\u4e8b\u52a1\uff09\n    Map<Long, Statistics> stats = new HashMap<>();\n    for (Order order : orders) {\n        stats.put(order.getId(), calculateOrderStatistics(order));\n    }\n    \n    // 3. \u5916\u90e8\u8c03\u7528\uff08\u4e0d\u9700\u8981\u4e8b\u52a1\uff09\n    emailService.sendEmails(orders);\n    \n    // 4. \u6279\u91cf\u66f4\u65b0\uff08\u4f7f\u7528\u77ed\u4e8b\u52a1\uff09\n    updateOrdersInBatches(orders, stats);\n}\n\n@Transactional\npublic void updateOrdersInBatches(List<Order> orders, Map<Long, Statistics> stats) {\n    // \u53ea\u5728\u771f\u6b63\u9700\u8981\u5199\u6570\u636e\u5e93\u65f6\u5f00\u542f\u4e8b\u52a1\n    for (Order order : orders) {\n        order.setStatistics(stats.get(order.getId()));\n    }\n    orderRepository.saveAll(orders);\n}\n"})}),"\n",(0,a.jsx)(e.h3,{id:"3-\u53ea\u8bfb\u4e8b\u52a1\u4f18\u5316",children:"3. \u53ea\u8bfb\u4e8b\u52a1\u4f18\u5316"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-java",children:"@Service\npublic class QueryService {\n    \n    // \u2713 \u67e5\u8be2\u4f7f\u7528\u53ea\u8bfb\u4e8b\u52a1\n    @Transactional(readOnly = true)\n    public List<User> findAllUsers() {\n        return userRepository.findAll();\n        // \u4f18\u70b9\uff1a\n        // 1. \u63d0\u793a\u6570\u636e\u5e93\u4f18\u5316\u53ea\u8bfb\u64cd\u4f5c\n        // 2. Hibernate \u8df3\u8fc7\u810f\u68c0\u67e5\n        // 3. \u67d0\u4e9b\u6570\u636e\u5e93\u53ef\u4ee5\u9009\u62e9\u53ea\u8bfb\u4ece\u5e93\n    }\n    \n    // \u2713 \u5927\u91cf\u67e5\u8be2\u53ef\u4ee5\u4e0d\u4f7f\u7528\u4e8b\u52a1\n    public List<User> findAllUsersNoTransaction() {\n        return userRepository.findAll();\n        // \u9002\u7528\u4e8e\u7edf\u8ba1\u62a5\u8868\u7b49\u7eaf\u67e5\u8be2\u573a\u666f\n    }\n}\n"})}),"\n",(0,a.jsx)(e.h3,{id:"4-\u4e8b\u52a1\u6700\u4f73\u5b9e\u8df5",children:"4. \u4e8b\u52a1\u6700\u4f73\u5b9e\u8df5"}),"\n",(0,a.jsxs)(e.blockquote,{children:["\n",(0,a.jsxs)(e.p,{children:["[!TIP]\n",(0,a.jsx)(e.strong,{children:"\u4e8b\u52a1\u6700\u4f73\u5b9e\u8df5"}),"\uff1a"]}),"\n",(0,a.jsxs)(e.ol,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"\u4fdd\u6301\u4e8b\u52a1\u77ed\u5c0f"})," - \u53ea\u5728\u5fc5\u8981\u65f6\u5f00\u542f\u4e8b\u52a1\uff0c\u5c3d\u5feb\u63d0\u4ea4"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"\u53ea\u8bfb\u4e8b\u52a1"})," - \u67e5\u8be2\u64cd\u4f5c\u4f7f\u7528 readOnly = true"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"\u907f\u514d\u5927\u4e8b\u52a1"})," - \u62c6\u5206\u957f\u4e8b\u52a1\uff0c\u51cf\u5c11\u9501\u7b49\u5f85"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"\u6b63\u786e\u7684\u4f20\u64ad\u884c\u4e3a"})," - \u7406\u89e3\u5e76\u6b63\u786e\u4f7f\u7528\u4f20\u64ad\u884c\u4e3a"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"\u5f02\u5e38\u5904\u7406"})," - \u660e\u786e\u54ea\u4e9b\u5f02\u5e38\u9700\u8981\u56de\u6eda"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"\u907f\u514d\u81ea\u8c03\u7528"})," - \u901a\u8fc7\u5176\u4ed6 Bean \u8c03\u7528\u4e8b\u52a1\u65b9\u6cd5"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"\u76d1\u63a7\u4e8b\u52a1"})," - \u76d1\u63a7\u4e8b\u52a1\u6267\u884c\u65f6\u95f4\u548c\u56de\u6eda\u7387"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(e.h2,{id:"\u603b\u7ed3",children:"\u603b\u7ed3"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"@Transactional"})," - \u58f0\u660e\u5f0f\u4e8b\u52a1\uff0c\u6700\u5e38\u7528\u7684\u65b9\u5f0f"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"\u4f20\u64ad\u884c\u4e3a"})," - 7\u79cd\u4f20\u64ad\u884c\u4e3a\uff0c\u63a7\u5236\u4e8b\u52a1\u8fb9\u754c"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"\u9694\u79bb\u7ea7\u522b"})," - 4\u79cd\u9694\u79bb\u7ea7\u522b\uff0c\u5e73\u8861\u4e00\u81f4\u6027\u548c\u6027\u80fd"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"\u56de\u6eda\u89c4\u5219"})," - \u81ea\u5b9a\u4e49\u5f02\u5e38\u56de\u6eda\u89c4\u5219"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"\u7f16\u7a0b\u5f0f\u4e8b\u52a1"})," - TransactionTemplate \u548c PlatformTransactionManager"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"\u5206\u5e03\u5f0f\u4e8b\u52a1"})," - Seata \u7b49\u5206\u5e03\u5f0f\u4e8b\u52a1\u89e3\u51b3\u65b9\u6848"]}),"\n"]}),"\n",(0,a.jsxs)(e.p,{children:["\u4e0b\u4e00\u6b65\u5b66\u4e60 ",(0,a.jsx)(e.a,{href:"/docs/springboot/async",children:"\u5f02\u6b65\u5904\u7406"}),"\u3002"]})]})}function p(n={}){const{wrapper:e}={...(0,o.R)(),...n.components};return e?(0,a.jsx)(e,{...n,children:(0,a.jsx)(d,{...n})}):d(n)}}}]);