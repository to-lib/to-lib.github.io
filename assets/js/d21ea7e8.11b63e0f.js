"use strict";(globalThis.webpackChunkto_lib_github_io=globalThis.webpackChunkto_lib_github_io||[]).push([[46864],{48885:(n,e,t)=>{t.d(e,{R:()=>o,x:()=>i});var r=t(99378);const s={},c=r.createContext(s);function o(n){const e=r.useContext(c);return r.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function i(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:o(n.components),r.createElement(c.Provider,{value:e},n.children)}},63940:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>d,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"react/state-management","title":"\u72b6\u6001\u7ba1\u7406","description":"[!TIP]","source":"@site/docs/react/state-management.md","sourceDirName":"react","slug":"/react/state-management","permalink":"/docs/react/state-management","draft":false,"unlisted":false,"editUrl":"https://github.com/to-lib/to-lib.github.io/tree/main/docs/react/state-management.md","tags":[],"version":"current","sidebarPosition":21,"frontMatter":{"sidebar_position":21,"title":"\u72b6\u6001\u7ba1\u7406"},"sidebar":"react","previous":{"title":"React Router","permalink":"/docs/react/react-router"},"next":{"title":"TypeScript \u4e0e React","permalink":"/docs/react/typescript"}}');var s=t(22714),c=t(48885);const o={sidebar_position:21,title:"\u72b6\u6001\u7ba1\u7406"},i="React \u72b6\u6001\u7ba1\u7406",d={},l=[{value:"\ud83d\udcca \u72b6\u6001\u7ba1\u7406\u65b9\u6848\u5bf9\u6bd4",id:"-\u72b6\u6001\u7ba1\u7406\u65b9\u6848\u5bf9\u6bd4",level:2},{value:"\ud83c\udfaf Context API",id:"-context-api",level:2},{value:"\u57fa\u7840\u7528\u6cd5",id:"\u57fa\u7840\u7528\u6cd5",level:3},{value:"\ud83d\ude80 Zustand\uff08\u63a8\u8350\uff09",id:"-zustand\u63a8\u8350",level:2},{value:"\u5b89\u88c5",id:"\u5b89\u88c5",level:3},{value:"\u57fa\u7840\u7528\u6cd5",id:"\u57fa\u7840\u7528\u6cd5-1",level:3},{value:"\u9ad8\u7ea7\u7528\u6cd5",id:"\u9ad8\u7ea7\u7528\u6cd5",level:3},{value:"\ud83d\udd27 Redux Toolkit\uff08\u4f20\u7edf\u5927\u578b\u5e94\u7528\uff09",id:"-redux-toolkit\u4f20\u7edf\u5927\u578b\u5e94\u7528",level:2},{value:"\u5b89\u88c5",id:"\u5b89\u88c5-1",level:3},{value:"\u57fa\u7840\u914d\u7f6e",id:"\u57fa\u7840\u914d\u7f6e",level:3},{value:"\u269b\ufe0f Jotai\uff08\u539f\u5b50\u5316\u72b6\u6001\uff09",id:"\ufe0f-jotai\u539f\u5b50\u5316\u72b6\u6001",level:2},{value:"\u5b89\u88c5",id:"\u5b89\u88c5-2",level:3},{value:"\u57fa\u7840\u7528\u6cd5",id:"\u57fa\u7840\u7528\u6cd5-2",level:3},{value:"\ud83d\udca1 \u6700\u4f73\u5b9e\u8df5",id:"-\u6700\u4f73\u5b9e\u8df5",level:2},{value:"1. \u9009\u62e9\u5408\u9002\u7684\u65b9\u6848",id:"1-\u9009\u62e9\u5408\u9002\u7684\u65b9\u6848",level:3},{value:"2. \u907f\u514d\u8fc7\u5ea6\u4f7f\u7528\u5168\u5c40\u72b6\u6001",id:"2-\u907f\u514d\u8fc7\u5ea6\u4f7f\u7528\u5168\u5c40\u72b6\u6001",level:3}];function a(n){const e={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,c.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"react-\u72b6\u6001\u7ba1\u7406",children:"React \u72b6\u6001\u7ba1\u7406"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"[!TIP]\n\u72b6\u6001\u7ba1\u7406\u662f React \u5e94\u7528\u7684\u6838\u5fc3\u3002\u672c\u6587\u5bf9\u6bd4\u591a\u79cd\u72b6\u6001\u7ba1\u7406\u65b9\u6848\uff0c\u5e2e\u52a9\u4f60\u9009\u62e9\u6700\u9002\u5408\u7684\u89e3\u51b3\u65b9\u6848\u3002"}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"-\u72b6\u6001\u7ba1\u7406\u65b9\u6848\u5bf9\u6bd4",children:"\ud83d\udcca \u72b6\u6001\u7ba1\u7406\u65b9\u6848\u5bf9\u6bd4"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"\u65b9\u6848"}),(0,s.jsx)(e.th,{children:"\u9002\u7528\u573a\u666f"}),(0,s.jsx)(e.th,{children:"\u5b66\u4e60\u66f2\u7ebf"}),(0,s.jsx)(e.th,{children:"\u6027\u80fd"}),(0,s.jsx)(e.th,{children:"\u63a8\u8350\u5ea6"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"useState"})}),(0,s.jsx)(e.td,{children:"\u7ec4\u4ef6\u5185\u90e8\u72b6\u6001"}),(0,s.jsx)(e.td,{children:"\u4f4e"}),(0,s.jsx)(e.td,{children:"\u9ad8"}),(0,s.jsx)(e.td,{children:"\u2b50\u2b50\u2b50\u2b50\u2b50"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"Context"})}),(0,s.jsx)(e.td,{children:"\u4e2d\u5c0f\u578b\u5e94\u7528"}),(0,s.jsx)(e.td,{children:"\u4f4e"}),(0,s.jsx)(e.td,{children:"\u4e2d"}),(0,s.jsx)(e.td,{children:"\u2b50\u2b50\u2b50\u2b50"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"Zustand"})}),(0,s.jsx)(e.td,{children:"\u4e2d\u5927\u578b\u5e94\u7528"}),(0,s.jsx)(e.td,{children:"\u4f4e"}),(0,s.jsx)(e.td,{children:"\u9ad8"}),(0,s.jsx)(e.td,{children:"\u2b50\u2b50\u2b50\u2b50\u2b50"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"Redux"})}),(0,s.jsx)(e.td,{children:"\u5927\u578b\u5e94\u7528"}),(0,s.jsx)(e.td,{children:"\u9ad8"}),(0,s.jsx)(e.td,{children:"\u4e2d"}),(0,s.jsx)(e.td,{children:"\u2b50\u2b50\u2b50"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"Jotai"})}),(0,s.jsx)(e.td,{children:"\u539f\u5b50\u5316\u72b6\u6001"}),(0,s.jsx)(e.td,{children:"\u4e2d"}),(0,s.jsx)(e.td,{children:"\u9ad8"}),(0,s.jsx)(e.td,{children:"\u2b50\u2b50\u2b50\u2b50"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"Recoil"})}),(0,s.jsx)(e.td,{children:"\u590d\u6742\u72b6\u6001\u56fe"}),(0,s.jsx)(e.td,{children:"\u4e2d"}),(0,s.jsx)(e.td,{children:"\u9ad8"}),(0,s.jsx)(e.td,{children:"\u2b50\u2b50\u2b50"})]})]})]}),"\n",(0,s.jsx)(e.h2,{id:"-context-api",children:"\ud83c\udfaf Context API"}),"\n",(0,s.jsx)(e.h3,{id:"\u57fa\u7840\u7528\u6cd5",children:"\u57fa\u7840\u7528\u6cd5"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-jsx",children:'import { createContext, useContext, useState } from "react";\n\n// \u521b\u5efa Context\nconst ThemeContext = createContext();\n\n// Provider \u7ec4\u4ef6\nfunction ThemeProvider({ children }) {\n  const [theme, setTheme] = useState("light");\n\n  const toggleTheme = () => {\n    setTheme((prev) => (prev === "light" ? "dark" : "light"));\n  };\n\n  return (\n    <ThemeContext.Provider value={{ theme, toggleTheme }}>\n      {children}\n    </ThemeContext.Provider>\n  );\n}\n\n// \u4f7f\u7528\nfunction App() {\n  return (\n    <ThemeProvider>\n      <Header />\n      <Main />\n    </ThemeProvider>\n  );\n}\n\nfunction Header() {\n  const { theme, toggleTheme } = useContext(ThemeContext);\n\n  return (\n    <header className={theme}>\n      <button onClick={toggleTheme}>\u5207\u6362\u4e3b\u9898</button>\n    </header>\n  );\n}\n'})}),"\n",(0,s.jsx)(e.h2,{id:"-zustand\u63a8\u8350",children:"\ud83d\ude80 Zustand\uff08\u63a8\u8350\uff09"}),"\n",(0,s.jsx)(e.h3,{id:"\u5b89\u88c5",children:"\u5b89\u88c5"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"npm install zustand\n"})}),"\n",(0,s.jsx)(e.h3,{id:"\u57fa\u7840\u7528\u6cd5-1",children:"\u57fa\u7840\u7528\u6cd5"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-jsx",children:'import { create } from "zustand";\n\n// \u521b\u5efa store\nconst useStore = create((set) => ({\n  count: 0,\n  increment: () => set((state) => ({ count: state.count + 1 })),\n  decrement: () => set((state) => ({ count: state.count - 1 })),\n  reset: () => set({ count: 0 }),\n}));\n\n// \u4f7f\u7528\nfunction Counter() {\n  const { count, increment, decrement, reset } = useStore();\n\n  return (\n    <div>\n      <h1>{count}</h1>\n      <button onClick={increment}>+</button>\n      <button onClick={decrement}>-</button>\n      <button onClick={reset}>Reset</button>\n    </div>\n  );\n}\n'})}),"\n",(0,s.jsx)(e.h3,{id:"\u9ad8\u7ea7\u7528\u6cd5",children:"\u9ad8\u7ea7\u7528\u6cd5"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-jsx",children:"const useUserStore = create((set, get) => ({\n  user: null,\n  loading: false,\n  error: null,\n\n  // \u5f02\u6b65 action\n  fetchUser: async (id) => {\n    set({ loading: true, error: null });\n    try {\n      const res = await fetch(`/api/users/${id}`);\n      const user = await res.json();\n      set({ user, loading: false });\n    } catch (error) {\n      set({ error: error.message, loading: false });\n    }\n  },\n\n  // \u8bbf\u95ee\u5176\u4ed6 slice\n  updateProfile: (data) => {\n    const currentUser = get().user;\n    set({ user: { ...currentUser, ...data } });\n  },\n}));\n"})}),"\n",(0,s.jsx)(e.h2,{id:"-redux-toolkit\u4f20\u7edf\u5927\u578b\u5e94\u7528",children:"\ud83d\udd27 Redux Toolkit\uff08\u4f20\u7edf\u5927\u578b\u5e94\u7528\uff09"}),"\n",(0,s.jsx)(e.h3,{id:"\u5b89\u88c5-1",children:"\u5b89\u88c5"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"npm install @reduxjs/toolkit react-redux\n"})}),"\n",(0,s.jsx)(e.h3,{id:"\u57fa\u7840\u914d\u7f6e",children:"\u57fa\u7840\u914d\u7f6e"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-jsx",children:'import { configureStore, createSlice } from "@reduxjs/toolkit";\nimport { Provider, useSelector, useDispatch } from "react-redux";\n\n// \u521b\u5efa slice\nconst counterSlice = createSlice({\n  name: "counter",\n  initialState: { value: 0 },\n  reducers: {\n    increment: (state) => {\n      state.value += 1;\n    },\n    decrement: (state) => {\n      state.value -= 1;\n    },\n    incrementByAmount: (state, action) => {\n      state.value += action.payload;\n    },\n  },\n});\n\nexport const { increment, decrement, incrementByAmount } = counterSlice.actions;\n\n// \u914d\u7f6e store\nconst store = configureStore({\n  reducer: {\n    counter: counterSlice.reducer,\n  },\n});\n\n// \u63d0\u4f9b store\nfunction App() {\n  return (\n    <Provider store={store}>\n      <Counter />\n    </Provider>\n  );\n}\n\n// \u4f7f\u7528\nfunction Counter() {\n  const count = useSelector((state) => state.counter.value);\n  const dispatch = useDispatch();\n\n  return (\n    <div>\n      <h1>{count}</h1>\n      <button onClick={() => dispatch(increment())}>+</button>\n      <button onClick={() => dispatch(decrement())}>-</button>\n      <button onClick={() => dispatch(incrementByAmount(5))}>+5</button>\n    </div>\n  );\n}\n'})}),"\n",(0,s.jsx)(e.h2,{id:"\ufe0f-jotai\u539f\u5b50\u5316\u72b6\u6001",children:"\u269b\ufe0f Jotai\uff08\u539f\u5b50\u5316\u72b6\u6001\uff09"}),"\n",(0,s.jsx)(e.h3,{id:"\u5b89\u88c5-2",children:"\u5b89\u88c5"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"npm install jotai\n"})}),"\n",(0,s.jsx)(e.h3,{id:"\u57fa\u7840\u7528\u6cd5-2",children:"\u57fa\u7840\u7528\u6cd5"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-jsx",children:'import { atom, useAtom } from "jotai";\n\n// \u521b\u5efa\u539f\u5b50\nconst countAtom = atom(0);\nconst doubleAtom = atom((get) => get(countAtom) * 2);\n\n// \u4f7f\u7528\nfunction Counter() {\n  const [count, setCount] = useAtom(countAtom);\n  const [double] = useAtom(doubleAtom);\n\n  return (\n    <div>\n      <p>Count: {count}</p>\n      <p>Double: {double}</p>\n      <button onClick={() => setCount((c) => c + 1)}>+</button>\n    </div>\n  );\n}\n'})}),"\n",(0,s.jsx)(e.h2,{id:"-\u6700\u4f73\u5b9e\u8df5",children:"\ud83d\udca1 \u6700\u4f73\u5b9e\u8df5"}),"\n",(0,s.jsx)(e.h3,{id:"1-\u9009\u62e9\u5408\u9002\u7684\u65b9\u6848",children:"1. \u9009\u62e9\u5408\u9002\u7684\u65b9\u6848"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-jsx",children:"// \u2713 \u7b80\u5355\u72b6\u6001 - useState\nfunction Component() {\n  const [open, setOpen] = useState(false);\n  return <Modal open={open} onClose={() => setOpen(false)} />;\n}\n\n// \u2713 \u4e2d\u5c0f\u578b\u5e94\u7528 - Context\n<ThemeProvider>\n  <App />\n</ThemeProvider>;\n\n// \u2713 \u5927\u578b\u5e94\u7528 - Zustand/Redux\nconst useAppStore = create((set) => ({\n  // \u5168\u5c40\u72b6\u6001\n}));\n"})}),"\n",(0,s.jsx)(e.h3,{id:"2-\u907f\u514d\u8fc7\u5ea6\u4f7f\u7528\u5168\u5c40\u72b6\u6001",children:"2. \u907f\u514d\u8fc7\u5ea6\u4f7f\u7528\u5168\u5c40\u72b6\u6001"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-jsx",children:'// \u2717 \u4e0d\u597d\uff1a\u6240\u6709\u72b6\u6001\u90fd\u653e\u5168\u5c40\nconst useStore = create(() => ({\n  modalOpen: false,\n  inputValue: "",\n  // ...\u592a\u591a\u5c40\u90e8\u72b6\u6001\n}));\n\n// \u2713 \u597d\uff1a\u53ea\u628a\u771f\u6b63\u5168\u5c40\u7684\u72b6\u6001\u653e\u5168\u5c40\nconst useAuthStore = create(() => ({\n  user: null,\n  token: null,\n}));\n\n// \u5c40\u90e8\u72b6\u6001\u7528 useState\nfunction Modal() {\n  const [open, setOpen] = useState(false);\n  // ...\n}\n'})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"\u4e0b\u4e00\u6b65"}),"\uff1a\u5b66\u4e60 ",(0,s.jsx)(e.a,{href:"/docs/react/typescript",children:"TypeScript"})," \u589e\u5f3a\u7c7b\u578b\u5b89\u5168\uff0c\u6216\u67e5\u770b ",(0,s.jsx)(e.a,{href:"/docs/react/testing",children:"\u6d4b\u8bd5"})," \u4fdd\u8bc1\u4ee3\u7801\u8d28\u91cf\u3002"]})]})}function u(n={}){const{wrapper:e}={...(0,c.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(a,{...n})}):a(n)}}}]);