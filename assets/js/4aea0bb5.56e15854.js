"use strict";(globalThis.webpackChunkto_lib_github_io=globalThis.webpackChunkto_lib_github_io||[]).push([[77689],{48885:(e,n,i)=>{i.d(n,{R:()=>d,x:()=>l});var s=i(99378);const r={},a=s.createContext(r);function d(e){const n=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),s.createElement(a.Provider,{value:n},e.children)}},78581:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>t,contentTitle:()=>l,default:()=>h,frontMatter:()=>d,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"cpp/debugging","title":"\u8c03\u8bd5\u6280\u5de7","description":"\u638c\u63e1\u8c03\u8bd5\u5de5\u5177\u548c\u6280\u5de7\uff0c\u5feb\u901f\u5b9a\u4f4d\u548c\u4fee\u590d\u95ee\u9898\u3002","source":"@site/docs/cpp/debugging.md","sourceDirName":"cpp","slug":"/cpp/debugging","permalink":"/docs/cpp/debugging","draft":false,"unlisted":false,"editUrl":"https://github.com/to-lib/to-lib.github.io/tree/main/docs/cpp/debugging.md","tags":[],"version":"current","sidebarPosition":27,"frontMatter":{"sidebar_position":27,"title":"\u8c03\u8bd5\u6280\u5de7"},"sidebar":"cpp","previous":{"title":"\u6700\u4f73\u5b9e\u8df5","permalink":"/docs/cpp/best-practices"},"next":{"title":"\u6027\u80fd\u4f18\u5316","permalink":"/docs/cpp/performance"}}');var r=i(22714),a=i(48885);const d={sidebar_position:27,title:"\u8c03\u8bd5\u6280\u5de7"},l="C++ \u8c03\u8bd5\u6280\u5de7",t={},c=[{value:"\ud83d\udd0d GDB/LLDB \u8c03\u8bd5\u5668",id:"-gdblldb-\u8c03\u8bd5\u5668",level:2},{value:"\ud83e\uddea Sanitizers",id:"-sanitizers",level:2},{value:"AddressSanitizer (\u5185\u5b58\u9519\u8bef)",id:"addresssanitizer-\u5185\u5b58\u9519\u8bef",level:3},{value:"ThreadSanitizer (\u6570\u636e\u7ade\u4e89)",id:"threadsanitizer-\u6570\u636e\u7ade\u4e89",level:3},{value:"UndefinedBehaviorSanitizer",id:"undefinedbehaviorsanitizer",level:3},{value:"\ud83d\udcbe Valgrind",id:"-valgrind",level:2},{value:"\ud83d\udccb \u8c03\u8bd5\u5b8f",id:"-\u8c03\u8bd5\u5b8f",level:2},{value:"\ud83d\udd27 \u9759\u6001\u5206\u6790",id:"-\u9759\u6001\u5206\u6790",level:2},{value:"\u26a1 \u8c03\u8bd5\u5efa\u8bae",id:"-\u8c03\u8bd5\u5efa\u8bae",level:2}];function o(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"c-\u8c03\u8bd5\u6280\u5de7",children:"C++ \u8c03\u8bd5\u6280\u5de7"})}),"\n",(0,r.jsx)(n.p,{children:"\u638c\u63e1\u8c03\u8bd5\u5de5\u5177\u548c\u6280\u5de7\uff0c\u5feb\u901f\u5b9a\u4f4d\u548c\u4fee\u590d\u95ee\u9898\u3002"}),"\n",(0,r.jsx)(n.h2,{id:"-gdblldb-\u8c03\u8bd5\u5668",children:"\ud83d\udd0d GDB/LLDB \u8c03\u8bd5\u5668"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# \u7f16\u8bd1\u65f6\u52a0\u5165\u8c03\u8bd5\u4fe1\u606f\ng++ -g -O0 main.cpp -o main\n\n# \u542f\u52a8 GDB\ngdb ./main\n\n# \u5e38\u7528\u547d\u4ee4\nbreak main          # \u5728 main \u8bbe\u7f6e\u65ad\u70b9\nbreak file.cpp:20   # \u5728\u7279\u5b9a\u884c\u8bbe\u65ad\u70b9\nrun                 # \u8fd0\u884c\u7a0b\u5e8f\nnext (n)            # \u5355\u6b65\uff08\u4e0d\u8fdb\u5165\u51fd\u6570\uff09\nstep (s)            # \u5355\u6b65\uff08\u8fdb\u5165\u51fd\u6570\uff09\ncontinue (c)        # \u7ee7\u7eed\u6267\u884c\nprint var           # \u6253\u5370\u53d8\u91cf\nbacktrace (bt)      # \u67e5\u770b\u8c03\u7528\u6808\nwatch var           # \u76d1\u89c6\u53d8\u91cf\u53d8\u5316\nquit                # \u9000\u51fa\n"})}),"\n",(0,r.jsx)(n.h2,{id:"-sanitizers",children:"\ud83e\uddea Sanitizers"}),"\n",(0,r.jsx)(n.h3,{id:"addresssanitizer-\u5185\u5b58\u9519\u8bef",children:"AddressSanitizer (\u5185\u5b58\u9519\u8bef)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"g++ -fsanitize=address -g main.cpp -o main\n./main\n"})}),"\n",(0,r.jsx)(n.p,{children:"\u68c0\u6d4b\uff1a\u8d8a\u754c\u8bbf\u95ee\u3001use-after-free\u3001\u5185\u5b58\u6cc4\u6f0f"}),"\n",(0,r.jsx)(n.h3,{id:"threadsanitizer-\u6570\u636e\u7ade\u4e89",children:"ThreadSanitizer (\u6570\u636e\u7ade\u4e89)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"g++ -fsanitize=thread -g main.cpp -o main\n"})}),"\n",(0,r.jsx)(n.h3,{id:"undefinedbehaviorsanitizer",children:"UndefinedBehaviorSanitizer"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"g++ -fsanitize=undefined -g main.cpp -o main\n"})}),"\n",(0,r.jsx)(n.h2,{id:"-valgrind",children:"\ud83d\udcbe Valgrind"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# \u5185\u5b58\u6cc4\u6f0f\u68c0\u6d4b\nvalgrind --leak-check=full ./main\n\n# \u5185\u5b58\u9519\u8bef\u68c0\u6d4b\nvalgrind --tool=memcheck ./main\n"})}),"\n",(0,r.jsx)(n.h2,{id:"-\u8c03\u8bd5\u5b8f",children:"\ud83d\udccb \u8c03\u8bd5\u5b8f"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-cpp",children:'#include <iostream>\n#include <cassert>\n\n// \u65ad\u8a00\nassert(x > 0 && "x must be positive");\n\n// \u8c03\u8bd5\u8f93\u51fa\u5b8f\n#ifdef DEBUG\n    #define LOG(msg) std::cerr << __FILE__ << ":" << __LINE__ << " " << msg << std::endl\n#else\n    #define LOG(msg)\n#endif\n\n// \u4f7f\u7528\nLOG("Value: " << x);\n'})}),"\n",(0,r.jsx)(n.h2,{id:"-\u9759\u6001\u5206\u6790",children:"\ud83d\udd27 \u9759\u6001\u5206\u6790"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Clang-Tidy\nclang-tidy main.cpp -- -std=c++17\n\n# Cppcheck\ncppcheck --enable=all main.cpp\n"})}),"\n",(0,r.jsx)(n.h2,{id:"-\u8c03\u8bd5\u5efa\u8bae",children:"\u26a1 \u8c03\u8bd5\u5efa\u8bae"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u4f7f\u7528 -Wall -Wextra"})," - \u5f00\u542f\u6240\u6709\u8b66\u544a"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u4f7f\u7528 Sanitizers"})," - \u8fd0\u884c\u65f6\u9519\u8bef\u68c0\u6d4b"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u5199\u5355\u5143\u6d4b\u8bd5"})," - \u9694\u79bb\u95ee\u9898"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u4e8c\u5206\u6cd5\u5b9a\u4f4d"})," - \u7f29\u5c0f\u95ee\u9898\u8303\u56f4"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"\u6253\u5370\u65e5\u5fd7"})," - \u8ffd\u8e2a\u6267\u884c\u6d41\u7a0b"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}}}]);