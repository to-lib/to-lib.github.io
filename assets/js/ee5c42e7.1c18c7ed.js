"use strict";(globalThis.webpackChunkto_lib_github_io=globalThis.webpackChunkto_lib_github_io||[]).push([[30915],{48885:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>d});var i=s(99378);const t={},l=i.createContext(t);function r(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),i.createElement(l.Provider,{value:n},e.children)}},81942:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>p,frontMatter:()=>r,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"cpp/file-io","title":"\u6587\u4ef6 I/O","description":"C++ \u4f7f\u7528\u6d41\uff08stream\uff09\u8fdb\u884c\u6587\u4ef6\u64cd\u4f5c\uff0c\u63d0\u4f9b\u7c7b\u578b\u5b89\u5168\u7684 I/O\u3002","source":"@site/docs/cpp/file-io.md","sourceDirName":"cpp","slug":"/cpp/file-io","permalink":"/docs/cpp/file-io","draft":false,"unlisted":false,"editUrl":"https://github.com/to-lib/to-lib.github.io/tree/main/docs/cpp/file-io.md","tags":[],"version":"current","sidebarPosition":7.5,"frontMatter":{"sidebar_position":7.5,"title":"\u6587\u4ef6 I/O"},"sidebar":"cpp","previous":{"title":"\u6307\u9488\u548c\u5f15\u7528","permalink":"/docs/cpp/pointers-references"},"next":{"title":"\u5185\u5b58\u7ba1\u7406","permalink":"/docs/cpp/memory-management"}}');var t=s(22714),l=s(48885);const r={sidebar_position:7.5,title:"\u6587\u4ef6 I/O"},d="C++ \u6587\u4ef6\u8f93\u5165\u8f93\u51fa",c={},a=[{value:"\ud83c\udfaf \u6587\u4ef6\u6d41\u7c7b",id:"-\u6587\u4ef6\u6d41\u7c7b",level:2},{value:"\ud83d\udcc4 \u6587\u672c\u6587\u4ef6\u64cd\u4f5c",id:"-\u6587\u672c\u6587\u4ef6\u64cd\u4f5c",level:2},{value:"\u5199\u5165\u6587\u4ef6",id:"\u5199\u5165\u6587\u4ef6",level:3},{value:"\u8bfb\u53d6\u6587\u4ef6",id:"\u8bfb\u53d6\u6587\u4ef6",level:3},{value:"\u8ffd\u52a0\u6a21\u5f0f",id:"\u8ffd\u52a0\u6a21\u5f0f",level:3},{value:"\ud83d\udce6 \u4e8c\u8fdb\u5236\u6587\u4ef6",id:"-\u4e8c\u8fdb\u5236\u6587\u4ef6",level:2},{value:"\ud83d\udd0d \u6587\u4ef6\u4f4d\u7f6e\u64cd\u4f5c",id:"-\u6587\u4ef6\u4f4d\u7f6e\u64cd\u4f5c",level:2},{value:"\ud83d\udd04 \u5b57\u7b26\u4e32\u6d41",id:"-\u5b57\u7b26\u4e32\u6d41",level:2},{value:"\ud83d\udccb C++17 \u6587\u4ef6\u7cfb\u7edf",id:"-c17-\u6587\u4ef6\u7cfb\u7edf",level:2},{value:"\u26a1 \u6700\u4f73\u5b9e\u8df5",id:"-\u6700\u4f73\u5b9e\u8df5",level:2}];function o(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"c-\u6587\u4ef6\u8f93\u5165\u8f93\u51fa",children:"C++ \u6587\u4ef6\u8f93\u5165\u8f93\u51fa"})}),"\n",(0,t.jsx)(n.p,{children:"C++ \u4f7f\u7528\u6d41\uff08stream\uff09\u8fdb\u884c\u6587\u4ef6\u64cd\u4f5c\uff0c\u63d0\u4f9b\u7c7b\u578b\u5b89\u5168\u7684 I/O\u3002"}),"\n",(0,t.jsx)(n.h2,{id:"-\u6587\u4ef6\u6d41\u7c7b",children:"\ud83c\udfaf \u6587\u4ef6\u6d41\u7c7b"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-cpp",children:"#include <fstream>\n\n// ifstream - \u8f93\u5165\u6587\u4ef6\u6d41\uff08\u8bfb\u53d6\uff09\n// ofstream - \u8f93\u51fa\u6587\u4ef6\u6d41\uff08\u5199\u5165\uff09\n// fstream  - \u53cc\u5411\u6587\u4ef6\u6d41\n"})}),"\n",(0,t.jsx)(n.h2,{id:"-\u6587\u672c\u6587\u4ef6\u64cd\u4f5c",children:"\ud83d\udcc4 \u6587\u672c\u6587\u4ef6\u64cd\u4f5c"}),"\n",(0,t.jsx)(n.h3,{id:"\u5199\u5165\u6587\u4ef6",children:"\u5199\u5165\u6587\u4ef6"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-cpp",children:'#include <fstream>\n#include <iostream>\n\nint main() {\n    std::ofstream file("output.txt");\n\n    if (file.is_open()) {\n        file << "Hello, World!" << std::endl;\n        file << "Line 2" << std::endl;\n        file << 42 << " " << 3.14 << std::endl;\n        file.close();\n    } else {\n        std::cerr << "\u65e0\u6cd5\u6253\u5f00\u6587\u4ef6" << std::endl;\n    }\n\n    return 0;\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"\u8bfb\u53d6\u6587\u4ef6",children:"\u8bfb\u53d6\u6587\u4ef6"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-cpp",children:'#include <fstream>\n#include <string>\n\nint main() {\n    std::ifstream file("input.txt");\n\n    if (file.is_open()) {\n        std::string line;\n        while (std::getline(file, line)) {\n            std::cout << line << std::endl;\n        }\n        file.close();\n    }\n\n    // \u8bfb\u53d6\u7279\u5b9a\u7c7b\u578b\n    std::ifstream data("data.txt");\n    int num;\n    double value;\n    data >> num >> value;\n\n    return 0;\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"\u8ffd\u52a0\u6a21\u5f0f",children:"\u8ffd\u52a0\u6a21\u5f0f"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-cpp",children:'std::ofstream file("log.txt", std::ios::app);\nfile << "New log entry" << std::endl;\n'})}),"\n",(0,t.jsx)(n.h2,{id:"-\u4e8c\u8fdb\u5236\u6587\u4ef6",children:"\ud83d\udce6 \u4e8c\u8fdb\u5236\u6587\u4ef6"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-cpp",children:'#include <fstream>\n\nstruct Record {\n    int id;\n    char name[50];\n    double score;\n};\n\n// \u5199\u5165\u4e8c\u8fdb\u5236\nvoid writeBinary() {\n    std::ofstream file("data.bin", std::ios::binary);\n\n    Record r = {1, "\u5f20\u4e09", 95.5};\n    file.write(reinterpret_cast<char*>(&r), sizeof(r));\n\n    file.close();\n}\n\n// \u8bfb\u53d6\u4e8c\u8fdb\u5236\nvoid readBinary() {\n    std::ifstream file("data.bin", std::ios::binary);\n\n    Record r;\n    file.read(reinterpret_cast<char*>(&r), sizeof(r));\n\n    std::cout << r.name << ": " << r.score << std::endl;\n    file.close();\n}\n'})}),"\n",(0,t.jsx)(n.h2,{id:"-\u6587\u4ef6\u4f4d\u7f6e\u64cd\u4f5c",children:"\ud83d\udd0d \u6587\u4ef6\u4f4d\u7f6e\u64cd\u4f5c"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-cpp",children:'std::fstream file("data.txt", std::ios::in | std::ios::out);\n\n// \u83b7\u53d6\u5f53\u524d\u4f4d\u7f6e\nstd::streampos pos = file.tellg();  // \u8bfb\nstd::streampos pos2 = file.tellp(); // \u5199\n\n// \u79fb\u52a8\u4f4d\u7f6e\nfile.seekg(0, std::ios::beg);    // \u79fb\u5230\u5f00\u5934\nfile.seekg(0, std::ios::end);    // \u79fb\u5230\u7ed3\u5c3e\nfile.seekg(10, std::ios::cur);   // \u4ece\u5f53\u524d\u4f4d\u7f6e\u79fb\u52a8\n'})}),"\n",(0,t.jsx)(n.h2,{id:"-\u5b57\u7b26\u4e32\u6d41",children:"\ud83d\udd04 \u5b57\u7b26\u4e32\u6d41"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-cpp",children:'#include <sstream>\n\n// \u5b57\u7b26\u4e32\u8f93\u51fa\u6d41\nstd::ostringstream oss;\noss << "Value: " << 42 << ", Pi: " << 3.14;\nstd::string result = oss.str();\n\n// \u5b57\u7b26\u4e32\u8f93\u5165\u6d41\nstd::string data = "10 20 30";\nstd::istringstream iss(data);\nint a, b, c;\niss >> a >> b >> c;\n\n// \u53cc\u5411\u5b57\u7b26\u4e32\u6d41\nstd::stringstream ss;\nss << 100;\nint num;\nss >> num;\n'})}),"\n",(0,t.jsx)(n.h2,{id:"-c17-\u6587\u4ef6\u7cfb\u7edf",children:"\ud83d\udccb C++17 \u6587\u4ef6\u7cfb\u7edf"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-cpp",children:'#include <filesystem>\nnamespace fs = std::filesystem;\n\n// \u68c0\u67e5\u6587\u4ef6\u5b58\u5728\nif (fs::exists("file.txt")) { }\n\n// \u6587\u4ef6\u5927\u5c0f\nauto size = fs::file_size("file.txt");\n\n// \u904d\u5386\u76ee\u5f55\nfor (const auto& entry : fs::directory_iterator(".")) {\n    std::cout << entry.path() << std::endl;\n}\n\n// \u521b\u5efa/\u5220\u9664\u76ee\u5f55\nfs::create_directory("newdir");\nfs::remove("file.txt");\n\n// \u590d\u5236/\u79fb\u52a8\u6587\u4ef6\nfs::copy("src.txt", "dst.txt");\nfs::rename("old.txt", "new.txt");\n'})}),"\n",(0,t.jsx)(n.h2,{id:"-\u6700\u4f73\u5b9e\u8df5",children:"\u26a1 \u6700\u4f73\u5b9e\u8df5"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u68c0\u67e5\u6587\u4ef6\u662f\u5426\u6253\u5f00"})," - ",(0,t.jsx)(n.code,{children:"is_open()"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u4f7f\u7528 RAII"})," - \u4f5c\u7528\u57df\u7ed3\u675f\u81ea\u52a8\u5173\u95ed"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u5904\u7406\u9519\u8bef"})," - \u68c0\u67e5 ",(0,t.jsx)(n.code,{children:"fail()"}),", ",(0,t.jsx)(n.code,{children:"eof()"}),", ",(0,t.jsx)(n.code,{children:"bad()"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u4f7f\u7528 filesystem"})," - C++17 \u8de8\u5e73\u53f0\u6587\u4ef6\u64cd\u4f5c"]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}}}]);