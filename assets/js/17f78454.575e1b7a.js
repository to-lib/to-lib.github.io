"use strict";(globalThis.webpackChunkto_lib_github_io=globalThis.webpackChunkto_lib_github_io||[]).push([[58321],{48885:(n,e,t)=>{t.d(e,{R:()=>o,x:()=>i});var r=t(99378);const s={},l=r.createContext(s);function o(n){const e=r.useContext(l);return r.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function i(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:o(n.components),r.createElement(l.Provider,{value:e},n.children)}},87580:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>a,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"frontend/javascript/implementations","title":"\u624b\u5199\u5b9e\u73b0","description":"[!TIP]","source":"@site/docs/frontend/javascript/implementations.md","sourceDirName":"frontend/javascript","slug":"/frontend/javascript/implementations","permalink":"/docs/frontend/javascript/implementations","draft":false,"unlisted":false,"editUrl":"https://github.com/to-lib/to-lib.github.io/tree/main/docs/frontend/javascript/implementations.md","tags":[],"version":"current","sidebarPosition":16,"frontMatter":{"sidebar_position":16,"title":"\u624b\u5199\u5b9e\u73b0"},"sidebar":"frontend","previous":{"title":"\u8bbe\u8ba1\u6a21\u5f0f","permalink":"/docs/frontend/javascript/design-patterns"},"next":{"title":"\u6d4f\u89c8\u5668\u539f\u7406","permalink":"/docs/frontend/browser/"}}');var s=t(22714),l=t(48885);const o={sidebar_position:16,title:"\u624b\u5199\u5b9e\u73b0"},i="JavaScript \u624b\u5199\u5b9e\u73b0",a={},c=[{value:"\ud83c\udfaf \u9632\u6296\u4e0e\u8282\u6d41",id:"-\u9632\u6296\u4e0e\u8282\u6d41",level:2},{value:"\u9632\u6296 (Debounce)",id:"\u9632\u6296-debounce",level:3},{value:"\u8282\u6d41 (Throttle)",id:"\u8282\u6d41-throttle",level:3},{value:"\ud83d\udce6 \u6df1\u62f7\u8d1d",id:"-\u6df1\u62f7\u8d1d",level:2},{value:"\ud83d\udd27 call / apply / bind",id:"-call--apply--bind",level:2},{value:"\u624b\u5199 call",id:"\u624b\u5199-call",level:3},{value:"\u624b\u5199 apply",id:"\u624b\u5199-apply",level:3},{value:"\u624b\u5199 bind",id:"\u624b\u5199-bind",level:3},{value:"\ud83e\udd1d Promise",id:"-promise",level:2},{value:"\u57fa\u7840\u5b9e\u73b0",id:"\u57fa\u7840\u5b9e\u73b0",level:3},{value:"Promise.all",id:"promiseall",level:3},{value:"Promise.race",id:"promiserace",level:3},{value:"\ud83c\udd95 new \u64cd\u4f5c\u7b26",id:"-new-\u64cd\u4f5c\u7b26",level:2},{value:"\ud83d\udd17 instanceof",id:"-instanceof",level:2},{value:"\ud83d\udccb \u6570\u7ec4\u65b9\u6cd5",id:"-\u6570\u7ec4\u65b9\u6cd5",level:2},{value:"Array.prototype.map",id:"arrayprototypemap",level:3},{value:"Array.prototype.reduce",id:"arrayprototypereduce",level:3},{value:"Array.prototype.flat",id:"arrayprototypeflat",level:3},{value:"\ud83d\udd17 \u76f8\u5173\u8d44\u6e90",id:"-\u76f8\u5173\u8d44\u6e90",level:2}];function d(n){const e={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"javascript-\u624b\u5199\u5b9e\u73b0",children:"JavaScript \u624b\u5199\u5b9e\u73b0"})}),"\n",(0,s.jsxs)(e.blockquote,{children:["\n",(0,s.jsx)(e.p,{children:"[!TIP]\n\u624b\u5199\u5b9e\u73b0\u5e38\u89c1\u529f\u80fd\u662f\u524d\u7aef\u9762\u8bd5\u7684\u9ad8\u9891\u8003\u70b9\uff0c\u4e5f\u80fd\u5e2e\u52a9\u4f60\u6df1\u5165\u7406\u89e3 JavaScript \u539f\u7406\u3002"}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"-\u9632\u6296\u4e0e\u8282\u6d41",children:"\ud83c\udfaf \u9632\u6296\u4e0e\u8282\u6d41"}),"\n",(0,s.jsx)(e.h3,{id:"\u9632\u6296-debounce",children:"\u9632\u6296 (Debounce)"}),"\n",(0,s.jsx)(e.p,{children:"\u505c\u6b62\u89e6\u53d1\u540e\u5ef6\u8fdf\u6267\u884c\u3002"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-javascript",children:'function debounce(fn, delay, immediate = false) {\n  let timer = null;\n\n  return function (...args) {\n    const callNow = immediate && !timer;\n\n    clearTimeout(timer);\n\n    timer = setTimeout(() => {\n      timer = null;\n      if (!immediate) {\n        fn.apply(this, args);\n      }\n    }, delay);\n\n    if (callNow) {\n      fn.apply(this, args);\n    }\n  };\n}\n\n// \u4f7f\u7528\nconst search = debounce((query) => {\n  console.log("\u641c\u7d22:", query);\n}, 300);\n\ninput.addEventListener("input", (e) => search(e.target.value));\n'})}),"\n",(0,s.jsx)(e.h3,{id:"\u8282\u6d41-throttle",children:"\u8282\u6d41 (Throttle)"}),"\n",(0,s.jsx)(e.p,{children:"\u56fa\u5b9a\u9891\u7387\u6267\u884c\u3002"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-javascript",children:'function throttle(fn, limit) {\n  let lastTime = 0;\n  let timer = null;\n\n  return function (...args) {\n    const now = Date.now();\n\n    if (now - lastTime >= limit) {\n      lastTime = now;\n      fn.apply(this, args);\n    } else if (!timer) {\n      timer = setTimeout(() => {\n        lastTime = Date.now();\n        timer = null;\n        fn.apply(this, args);\n      }, limit - (now - lastTime));\n    }\n  };\n}\n\n// \u4f7f\u7528\nwindow.addEventListener("scroll", throttle(handleScroll, 100));\n'})}),"\n",(0,s.jsx)(e.h2,{id:"-\u6df1\u62f7\u8d1d",children:"\ud83d\udce6 \u6df1\u62f7\u8d1d"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-javascript",children:'function deepClone(obj, hash = new WeakMap()) {\n  if (obj === null || typeof obj !== "object") {\n    return obj;\n  }\n\n  // \u5904\u7406\u5faa\u73af\u5f15\u7528\n  if (hash.has(obj)) {\n    return hash.get(obj);\n  }\n\n  // \u5904\u7406\u7279\u6b8a\u5bf9\u8c61\n  if (obj instanceof Date) return new Date(obj);\n  if (obj instanceof RegExp) return new RegExp(obj);\n  if (obj instanceof Map) {\n    const map = new Map();\n    hash.set(obj, map);\n    obj.forEach((v, k) => map.set(deepClone(k, hash), deepClone(v, hash)));\n    return map;\n  }\n  if (obj instanceof Set) {\n    const set = new Set();\n    hash.set(obj, set);\n    obj.forEach((v) => set.add(deepClone(v, hash)));\n    return set;\n  }\n\n  // \u5904\u7406\u6570\u7ec4\u548c\u666e\u901a\u5bf9\u8c61\n  const clone = Array.isArray(obj) ? [] : {};\n  hash.set(obj, clone);\n\n  for (const key of Reflect.ownKeys(obj)) {\n    clone[key] = deepClone(obj[key], hash);\n  }\n\n  return clone;\n}\n'})}),"\n",(0,s.jsx)(e.h2,{id:"-call--apply--bind",children:"\ud83d\udd27 call / apply / bind"}),"\n",(0,s.jsx)(e.h3,{id:"\u624b\u5199-call",children:"\u624b\u5199 call"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-javascript",children:'Function.prototype.myCall = function (context, ...args) {\n  context = context ?? globalThis;\n  context = Object(context);\n\n  const key = Symbol();\n  context[key] = this;\n\n  const result = context[key](...args);\n  delete context[key];\n\n  return result;\n};\n\n// \u6d4b\u8bd5\nfunction greet(greeting) {\n  return `${greeting}, ${this.name}`;\n}\ngreet.myCall({ name: "Alice" }, "Hello"); // "Hello, Alice"\n'})}),"\n",(0,s.jsx)(e.h3,{id:"\u624b\u5199-apply",children:"\u624b\u5199 apply"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-javascript",children:"Function.prototype.myApply = function (context, args = []) {\n  context = context ?? globalThis;\n  context = Object(context);\n\n  const key = Symbol();\n  context[key] = this;\n\n  const result = context[key](...args);\n  delete context[key];\n\n  return result;\n};\n"})}),"\n",(0,s.jsx)(e.h3,{id:"\u624b\u5199-bind",children:"\u624b\u5199 bind"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-javascript",children:'Function.prototype.myBind = function (context, ...args) {\n  const fn = this;\n\n  return function bound(...newArgs) {\n    // \u5904\u7406 new \u8c03\u7528\n    if (new.target) {\n      return new fn(...args, ...newArgs);\n    }\n    return fn.apply(context, [...args, ...newArgs]);\n  };\n};\n\n// \u6d4b\u8bd5\nconst bound = greet.myBind({ name: "Alice" }, "Hi");\nbound(); // "Hi, Alice"\n'})}),"\n",(0,s.jsx)(e.h2,{id:"-promise",children:"\ud83e\udd1d Promise"}),"\n",(0,s.jsx)(e.h3,{id:"\u57fa\u7840\u5b9e\u73b0",children:"\u57fa\u7840\u5b9e\u73b0"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-javascript",children:'class MyPromise {\n  static PENDING = "pending";\n  static FULFILLED = "fulfilled";\n  static REJECTED = "rejected";\n\n  constructor(executor) {\n    this.status = MyPromise.PENDING;\n    this.value = undefined;\n    this.reason = undefined;\n    this.onFulfilledCallbacks = [];\n    this.onRejectedCallbacks = [];\n\n    const resolve = (value) => {\n      if (this.status === MyPromise.PENDING) {\n        this.status = MyPromise.FULFILLED;\n        this.value = value;\n        this.onFulfilledCallbacks.forEach((fn) => fn());\n      }\n    };\n\n    const reject = (reason) => {\n      if (this.status === MyPromise.PENDING) {\n        this.status = MyPromise.REJECTED;\n        this.reason = reason;\n        this.onRejectedCallbacks.forEach((fn) => fn());\n      }\n    };\n\n    try {\n      executor(resolve, reject);\n    } catch (error) {\n      reject(error);\n    }\n  }\n\n  then(onFulfilled, onRejected) {\n    onFulfilled = typeof onFulfilled === "function" ? onFulfilled : (v) => v;\n    onRejected =\n      typeof onRejected === "function"\n        ? onRejected\n        : (e) => {\n            throw e;\n          };\n\n    return new MyPromise((resolve, reject) => {\n      const handle = (callback, value) => {\n        queueMicrotask(() => {\n          try {\n            const result = callback(value);\n            if (result instanceof MyPromise) {\n              result.then(resolve, reject);\n            } else {\n              resolve(result);\n            }\n          } catch (error) {\n            reject(error);\n          }\n        });\n      };\n\n      if (this.status === MyPromise.FULFILLED) {\n        handle(onFulfilled, this.value);\n      } else if (this.status === MyPromise.REJECTED) {\n        handle(onRejected, this.reason);\n      } else {\n        this.onFulfilledCallbacks.push(() => handle(onFulfilled, this.value));\n        this.onRejectedCallbacks.push(() => handle(onRejected, this.reason));\n      }\n    });\n  }\n\n  catch(onRejected) {\n    return this.then(null, onRejected);\n  }\n\n  finally(onFinally) {\n    return this.then(\n      (value) => MyPromise.resolve(onFinally()).then(() => value),\n      (reason) =>\n        MyPromise.resolve(onFinally()).then(() => {\n          throw reason;\n        })\n    );\n  }\n\n  static resolve(value) {\n    if (value instanceof MyPromise) return value;\n    return new MyPromise((resolve) => resolve(value));\n  }\n\n  static reject(reason) {\n    return new MyPromise((_, reject) => reject(reason));\n  }\n}\n'})}),"\n",(0,s.jsx)(e.h3,{id:"promiseall",children:"Promise.all"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-javascript",children:"MyPromise.all = function (promises) {\n  return new MyPromise((resolve, reject) => {\n    const results = [];\n    let count = 0;\n\n    if (promises.length === 0) {\n      return resolve(results);\n    }\n\n    promises.forEach((promise, index) => {\n      MyPromise.resolve(promise).then(\n        (value) => {\n          results[index] = value;\n          count++;\n          if (count === promises.length) {\n            resolve(results);\n          }\n        },\n        (reason) => reject(reason)\n      );\n    });\n  });\n};\n"})}),"\n",(0,s.jsx)(e.h3,{id:"promiserace",children:"Promise.race"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-javascript",children:"MyPromise.race = function (promises) {\n  return new MyPromise((resolve, reject) => {\n    promises.forEach((promise) => {\n      MyPromise.resolve(promise).then(resolve, reject);\n    });\n  });\n};\n"})}),"\n",(0,s.jsx)(e.h2,{id:"-new-\u64cd\u4f5c\u7b26",children:"\ud83c\udd95 new \u64cd\u4f5c\u7b26"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-javascript",children:'function myNew(Constructor, ...args) {\n  // \u521b\u5efa\u65b0\u5bf9\u8c61\uff0c\u7ee7\u627f\u6784\u9020\u51fd\u6570\u539f\u578b\n  const obj = Object.create(Constructor.prototype);\n\n  // \u6267\u884c\u6784\u9020\u51fd\u6570\n  const result = Constructor.apply(obj, args);\n\n  // \u8fd4\u56de\u5bf9\u8c61\uff08\u5982\u679c\u6784\u9020\u51fd\u6570\u8fd4\u56de\u5bf9\u8c61\u5219\u4f7f\u7528\u5b83\uff09\n  return result instanceof Object ? result : obj;\n}\n\n// \u6d4b\u8bd5\nfunction Person(name) {\n  this.name = name;\n}\nconst p = myNew(Person, "Alice");\nconsole.log(p.name); // "Alice"\nconsole.log(p instanceof Person); // true\n'})}),"\n",(0,s.jsx)(e.h2,{id:"-instanceof",children:"\ud83d\udd17 instanceof"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-javascript",children:'function myInstanceof(obj, Constructor) {\n  if (obj === null || typeof obj !== "object") {\n    return false;\n  }\n\n  let proto = Object.getPrototypeOf(obj);\n\n  while (proto !== null) {\n    if (proto === Constructor.prototype) {\n      return true;\n    }\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  return false;\n}\n\n// \u6d4b\u8bd5\nmyInstanceof([], Array); // true\nmyInstanceof({}, Array); // false\n'})}),"\n",(0,s.jsx)(e.h2,{id:"-\u6570\u7ec4\u65b9\u6cd5",children:"\ud83d\udccb \u6570\u7ec4\u65b9\u6cd5"}),"\n",(0,s.jsx)(e.h3,{id:"arrayprototypemap",children:"Array.prototype.map"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-javascript",children:"Array.prototype.myMap = function (callback, thisArg) {\n  const result = [];\n\n  for (let i = 0; i < this.length; i++) {\n    if (i in this) {\n      result[i] = callback.call(thisArg, this[i], i, this);\n    }\n  }\n\n  return result;\n};\n"})}),"\n",(0,s.jsx)(e.h3,{id:"arrayprototypereduce",children:"Array.prototype.reduce"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-javascript",children:"Array.prototype.myReduce = function (callback, initialValue) {\n  let accumulator = initialValue;\n  let startIndex = 0;\n\n  if (accumulator === undefined) {\n    accumulator = this[0];\n    startIndex = 1;\n  }\n\n  for (let i = startIndex; i < this.length; i++) {\n    if (i in this) {\n      accumulator = callback(accumulator, this[i], i, this);\n    }\n  }\n\n  return accumulator;\n};\n"})}),"\n",(0,s.jsx)(e.h3,{id:"arrayprototypeflat",children:"Array.prototype.flat"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-javascript",children:"Array.prototype.myFlat = function (depth = 1) {\n  const result = [];\n\n  const flatten = (arr, d) => {\n    for (const item of arr) {\n      if (Array.isArray(item) && d > 0) {\n        flatten(item, d - 1);\n      } else {\n        result.push(item);\n      }\n    }\n  };\n\n  flatten(this, depth);\n  return result;\n};\n\n// \u6d4b\u8bd5\n[1, [2, [3, [4]]]].myFlat(2); // [1, 2, 3, [4]]\n"})}),"\n",(0,s.jsx)(e.h2,{id:"-\u76f8\u5173\u8d44\u6e90",children:"\ud83d\udd17 \u76f8\u5173\u8d44\u6e90"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"/docs/frontend/javascript/prototype",children:"\u539f\u578b\u94fe"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"/docs/frontend/javascript/async",children:"\u5f02\u6b65\u7f16\u7a0b"})}),"\n",(0,s.jsx)(e.li,{children:(0,s.jsx)(e.a,{href:"/docs/frontend/javascript/design-patterns",children:"\u8bbe\u8ba1\u6a21\u5f0f"})}),"\n"]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"\u4e0b\u4e00\u6b65"}),"\uff1a\u5b66\u4e60 ",(0,s.jsx)(e.a,{href:"/docs/frontend/javascript/data-structures",children:"\u6570\u636e\u7ed3\u6784"})," \u638c\u63e1\u57fa\u7840\u7b97\u6cd5\u3002"]})]})}function u(n={}){const{wrapper:e}={...(0,l.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(d,{...n})}):d(n)}}}]);