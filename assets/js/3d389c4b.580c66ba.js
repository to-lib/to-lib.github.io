"use strict";(globalThis.webpackChunkto_lib_github_io=globalThis.webpackChunkto_lib_github_io||[]).push([[4741],{1266:(n,e,i)=>{i.d(e,{R:()=>r,x:()=>a});var t=i(9378);const l={},o=t.createContext(l);function r(n){const e=t.useContext(o);return t.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:r(n.components),t.createElement(o.Provider,{value:e},n.children)}},2131:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>d,contentTitle:()=>a,default:()=>c,frontMatter:()=>r,metadata:()=>t,toc:()=>s});const t=JSON.parse('{"id":"java-design-patterns/composite-pattern","title":"\u7ec4\u5408\u6a21\u5f0f (Composite Pattern)","description":"\u6a21\u5f0f\u5b9a\u4e49","source":"@site/docs/java-design-patterns/composite-pattern.md","sourceDirName":"java-design-patterns","slug":"/java-design-patterns/composite-pattern","permalink":"/docs/java-design-patterns/composite-pattern","draft":false,"unlisted":false,"editUrl":"https://github.com/to-lib/to-lib.github.io/tree/main/docs/java-design-patterns/composite-pattern.md","tags":[],"version":"current","sidebarPosition":14,"frontMatter":{"sidebar_position":14},"sidebar":"tutorialSidebar","previous":{"title":"\u5916\u89c2\u6a21\u5f0f (Facade Pattern)","permalink":"/docs/java-design-patterns/facade-pattern"},"next":{"title":"\u4eab\u5143\u6a21\u5f0f (Flyweight Pattern)","permalink":"/docs/java-design-patterns/flyweight-pattern"}}');var l=i(2714),o=i(1266);const r={sidebar_position:14},a="\u7ec4\u5408\u6a21\u5f0f (Composite Pattern)",d={},s=[{value:"\u6a21\u5f0f\u5b9a\u4e49",id:"\u6a21\u5f0f\u5b9a\u4e49",level:2},{value:"\u95ee\u9898\u5206\u6790",id:"\u95ee\u9898\u5206\u6790",level:2},{value:"\u89e3\u51b3\u65b9\u6848",id:"\u89e3\u51b3\u65b9\u6848",level:2},{value:"\u4ee3\u7801\u5b9e\u73b0",id:"\u4ee3\u7801\u5b9e\u73b0",level:2},{value:"1. \u5b9a\u4e49\u7ec4\u4ef6\u63a5\u53e3",id:"1-\u5b9a\u4e49\u7ec4\u4ef6\u63a5\u53e3",level:3},{value:"2. \u53f6\u5b50\u8282\u70b9\uff08\u6587\u4ef6\uff09",id:"2-\u53f6\u5b50\u8282\u70b9\u6587\u4ef6",level:3},{value:"3. \u6811\u679d\u8282\u70b9\uff08\u6587\u4ef6\u5939\uff09",id:"3-\u6811\u679d\u8282\u70b9\u6587\u4ef6\u5939",level:3},{value:"4. \u5ba2\u6237\u7aef\u4f7f\u7528",id:"4-\u5ba2\u6237\u7aef\u4f7f\u7528",level:3},{value:"\u5b9e\u9645\u5e94\u7528\u793a\u4f8b",id:"\u5b9e\u9645\u5e94\u7528\u793a\u4f8b",level:2},{value:"UI\u7ec4\u4ef6\u6811",id:"ui\u7ec4\u4ef6\u6811",level:3},{value:"\u7ec4\u7ec7\u7ed3\u6784",id:"\u7ec4\u7ec7\u7ed3\u6784",level:3},{value:"\u83dc\u5355\u7cfb\u7edf",id:"\u83dc\u5355\u7cfb\u7edf",level:3},{value:"\u7ec4\u5408\u6a21\u5f0f\u7684\u4e24\u79cd\u65b9\u5f0f",id:"\u7ec4\u5408\u6a21\u5f0f\u7684\u4e24\u79cd\u65b9\u5f0f",level:2},{value:"\u900f\u660e\u7ec4\u5408\uff08transparent\uff09",id:"\u900f\u660e\u7ec4\u5408transparent",level:3},{value:"\u5b89\u5168\u7ec4\u5408\uff08safe\uff09",id:"\u5b89\u5168\u7ec4\u5408safe",level:3},{value:"\u4f18\u7f3a\u70b9",id:"\u4f18\u7f3a\u70b9",level:2},{value:"\u4f18\u70b9",id:"\u4f18\u70b9",level:3},{value:"\u7f3a\u70b9",id:"\u7f3a\u70b9",level:3},{value:"\u9002\u7528\u573a\u666f",id:"\u9002\u7528\u573a\u666f",level:2},{value:"Java\u4e2d\u7684\u5e94\u7528",id:"java\u4e2d\u7684\u5e94\u7528",level:2}];function p(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.header,{children:(0,l.jsx)(e.h1,{id:"\u7ec4\u5408\u6a21\u5f0f-composite-pattern",children:"\u7ec4\u5408\u6a21\u5f0f (Composite Pattern)"})}),"\n",(0,l.jsx)(e.h2,{id:"\u6a21\u5f0f\u5b9a\u4e49",children:"\u6a21\u5f0f\u5b9a\u4e49"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"\u7ec4\u5408\u6a21\u5f0f"}),'\u662f\u4e00\u79cd\u7ed3\u6784\u578b\u8bbe\u8ba1\u6a21\u5f0f\uff0c\u5b83\u5141\u8bb8\u4f60\u5c06\u5bf9\u8c61\u7ec4\u5408\u6210\u6811\u5f62\u7ed3\u6784\u6765\u8868\u793a"\u90e8\u5206-\u6574\u4f53"\u7684\u5c42\u6b21\u7ed3\u6784\uff0c\u4f7f\u5f97\u5ba2\u6237\u7aef\u53ef\u4ee5\u4ee5\u76f8\u540c\u7684\u65b9\u5f0f\u5904\u7406\u5355\u4e2a\u5bf9\u8c61\u548c\u5bf9\u8c61\u7684\u7ec4\u5408\u3002']}),"\n",(0,l.jsx)(e.h2,{id:"\u95ee\u9898\u5206\u6790",children:"\u95ee\u9898\u5206\u6790"}),"\n",(0,l.jsx)(e.p,{children:"\u5f53\u9700\u8981\u5904\u7406\u5177\u6709\u6811\u5f62\u7ed3\u6784\u7684\u5bf9\u8c61\u65f6\uff1a"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u6587\u4ef6\u7cfb\u7edf\u4e2d\u7684\u6587\u4ef6\u548c\u6587\u4ef6\u5939"}),"\n",(0,l.jsx)(e.li,{children:"\u83dc\u5355\u548c\u5b50\u83dc\u5355"}),"\n",(0,l.jsx)(e.li,{children:"\u7ec4\u7ec7\u7ed3\u6784"}),"\n",(0,l.jsx)(e.li,{children:"\u64cd\u4f5c\u7cfb\u7edf\u4e2d\u7684\u8fdb\u7a0b\u6811"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u76f4\u63a5\u5904\u7406\u4f1a\u5bfc\u81f4\u4ee3\u7801\u590d\u6742\u3002"}),"\n",(0,l.jsx)(e.h2,{id:"\u89e3\u51b3\u65b9\u6848",children:"\u89e3\u51b3\u65b9\u6848"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502    Component         \u2502\n\u2502  + operation()       \u2502\n\u2502  + add(child)        \u2502\n\u2502  + remove(child)     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n           \u25b3\n           \u2502\n    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n    \u2502                 \u2502\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510        \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Leaf  \u2502        \u2502 Composite\u2502\n\u2502(\u53f6\u5b50)  \u2502        \u2502 (\u6811\u679d)   \u2502\n\u2502        \u2502        \u2502+ children\u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518        \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,l.jsx)(e.h2,{id:"\u4ee3\u7801\u5b9e\u73b0",children:"\u4ee3\u7801\u5b9e\u73b0"}),"\n",(0,l.jsx)(e.h3,{id:"1-\u5b9a\u4e49\u7ec4\u4ef6\u63a5\u53e3",children:"1. \u5b9a\u4e49\u7ec4\u4ef6\u63a5\u53e3"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"public interface FileSystemComponent {\n    String getName();\n    void display();\n    long getSize();\n}\n"})}),"\n",(0,l.jsx)(e.h3,{id:"2-\u53f6\u5b50\u8282\u70b9\u6587\u4ef6",children:"2. \u53f6\u5b50\u8282\u70b9\uff08\u6587\u4ef6\uff09"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:'public class File implements FileSystemComponent {\n    private String name;\n    private long size;\n    \n    public File(String name, long size) {\n        this.name = name;\n        this.size = size;\n    }\n    \n    @Override\n    public String getName() {\n        return name;\n    }\n    \n    @Override\n    public void display() {\n        System.out.println("\ud83d\udcc4 " + name + " (" + size + " bytes)");\n    }\n    \n    @Override\n    public long getSize() {\n        return size;\n    }\n}\n'})}),"\n",(0,l.jsx)(e.h3,{id:"3-\u6811\u679d\u8282\u70b9\u6587\u4ef6\u5939",children:"3. \u6811\u679d\u8282\u70b9\uff08\u6587\u4ef6\u5939\uff09"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:'public class Directory implements FileSystemComponent {\n    private String name;\n    private List<FileSystemComponent> children = new ArrayList<>();\n    \n    public Directory(String name) {\n        this.name = name;\n    }\n    \n    public void addComponent(FileSystemComponent component) {\n        children.add(component);\n    }\n    \n    public void removeComponent(FileSystemComponent component) {\n        children.remove(component);\n    }\n    \n    @Override\n    public String getName() {\n        return name;\n    }\n    \n    @Override\n    public void display() {\n        System.out.println("\ud83d\udcc1 " + name + "/");\n        for (FileSystemComponent child : children) {\n            child.display();\n        }\n    }\n    \n    @Override\n    public long getSize() {\n        long totalSize = 0;\n        for (FileSystemComponent child : children) {\n            totalSize += child.getSize();\n        }\n        return totalSize;\n    }\n}\n'})}),"\n",(0,l.jsx)(e.h3,{id:"4-\u5ba2\u6237\u7aef\u4f7f\u7528",children:"4. \u5ba2\u6237\u7aef\u4f7f\u7528"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:'public class Demo {\n    public static void main(String[] args) {\n        // \u521b\u5efa\u6587\u4ef6\u7cfb\u7edf\n        Directory root = new Directory("root");\n        \n        Directory documents = new Directory("Documents");\n        Directory pictures = new Directory("Pictures");\n        \n        File file1 = new File("report.pdf", 1024);\n        File file2 = new File("image.jpg", 2048);\n        File file3 = new File("code.java", 512);\n        \n        // \u7ec4\u5408\u5bf9\u8c61\n        root.addComponent(documents);\n        root.addComponent(pictures);\n        \n        documents.addComponent(file1);\n        documents.addComponent(file3);\n        \n        pictures.addComponent(file2);\n        \n        // \u7edf\u4e00\u5904\u7406\n        root.display();\n        System.out.println("\\n\u603b\u5927\u5c0f: " + root.getSize() + " bytes");\n    }\n}\n'})}),"\n",(0,l.jsx)(e.h2,{id:"\u5b9e\u9645\u5e94\u7528\u793a\u4f8b",children:"\u5b9e\u9645\u5e94\u7528\u793a\u4f8b"}),"\n",(0,l.jsx)(e.h3,{id:"ui\u7ec4\u4ef6\u6811",children:"UI\u7ec4\u4ef6\u6811"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:'public interface UIComponent {\n    void render();\n    void add(UIComponent component);\n    void remove(UIComponent component);\n}\n\npublic class Button implements UIComponent {\n    private String label;\n    \n    public Button(String label) {\n        this.label = label;\n    }\n    \n    @Override\n    public void render() {\n        System.out.println("\u6309\u94ae: " + label);\n    }\n    \n    @Override\n    public void add(UIComponent component) {\n        throw new UnsupportedOperationException("\u6309\u94ae\u4e0d\u80fd\u6dfb\u52a0\u5b50\u7ec4\u4ef6");\n    }\n    \n    @Override\n    public void remove(UIComponent component) {\n    }\n}\n\npublic class Panel implements UIComponent {\n    private String title;\n    private List<UIComponent> children = new ArrayList<>();\n    \n    public Panel(String title) {\n        this.title = title;\n    }\n    \n    @Override\n    public void render() {\n        System.out.println("\u9762\u677f: " + title);\n        for (UIComponent child : children) {\n            child.render();\n        }\n    }\n    \n    @Override\n    public void add(UIComponent component) {\n        children.add(component);\n    }\n    \n    @Override\n    public void remove(UIComponent component) {\n        children.remove(component);\n    }\n}\n\n// \u4f7f\u7528\nPanel mainWindow = new Panel("\u4e3b\u7a97\u53e3");\nPanel leftPanel = new Panel("\u5de6\u9762\u677f");\nPanel rightPanel = new Panel("\u53f3\u9762\u677f");\n\nButton saveBtn = new Button("\u4fdd\u5b58");\nButton deleteBtn = new Button("\u5220\u9664");\n\nmainWindow.add(leftPanel);\nmainWindow.add(rightPanel);\nleftPanel.add(saveBtn);\nrightPanel.add(deleteBtn);\n\nmainWindow.render();\n'})}),"\n",(0,l.jsx)(e.h3,{id:"\u7ec4\u7ec7\u7ed3\u6784",children:"\u7ec4\u7ec7\u7ed3\u6784"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:'public interface Employee {\n    void show();\n    void addEmployee(Employee employee);\n}\n\npublic class Manager implements Employee {\n    private String name;\n    private String position;\n    private List<Employee> employees = new ArrayList<>();\n    \n    public Manager(String name, String position) {\n        this.name = name;\n        this.position = position;\n    }\n    \n    @Override\n    public void show() {\n        System.out.println(position + ": " + name);\n        for (Employee employee : employees) {\n            employee.show();\n        }\n    }\n    \n    @Override\n    public void addEmployee(Employee employee) {\n        employees.add(employee);\n    }\n}\n\npublic class Developer implements Employee {\n    private String name;\n    private String position;\n    \n    public Developer(String name, String position) {\n        this.name = name;\n        this.position = position;\n    }\n    \n    @Override\n    public void show() {\n        System.out.println(position + ": " + name);\n    }\n    \n    @Override\n    public void addEmployee(Employee employee) {\n        throw new UnsupportedOperationException("\u5f00\u53d1\u4eba\u5458\u4e0d\u80fd\u6709\u4e0b\u5c5e");\n    }\n}\n\n// \u4f7f\u7528\nManager ceo = new Manager("\u5f20\u4e09", "CEO");\nManager techDir = new Manager("\u674e\u56db", "\u6280\u672f\u603b\u76d1");\n\nDeveloper dev1 = new Developer("\u738b\u4e94", "Java\u5f00\u53d1");\nDeveloper dev2 = new Developer("\u8d75\u516d", "\u524d\u7aef\u5f00\u53d1");\n\nceo.addEmployee(techDir);\ntechDir.addEmployee(dev1);\ntechDir.addEmployee(dev2);\n\nceo.show();\n'})}),"\n",(0,l.jsx)(e.h3,{id:"\u83dc\u5355\u7cfb\u7edf",children:"\u83dc\u5355\u7cfb\u7edf"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:'public class MenuItem {\n    private String name;\n    private List<MenuItem> subItems = new ArrayList<>();\n    \n    public MenuItem(String name) {\n        this.name = name;\n    }\n    \n    public void add(MenuItem item) {\n        subItems.add(item);\n    }\n    \n    public void print(int depth) {\n        System.out.println("  ".repeat(depth) + "- " + name);\n        for (MenuItem item : subItems) {\n            item.print(depth + 1);\n        }\n    }\n}\n\n// \u4f7f\u7528\nMenuItem root = new MenuItem("\u83dc\u5355");\n\nMenuItem file = new MenuItem("\u6587\u4ef6");\nMenuItem edit = new MenuItem("\u7f16\u8f91");\nMenuItem view = new MenuItem("\u67e5\u770b");\n\nMenuItem fileNew = new MenuItem("\u65b0\u5efa");\nMenuItem fileOpen = new MenuItem("\u6253\u5f00");\nMenuItem fileSave = new MenuItem("\u4fdd\u5b58");\n\nroot.add(file);\nroot.add(edit);\nroot.add(view);\n\nfile.add(fileNew);\nfile.add(fileOpen);\nfile.add(fileSave);\n\nroot.print(0);\n'})}),"\n",(0,l.jsx)(e.h2,{id:"\u7ec4\u5408\u6a21\u5f0f\u7684\u4e24\u79cd\u65b9\u5f0f",children:"\u7ec4\u5408\u6a21\u5f0f\u7684\u4e24\u79cd\u65b9\u5f0f"}),"\n",(0,l.jsx)(e.h3,{id:"\u900f\u660e\u7ec4\u5408transparent",children:"\u900f\u660e\u7ec4\u5408\uff08transparent\uff09"}),"\n",(0,l.jsx)(e.p,{children:"\u7ec4\u4ef6\u548c\u5bb9\u5668\u6709\u76f8\u540c\u7684\u63a5\u53e3\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"public interface Component {\n    void operation();\n    void add(Component component);\n    void remove(Component component);\n}\n"})}),"\n",(0,l.jsx)(e.h3,{id:"\u5b89\u5168\u7ec4\u5408safe",children:"\u5b89\u5168\u7ec4\u5408\uff08safe\uff09"}),"\n",(0,l.jsx)(e.p,{children:"\u5bb9\u5668\u6709\u989d\u5916\u7684\u7ba1\u7406\u65b9\u6cd5\u3002"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"public interface Component {\n    void operation();\n}\n\npublic interface Composite extends Component {\n    void add(Component component);\n    void remove(Component component);\n}\n"})}),"\n",(0,l.jsx)(e.h2,{id:"\u4f18\u7f3a\u70b9",children:"\u4f18\u7f3a\u70b9"}),"\n",(0,l.jsx)(e.h3,{id:"\u4f18\u70b9",children:"\u4f18\u70b9"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u2705 \u7b80\u5316\u5ba2\u6237\u7aef\u4ee3\u7801"}),"\n",(0,l.jsx)(e.li,{children:"\u2705 \u6613\u4e8e\u6dfb\u52a0\u65b0\u7ec4\u4ef6"}),"\n",(0,l.jsx)(e.li,{children:"\u2705 \u7b26\u5408\u5f00\u95ed\u539f\u5219"}),"\n",(0,l.jsx)(e.li,{children:"\u2705 \u652f\u6301\u590d\u6742\u7684\u6811\u5f62\u7ed3\u6784"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"\u7f3a\u70b9",children:"\u7f3a\u70b9"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u274c \u8bbe\u8ba1\u590d\u6742"}),"\n",(0,l.jsx)(e.li,{children:"\u274c \u7c7b\u7684\u6570\u91cf\u589e\u591a"}),"\n",(0,l.jsx)(e.li,{children:"\u274c \u53ef\u80fd\u9020\u6210\u6027\u80fd\u95ee\u9898"}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"\u9002\u7528\u573a\u666f",children:"\u9002\u7528\u573a\u666f"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u2713 \u6811\u5f62\u7ed3\u6784"}),"\n",(0,l.jsx)(e.li,{children:"\u2713 \u6587\u4ef6\u7cfb\u7edf"}),"\n",(0,l.jsx)(e.li,{children:"\u2713 UI\u7ec4\u4ef6\u5c42\u6b21"}),"\n",(0,l.jsx)(e.li,{children:"\u2713 \u7ec4\u7ec7\u7ed3\u6784"}),"\n",(0,l.jsx)(e.li,{children:"\u2713 \u83dc\u5355\u7cfb\u7edf"}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"java\u4e2d\u7684\u5e94\u7528",children:"Java\u4e2d\u7684\u5e94\u7528"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:'// Swing\u4e2d\u7684\u7ec4\u5408\u6a21\u5f0f\nJPanel panel = new JPanel();\nJButton button = new JButton("\u6309\u94ae");\npanel.add(button);\n\n// DOM\u6811\nElement element = document.getElementById("root");\nElement child = document.createElement("div");\nelement.appendChild(child);\n'})})]})}function c(n={}){const{wrapper:e}={...(0,o.R)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(p,{...n})}):p(n)}}}]);