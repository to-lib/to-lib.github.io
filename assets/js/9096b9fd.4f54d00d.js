"use strict";(globalThis.webpackChunkto_lib_github_io=globalThis.webpackChunkto_lib_github_io||[]).push([[85012],{38172:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>a,contentTitle:()=>d,default:()=>h,frontMatter:()=>c,metadata:()=>s,toc:()=>t});const s=JSON.parse('{"id":"springcloud/faq","title":"Spring Cloud \u5e38\u89c1\u95ee\u9898","description":"[!TIP]","source":"@site/docs/springcloud/faq.md","sourceDirName":"springcloud","slug":"/springcloud/faq","permalink":"/docs/springcloud/faq","draft":false,"unlisted":false,"editUrl":"https://github.com/to-lib/to-lib.github.io/tree/main/docs/springcloud/faq.md","tags":[],"version":"current","sidebarPosition":22,"frontMatter":{"title":"Spring Cloud \u5e38\u89c1\u95ee\u9898","sidebar_label":"\u5e38\u89c1\u95ee\u9898","sidebar_position":22},"sidebar":"springcloud","previous":{"title":"\u6392\u969c\u624b\u518c","permalink":"/docs/springcloud/troubleshooting"},"next":{"title":"\u9762\u8bd5\u9898\u96c6","permalink":"/docs/interview/springcloud-interview-questions"}}');var l=r(22714),i=r(48885);const c={title:"Spring Cloud \u5e38\u89c1\u95ee\u9898",sidebar_label:"\u5e38\u89c1\u95ee\u9898",sidebar_position:22},d="Spring Cloud \u5e38\u89c1\u95ee\u9898 (FAQ)",a={},t=[{value:"1. \u670d\u52a1\u6ce8\u518c\u53d1\u73b0",id:"1-\u670d\u52a1\u6ce8\u518c\u53d1\u73b0",level:2},{value:"Q: \u670d\u52a1\u6ce8\u518c\u540e\u65e0\u6cd5\u88ab\u53d1\u73b0\uff1f",id:"q-\u670d\u52a1\u6ce8\u518c\u540e\u65e0\u6cd5\u88ab\u53d1\u73b0",level:3},{value:"Q: \u670d\u52a1\u4e0b\u7ebf\u540e\u4ecd\u7136\u88ab\u8c03\u7528\uff1f",id:"q-\u670d\u52a1\u4e0b\u7ebf\u540e\u4ecd\u7136\u88ab\u8c03\u7528",level:3},{value:"Q: Eureka \u63a7\u5236\u53f0\u663e\u793a &quot;EMERGENCY! EUREKA MAY BE INCORRECTLY...&quot;\uff1f",id:"q-eureka-\u63a7\u5236\u53f0\u663e\u793a-emergency-eureka-may-be-incorrectly",level:3},{value:"2. \u914d\u7f6e\u4e2d\u5fc3",id:"2-\u914d\u7f6e\u4e2d\u5fc3",level:2},{value:"Q: \u914d\u7f6e\u65e0\u6cd5\u52a0\u8f7d\uff0c\u542f\u52a8\u5931\u8d25\uff1f",id:"q-\u914d\u7f6e\u65e0\u6cd5\u52a0\u8f7d\u542f\u52a8\u5931\u8d25",level:3},{value:"Q: @RefreshScope \u4e0d\u751f\u6548\uff1f",id:"q-refreshscope-\u4e0d\u751f\u6548",level:3},{value:"Q: \u914d\u7f6e\u5237\u65b0\u540e\u90e8\u5206\u914d\u7f6e\u672a\u66f4\u65b0\uff1f",id:"q-\u914d\u7f6e\u5237\u65b0\u540e\u90e8\u5206\u914d\u7f6e\u672a\u66f4\u65b0",level:3},{value:"3. API \u7f51\u5173",id:"3-api-\u7f51\u5173",level:2},{value:"Q: Gateway \u8def\u7531\u4e0d\u751f\u6548\uff1f",id:"q-gateway-\u8def\u7531\u4e0d\u751f\u6548",level:3},{value:"Q: Gateway \u62a5 503 Service Unavailable\uff1f",id:"q-gateway-\u62a5-503-service-unavailable",level:3},{value:"Q: Gateway \u51fa\u73b0\u8de8\u57df\u95ee\u9898\uff1f",id:"q-gateway-\u51fa\u73b0\u8de8\u57df\u95ee\u9898",level:3},{value:"4. \u670d\u52a1\u8c03\u7528",id:"4-\u670d\u52a1\u8c03\u7528",level:2},{value:"Q: Feign \u8c03\u7528\u8d85\u65f6\uff1f",id:"q-feign-\u8c03\u7528\u8d85\u65f6",level:3},{value:"Q: Feign \u8bf7\u6c42\u5934\u4e22\u5931\uff1f",id:"q-feign-\u8bf7\u6c42\u5934\u4e22\u5931",level:3},{value:"Q: \u4f7f\u7528 @LoadBalanced \u7684 RestTemplate \u8c03\u7528\u5931\u8d25\uff1f",id:"q-\u4f7f\u7528-loadbalanced-\u7684-resttemplate-\u8c03\u7528\u5931\u8d25",level:3},{value:"5. \u7194\u65ad\u4e0e\u9650\u6d41",id:"5-\u7194\u65ad\u4e0e\u9650\u6d41",level:2},{value:"Q: \u7194\u65ad\u5668\u4e00\u76f4\u5904\u4e8e OPEN \u72b6\u6001\uff1f",id:"q-\u7194\u65ad\u5668\u4e00\u76f4\u5904\u4e8e-open-\u72b6\u6001",level:3},{value:"Q: @CircuitBreaker \u6ce8\u89e3\u4e0d\u751f\u6548\uff1f",id:"q-circuitbreaker-\u6ce8\u89e3\u4e0d\u751f\u6548",level:3},{value:"Q: \u9650\u6d41\u914d\u7f6e\u4e0d\u751f\u6548\uff1f",id:"q-\u9650\u6d41\u914d\u7f6e\u4e0d\u751f\u6548",level:3},{value:"6. \u6d88\u606f\u9a71\u52a8",id:"6-\u6d88\u606f\u9a71\u52a8",level:2},{value:"Q: Stream \u6d88\u8d39\u8005\u6536\u4e0d\u5230\u6d88\u606f\uff1f",id:"q-stream-\u6d88\u8d39\u8005\u6536\u4e0d\u5230\u6d88\u606f",level:3},{value:"Q: \u6d88\u606f\u6d88\u8d39\u5931\u8d25\u5982\u4f55\u91cd\u8bd5\uff1f",id:"q-\u6d88\u606f\u6d88\u8d39\u5931\u8d25\u5982\u4f55\u91cd\u8bd5",level:3},{value:"7. \u94fe\u8def\u8ffd\u8e2a",id:"7-\u94fe\u8def\u8ffd\u8e2a",level:2},{value:"Q: TraceId \u8de8\u670d\u52a1\u4e0d\u4e00\u81f4\uff1f",id:"q-traceid-\u8de8\u670d\u52a1\u4e0d\u4e00\u81f4",level:3},{value:"Q: Zipkin \u6536\u96c6\u4e0d\u5230 Span\uff1f",id:"q-zipkin-\u6536\u96c6\u4e0d\u5230-span",level:3},{value:"8. \u7248\u672c\u517c\u5bb9",id:"8-\u7248\u672c\u517c\u5bb9",level:2},{value:"Q: \u5347\u7ea7 Spring Boot \u540e Cloud \u7ec4\u4ef6\u62a5\u9519\uff1f",id:"q-\u5347\u7ea7-spring-boot-\u540e-cloud-\u7ec4\u4ef6\u62a5\u9519",level:3},{value:"Q: \u627e\u4e0d\u5230\u67d0\u4e9b\u7c7b\u6216\u6ce8\u89e3\uff1f",id:"q-\u627e\u4e0d\u5230\u67d0\u4e9b\u7c7b\u6216\u6ce8\u89e3",level:3}];function o(n){const e={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.header,{children:(0,l.jsx)(e.h1,{id:"spring-cloud-\u5e38\u89c1\u95ee\u9898-faq",children:"Spring Cloud \u5e38\u89c1\u95ee\u9898 (FAQ)"})}),"\n",(0,l.jsxs)(e.blockquote,{children:["\n",(0,l.jsx)(e.p,{children:"[!TIP]\n\u672c\u9875\u9762\u6574\u7406\u4e86 Spring Cloud \u5f00\u53d1\u4e2d\u5e38\u89c1\u7684\u95ee\u9898\u53ca\u89e3\u51b3\u65b9\u6848\u3002"}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"1-\u670d\u52a1\u6ce8\u518c\u53d1\u73b0",children:"1. \u670d\u52a1\u6ce8\u518c\u53d1\u73b0"}),"\n",(0,l.jsx)(e.h3,{id:"q-\u670d\u52a1\u6ce8\u518c\u540e\u65e0\u6cd5\u88ab\u53d1\u73b0",children:"Q: \u670d\u52a1\u6ce8\u518c\u540e\u65e0\u6cd5\u88ab\u53d1\u73b0\uff1f"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"\u53ef\u80fd\u539f\u56e0\u4e0e\u89e3\u51b3\u65b9\u6848"}),"\uff1a"]}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.strong,{children:"\u670d\u52a1\u540d\u4e0d\u4e00\u81f4"})}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"# \u786e\u4fdd\u670d\u52a1\u540d\u914d\u7f6e\u6b63\u786e\nspring:\n  application:\n    name: user-service # \u8c03\u7528\u65b9\u4f7f\u7528\u8fd9\u4e2a\u540d\u79f0\n"})}),"\n",(0,l.jsxs)(e.ol,{start:"2",children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.strong,{children:"\u672a\u542f\u7528\u670d\u52a1\u53d1\u73b0"})}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// \u786e\u4fdd\u542f\u7528\u4e86\u76f8\u5173\u6ce8\u89e3\n@EnableEurekaClient  // \u6216 @EnableDiscoveryClient\n"})}),"\n",(0,l.jsxs)(e.ol,{start:"3",children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.strong,{children:"\u6ce8\u518c\u4e2d\u5fc3\u5730\u5740\u9519\u8bef"})}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"eureka:\n  client:\n    service-url:\n      defaultZone: http://localhost:8761/eureka/ # \u6ce8\u610f\u672b\u5c3e\u7684 /eureka/\n"})}),"\n",(0,l.jsx)(e.h3,{id:"q-\u670d\u52a1\u4e0b\u7ebf\u540e\u4ecd\u7136\u88ab\u8c03\u7528",children:"Q: \u670d\u52a1\u4e0b\u7ebf\u540e\u4ecd\u7136\u88ab\u8c03\u7528\uff1f"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"\u539f\u56e0"}),": \u5ba2\u6237\u7aef\u7f13\u5b58\u4e86\u670d\u52a1\u5217\u8868"]}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"\u89e3\u51b3\u65b9\u6848"}),":"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"eureka:\n  client:\n    # \u7f29\u77ed\u83b7\u53d6\u670d\u52a1\u5217\u8868\u95f4\u9694\n    registry-fetch-interval-seconds: 5\n  instance:\n    # \u7f29\u77ed\u5fc3\u8df3\u95f4\u9694\u548c\u8fc7\u671f\u65f6\u95f4\n    lease-renewal-interval-in-seconds: 10\n    lease-expiration-duration-in-seconds: 30\n"})}),"\n",(0,l.jsx)(e.h3,{id:"q-eureka-\u63a7\u5236\u53f0\u663e\u793a-emergency-eureka-may-be-incorrectly",children:'Q: Eureka \u63a7\u5236\u53f0\u663e\u793a "EMERGENCY! EUREKA MAY BE INCORRECTLY..."\uff1f'}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"\u539f\u56e0"}),": \u81ea\u6211\u4fdd\u62a4\u6a21\u5f0f\u89e6\u53d1"]}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"\u5f00\u53d1\u73af\u5883\u89e3\u51b3\u65b9\u6848"}),":"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"eureka:\n  server:\n    enable-self-preservation: false # \u4ec5\u5f00\u53d1\u73af\u5883\n"})}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"\u751f\u4ea7\u73af\u5883"}),": \u4fdd\u6301\u5f00\u542f\uff0c\u68c0\u67e5\u7f51\u7edc\u8fde\u63a5\u548c\u670d\u52a1\u5065\u5eb7\u72b6\u6001\u3002"]}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"2-\u914d\u7f6e\u4e2d\u5fc3",children:"2. \u914d\u7f6e\u4e2d\u5fc3"}),"\n",(0,l.jsx)(e.h3,{id:"q-\u914d\u7f6e\u65e0\u6cd5\u52a0\u8f7d\u542f\u52a8\u5931\u8d25",children:"Q: \u914d\u7f6e\u65e0\u6cd5\u52a0\u8f7d\uff0c\u542f\u52a8\u5931\u8d25\uff1f"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"\u89e3\u51b3\u65b9\u6848"}),":"]}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.strong,{children:"\u786e\u4fdd\u4f7f\u7528 bootstrap.yml"})}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"# bootstrap.yml (\u4e0d\u662f application.yml)\nspring:\n  cloud:\n    config:\n      uri: http://localhost:8888\n"})}),"\n",(0,l.jsxs)(e.ol,{start:"2",children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.strong,{children:"Config Server \u4e0d\u53ef\u7528\u65f6\u5141\u8bb8\u964d\u7ea7"})}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"spring:\n  cloud:\n    config:\n      fail-fast: false\n"})}),"\n",(0,l.jsxs)(e.ol,{start:"3",children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.strong,{children:"\u6dfb\u52a0\u91cd\u8bd5\u673a\u5236"})}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-xml",children:"<dependency>\n    <groupId>org.springframework.retry</groupId>\n    <artifactId>spring-retry</artifactId>\n</dependency>\n"})}),"\n",(0,l.jsx)(e.h3,{id:"q-refreshscope-\u4e0d\u751f\u6548",children:"Q: @RefreshScope \u4e0d\u751f\u6548\uff1f"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"\u68c0\u67e5\u9879"}),":"]}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsxs)(e.li,{children:["\u786e\u4fdd\u6dfb\u52a0\u4e86 ",(0,l.jsx)(e.code,{children:"spring-boot-starter-actuator"})," \u4f9d\u8d56"]}),"\n",(0,l.jsx)(e.li,{children:"\u786e\u4fdd\u66b4\u9732\u4e86 refresh \u7aef\u70b9"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"management:\n  endpoints:\n    web:\n      exposure:\n        include: refresh\n"})}),"\n",(0,l.jsxs)(e.ol,{start:"3",children:["\n",(0,l.jsx)(e.li,{children:"\u8c03\u7528\u5237\u65b0\u7aef\u70b9"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"curl -X POST http://localhost:8080/actuator/refresh\n"})}),"\n",(0,l.jsx)(e.h3,{id:"q-\u914d\u7f6e\u5237\u65b0\u540e\u90e8\u5206\u914d\u7f6e\u672a\u66f4\u65b0",children:"Q: \u914d\u7f6e\u5237\u65b0\u540e\u90e8\u5206\u914d\u7f6e\u672a\u66f4\u65b0\uff1f"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"\u539f\u56e0"}),": \u67d0\u4e9b\u914d\u7f6e\u9700\u8981\u91cd\u542f\u624d\u80fd\u751f\u6548"]}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"\u4e0d\u652f\u6301\u52a8\u6001\u5237\u65b0\u7684\u914d\u7f6e"}),":"]}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u914d\u7f6e"}),"\n",(0,l.jsx)(e.li,{children:"\u7aef\u53e3\u914d\u7f6e"}),"\n",(0,l.jsx)(e.li,{children:"\u4e0a\u4e0b\u6587\u8def\u5f84"}),"\n"]}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"3-api-\u7f51\u5173",children:"3. API \u7f51\u5173"}),"\n",(0,l.jsx)(e.h3,{id:"q-gateway-\u8def\u7531\u4e0d\u751f\u6548",children:"Q: Gateway \u8def\u7531\u4e0d\u751f\u6548\uff1f"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"\u68c0\u67e5\u9879"}),":"]}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.strong,{children:"\u8def\u7531 ID \u552f\u4e00"})}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"spring:\n  cloud:\n    gateway:\n      routes:\n        - id: user-route # \u5fc5\u987b\u552f\u4e00\n          uri: lb://user-service\n"})}),"\n",(0,l.jsxs)(e.ol,{start:"2",children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.strong,{children:"\u65ad\u8a00\u8bed\u6cd5\u6b63\u786e"})}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"predicates:\n  - Path=/api/users/** # \u6ce8\u610f\u5927\u5c0f\u5199\u548c\u901a\u914d\u7b26\n"})}),"\n",(0,l.jsxs)(e.ol,{start:"3",children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.strong,{children:"\u68c0\u67e5\u670d\u52a1\u662f\u5426\u6ce8\u518c"})}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"curl http://localhost:8761/eureka/apps\n"})}),"\n",(0,l.jsx)(e.h3,{id:"q-gateway-\u62a5-503-service-unavailable",children:"Q: Gateway \u62a5 503 Service Unavailable\uff1f"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"\u53ef\u80fd\u539f\u56e0"}),":"]}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.strong,{children:"\u540e\u7aef\u670d\u52a1\u672a\u542f\u52a8"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.strong,{children:"\u4f7f\u7528 lb:// \u4f46\u672a\u6dfb\u52a0 LoadBalancer \u4f9d\u8d56"})}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-xml",children:"<dependency>\n    <groupId>org.springframework.cloud</groupId>\n    <artifactId>spring-cloud-starter-loadbalancer</artifactId>\n</dependency>\n"})}),"\n",(0,l.jsxs)(e.ol,{start:"3",children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.strong,{children:"\u670d\u52a1\u540d\u79f0\u4e0d\u5339\u914d"})}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"q-gateway-\u51fa\u73b0\u8de8\u57df\u95ee\u9898",children:"Q: Gateway \u51fa\u73b0\u8de8\u57df\u95ee\u9898\uff1f"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"\u89e3\u51b3\u65b9\u6848"}),":"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:'spring:\n  cloud:\n    gateway:\n      globalcors:\n        cors-configurations:\n          "[/**]":\n            allowed-origins: "*"\n            allowed-methods:\n              - GET\n              - POST\n              - PUT\n              - DELETE\n            allowed-headers: "*"\n'})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"4-\u670d\u52a1\u8c03\u7528",children:"4. \u670d\u52a1\u8c03\u7528"}),"\n",(0,l.jsx)(e.h3,{id:"q-feign-\u8c03\u7528\u8d85\u65f6",children:"Q: Feign \u8c03\u7528\u8d85\u65f6\uff1f"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"\u89e3\u51b3\u65b9\u6848"}),":"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"# \u65b9\u5f0f 1\uff1a\u5168\u5c40\u914d\u7f6e\nspring:\n  cloud:\n    openfeign:\n      client:\n        config:\n          default:\n            connectTimeout: 5000\n            readTimeout: 10000\n\n# \u65b9\u5f0f 2\uff1a\u9488\u5bf9\u7279\u5b9a\u670d\u52a1\nspring:\n  cloud:\n    openfeign:\n      client:\n        config:\n          user-service:\n            connectTimeout: 3000\n            readTimeout: 5000\n"})}),"\n",(0,l.jsx)(e.h3,{id:"q-feign-\u8bf7\u6c42\u5934\u4e22\u5931",children:"Q: Feign \u8bf7\u6c42\u5934\u4e22\u5931\uff1f"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"\u89e3\u51b3\u65b9\u6848"}),": \u914d\u7f6e\u8bf7\u6c42\u62e6\u622a\u5668"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:'@Configuration\npublic class FeignConfig {\n    @Bean\n    public RequestInterceptor requestInterceptor() {\n        return template -> {\n            ServletRequestAttributes attrs = (ServletRequestAttributes)\n                RequestContextHolder.getRequestAttributes();\n            if (attrs != null) {\n                HttpServletRequest request = attrs.getRequest();\n                template.header("Authorization",\n                    request.getHeader("Authorization"));\n            }\n        };\n    }\n}\n'})}),"\n",(0,l.jsx)(e.h3,{id:"q-\u4f7f\u7528-loadbalanced-\u7684-resttemplate-\u8c03\u7528\u5931\u8d25",children:"Q: \u4f7f\u7528 @LoadBalanced \u7684 RestTemplate \u8c03\u7528\u5931\u8d25\uff1f"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"\u68c0\u67e5\u9879"}),":"]}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u786e\u4fdd\u4f7f\u7528\u670d\u52a1\u540d\u800c\u975e IP"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:'// \u2705 \u6b63\u786e\nrestTemplate.getForObject("http://user-service/users/1", User.class);\n\n// \u274c \u9519\u8bef\nrestTemplate.getForObject("http://localhost:8081/users/1", User.class);\n'})}),"\n",(0,l.jsxs)(e.ol,{start:"2",children:["\n",(0,l.jsx)(e.li,{children:"\u786e\u4fdd\u6dfb\u52a0\u4e86 LoadBalancer \u4f9d\u8d56"}),"\n"]}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"5-\u7194\u65ad\u4e0e\u9650\u6d41",children:"5. \u7194\u65ad\u4e0e\u9650\u6d41"}),"\n",(0,l.jsx)(e.h3,{id:"q-\u7194\u65ad\u5668\u4e00\u76f4\u5904\u4e8e-open-\u72b6\u6001",children:"Q: \u7194\u65ad\u5668\u4e00\u76f4\u5904\u4e8e OPEN \u72b6\u6001\uff1f"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"\u89e3\u51b3\u65b9\u6848"}),":"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"resilience4j:\n  circuitbreaker:\n    instances:\n      backendA:\n        # \u589e\u52a0\u7b49\u5f85\u65f6\u95f4\n        waitDurationInOpenState: 60s\n        # \u81ea\u52a8\u5207\u6362\u5230\u534a\u5f00\n        automaticTransitionFromOpenToHalfOpenEnabled: true\n"})}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"\u6392\u67e5\u6b65\u9aa4"}),":"]}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsxs)(e.li,{children:["\u68c0\u67e5 Actuator \u7aef\u70b9: ",(0,l.jsx)(e.code,{children:"/actuator/circuitbreakers"})]}),"\n",(0,l.jsx)(e.li,{children:"\u68c0\u67e5\u5931\u8d25\u7387\u662f\u5426\u8d85\u8fc7\u9608\u503c"}),"\n",(0,l.jsx)(e.li,{children:"\u68c0\u67e5\u540e\u7aef\u670d\u52a1\u662f\u5426\u6062\u590d"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"q-circuitbreaker-\u6ce8\u89e3\u4e0d\u751f\u6548",children:"Q: @CircuitBreaker \u6ce8\u89e3\u4e0d\u751f\u6548\uff1f"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"\u68c0\u67e5\u9879"}),":"]}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u6dfb\u52a0 AOP \u4f9d\u8d56"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-xml",children:"<dependency>\n    <groupId>org.springframework.boot</groupId>\n    <artifactId>spring-boot-starter-aop</artifactId>\n</dependency>\n"})}),"\n",(0,l.jsxs)(e.ol,{start:"2",children:["\n",(0,l.jsx)(e.li,{children:"\u786e\u4fdd\u65b9\u6cd5\u662f public \u7684"}),"\n",(0,l.jsx)(e.li,{children:"\u786e\u4fdd\u4e0d\u662f\u5728\u540c\u4e00\u4e2a\u7c7b\u5185\u90e8\u8c03\u7528"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"q-\u9650\u6d41\u914d\u7f6e\u4e0d\u751f\u6548",children:"Q: \u9650\u6d41\u914d\u7f6e\u4e0d\u751f\u6548\uff1f"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"\u5bf9\u4e8e Gateway + Redis \u9650\u6d41"}),":"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:'spring:\n  redis:\n    host: localhost\n    port: 6379 # \u786e\u4fdd Redis \u53ef\u7528\n\n  cloud:\n    gateway:\n      routes:\n        - id: user-service\n          filters:\n            - name: RequestRateLimiter\n              args:\n                redis-rate-limiter.replenishRate: 10\n                redis-rate-limiter.burstCapacity: 20\n                key-resolver: "#{@ipKeyResolver}" # \u786e\u4fdd Bean \u5b58\u5728\n'})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"6-\u6d88\u606f\u9a71\u52a8",children:"6. \u6d88\u606f\u9a71\u52a8"}),"\n",(0,l.jsx)(e.h3,{id:"q-stream-\u6d88\u8d39\u8005\u6536\u4e0d\u5230\u6d88\u606f",children:"Q: Stream \u6d88\u8d39\u8005\u6536\u4e0d\u5230\u6d88\u606f\uff1f"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"\u68c0\u67e5\u9879"}),":"]}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.strong,{children:"\u51fd\u6570\u540d\u4e0e binding \u5339\u914d"})}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"spring:\n  cloud:\n    stream:\n      function:\n        definition: process # \u51fd\u6570\u540d\n      bindings:\n        process-in-0: # <\u51fd\u6570\u540d>-in-<\u7d22\u5f15>\n          destination: my-topic\n"})}),"\n",(0,l.jsxs)(e.ol,{start:"2",children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.strong,{children:"\u6d88\u8d39\u8005\u7ec4\u914d\u7f6e"})}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"spring:\n  cloud:\n    stream:\n      bindings:\n        process-in-0:\n          group: my-group # \u8bbe\u7f6e\u6d88\u8d39\u8005\u7ec4\n"})}),"\n",(0,l.jsx)(e.h3,{id:"q-\u6d88\u606f\u6d88\u8d39\u5931\u8d25\u5982\u4f55\u91cd\u8bd5",children:"Q: \u6d88\u606f\u6d88\u8d39\u5931\u8d25\u5982\u4f55\u91cd\u8bd5\uff1f"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"\u89e3\u51b3\u65b9\u6848"}),":"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"spring:\n  cloud:\n    stream:\n      bindings:\n        process-in-0:\n          consumer:\n            max-attempts: 3 # \u6700\u5927\u91cd\u8bd5\u6b21\u6570\n      rabbit:\n        bindings:\n          process-in-0:\n            consumer:\n              autoBindDlq: true # \u542f\u7528\u6b7b\u4fe1\u961f\u5217\n"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"7-\u94fe\u8def\u8ffd\u8e2a",children:"7. \u94fe\u8def\u8ffd\u8e2a"}),"\n",(0,l.jsx)(e.h3,{id:"q-traceid-\u8de8\u670d\u52a1\u4e0d\u4e00\u81f4",children:"Q: TraceId \u8de8\u670d\u52a1\u4e0d\u4e00\u81f4\uff1f"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"\u89e3\u51b3\u65b9\u6848"}),":"]}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u786e\u4fdd\u6240\u6709\u670d\u52a1\u90fd\u6dfb\u52a0\u4e86 Sleuth \u4f9d\u8d56"}),"\n",(0,l.jsx)(e.li,{children:"\u4f7f\u7528 Feign/RestTemplate \u81ea\u52a8\u4f20\u64ad\uff08\u786e\u4fdd\u4f7f\u7528 @LoadBalanced\uff09"}),"\n",(0,l.jsx)(e.li,{children:"\u5982\u679c\u4f7f\u7528 WebClient\uff0c\u9700\u8981\u6ce8\u5165\u914d\u7f6e\u597d\u7684\u5b9e\u4f8b"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"q-zipkin-\u6536\u96c6\u4e0d\u5230-span",children:"Q: Zipkin \u6536\u96c6\u4e0d\u5230 Span\uff1f"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"\u68c0\u67e5\u9879"}),":"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"spring:\n  sleuth:\n    sampler:\n      probability: 1.0 # \u5f00\u53d1\u73af\u5883\u8bbe\u4e3a 1.0 (100% \u91c7\u6837)\n  zipkin:\n    base-url: http://localhost:9411\n    sender:\n      type: web # \u786e\u4fdd\u53d1\u9001\u65b9\u5f0f\u6b63\u786e\n"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"8-\u7248\u672c\u517c\u5bb9",children:"8. \u7248\u672c\u517c\u5bb9"}),"\n",(0,l.jsx)(e.h3,{id:"q-\u5347\u7ea7-spring-boot-\u540e-cloud-\u7ec4\u4ef6\u62a5\u9519",children:"Q: \u5347\u7ea7 Spring Boot \u540e Cloud \u7ec4\u4ef6\u62a5\u9519\uff1f"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"\u89e3\u51b3\u65b9\u6848"}),": \u786e\u4fdd\u7248\u672c\u517c\u5bb9"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-xml",children:"\x3c!-- Spring Boot 3.2.x \u4f7f\u7528 --\x3e\n<spring-cloud.version>2023.0.0</spring-cloud.version>\n\n\x3c!-- Spring Boot 2.7.x \u4f7f\u7528 --\x3e\n<spring-cloud.version>2021.0.8</spring-cloud.version>\n"})}),"\n",(0,l.jsx)(e.h3,{id:"q-\u627e\u4e0d\u5230\u67d0\u4e9b\u7c7b\u6216\u6ce8\u89e3",children:"Q: \u627e\u4e0d\u5230\u67d0\u4e9b\u7c7b\u6216\u6ce8\u89e3\uff1f"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"\u5e38\u89c1\u53d8\u66f4"}),":"]}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Spring Boot 3.x \u9700\u8981 Java 17+"}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"@EnableEurekaClient"})," \u53ef\u4ee5\u7701\u7565"]}),"\n",(0,l.jsx)(e.li,{children:"Sleuth -> Micrometer Tracing (Spring Boot 3.x)"}),"\n"]}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"\u76f8\u5173\u6587\u6863"}),"\uff1a"]}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"/docs/springcloud/quick-reference",children:"\u5feb\u901f\u53c2\u8003"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"/docs/springcloud/best-practices",children:"\u6700\u4f73\u5b9e\u8df5"})}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"/docs/interview/springcloud-interview-questions",children:"\u9762\u8bd5\u9898\u96c6"})}),"\n"]})]})}function h(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(o,{...n})}):o(n)}},48885:(n,e,r)=>{r.d(e,{R:()=>c,x:()=>d});var s=r(99378);const l={},i=s.createContext(l);function c(n){const e=s.useContext(i);return s.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function d(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:c(n.components),s.createElement(i.Provider,{value:e},n.children)}}}]);