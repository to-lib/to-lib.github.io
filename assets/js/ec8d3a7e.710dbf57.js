"use strict";(globalThis.webpackChunkto_lib_github_io=globalThis.webpackChunkto_lib_github_io||[]).push([[45127],{34013:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>c,contentTitle:()=>s,default:()=>f,frontMatter:()=>l,metadata:()=>d,toc:()=>a});const d=JSON.parse('{"id":"c/preprocessor","title":"\u9884\u5904\u7406\u5668","description":"\u9884\u5904\u7406\u5668\u5728\u7f16\u8bd1\u4e4b\u524d\u5904\u7406\u6e90\u4ee3\u7801\uff0c\u6267\u884c\u5b8f\u66ff\u6362\u3001\u6587\u4ef6\u5305\u542b\u548c\u6761\u4ef6\u7f16\u8bd1\u7b49\u64cd\u4f5c\u3002","source":"@site/docs/c/preprocessor.md","sourceDirName":"c","slug":"/c/preprocessor","permalink":"/docs/c/preprocessor","draft":false,"unlisted":false,"editUrl":"https://github.com/to-lib/to-lib.github.io/tree/main/docs/c/preprocessor.md","tags":[],"version":"current","sidebarPosition":10,"frontMatter":{"sidebar_position":10,"title":"\u9884\u5904\u7406\u5668"},"sidebar":"c","previous":{"title":"\u6587\u4ef6\u64cd\u4f5c","permalink":"/docs/c/file-io"},"next":{"title":"\u4f4d\u64cd\u4f5c","permalink":"/docs/c/bit-operations"}}');var r=i(22714),t=i(48885);const l={sidebar_position:10,title:"\u9884\u5904\u7406\u5668"},s="\u9884\u5904\u7406\u5668",c={},a=[{value:"\u5b8f\u5b9a\u4e49",id:"\u5b8f\u5b9a\u4e49",level:2},{value:"\u7b80\u5355\u5b8f",id:"\u7b80\u5355\u5b8f",level:3},{value:"\u5e26\u53c2\u6570\u7684\u5b8f",id:"\u5e26\u53c2\u6570\u7684\u5b8f",level:3},{value:"\u591a\u884c\u5b8f",id:"\u591a\u884c\u5b8f",level:3},{value:"\u6761\u4ef6\u7f16\u8bd1",id:"\u6761\u4ef6\u7f16\u8bd1",level:2},{value:"#ifdef / #ifndef",id:"ifdef--ifndef",level:3},{value:"#if / #elif / #else",id:"if--elif--else",level:3},{value:"\u5e73\u53f0\u68c0\u6d4b",id:"\u5e73\u53f0\u68c0\u6d4b",level:3},{value:"\u6587\u4ef6\u5305\u542b",id:"\u6587\u4ef6\u5305\u542b",level:2},{value:"\u5934\u6587\u4ef6\u4fdd\u62a4",id:"\u5934\u6587\u4ef6\u4fdd\u62a4",level:3},{value:"\u7279\u6b8a\u5b8f",id:"\u7279\u6b8a\u5b8f",level:2},{value:"\u5b57\u7b26\u4e32\u5316\u548c\u8fde\u63a5",id:"\u5b57\u7b26\u4e32\u5316\u548c\u8fde\u63a5",level:2},{value:"\u5b9e\u7528\u793a\u4f8b",id:"\u5b9e\u7528\u793a\u4f8b",level:2},{value:"\u8c03\u8bd5\u5b8f",id:"\u8c03\u8bd5\u5b8f",level:3},{value:"\u9759\u6001\u65ad\u8a00",id:"\u9759\u6001\u65ad\u8a00",level:3}];function o(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",mermaid:"mermaid",p:"p",pre:"pre",...(0,t.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.header,{children:(0,r.jsx)(e.h1,{id:"\u9884\u5904\u7406\u5668",children:"\u9884\u5904\u7406\u5668"})}),"\n",(0,r.jsx)(e.p,{children:"\u9884\u5904\u7406\u5668\u5728\u7f16\u8bd1\u4e4b\u524d\u5904\u7406\u6e90\u4ee3\u7801\uff0c\u6267\u884c\u5b8f\u66ff\u6362\u3001\u6587\u4ef6\u5305\u542b\u548c\u6761\u4ef6\u7f16\u8bd1\u7b49\u64cd\u4f5c\u3002"}),"\n",(0,r.jsx)(e.mermaid,{value:"graph LR\n    A[Source Code .c] --\x3e|Preprocessor| B[Expanded Code .i]\n    B --\x3e|Compiler| C[Assembly .s]\n    C --\x3e|Assembler| D[Object File .o]\n    D --\x3e|Linker| E[Executable]\n\n    style A fill:#f9f,stroke:#333,stroke-width:2px\n    style B fill:#bbf,stroke:#333,stroke-width:2px\n    style E fill:#bfb,stroke:#333,stroke-width:2px"}),"\n",(0,r.jsx)(e.h2,{id:"\u5b8f\u5b9a\u4e49",children:"\u5b8f\u5b9a\u4e49"}),"\n",(0,r.jsx)(e.h3,{id:"\u7b80\u5355\u5b8f",children:"\u7b80\u5355\u5b8f"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-c",children:'#include <stdio.h>\n\n#define PI 3.14159\n#define MAX_SIZE 100\n#define MESSAGE "Hello, World!"\n\nint main(void) {\n    double area = PI * 5 * 5;\n    printf("\u5706\u9762\u79ef: %.2f\\n", area);\n    printf("%s\\n", MESSAGE);\n\n    int arr[MAX_SIZE];\n    printf("\u6570\u7ec4\u5927\u5c0f: %d\\n", MAX_SIZE);\n\n    return 0;\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u5e26\u53c2\u6570\u7684\u5b8f",children:"\u5e26\u53c2\u6570\u7684\u5b8f"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-c",children:'#include <stdio.h>\n\n#define MAX(a, b) ((a) > (b) ? (a) : (b))\n#define MIN(a, b) ((a) < (b) ? (a) : (b))\n#define SQUARE(x) ((x) * (x))\n#define ABS(x) ((x) < 0 ? -(x) : (x))\n\nint main(void) {\n    printf("MAX(3, 7) = %d\\n", MAX(3, 7));\n    printf("MIN(3, 7) = %d\\n", MIN(3, 7));\n    printf("SQUARE(5) = %d\\n", SQUARE(5));\n    printf("ABS(-10) = %d\\n", ABS(-10));\n\n    // \u6ce8\u610f\u62ec\u53f7\u7684\u91cd\u8981\u6027\n    printf("SQUARE(3+2) = %d\\n", SQUARE(3+2));  // 25\n\n    return 0;\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u591a\u884c\u5b8f",children:"\u591a\u884c\u5b8f"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-c",children:'#include <stdio.h>\n\n#define PRINT_ARRAY(arr, n) do { \\\n    printf("\u6570\u7ec4: "); \\\n    for (int i = 0; i < (n); i++) { \\\n        printf("%d ", (arr)[i]); \\\n    } \\\n    printf("\\n"); \\\n} while(0)\n\nint main(void) {\n    int arr[] = {1, 2, 3, 4, 5};\n    PRINT_ARRAY(arr, 5);\n    return 0;\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"\u6761\u4ef6\u7f16\u8bd1",children:"\u6761\u4ef6\u7f16\u8bd1"}),"\n",(0,r.jsx)(e.h3,{id:"ifdef--ifndef",children:"#ifdef / #ifndef"}),"\n",(0,r.jsx)(e.mermaid,{value:"graph TD\n    A{Symbol Defined?}\n    A --\x3e|Yes| B[Include #ifdef Block]\n    A --\x3e|No| C[Include #else/#elif Block]\n    B --\x3e D[Next Line]\n    C --\x3e D\n\n    style A fill:#ff9,stroke:#333,stroke-width:2px\n    style B fill:#bfb,stroke:#333,stroke-width:1px\n    style C fill:#fbb,stroke:#333,stroke-width:1px"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-c",children:'#include <stdio.h>\n\n#define DEBUG\n\nint main(void) {\n    #ifdef DEBUG\n        printf("\u8c03\u8bd5\u6a21\u5f0f\\n");\n    #endif\n\n    #ifndef RELEASE\n        printf("\u975e\u53d1\u5e03\u6a21\u5f0f\\n");\n    #endif\n\n    printf("\u7a0b\u5e8f\u8fd0\u884c\u4e2d...\\n");\n    return 0;\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"if--elif--else",children:"#if / #elif / #else"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-c",children:'#include <stdio.h>\n\n#define VERSION 2\n\nint main(void) {\n    #if VERSION == 1\n        printf("\u7248\u672c 1\\n");\n    #elif VERSION == 2\n        printf("\u7248\u672c 2\\n");\n    #else\n        printf("\u5176\u4ed6\u7248\u672c\\n");\n    #endif\n\n    #if defined(DEBUG) && DEBUG > 0\n        printf("\u8c03\u8bd5\u4fe1\u606f\\n");\n    #endif\n\n    return 0;\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u5e73\u53f0\u68c0\u6d4b",children:"\u5e73\u53f0\u68c0\u6d4b"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-c",children:'#include <stdio.h>\n\nint main(void) {\n    #if defined(_WIN32)\n        printf("Windows \u5e73\u53f0\\n");\n    #elif defined(__linux__)\n        printf("Linux \u5e73\u53f0\\n");\n    #elif defined(__APPLE__)\n        printf("macOS \u5e73\u53f0\\n");\n    #else\n        printf("\u5176\u4ed6\u5e73\u53f0\\n");\n    #endif\n\n    return 0;\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"\u6587\u4ef6\u5305\u542b",children:"\u6587\u4ef6\u5305\u542b"}),"\n",(0,r.jsx)(e.h3,{id:"\u5934\u6587\u4ef6\u4fdd\u62a4",children:"\u5934\u6587\u4ef6\u4fdd\u62a4"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-c",children:"// myheader.h\n#ifndef MYHEADER_H\n#define MYHEADER_H\n\n// \u5934\u6587\u4ef6\u5185\u5bb9\ntypedef struct {\n    int x, y;\n} Point;\n\nvoid printPoint(Point p);\n\n#endif // MYHEADER_H\n"})}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-c",children:"// \u73b0\u4ee3\u65b9\u5f0f\uff08\u90e8\u5206\u7f16\u8bd1\u5668\u652f\u6301\uff09\n#pragma once\n\ntypedef struct {\n    int x, y;\n} Point;\n"})}),"\n",(0,r.jsx)(e.h2,{id:"\u7279\u6b8a\u5b8f",children:"\u7279\u6b8a\u5b8f"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-c",children:'#include <stdio.h>\n\nint main(void) {\n    // \u9884\u5b9a\u4e49\u5b8f\n    printf("\u6587\u4ef6: %s\\n", __FILE__);\n    printf("\u884c\u53f7: %d\\n", __LINE__);\n    printf("\u65e5\u671f: %s\\n", __DATE__);\n    printf("\u65f6\u95f4: %s\\n", __TIME__);\n    printf("\u51fd\u6570: %s\\n", __func__);\n\n    return 0;\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"\u5b57\u7b26\u4e32\u5316\u548c\u8fde\u63a5",children:"\u5b57\u7b26\u4e32\u5316\u548c\u8fde\u63a5"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-c",children:'#include <stdio.h>\n\n// # \u5b57\u7b26\u4e32\u5316\n#define STRINGIFY(x) #x\n#define TO_STRING(x) STRINGIFY(x)\n\n// ## \u6807\u8bb0\u8fde\u63a5\n#define CONCAT(a, b) a##b\n#define VAR(n) var##n\n\nint main(void) {\n    printf("%s\\n", STRINGIFY(Hello));  // "Hello"\n\n    int var1 = 10, var2 = 20;\n    printf("var1 = %d\\n", VAR(1));  // var1\n    printf("var2 = %d\\n", VAR(2));  // var2\n\n    int CONCAT(my, Var) = 100;  // myVar\n    printf("myVar = %d\\n", myVar);\n\n    return 0;\n}\n'})}),"\n",(0,r.jsx)(e.h2,{id:"\u5b9e\u7528\u793a\u4f8b",children:"\u5b9e\u7528\u793a\u4f8b"}),"\n",(0,r.jsx)(e.h3,{id:"\u8c03\u8bd5\u5b8f",children:"\u8c03\u8bd5\u5b8f"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-c",children:'#include <stdio.h>\n\n#define DEBUG 1\n\n#if DEBUG\n    #define LOG(fmt, ...) \\\n        printf("[%s:%d] " fmt "\\n", __FILE__, __LINE__, ##__VA_ARGS__)\n#else\n    #define LOG(fmt, ...)\n#endif\n\n#define ASSERT(cond) do { \\\n    if (!(cond)) { \\\n        fprintf(stderr, "\u65ad\u8a00\u5931\u8d25: %s, \u6587\u4ef6: %s, \u884c: %d\\n", \\\n                #cond, __FILE__, __LINE__); \\\n    } \\\n} while(0)\n\nint main(void) {\n    LOG("\u7a0b\u5e8f\u542f\u52a8");\n\n    int x = 10;\n    LOG("x = %d", x);\n\n    ASSERT(x > 0);\n    ASSERT(x < 5);  // \u4f1a\u6253\u5370\u65ad\u8a00\u5931\u8d25\n\n    return 0;\n}\n'})}),"\n",(0,r.jsx)(e.h3,{id:"\u9759\u6001\u65ad\u8a00",children:"\u9759\u6001\u65ad\u8a00"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-c",children:'#include <stdio.h>\n\n// \u7f16\u8bd1\u65f6\u65ad\u8a00\n#define STATIC_ASSERT(cond, msg) \\\n    typedef char static_assertion_##msg[(cond) ? 1 : -1]\n\n// C11 \u6807\u51c6\u65b9\u5f0f\n// _Static_assert(sizeof(int) == 4, "int must be 4 bytes");\n\nSTATIC_ASSERT(sizeof(int) >= 4, int_size_check);\n\nint main(void) {\n    printf("\u7f16\u8bd1\u6210\u529f\\n");\n    return 0;\n}\n'})}),"\n",(0,r.jsx)(e.p,{children:"\u795d\u8d3a\uff01\u4f60\u5df2\u7ecf\u5b66\u4e60\u4e86 C \u8bed\u8a00\u7684\u6838\u5fc3\u5185\u5bb9\uff01"})]})}function f(n={}){const{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(o,{...n})}):o(n)}},48885:(n,e,i)=>{i.d(e,{R:()=>l,x:()=>s});var d=i(99378);const r={},t=d.createContext(r);function l(n){const e=d.useContext(t);return d.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:l(n.components),d.createElement(t.Provider,{value:e},n.children)}}}]);