"use strict";(globalThis.webpackChunkto_lib_github_io=globalThis.webpackChunkto_lib_github_io||[]).push([[58598],{48885:(n,i,e)=>{e.d(i,{R:()=>d,x:()=>o});var t=e(99378);const r={},s=t.createContext(r);function d(n){const i=t.useContext(s);return t.useMemo(function(){return"function"==typeof n?n(i):{...i,...n}},[i,n])}function o(n){let i;return i=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:d(n.components),t.createElement(s.Provider,{value:i},n.children)}},49602:(n,i,e)=>{e.r(i),e.d(i,{assets:()=>a,contentTitle:()=>o,default:()=>p,frontMatter:()=>d,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"c/bit-operations","title":"\u4f4d\u64cd\u4f5c","description":"\u4f4d\u64cd\u4f5c\u662f C \u8bed\u8a00\u7684\u91cd\u8981\u7279\u6027\uff0c\u7528\u4e8e\u5e95\u5c42\u7f16\u7a0b\u548c\u6027\u80fd\u4f18\u5316\u3002","source":"@site/docs/c/bit-operations.md","sourceDirName":"c","slug":"/c/bit-operations","permalink":"/docs/c/bit-operations","draft":false,"unlisted":false,"editUrl":"https://github.com/to-lib/to-lib.github.io/tree/main/docs/c/bit-operations.md","tags":[],"version":"current","sidebarPosition":13,"frontMatter":{"sidebar_position":13,"title":"\u4f4d\u64cd\u4f5c"},"sidebar":"c","previous":{"title":"\u9884\u5904\u7406\u5668","permalink":"/docs/c/preprocessor"},"next":{"title":"\u6570\u636e\u7ed3\u6784\u5b9e\u73b0","permalink":"/docs/c/data-structures"}}');var r=e(22714),s=e(48885);const d={sidebar_position:13,title:"\u4f4d\u64cd\u4f5c"},o="\u4f4d\u64cd\u4f5c",a={},c=[{value:"\u4f4d\u8fd0\u7b97\u7b26",id:"\u4f4d\u8fd0\u7b97\u7b26",level:2},{value:"\u5e38\u7528\u4f4d\u64cd\u4f5c",id:"\u5e38\u7528\u4f4d\u64cd\u4f5c",level:2},{value:"\u8bbe\u7f6e\u3001\u6e05\u9664\u3001\u5207\u6362\u4f4d",id:"\u8bbe\u7f6e\u6e05\u9664\u5207\u6362\u4f4d",level:3},{value:"\u5b9e\u7528\u6280\u5de7",id:"\u5b9e\u7528\u6280\u5de7",level:3},{value:"\u4f4d\u57df",id:"\u4f4d\u57df",level:2},{value:"\u5e94\u7528\u793a\u4f8b",id:"\u5e94\u7528\u793a\u4f8b",level:2},{value:"\u6743\u9650\u7ba1\u7406",id:"\u6743\u9650\u7ba1\u7406",level:3},{value:"\u4f4d\u56fe\uff08Bitmap\uff09",id:"\u4f4d\u56febitmap",level:3}];function l(n){const i={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,s.R)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.header,{children:(0,r.jsx)(i.h1,{id:"\u4f4d\u64cd\u4f5c",children:"\u4f4d\u64cd\u4f5c"})}),"\n",(0,r.jsx)(i.p,{children:"\u4f4d\u64cd\u4f5c\u662f C \u8bed\u8a00\u7684\u91cd\u8981\u7279\u6027\uff0c\u7528\u4e8e\u5e95\u5c42\u7f16\u7a0b\u548c\u6027\u80fd\u4f18\u5316\u3002"}),"\n",(0,r.jsx)(i.h2,{id:"\u4f4d\u8fd0\u7b97\u7b26",children:"\u4f4d\u8fd0\u7b97\u7b26"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-c",children:'#include <stdio.h>\n\nint main(void) {\n    unsigned char a = 0b11001010;  // 202\n    unsigned char b = 0b10110011;  // 179\n\n    printf("a      = %08b = %d\\n", a, a);\n    printf("b      = %08b = %d\\n", b, b);\n    printf("a & b  = %08b (\u6309\u4f4d\u4e0e)\\n", a & b);\n    printf("a | b  = %08b (\u6309\u4f4d\u6216)\\n", a | b);\n    printf("a ^ b  = %08b (\u6309\u4f4d\u5f02\u6216)\\n", a ^ b);\n    printf("~a     = %08b (\u6309\u4f4d\u53d6\u53cd)\\n", (unsigned char)~a);\n    printf("a << 2 = %08b (\u5de6\u79fb)\\n", a << 2);\n    printf("a >> 2 = %08b (\u53f3\u79fb)\\n", a >> 2);\n\n    return 0;\n}\n'})}),"\n",(0,r.jsx)(i.h2,{id:"\u5e38\u7528\u4f4d\u64cd\u4f5c",children:"\u5e38\u7528\u4f4d\u64cd\u4f5c"}),"\n",(0,r.jsx)(i.h3,{id:"\u8bbe\u7f6e\u6e05\u9664\u5207\u6362\u4f4d",children:"\u8bbe\u7f6e\u3001\u6e05\u9664\u3001\u5207\u6362\u4f4d"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-c",children:'#include <stdio.h>\n\n#define SET_BIT(n, pos)    ((n) | (1 << (pos)))\n#define CLEAR_BIT(n, pos)  ((n) & ~(1 << (pos)))\n#define TOGGLE_BIT(n, pos) ((n) ^ (1 << (pos)))\n#define CHECK_BIT(n, pos)  (((n) >> (pos)) & 1)\n\nvoid printBits(unsigned char n) {\n    for (int i = 7; i >= 0; i--) {\n        printf("%d", (n >> i) & 1);\n    }\n    printf("\\n");\n}\n\nint main(void) {\n    unsigned char n = 0b00001010;  // 10\n\n    printf("\u539f\u59cb\u503c:     "); printBits(n);\n\n    n = SET_BIT(n, 0);\n    printf("\u8bbe\u7f6e\u7b2c0\u4f4d:  "); printBits(n);\n\n    n = CLEAR_BIT(n, 1);\n    printf("\u6e05\u9664\u7b2c1\u4f4d:  "); printBits(n);\n\n    n = TOGGLE_BIT(n, 2);\n    printf("\u5207\u6362\u7b2c2\u4f4d:  "); printBits(n);\n\n    printf("\u7b2c3\u4f4d\u662f:    %d\\n", CHECK_BIT(n, 3));\n\n    return 0;\n}\n'})}),"\n",(0,r.jsx)(i.h3,{id:"\u5b9e\u7528\u6280\u5de7",children:"\u5b9e\u7528\u6280\u5de7"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-c",children:'#include <stdio.h>\n#include <stdbool.h>\n\n// \u5224\u65ad\u5947\u5076\nbool isOdd(int n) {\n    return n & 1;\n}\n\n// \u5224\u65ad2\u7684\u5e42\u6b21\nbool isPowerOf2(int n) {\n    return n > 0 && (n & (n - 1)) == 0;\n}\n\n// \u4ea4\u6362\u4e24\u6570\nvoid swap(int *a, int *b) {\n    *a ^= *b;\n    *b ^= *a;\n    *a ^= *b;\n}\n\n// \u8ba1\u7b971\u7684\u4e2a\u6570 (popcount)\nint countOnes(unsigned int n) {\n    int count = 0;\n    while (n) {\n        count += n & 1;\n        n >>= 1;\n    }\n    return count;\n}\n\n// \u83b7\u53d6\u6700\u4f4e\u6709\u6548\u4f4d\nint lowestBit(int n) {\n    return n & (-n);\n}\n\nint main(void) {\n    printf("7 \u662f\u5947\u6570: %s\\n", isOdd(7) ? "\u662f" : "\u5426");\n    printf("8 \u662f2\u7684\u5e42: %s\\n", isPowerOf2(8) ? "\u662f" : "\u5426");\n    printf("13 \u7684\u4e8c\u8fdb\u52361\u7684\u4e2a\u6570: %d\\n", countOnes(13));\n\n    int a = 5, b = 3;\n    swap(&a, &b);\n    printf("\u4ea4\u6362\u540e: a=%d, b=%d\\n", a, b);\n\n    return 0;\n}\n'})}),"\n",(0,r.jsx)(i.h2,{id:"\u4f4d\u57df",children:"\u4f4d\u57df"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-c",children:'#include <stdio.h>\n\n// IP \u6570\u636e\u5305\u6807\u5fd7\uff08\u7b80\u5316\uff09\nstruct IPFlags {\n    unsigned int reserved : 1;\n    unsigned int dontFragment : 1;\n    unsigned int moreFragments : 1;\n    unsigned int fragmentOffset : 13;\n};\n\n// RGB \u989c\u8272\u538b\u7f29\nstruct Color {\n    unsigned int r : 8;\n    unsigned int g : 8;\n    unsigned int b : 8;\n    unsigned int a : 8;\n};\n\nint main(void) {\n    struct IPFlags flags = {0, 1, 0, 0};\n    printf("Don\'t Fragment: %d\\n", flags.dontFragment);\n\n    struct Color red = {255, 0, 0, 255};\n    printf("Color: RGBA(%d, %d, %d, %d)\\n",\n           red.r, red.g, red.b, red.a);\n    printf("sizeof(Color) = %zu\\n", sizeof(struct Color));\n\n    return 0;\n}\n'})}),"\n",(0,r.jsx)(i.h2,{id:"\u5e94\u7528\u793a\u4f8b",children:"\u5e94\u7528\u793a\u4f8b"}),"\n",(0,r.jsx)(i.h3,{id:"\u6743\u9650\u7ba1\u7406",children:"\u6743\u9650\u7ba1\u7406"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-c",children:'#include <stdio.h>\n\n#define PERM_READ    (1 << 0)  // 1\n#define PERM_WRITE   (1 << 1)  // 2\n#define PERM_EXECUTE (1 << 2)  // 4\n#define PERM_ALL     (PERM_READ | PERM_WRITE | PERM_EXECUTE)\n\nvoid printPermissions(int perm) {\n    printf("\u6743\u9650: ");\n    if (perm & PERM_READ) printf("\u8bfb ");\n    if (perm & PERM_WRITE) printf("\u5199 ");\n    if (perm & PERM_EXECUTE) printf("\u6267\u884c ");\n    printf("\\n");\n}\n\nint main(void) {\n    int userPerm = PERM_READ | PERM_WRITE;\n    printPermissions(userPerm);\n\n    // \u6dfb\u52a0\u6743\u9650\n    userPerm |= PERM_EXECUTE;\n    printPermissions(userPerm);\n\n    // \u79fb\u9664\u6743\u9650\n    userPerm &= ~PERM_WRITE;\n    printPermissions(userPerm);\n\n    // \u68c0\u67e5\u6743\u9650\n    if (userPerm & PERM_EXECUTE) {\n        printf("\u6709\u6267\u884c\u6743\u9650\\n");\n    }\n\n    return 0;\n}\n'})}),"\n",(0,r.jsx)(i.h3,{id:"\u4f4d\u56febitmap",children:"\u4f4d\u56fe\uff08Bitmap\uff09"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-c",children:'#include <stdio.h>\n#include <string.h>\n\n#define BITMAP_SIZE 1000\n\nunsigned char bitmap[BITMAP_SIZE / 8 + 1];\n\nvoid setBit(int n) {\n    bitmap[n / 8] |= (1 << (n % 8));\n}\n\nvoid clearBit(int n) {\n    bitmap[n / 8] &= ~(1 << (n % 8));\n}\n\nint getBit(int n) {\n    return (bitmap[n / 8] >> (n % 8)) & 1;\n}\n\nint main(void) {\n    memset(bitmap, 0, sizeof(bitmap));\n\n    setBit(42);\n    setBit(100);\n    setBit(500);\n\n    printf("42 is set: %d\\n", getBit(42));\n    printf("43 is set: %d\\n", getBit(43));\n    printf("500 is set: %d\\n", getBit(500));\n\n    clearBit(42);\n    printf("42 after clear: %d\\n", getBit(42));\n\n    return 0;\n}\n'})}),"\n",(0,r.jsx)(i.p,{children:"\u638c\u63e1\u4f4d\u64cd\u4f5c\u540e\uff0c\u5c31\u53ef\u4ee5\u7ee7\u7eed\u5b66\u4e60\u9879\u76ee\u5b9e\u6218\u4e86\uff01"})]})}function p(n={}){const{wrapper:i}={...(0,s.R)(),...n.components};return i?(0,r.jsx)(i,{...n,children:(0,r.jsx)(l,{...n})}):l(n)}}}]);